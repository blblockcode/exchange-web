function E1(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function C1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rf={exports:{}},Ha={};var kg;function M1(){if(kg)return Ha;kg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:n,key:u,ref:a!==void 0?a:null,props:l}}return Ha.Fragment=t,Ha.jsx=e,Ha.jsxs=e,Ha}var zg;function T1(){return zg||(zg=1,rf.exports=M1()),rf.exports}var E=T1(),sf={exports:{}},jt={};var jg;function A1(){if(jg)return jt;jg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function C(O,L,F){this.props=O,this.context=L,this.refs=_,this.updater=F||b}C.prototype.isReactComponent={},C.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function A(){}A.prototype=C.prototype;function T(O,L,F){this.props=O,this.context=L,this.refs=_,this.updater=F||b}var D=T.prototype=new A;D.constructor=T,S(D,C.prototype),D.isPureReactComponent=!0;var M=Array.isArray;function j(){}var N={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function B(O,L,F){var q=F.ref;return{$$typeof:r,type:O,key:L,ref:q!==void 0?q:null,props:F}}function I(O,L){return B(O.type,L,O.props)}function W(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function Z(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(F){return L[F]})}var it=/\/+/g;function X(O,L){return typeof O=="object"&&O!==null&&O.key!=null?Z(""+O.key):L.toString(36)}function ot(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(j,j):(O.status="pending",O.then(function(L){O.status==="pending"&&(O.status="fulfilled",O.value=L)},function(L){O.status==="pending"&&(O.status="rejected",O.reason=L)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function z(O,L,F,q,$){var J=typeof O;(J==="undefined"||J==="boolean")&&(O=null);var tt=!1;if(O===null)tt=!0;else switch(J){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(O.$$typeof){case r:case t:tt=!0;break;case v:return tt=O._init,z(tt(O._payload),L,F,q,$)}}if(tt)return $=$(O),tt=q===""?"."+X(O,0):q,M($)?(F="",tt!=null&&(F=tt.replace(it,"$&/")+"/"),z($,L,F,"",function(ut){return ut})):$!=null&&(W($)&&($=I($,F+($.key==null||O&&O.key===$.key?"":(""+$.key).replace(it,"$&/")+"/")+tt)),L.push($)),1;tt=0;var vt=q===""?".":q+":";if(M(O))for(var pt=0;pt<O.length;pt++)q=O[pt],J=vt+X(q,pt),tt+=z(q,L,F,J,$);else if(pt=x(O),typeof pt=="function")for(O=pt.call(O),pt=0;!(q=O.next()).done;)q=q.value,J=vt+X(q,pt++),tt+=z(q,L,F,J,$);else if(J==="object"){if(typeof O.then=="function")return z(ot(O),L,F,q,$);throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return tt}function U(O,L,F){if(O==null)return O;var q=[],$=0;return z(O,q,"","",function(J){return L.call(F,J,$++)}),q}function st(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(F){(O._status===0||O._status===-1)&&(O._status=1,O._result=F)},function(F){(O._status===0||O._status===-1)&&(O._status=2,O._result=F)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var ft=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},rt={map:U,forEach:function(O,L,F){U(O,function(){L.apply(this,arguments)},F)},count:function(O){var L=0;return U(O,function(){L++}),L},toArray:function(O){return U(O,function(L){return L})||[]},only:function(O){if(!W(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return jt.Activity=m,jt.Children=rt,jt.Component=C,jt.Fragment=e,jt.Profiler=a,jt.PureComponent=T,jt.StrictMode=n,jt.Suspense=f,jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,jt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},jt.cache=function(O){return function(){return O.apply(null,arguments)}},jt.cacheSignal=function(){return null},jt.cloneElement=function(O,L,F){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var q=S({},O.props),$=O.key;if(L!=null)for(J in L.key!==void 0&&($=""+L.key),L)!V.call(L,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&L.ref===void 0||(q[J]=L[J]);var J=arguments.length-2;if(J===1)q.children=F;else if(1<J){for(var tt=Array(J),vt=0;vt<J;vt++)tt[vt]=arguments[vt+2];q.children=tt}return B(O.type,$,q)},jt.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},jt.createElement=function(O,L,F){var q,$={},J=null;if(L!=null)for(q in L.key!==void 0&&(J=""+L.key),L)V.call(L,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&($[q]=L[q]);var tt=arguments.length-2;if(tt===1)$.children=F;else if(1<tt){for(var vt=Array(tt),pt=0;pt<tt;pt++)vt[pt]=arguments[pt+2];$.children=vt}if(O&&O.defaultProps)for(q in tt=O.defaultProps,tt)$[q]===void 0&&($[q]=tt[q]);return B(O,J,$)},jt.createRef=function(){return{current:null}},jt.forwardRef=function(O){return{$$typeof:h,render:O}},jt.isValidElement=W,jt.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:st}},jt.memo=function(O,L){return{$$typeof:d,type:O,compare:L===void 0?null:L}},jt.startTransition=function(O){var L=N.T,F={};N.T=F;try{var q=O(),$=N.S;$!==null&&$(F,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(j,ft)}catch(J){ft(J)}finally{L!==null&&F.types!==null&&(L.types=F.types),N.T=L}},jt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},jt.use=function(O){return N.H.use(O)},jt.useActionState=function(O,L,F){return N.H.useActionState(O,L,F)},jt.useCallback=function(O,L){return N.H.useCallback(O,L)},jt.useContext=function(O){return N.H.useContext(O)},jt.useDebugValue=function(){},jt.useDeferredValue=function(O,L){return N.H.useDeferredValue(O,L)},jt.useEffect=function(O,L){return N.H.useEffect(O,L)},jt.useEffectEvent=function(O){return N.H.useEffectEvent(O)},jt.useId=function(){return N.H.useId()},jt.useImperativeHandle=function(O,L,F){return N.H.useImperativeHandle(O,L,F)},jt.useInsertionEffect=function(O,L){return N.H.useInsertionEffect(O,L)},jt.useLayoutEffect=function(O,L){return N.H.useLayoutEffect(O,L)},jt.useMemo=function(O,L){return N.H.useMemo(O,L)},jt.useOptimistic=function(O,L){return N.H.useOptimistic(O,L)},jt.useReducer=function(O,L,F){return N.H.useReducer(O,L,F)},jt.useRef=function(O){return N.H.useRef(O)},jt.useState=function(O){return N.H.useState(O)},jt.useSyncExternalStore=function(O,L,F){return N.H.useSyncExternalStore(O,L,F)},jt.useTransition=function(){return N.H.useTransition()},jt.version="19.2.3",jt}var Lg;function wu(){return Lg||(Lg=1,sf.exports=A1()),sf.exports}var k=wu();const kt=C1(k),Bg=E1({__proto__:null,default:kt},[k]);var af={exports:{}},Ya={},lf={exports:{}},of={};var Fg;function R1(){return Fg||(Fg=1,(function(r){function t(z,U){var st=z.length;z.push(U);t:for(;0<st;){var ft=st-1>>>1,rt=z[ft];if(0<a(rt,U))z[ft]=U,z[st]=rt,st=ft;else break t}}function e(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var U=z[0],st=z.pop();if(st!==U){z[0]=st;t:for(var ft=0,rt=z.length,O=rt>>>1;ft<O;){var L=2*(ft+1)-1,F=z[L],q=L+1,$=z[q];if(0>a(F,st))q<rt&&0>a($,F)?(z[ft]=$,z[q]=st,ft=q):(z[ft]=F,z[L]=st,ft=L);else if(q<rt&&0>a($,st))z[ft]=$,z[q]=st,ft=q;else break t}}return U}function a(z,U){var st=z.sortIndex-U.sortIndex;return st!==0?st:z.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var f=[],d=[],v=1,m=null,y=3,x=!1,b=!1,S=!1,_=!1,C=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var U=e(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=z)n(d),U.sortIndex=U.expirationTime,t(f,U);else break;U=e(d)}}function M(z){if(S=!1,D(z),!b)if(e(f)!==null)b=!0,j||(j=!0,Z());else{var U=e(d);U!==null&&ot(M,U.startTime-z)}}var j=!1,N=-1,V=5,B=-1;function I(){return _?!0:!(r.unstable_now()-B<V)}function W(){if(_=!1,j){var z=r.unstable_now();B=z;var U=!0;try{t:{b=!1,S&&(S=!1,A(N),N=-1),x=!0;var st=y;try{e:{for(D(z),m=e(f);m!==null&&!(m.expirationTime>z&&I());){var ft=m.callback;if(typeof ft=="function"){m.callback=null,y=m.priorityLevel;var rt=ft(m.expirationTime<=z);if(z=r.unstable_now(),typeof rt=="function"){m.callback=rt,D(z),U=!0;break e}m===e(f)&&n(f),D(z)}else n(f);m=e(f)}if(m!==null)U=!0;else{var O=e(d);O!==null&&ot(M,O.startTime-z),U=!1}}break t}finally{m=null,y=st,x=!1}U=void 0}}finally{U?Z():j=!1}}}var Z;if(typeof T=="function")Z=function(){T(W)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,X=it.port2;it.port1.onmessage=W,Z=function(){X.postMessage(null)}}else Z=function(){C(W,0)};function ot(z,U){N=C(function(){z(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(z){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var st=y;y=U;try{return z()}finally{y=st}},r.unstable_requestPaint=function(){_=!0},r.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var st=y;y=z;try{return U()}finally{y=st}},r.unstable_scheduleCallback=function(z,U,st){var ft=r.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?ft+st:ft):st=ft,z){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=st+rt,z={id:v++,callback:U,priorityLevel:z,startTime:st,expirationTime:rt,sortIndex:-1},st>ft?(z.sortIndex=st,t(d,z),e(f)===null&&z===e(d)&&(S?(A(N),N=-1):S=!0,ot(M,st-ft))):(z.sortIndex=rt,t(f,z),b||x||(b=!0,j||(j=!0,Z()))),z},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(z){var U=y;return function(){var st=y;y=U;try{return z.apply(this,arguments)}finally{y=st}}}})(of)),of}var Pg;function D1(){return Pg||(Pg=1,lf.exports=R1()),lf.exports}var uf={exports:{}},Ye={};var Ig;function N1(){if(Ig)return Ye;Ig=1;var r=wu();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,d,v){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:f,containerInfo:d,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ye.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ye.createPortal=function(f,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return l(f,d,null,v)},Ye.flushSync=function(f){var d=u.T,v=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=d,n.p=v,n.d.f()}},Ye.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(f,d))},Ye.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Ye.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var v=d.as,m=h(v,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;v==="style"?n.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):v==="script"&&n.d.X(f,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ye.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var v=h(d.as,d.crossOrigin);n.d.M(f,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(f)},Ye.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var v=d.as,m=h(v,d.crossOrigin);n.d.L(f,v,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ye.preloadModule=function(f,d){if(typeof f=="string")if(d){var v=h(d.as,d.crossOrigin);n.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(f)},Ye.requestFormReset=function(f){n.d.r(f)},Ye.unstable_batchedUpdates=function(f,d){return f(d)},Ye.useFormState=function(f,d,v){return u.H.useFormState(f,d,v)},Ye.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ye.version="19.2.3",Ye}var Vg;function tb(){if(Vg)return uf.exports;Vg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),uf.exports=N1(),uf.exports}var Ug;function O1(){if(Ug)return Ya;Ug=1;var r=D1(),t=wu(),e=tb();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(l(i)!==i)throw Error(n(188))}function d(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(n(188));return s!==i?null:i}for(var o=i,c=s;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){o=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return f(p),i;if(g===c)return f(p),s;g=g.sibling}throw Error(n(188))}if(o.return!==c.return)o=p,c=g;else{for(var w=!1,R=p.child;R;){if(R===o){w=!0,o=p,c=g;break}if(R===c){w=!0,c=p,o=g;break}R=R.sibling}if(!w){for(R=g.child;R;){if(R===o){w=!0,o=g,c=p;break}if(R===c){w=!0,c=g,o=p;break}R=R.sibling}if(!w)throw Error(n(189))}}if(o.alternate!==c)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var it=Symbol.for("react.client.reference");function X(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===it?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case C:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case j:return"SuspenseList";case B:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case T:return i.displayName||"Context";case A:return(i._context.displayName||"Context")+".Consumer";case D:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return s=i.displayName||null,s!==null?s:X(i.type)||"Memo";case V:s=i._payload,i=i._init;try{return X(i(s))}catch{}}return null}var ot=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},ft=[],rt=-1;function O(i){return{current:i}}function L(i){0>rt||(i.current=ft[rt],ft[rt]=null,rt--)}function F(i,s){rt++,ft[rt]=i.current,i.current=s}var q=O(null),$=O(null),J=O(null),tt=O(null);function vt(i,s){switch(F(J,s),F($,i),F(q,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?ig(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=ig(s),i=ng(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}L(q),F(q,i)}function pt(){L(q),L($),L(J)}function ut(i){i.memoizedState!==null&&F(tt,i);var s=q.current,o=ng(s,i.type);s!==o&&(F($,i),F(q,o))}function dt(i){$.current===i&&(L(q),L($)),tt.current===i&&(L(tt),Pa._currentValue=st)}var St,yt;function _t(i){if(St===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);St=s&&s[1]||"",yt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+St+i+yt}var xt=!1;function Mt(i,s){if(!i||xt)return"";xt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(nt){var Q=nt}Reflect.construct(i,[],ht)}else{try{ht.call()}catch(nt){Q=nt}i.call(ht.prototype)}}else{try{throw Error()}catch(nt){Q=nt}(ht=i())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(nt){if(nt&&Q&&typeof nt.stack=="string")return[nt.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),w=g[0],R=g[1];if(w&&R){var P=w.split(`
`),K=R.split(`
`);for(p=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(c===P.length||p===K.length)for(c=P.length-1,p=K.length-1;1<=c&&0<=p&&P[c]!==K[p];)p--;for(;1<=c&&0<=p;c--,p--)if(P[c]!==K[p]){if(c!==1||p!==1)do if(c--,p--,0>p||P[c]!==K[p]){var lt=`
`+P[c].replace(" at new "," at ");return i.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",i.displayName)),lt}while(1<=c&&0<=p);break}}}finally{xt=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?_t(o):""}function zt(i,s){switch(i.tag){case 26:case 27:case 5:return _t(i.type);case 16:return _t("Lazy");case 13:return i.child!==s&&s!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return Mt(i.type,!1);case 11:return Mt(i.type.render,!1);case 1:return Mt(i.type,!0);case 31:return _t("Activity");default:return""}}function gt(i){try{var s="",o=null;do s+=zt(i,o),o=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,wt=r.unstable_scheduleCallback,Nt=r.unstable_cancelCallback,Lt=r.unstable_shouldYield,ae=r.unstable_requestPaint,Qt=r.unstable_now,me=r.unstable_getCurrentPriorityLevel,Xe=r.unstable_ImmediatePriority,ce=r.unstable_UserBlockingPriority,ge=r.unstable_NormalPriority,He=r.unstable_LowPriority,Ge=r.unstable_IdlePriority,tn=r.log,qr=r.unstable_setDisableYieldValue,Ze=null,Ke=null;function De(i){if(typeof tn=="function"&&qr(i),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Ze,i)}catch{}}var he=Math.clz32?Math.clz32:ji,Je=Math.log,Si=Math.LN2;function ji(i){return i>>>=0,i===0?32:31-(Je(i)/Si|0)|0}var en=256,Xr=262144,wl=4194304;function cr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function El(i,s,o){var c=i.pendingLanes;if(c===0)return 0;var p=0,g=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var R=c&134217727;return R!==0?(c=R&~g,c!==0?p=cr(c):(w&=R,w!==0?p=cr(w):o||(o=R&~i,o!==0&&(p=cr(o))))):(R=c&~g,R!==0?p=cr(R):w!==0?p=cr(w):o||(o=c&~i,o!==0&&(p=cr(o)))),p===0?0:s!==0&&s!==p&&(s&g)===0&&(g=p&-p,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:p}function Zs(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function hS(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bd(){var i=wl;return wl<<=1,(wl&62914560)===0&&(wl=4194304),i}function Wu(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Js(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function fS(i,s,o,c,p,g){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var R=i.entanglements,P=i.expirationTimes,K=i.hiddenUpdates;for(o=w&~o;0<o;){var lt=31-he(o),ht=1<<lt;R[lt]=0,P[lt]=-1;var Q=K[lt];if(Q!==null)for(K[lt]=null,lt=0;lt<Q.length;lt++){var nt=Q[lt];nt!==null&&(nt.lane&=-536870913)}o&=~ht}c!==0&&Fd(i,c,0),g!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=g&~(w&~s))}function Fd(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-he(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|o&261930}function Pd(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var c=31-he(o),p=1<<c;p&s|i[c]&s&&(i[c]|=s),o&=~p}}function Id(i,s){var o=s&-s;return o=(o&42)!==0?1:qu(o),(o&(i.suspendedLanes|s))!==0?0:o}function qu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Xu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Vd(){var i=U.p;return i!==0?i:(i=window.event,i===void 0?32:Mg(i.type))}function Ud(i,s){var o=U.p;try{return U.p=i,s()}finally{U.p=o}}var Nn=Math.random().toString(36).slice(2),je="__reactFiber$"+Nn,ti="__reactProps$"+Nn,Gr="__reactContainer$"+Nn,Gu="__reactEvents$"+Nn,dS="__reactListeners$"+Nn,vS="__reactHandles$"+Nn,Hd="__reactResources$"+Nn,ta="__reactMarker$"+Nn;function Ku(i){delete i[je],delete i[ti],delete i[Gu],delete i[dS],delete i[vS]}function Kr(i){var s=i[je];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Gr]||o[je]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=cg(i);i!==null;){if(o=i[je])return o;i=cg(i)}return s}i=o,o=i.parentNode}return null}function Qr(i){if(i=i[je]||i[Gr]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ea(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function $r(i){var s=i[Hd];return s||(s=i[Hd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ne(i){i[ta]=!0}var Yd=new Set,Wd={};function hr(i,s){Zr(i,s),Zr(i+"Capture",s)}function Zr(i,s){for(Wd[i]=s,i=0;i<s.length;i++)Yd.add(s[i])}var pS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qd={},Xd={};function mS(i){return At.call(Xd,i)?!0:At.call(qd,i)?!1:pS.test(i)?Xd[i]=!0:(qd[i]=!0,!1)}function Cl(i,s,o){if(mS(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function Ml(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function nn(i,s,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+c)}}function _i(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Gd(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gS(i,s,o){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,g=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(w){o=""+w,g.call(this,w)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Qu(i){if(!i._valueTracker){var s=Gd(i)?"checked":"value";i._valueTracker=gS(i,s,""+i[s])}}function Kd(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return i&&(c=Gd(i)?i.checked?"true":"false":i.value),i=c,i!==o?(s.setValue(i),!0):!1}function Tl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var yS=/[\n"\\]/g;function wi(i){return i.replace(yS,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function $u(i,s,o,c,p,g,w,R){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+_i(s)):i.value!==""+_i(s)&&(i.value=""+_i(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Zu(i,w,_i(s)):o!=null?Zu(i,w,_i(o)):c!=null&&i.removeAttribute("value"),p==null&&g!=null&&(i.defaultChecked=!!g),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+_i(R):i.removeAttribute("name")}function Qd(i,s,o,c,p,g,w,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Qu(i);return}o=o!=null?""+_i(o):"",s=s!=null?""+_i(s):o,R||s===i.value||(i.value=s),i.defaultValue=s}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),Qu(i)}function Zu(i,s,o){s==="number"&&Tl(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Jr(i,s,o,c){if(i=i.options,s){s={};for(var p=0;p<o.length;p++)s["$"+o[p]]=!0;for(o=0;o<i.length;o++)p=s.hasOwnProperty("$"+i[o].value),i[o].selected!==p&&(i[o].selected=p),p&&c&&(i[o].defaultSelected=!0)}else{for(o=""+_i(o),s=null,p=0;p<i.length;p++){if(i[p].value===o){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function $d(i,s,o){if(s!=null&&(s=""+_i(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+_i(o):""}function Zd(i,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(n(92));if(ot(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=_i(s),i.defaultValue=o,c=i.textContent,c===o&&c!==""&&c!==null&&(i.value=c),Qu(i)}function ts(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var bS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jd(i,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,o):typeof o!="number"||o===0||bS.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function tv(i,s,o){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in s)c=s[p],s.hasOwnProperty(p)&&o[p]!==c&&Jd(i,p,c)}else for(var g in s)s.hasOwnProperty(g)&&Jd(i,g,s[g])}function Ju(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),SS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(i){return SS.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function rn(){}var tc=null;function ec(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var es=null,is=null;function ev(i){var s=Qr(i);if(s&&(i=s.stateNode)){var o=i[ti]||null;t:switch(i=s.stateNode,s.type){case"input":if($u(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+wi(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==i&&c.form===i.form){var p=c[ti]||null;if(!p)throw Error(n(90));$u(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===i.form&&Kd(c)}break t;case"textarea":$d(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Jr(i,!!o.multiple,s,!1)}}}var ic=!1;function iv(i,s,o){if(ic)return i(s,o);ic=!0;try{var c=i(s);return c}finally{if(ic=!1,(es!==null||is!==null)&&(mo(),es&&(s=es,i=is,is=es=null,ev(s),i)))for(s=0;s<i.length;s++)ev(i[s])}}function ia(i,s){var o=i.stateNode;if(o===null)return null;var c=o[ti]||null;if(c===null)return null;o=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(n(231,s,typeof o));return o}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nc=!1;if(sn)try{var na={};Object.defineProperty(na,"passive",{get:function(){nc=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{nc=!1}var On=null,rc=null,Rl=null;function nv(){if(Rl)return Rl;var i,s=rc,o=s.length,c,p="value"in On?On.value:On.textContent,g=p.length;for(i=0;i<o&&s[i]===p[i];i++);var w=o-i;for(c=1;c<=w&&s[o-c]===p[g-c];c++);return Rl=p.slice(i,1<c?1-c:void 0)}function Dl(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Nl(){return!0}function rv(){return!1}function ei(i){function s(o,c,p,g,w){this._reactName=o,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(o=i[R],this[R]=o?o(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Nl:rv,this.isPropagationStopped=rv,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),s}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=ei(fr),ra=m({},fr,{view:0,detail:0}),_S=ei(ra),sc,ac,sa,kl=m({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==sa&&(sa&&i.type==="mousemove"?(sc=i.screenX-sa.screenX,ac=i.screenY-sa.screenY):ac=sc=0,sa=i),sc)},movementY:function(i){return"movementY"in i?i.movementY:ac}}),sv=ei(kl),wS=m({},kl,{dataTransfer:0}),ES=ei(wS),CS=m({},ra,{relatedTarget:0}),lc=ei(CS),MS=m({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),TS=ei(MS),AS=m({},fr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),RS=ei(AS),DS=m({},fr,{data:0}),av=ei(DS),NS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zS(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=kS[i])?!!s[i]:!1}function oc(){return zS}var jS=m({},ra,{key:function(i){if(i.key){var s=NS[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Dl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?OS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(i){return i.type==="keypress"?Dl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Dl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),LS=ei(jS),BS=m({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lv=ei(BS),FS=m({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),PS=ei(FS),IS=m({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),VS=ei(IS),US=m({},kl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),HS=ei(US),YS=m({},fr,{newState:0,oldState:0}),WS=ei(YS),qS=[9,13,27,32],uc=sn&&"CompositionEvent"in window,aa=null;sn&&"documentMode"in document&&(aa=document.documentMode);var XS=sn&&"TextEvent"in window&&!aa,ov=sn&&(!uc||aa&&8<aa&&11>=aa),uv=" ",cv=!1;function hv(i,s){switch(i){case"keyup":return qS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ns=!1;function GS(i,s){switch(i){case"compositionend":return fv(s);case"keypress":return s.which!==32?null:(cv=!0,uv);case"textInput":return i=s.data,i===uv&&cv?null:i;default:return null}}function KS(i,s){if(ns)return i==="compositionend"||!uc&&hv(i,s)?(i=nv(),Rl=rc=On=null,ns=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ov&&s.locale!=="ko"?null:s.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dv(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!QS[i.type]:s==="textarea"}function vv(i,s,o,c){es?is?is.push(c):is=[c]:es=c,s=wo(s,"onChange"),0<s.length&&(o=new Ol("onChange","change",null,o,c),i.push({event:o,listeners:s}))}var la=null,oa=null;function $S(i){Qm(i,0)}function zl(i){var s=ea(i);if(Kd(s))return i}function pv(i,s){if(i==="change")return s}var mv=!1;if(sn){var cc;if(sn){var hc="oninput"in document;if(!hc){var gv=document.createElement("div");gv.setAttribute("oninput","return;"),hc=typeof gv.oninput=="function"}cc=hc}else cc=!1;mv=cc&&(!document.documentMode||9<document.documentMode)}function yv(){la&&(la.detachEvent("onpropertychange",bv),oa=la=null)}function bv(i){if(i.propertyName==="value"&&zl(oa)){var s=[];vv(s,oa,i,ec(i)),iv($S,s)}}function ZS(i,s,o){i==="focusin"?(yv(),la=s,oa=o,la.attachEvent("onpropertychange",bv)):i==="focusout"&&yv()}function JS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zl(oa)}function t_(i,s){if(i==="click")return zl(s)}function e_(i,s){if(i==="input"||i==="change")return zl(s)}function i_(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var fi=typeof Object.is=="function"?Object.is:i_;function ua(i,s){if(fi(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var p=o[c];if(!At.call(s,p)||!fi(i[p],s[p]))return!1}return!0}function xv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sv(i,s){var o=xv(i);i=0;for(var c;o;){if(o.nodeType===3){if(c=i+o.textContent.length,i<=s&&c>=s)return{node:o,offset:s-i};i=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=xv(o)}}function _v(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?_v(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function wv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Tl(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Tl(i.document)}return s}function fc(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var n_=sn&&"documentMode"in document&&11>=document.documentMode,rs=null,dc=null,ca=null,vc=!1;function Ev(i,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vc||rs==null||rs!==Tl(c)||(c=rs,"selectionStart"in c&&fc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ca&&ua(ca,c)||(ca=c,c=wo(dc,"onSelect"),0<c.length&&(s=new Ol("onSelect","select",null,s,o),i.push({event:s,listeners:c}),s.target=rs)))}function dr(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var ss={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},pc={},Cv={};sn&&(Cv=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function vr(i){if(pc[i])return pc[i];if(!ss[i])return i;var s=ss[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in Cv)return pc[i]=s[o];return i}var Mv=vr("animationend"),Tv=vr("animationiteration"),Av=vr("animationstart"),r_=vr("transitionrun"),s_=vr("transitionstart"),a_=vr("transitioncancel"),Rv=vr("transitionend"),Dv=new Map,mc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mc.push("scrollEnd");function Li(i,s){Dv.set(i,s),hr(s,[i])}var jl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ei=[],as=0,gc=0;function Ll(){for(var i=as,s=gc=as=0;s<i;){var o=Ei[s];Ei[s++]=null;var c=Ei[s];Ei[s++]=null;var p=Ei[s];Ei[s++]=null;var g=Ei[s];if(Ei[s++]=null,c!==null&&p!==null){var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}g!==0&&Nv(o,p,g)}}function Bl(i,s,o,c){Ei[as++]=i,Ei[as++]=s,Ei[as++]=o,Ei[as++]=c,gc|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function yc(i,s,o,c){return Bl(i,s,o,c),Fl(i)}function pr(i,s){return Bl(i,null,null,s),Fl(i)}function Nv(i,s,o){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o);for(var p=!1,g=i.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(p=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,p&&s!==null&&(p=31-he(o),i=g.hiddenUpdates,c=i[p],c===null?i[p]=[s]:c.push(s),s.lane=o|536870912),g):null}function Fl(i){if(50<Oa)throw Oa=0,Th=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ls={};function l_(i,s,o,c){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(i,s,o,c){return new l_(i,s,o,c)}function bc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function an(i,s){var o=i.alternate;return o===null?(o=di(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function Ov(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Pl(i,s,o,c,p,g){var w=0;if(c=i,typeof i=="function")bc(i)&&(w=1);else if(typeof i=="string")w=f1(i,o,q.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case B:return i=di(31,o,s,p),i.elementType=B,i.lanes=g,i;case S:return mr(o.children,p,g,s);case _:w=8,p|=24;break;case C:return i=di(12,o,s,p|2),i.elementType=C,i.lanes=g,i;case M:return i=di(13,o,s,p),i.elementType=M,i.lanes=g,i;case j:return i=di(19,o,s,p),i.elementType=j,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:w=10;break t;case A:w=9;break t;case D:w=11;break t;case N:w=14;break t;case V:w=16,c=null;break t}w=29,o=Error(n(130,i===null?"null":typeof i,"")),c=null}return s=di(w,o,s,p),s.elementType=i,s.type=c,s.lanes=g,s}function mr(i,s,o,c){return i=di(7,i,c,s),i.lanes=o,i}function xc(i,s,o){return i=di(6,i,null,s),i.lanes=o,i}function kv(i){var s=di(18,null,null,0);return s.stateNode=i,s}function Sc(i,s,o){return s=di(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var zv=new WeakMap;function Ci(i,s){if(typeof i=="object"&&i!==null){var o=zv.get(i);return o!==void 0?o:(s={value:i,source:s,stack:gt(s)},zv.set(i,s),s)}return{value:i,source:s,stack:gt(s)}}var os=[],us=0,Il=null,ha=0,Mi=[],Ti=0,kn=null,Hi=1,Yi="";function ln(i,s){os[us++]=ha,os[us++]=Il,Il=i,ha=s}function jv(i,s,o){Mi[Ti++]=Hi,Mi[Ti++]=Yi,Mi[Ti++]=kn,kn=i;var c=Hi;i=Yi;var p=32-he(c)-1;c&=~(1<<p),o+=1;var g=32-he(s)+p;if(30<g){var w=p-p%5;g=(c&(1<<w)-1).toString(32),c>>=w,p-=w,Hi=1<<32-he(s)+p|o<<p|c,Yi=g+i}else Hi=1<<g|o<<p|c,Yi=i}function _c(i){i.return!==null&&(ln(i,1),jv(i,1,0))}function wc(i){for(;i===Il;)Il=os[--us],os[us]=null,ha=os[--us],os[us]=null;for(;i===kn;)kn=Mi[--Ti],Mi[Ti]=null,Yi=Mi[--Ti],Mi[Ti]=null,Hi=Mi[--Ti],Mi[Ti]=null}function Lv(i,s){Mi[Ti++]=Hi,Mi[Ti++]=Yi,Mi[Ti++]=kn,Hi=s.id,Yi=s.overflow,kn=i}var Le=null,fe=null,Gt=!1,zn=null,Ai=!1,Ec=Error(n(519));function jn(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fa(Ci(s,i)),Ec}function Bv(i){var s=i.stateNode,o=i.type,c=i.memoizedProps;switch(s[je]=i,s[ti]=c,o){case"dialog":Yt("cancel",s),Yt("close",s);break;case"iframe":case"object":case"embed":Yt("load",s);break;case"video":case"audio":for(o=0;o<za.length;o++)Yt(za[o],s);break;case"source":Yt("error",s);break;case"img":case"image":case"link":Yt("error",s),Yt("load",s);break;case"details":Yt("toggle",s);break;case"input":Yt("invalid",s),Qd(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Yt("invalid",s);break;case"textarea":Yt("invalid",s),Zd(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||tg(s.textContent,o)?(c.popover!=null&&(Yt("beforetoggle",s),Yt("toggle",s)),c.onScroll!=null&&Yt("scroll",s),c.onScrollEnd!=null&&Yt("scrollend",s),c.onClick!=null&&(s.onclick=rn),s=!0):s=!1,s||jn(i,!0)}function Fv(i){for(Le=i.return;Le;)switch(Le.tag){case 5:case 31:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:Le=Le.return}}function cs(i){if(i!==Le)return!1;if(!Gt)return Fv(i),Gt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Uh(i.type,i.memoizedProps)),o=!o),o&&fe&&jn(i),Fv(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));fe=ug(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));fe=ug(i)}else s===27?(s=fe,Kn(i.type)?(i=Xh,Xh=null,fe=i):fe=s):fe=Le?Di(i.stateNode.nextSibling):null;return!0}function gr(){fe=Le=null,Gt=!1}function Cc(){var i=zn;return i!==null&&(si===null?si=i:si.push.apply(si,i),zn=null),i}function fa(i){zn===null?zn=[i]:zn.push(i)}var Mc=O(null),yr=null,on=null;function Ln(i,s,o){F(Mc,s._currentValue),s._currentValue=o}function un(i){i._currentValue=Mc.current,L(Mc)}function Tc(i,s,o){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===o)break;i=i.return}}function Ac(i,s,o,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var g=p.dependencies;if(g!==null){var w=p.child;g=g.firstContext;t:for(;g!==null;){var R=g;g=p;for(var P=0;P<s.length;P++)if(R.context===s[P]){g.lanes|=o,R=g.alternate,R!==null&&(R.lanes|=o),Tc(g.return,o,i),c||(w=null);break t}g=R.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(n(341));w.lanes|=o,g=w.alternate,g!==null&&(g.lanes|=o),Tc(w,o,i),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function hs(i,s,o,c){i=null;for(var p=s,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(n(387));if(w=w.memoizedProps,w!==null){var R=p.type;fi(p.pendingProps.value,w.value)||(i!==null?i.push(R):i=[R])}}else if(p===tt.current){if(w=p.alternate,w===null)throw Error(n(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Pa):i=[Pa])}p=p.return}i!==null&&Ac(s,i,o,c),s.flags|=262144}function Vl(i){for(i=i.firstContext;i!==null;){if(!fi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function br(i){yr=i,on=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Be(i){return Pv(yr,i)}function Ul(i,s){return yr===null&&br(i),Pv(i,s)}function Pv(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},on===null){if(i===null)throw Error(n(308));on=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else on=on.next=s;return o}var o_=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},u_=r.unstable_scheduleCallback,c_=r.unstable_NormalPriority,Ee={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rc(){return{controller:new o_,data:new Map,refCount:0}}function da(i){i.refCount--,i.refCount===0&&u_(c_,function(){i.controller.abort()})}var va=null,Dc=0,fs=0,ds=null;function h_(i,s){if(va===null){var o=va=[];Dc=0,fs=kh(),ds={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Dc++,s.then(Iv,Iv),s}function Iv(){if(--Dc===0&&va!==null){ds!==null&&(ds.status="fulfilled");var i=va;va=null,fs=0,ds=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function f_(i,s){var o=[],c={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var p=0;p<o.length;p++)(0,o[p])(s)},function(p){for(c.status="rejected",c.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),c}var Vv=z.S;z.S=function(i,s){Em=Qt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&h_(i,s),Vv!==null&&Vv(i,s)};var xr=O(null);function Nc(){var i=xr.current;return i!==null?i:le.pooledCache}function Hl(i,s){s===null?F(xr,xr.current):F(xr,s.pool)}function Uv(){var i=Nc();return i===null?null:{parent:Ee._currentValue,pool:i}}var vs=Error(n(460)),Oc=Error(n(474)),Yl=Error(n(542)),Wl={then:function(){}};function Hv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Yv(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(rn,rn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,qv(i),i;default:if(typeof s.status=="string")s.then(rn,rn);else{if(i=le,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=c}},function(c){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,qv(i),i}throw _r=s,vs}}function Sr(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(_r=o,vs):o}}var _r=null;function Wv(){if(_r===null)throw Error(n(459));var i=_r;return _r=null,i}function qv(i){if(i===vs||i===Yl)throw Error(n(483))}var ps=null,pa=0;function ql(i){var s=pa;return pa+=1,ps===null&&(ps=[]),Yv(ps,i,s)}function ma(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Xl(i,s){throw s.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Xv(i){function s(Y,H){if(i){var G=Y.deletions;G===null?(Y.deletions=[H],Y.flags|=16):G.push(H)}}function o(Y,H){if(!i)return null;for(;H!==null;)s(Y,H),H=H.sibling;return null}function c(Y){for(var H=new Map;Y!==null;)Y.key!==null?H.set(Y.key,Y):H.set(Y.index,Y),Y=Y.sibling;return H}function p(Y,H){return Y=an(Y,H),Y.index=0,Y.sibling=null,Y}function g(Y,H,G){return Y.index=G,i?(G=Y.alternate,G!==null?(G=G.index,G<H?(Y.flags|=67108866,H):G):(Y.flags|=67108866,H)):(Y.flags|=1048576,H)}function w(Y){return i&&Y.alternate===null&&(Y.flags|=67108866),Y}function R(Y,H,G,ct){return H===null||H.tag!==6?(H=xc(G,Y.mode,ct),H.return=Y,H):(H=p(H,G),H.return=Y,H)}function P(Y,H,G,ct){var Tt=G.type;return Tt===S?lt(Y,H,G.props.children,ct,G.key):H!==null&&(H.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===V&&Sr(Tt)===H.type)?(H=p(H,G.props),ma(H,G),H.return=Y,H):(H=Pl(G.type,G.key,G.props,null,Y.mode,ct),ma(H,G),H.return=Y,H)}function K(Y,H,G,ct){return H===null||H.tag!==4||H.stateNode.containerInfo!==G.containerInfo||H.stateNode.implementation!==G.implementation?(H=Sc(G,Y.mode,ct),H.return=Y,H):(H=p(H,G.children||[]),H.return=Y,H)}function lt(Y,H,G,ct,Tt){return H===null||H.tag!==7?(H=mr(G,Y.mode,ct,Tt),H.return=Y,H):(H=p(H,G),H.return=Y,H)}function ht(Y,H,G){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=xc(""+H,Y.mode,G),H.return=Y,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return G=Pl(H.type,H.key,H.props,null,Y.mode,G),ma(G,H),G.return=Y,G;case b:return H=Sc(H,Y.mode,G),H.return=Y,H;case V:return H=Sr(H),ht(Y,H,G)}if(ot(H)||Z(H))return H=mr(H,Y.mode,G,null),H.return=Y,H;if(typeof H.then=="function")return ht(Y,ql(H),G);if(H.$$typeof===T)return ht(Y,Ul(Y,H),G);Xl(Y,H)}return null}function Q(Y,H,G,ct){var Tt=H!==null?H.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Tt!==null?null:R(Y,H,""+G,ct);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return G.key===Tt?P(Y,H,G,ct):null;case b:return G.key===Tt?K(Y,H,G,ct):null;case V:return G=Sr(G),Q(Y,H,G,ct)}if(ot(G)||Z(G))return Tt!==null?null:lt(Y,H,G,ct,null);if(typeof G.then=="function")return Q(Y,H,ql(G),ct);if(G.$$typeof===T)return Q(Y,H,Ul(Y,G),ct);Xl(Y,G)}return null}function nt(Y,H,G,ct,Tt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Y=Y.get(G)||null,R(H,Y,""+ct,Tt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:return Y=Y.get(ct.key===null?G:ct.key)||null,P(H,Y,ct,Tt);case b:return Y=Y.get(ct.key===null?G:ct.key)||null,K(H,Y,ct,Tt);case V:return ct=Sr(ct),nt(Y,H,G,ct,Tt)}if(ot(ct)||Z(ct))return Y=Y.get(G)||null,lt(H,Y,ct,Tt,null);if(typeof ct.then=="function")return nt(Y,H,G,ql(ct),Tt);if(ct.$$typeof===T)return nt(Y,H,G,Ul(H,ct),Tt);Xl(H,ct)}return null}function Et(Y,H,G,ct){for(var Tt=null,$t=null,Ct=H,It=H=0,Xt=null;Ct!==null&&It<G.length;It++){Ct.index>It?(Xt=Ct,Ct=null):Xt=Ct.sibling;var Zt=Q(Y,Ct,G[It],ct);if(Zt===null){Ct===null&&(Ct=Xt);break}i&&Ct&&Zt.alternate===null&&s(Y,Ct),H=g(Zt,H,It),$t===null?Tt=Zt:$t.sibling=Zt,$t=Zt,Ct=Xt}if(It===G.length)return o(Y,Ct),Gt&&ln(Y,It),Tt;if(Ct===null){for(;It<G.length;It++)Ct=ht(Y,G[It],ct),Ct!==null&&(H=g(Ct,H,It),$t===null?Tt=Ct:$t.sibling=Ct,$t=Ct);return Gt&&ln(Y,It),Tt}for(Ct=c(Ct);It<G.length;It++)Xt=nt(Ct,Y,It,G[It],ct),Xt!==null&&(i&&Xt.alternate!==null&&Ct.delete(Xt.key===null?It:Xt.key),H=g(Xt,H,It),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt);return i&&Ct.forEach(function(tr){return s(Y,tr)}),Gt&&ln(Y,It),Tt}function Ot(Y,H,G,ct){if(G==null)throw Error(n(151));for(var Tt=null,$t=null,Ct=H,It=H=0,Xt=null,Zt=G.next();Ct!==null&&!Zt.done;It++,Zt=G.next()){Ct.index>It?(Xt=Ct,Ct=null):Xt=Ct.sibling;var tr=Q(Y,Ct,Zt.value,ct);if(tr===null){Ct===null&&(Ct=Xt);break}i&&Ct&&tr.alternate===null&&s(Y,Ct),H=g(tr,H,It),$t===null?Tt=tr:$t.sibling=tr,$t=tr,Ct=Xt}if(Zt.done)return o(Y,Ct),Gt&&ln(Y,It),Tt;if(Ct===null){for(;!Zt.done;It++,Zt=G.next())Zt=ht(Y,Zt.value,ct),Zt!==null&&(H=g(Zt,H,It),$t===null?Tt=Zt:$t.sibling=Zt,$t=Zt);return Gt&&ln(Y,It),Tt}for(Ct=c(Ct);!Zt.done;It++,Zt=G.next())Zt=nt(Ct,Y,It,Zt.value,ct),Zt!==null&&(i&&Zt.alternate!==null&&Ct.delete(Zt.key===null?It:Zt.key),H=g(Zt,H,It),$t===null?Tt=Zt:$t.sibling=Zt,$t=Zt);return i&&Ct.forEach(function(w1){return s(Y,w1)}),Gt&&ln(Y,It),Tt}function re(Y,H,G,ct){if(typeof G=="object"&&G!==null&&G.type===S&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case x:t:{for(var Tt=G.key;H!==null;){if(H.key===Tt){if(Tt=G.type,Tt===S){if(H.tag===7){o(Y,H.sibling),ct=p(H,G.props.children),ct.return=Y,Y=ct;break t}}else if(H.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===V&&Sr(Tt)===H.type){o(Y,H.sibling),ct=p(H,G.props),ma(ct,G),ct.return=Y,Y=ct;break t}o(Y,H);break}else s(Y,H);H=H.sibling}G.type===S?(ct=mr(G.props.children,Y.mode,ct,G.key),ct.return=Y,Y=ct):(ct=Pl(G.type,G.key,G.props,null,Y.mode,ct),ma(ct,G),ct.return=Y,Y=ct)}return w(Y);case b:t:{for(Tt=G.key;H!==null;){if(H.key===Tt)if(H.tag===4&&H.stateNode.containerInfo===G.containerInfo&&H.stateNode.implementation===G.implementation){o(Y,H.sibling),ct=p(H,G.children||[]),ct.return=Y,Y=ct;break t}else{o(Y,H);break}else s(Y,H);H=H.sibling}ct=Sc(G,Y.mode,ct),ct.return=Y,Y=ct}return w(Y);case V:return G=Sr(G),re(Y,H,G,ct)}if(ot(G))return Et(Y,H,G,ct);if(Z(G)){if(Tt=Z(G),typeof Tt!="function")throw Error(n(150));return G=Tt.call(G),Ot(Y,H,G,ct)}if(typeof G.then=="function")return re(Y,H,ql(G),ct);if(G.$$typeof===T)return re(Y,H,Ul(Y,G),ct);Xl(Y,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,H!==null&&H.tag===6?(o(Y,H.sibling),ct=p(H,G),ct.return=Y,Y=ct):(o(Y,H),ct=xc(G,Y.mode,ct),ct.return=Y,Y=ct),w(Y)):o(Y,H)}return function(Y,H,G,ct){try{pa=0;var Tt=re(Y,H,G,ct);return ps=null,Tt}catch(Ct){if(Ct===vs||Ct===Yl)throw Ct;var $t=di(29,Ct,null,Y.mode);return $t.lanes=ct,$t.return=Y,$t}}}var wr=Xv(!0),Gv=Xv(!1),Bn=!1;function kc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zc(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Fn(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Pn(i,s,o){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Jt&2)!==0){var p=c.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),c.pending=s,s=Fl(i),Nv(i,null,o),s}return Bl(i,c,s,o),Fl(i)}function ga(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,o|=c,s.lanes=o,Pd(i,o)}}function jc(i,s){var o=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?p=g=w:g=g.next=w,o=o.next}while(o!==null);g===null?p=g=s:g=g.next=s}else p=g=s;o={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Lc=!1;function ya(){if(Lc){var i=ds;if(i!==null)throw i}}function ba(i,s,o,c){Lc=!1;var p=i.updateQueue;Bn=!1;var g=p.firstBaseUpdate,w=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var P=R,K=P.next;P.next=null,w===null?g=K:w.next=K,w=P;var lt=i.alternate;lt!==null&&(lt=lt.updateQueue,R=lt.lastBaseUpdate,R!==w&&(R===null?lt.firstBaseUpdate=K:R.next=K,lt.lastBaseUpdate=P))}if(g!==null){var ht=p.baseState;w=0,lt=K=P=null,R=g;do{var Q=R.lane&-536870913,nt=Q!==R.lane;if(nt?(qt&Q)===Q:(c&Q)===Q){Q!==0&&Q===fs&&(Lc=!0),lt!==null&&(lt=lt.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var Et=i,Ot=R;Q=s;var re=o;switch(Ot.tag){case 1:if(Et=Ot.payload,typeof Et=="function"){ht=Et.call(re,ht,Q);break t}ht=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Ot.payload,Q=typeof Et=="function"?Et.call(re,ht,Q):Et,Q==null)break t;ht=m({},ht,Q);break t;case 2:Bn=!0}}Q=R.callback,Q!==null&&(i.flags|=64,nt&&(i.flags|=8192),nt=p.callbacks,nt===null?p.callbacks=[Q]:nt.push(Q))}else nt={lane:Q,tag:R.tag,payload:R.payload,callback:R.callback,next:null},lt===null?(K=lt=nt,P=ht):lt=lt.next=nt,w|=Q;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;nt=R,R=nt.next,nt.next=null,p.lastBaseUpdate=nt,p.shared.pending=null}}while(!0);lt===null&&(P=ht),p.baseState=P,p.firstBaseUpdate=K,p.lastBaseUpdate=lt,g===null&&(p.shared.lanes=0),Yn|=w,i.lanes=w,i.memoizedState=ht}}function Kv(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function Qv(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Kv(o[i],s)}var ms=O(null),Gl=O(0);function $v(i,s){i=yn,F(Gl,i),F(ms,s),yn=i|s.baseLanes}function Bc(){F(Gl,yn),F(ms,ms.current)}function Fc(){yn=Gl.current,L(ms),L(Gl)}var vi=O(null),Ri=null;function In(i){var s=i.alternate;F(xe,xe.current&1),F(vi,i),Ri===null&&(s===null||ms.current!==null||s.memoizedState!==null)&&(Ri=i)}function Pc(i){F(xe,xe.current),F(vi,i),Ri===null&&(Ri=i)}function Zv(i){i.tag===22?(F(xe,xe.current),F(vi,i),Ri===null&&(Ri=i)):Vn()}function Vn(){F(xe,xe.current),F(vi,vi.current)}function pi(i){L(vi),Ri===i&&(Ri=null),L(xe)}var xe=O(0);function Kl(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Wh(o)||qh(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cn=0,Bt=null,ie=null,Ce=null,Ql=!1,gs=!1,Er=!1,$l=0,xa=0,ys=null,d_=0;function ye(){throw Error(n(321))}function Ic(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!fi(i[o],s[o]))return!1;return!0}function Vc(i,s,o,c,p,g){return cn=g,Bt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=i===null||i.memoizedState===null?jp:ih,Er=!1,g=o(c,p),Er=!1,gs&&(g=tp(s,o,c,p)),Jv(i),g}function Jv(i){z.H=wa;var s=ie!==null&&ie.next!==null;if(cn=0,Ce=ie=Bt=null,Ql=!1,xa=0,ys=null,s)throw Error(n(300));i===null||Me||(i=i.dependencies,i!==null&&Vl(i)&&(Me=!0))}function tp(i,s,o,c){Bt=i;var p=0;do{if(gs&&(ys=null),xa=0,gs=!1,25<=p)throw Error(n(301));if(p+=1,Ce=ie=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}z.H=Lp,g=s(o,c)}while(gs);return g}function v_(){var i=z.H,s=i.useState()[0];return s=typeof s.then=="function"?Sa(s):s,i=i.useState()[0],(ie!==null?ie.memoizedState:null)!==i&&(Bt.flags|=1024),s}function Uc(){var i=$l!==0;return $l=0,i}function Hc(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Yc(i){if(Ql){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ql=!1}cn=0,Ce=ie=Bt=null,gs=!1,xa=$l=0,ys=null}function Qe(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?Bt.memoizedState=Ce=i:Ce=Ce.next=i,Ce}function Se(){if(ie===null){var i=Bt.alternate;i=i!==null?i.memoizedState:null}else i=ie.next;var s=Ce===null?Bt.memoizedState:Ce.next;if(s!==null)Ce=s,ie=i;else{if(i===null)throw Bt.alternate===null?Error(n(467)):Error(n(310));ie=i,i={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Ce===null?Bt.memoizedState=Ce=i:Ce=Ce.next=i}return Ce}function Zl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sa(i){var s=xa;return xa+=1,ys===null&&(ys=[]),i=Yv(ys,i,s),s=Bt,(Ce===null?s.memoizedState:Ce.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?jp:ih),i}function Jl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Sa(i);if(i.$$typeof===T)return Be(i)}throw Error(n(438,String(i)))}function Wc(i){var s=null,o=Bt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Bt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Zl(),Bt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),c=0;c<i;c++)o[c]=I;return s.index++,o}function hn(i,s){return typeof s=="function"?s(i):s}function to(i){var s=Se();return qc(s,ie,i)}function qc(i,s,o){var c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=o;var p=i.baseQueue,g=c.pending;if(g!==null){if(p!==null){var w=p.next;p.next=g.next,g.next=w}s.baseQueue=p=g,c.pending=null}if(g=i.baseState,p===null)i.memoizedState=g;else{s=p.next;var R=w=null,P=null,K=s,lt=!1;do{var ht=K.lane&-536870913;if(ht!==K.lane?(qt&ht)===ht:(cn&ht)===ht){var Q=K.revertLane;if(Q===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ht===fs&&(lt=!0);else if((cn&Q)===Q){K=K.next,Q===fs&&(lt=!0);continue}else ht={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(R=P=ht,w=g):P=P.next=ht,Bt.lanes|=Q,Yn|=Q;ht=K.action,Er&&o(g,ht),g=K.hasEagerState?K.eagerState:o(g,ht)}else Q={lane:ht,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(R=P=Q,w=g):P=P.next=Q,Bt.lanes|=ht,Yn|=ht;K=K.next}while(K!==null&&K!==s);if(P===null?w=g:P.next=R,!fi(g,i.memoizedState)&&(Me=!0,lt&&(o=ds,o!==null)))throw o;i.memoizedState=g,i.baseState=w,i.baseQueue=P,c.lastRenderedState=g}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Xc(i){var s=Se(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=i;var c=o.dispatch,p=o.pending,g=s.memoizedState;if(p!==null){o.pending=null;var w=p=p.next;do g=i(g,w.action),w=w.next;while(w!==p);fi(g,s.memoizedState)||(Me=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function ep(i,s,o){var c=Bt,p=Se(),g=Gt;if(g){if(o===void 0)throw Error(n(407));o=o()}else o=s();var w=!fi((ie||p).memoizedState,o);if(w&&(p.memoizedState=o,Me=!0),p=p.queue,Qc(rp.bind(null,c,p,i),[i]),p.getSnapshot!==s||w||Ce!==null&&Ce.memoizedState.tag&1){if(c.flags|=2048,bs(9,{destroy:void 0},np.bind(null,c,p,o,s),null),le===null)throw Error(n(349));g||(cn&127)!==0||ip(c,s,o)}return o}function ip(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Bt.updateQueue,s===null?(s=Zl(),Bt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function np(i,s,o,c){s.value=o,s.getSnapshot=c,sp(s)&&ap(i)}function rp(i,s,o){return o(function(){sp(s)&&ap(i)})}function sp(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!fi(i,o)}catch{return!0}}function ap(i){var s=pr(i,2);s!==null&&ai(s,i,2)}function Gc(i){var s=Qe();if(typeof i=="function"){var o=i;if(i=o(),Er){De(!0);try{o()}finally{De(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:i},s}function lp(i,s,o,c){return i.baseState=o,qc(i,ie,typeof c=="function"?c:hn)}function p_(i,s,o,c,p){if(no(i))throw Error(n(485));if(i=s.action,i!==null){var g={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};z.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,op(s,g)):(g.next=o.next,s.pending=o.next=g)}}function op(i,s){var o=s.action,c=s.payload,p=i.state;if(s.isTransition){var g=z.T,w={};z.T=w;try{var R=o(p,c),P=z.S;P!==null&&P(w,R),up(i,s,R)}catch(K){Kc(i,s,K)}finally{g!==null&&w.types!==null&&(g.types=w.types),z.T=g}}else try{g=o(p,c),up(i,s,g)}catch(K){Kc(i,s,K)}}function up(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){cp(i,s,c)},function(c){return Kc(i,s,c)}):cp(i,s,o)}function cp(i,s,o){s.status="fulfilled",s.value=o,hp(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,op(i,o)))}function Kc(i,s,o){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,hp(s),s=s.next;while(s!==c)}i.action=null}function hp(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function fp(i,s){return s}function dp(i,s){if(Gt){var o=le.formState;if(o!==null){t:{var c=Bt;if(Gt){if(fe){e:{for(var p=fe,g=Ai;p.nodeType!==8;){if(!g){p=null;break e}if(p=Di(p.nextSibling),p===null){p=null;break e}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){fe=Di(p.nextSibling),c=p.data==="F!";break t}}jn(c)}c=!1}c&&(s=o[0])}}return o=Qe(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:s},o.queue=c,o=Op.bind(null,Bt,c),c.dispatch=o,c=Gc(!1),g=eh.bind(null,Bt,!1,c.queue),c=Qe(),p={state:s,dispatch:null,action:i,pending:null},c.queue=p,o=p_.bind(null,Bt,p,g,o),p.dispatch=o,c.memoizedState=i,[s,o,!1]}function vp(i){var s=Se();return pp(s,ie,i)}function pp(i,s,o){if(s=qc(i,s,fp)[0],i=to(hn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Sa(s)}catch(w){throw w===vs?Yl:w}else c=s;s=Se();var p=s.queue,g=p.dispatch;return o!==s.memoizedState&&(Bt.flags|=2048,bs(9,{destroy:void 0},m_.bind(null,p,o),null)),[c,g,i]}function m_(i,s){i.action=s}function mp(i){var s=Se(),o=ie;if(o!==null)return pp(s,o,i);Se(),s=s.memoizedState,o=Se();var c=o.queue.dispatch;return o.memoizedState=i,[s,c,!1]}function bs(i,s,o,c){return i={tag:i,create:o,deps:c,inst:s,next:null},s=Bt.updateQueue,s===null&&(s=Zl(),Bt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(c=o.next,o.next=i,i.next=c,s.lastEffect=i),i}function gp(){return Se().memoizedState}function eo(i,s,o,c){var p=Qe();Bt.flags|=i,p.memoizedState=bs(1|s,{destroy:void 0},o,c===void 0?null:c)}function io(i,s,o,c){var p=Se();c=c===void 0?null:c;var g=p.memoizedState.inst;ie!==null&&c!==null&&Ic(c,ie.memoizedState.deps)?p.memoizedState=bs(s,g,o,c):(Bt.flags|=i,p.memoizedState=bs(1|s,g,o,c))}function yp(i,s){eo(8390656,8,i,s)}function Qc(i,s){io(2048,8,i,s)}function g_(i){Bt.flags|=4;var s=Bt.updateQueue;if(s===null)s=Zl(),Bt.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function bp(i){var s=Se().memoizedState;return g_({ref:s,nextImpl:i}),function(){if((Jt&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function xp(i,s){return io(4,2,i,s)}function Sp(i,s){return io(4,4,i,s)}function _p(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function wp(i,s,o){o=o!=null?o.concat([i]):null,io(4,4,_p.bind(null,s,i),o)}function $c(){}function Ep(i,s){var o=Se();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Ic(s,c[1])?c[0]:(o.memoizedState=[i,s],i)}function Cp(i,s){var o=Se();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Ic(s,c[1]))return c[0];if(c=i(),Er){De(!0);try{i()}finally{De(!1)}}return o.memoizedState=[c,s],c}function Zc(i,s,o){return o===void 0||(cn&1073741824)!==0&&(qt&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=Mm(),Bt.lanes|=i,Yn|=i,o)}function Mp(i,s,o,c){return fi(o,s)?o:ms.current!==null?(i=Zc(i,o,c),fi(i,s)||(Me=!0),i):(cn&42)===0||(cn&1073741824)!==0&&(qt&261930)===0?(Me=!0,i.memoizedState=o):(i=Mm(),Bt.lanes|=i,Yn|=i,s)}function Tp(i,s,o,c,p){var g=U.p;U.p=g!==0&&8>g?g:8;var w=z.T,R={};z.T=R,eh(i,!1,s,o);try{var P=p(),K=z.S;if(K!==null&&K(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var lt=f_(P,c);_a(i,s,lt,yi(i))}else _a(i,s,c,yi(i))}catch(ht){_a(i,s,{then:function(){},status:"rejected",reason:ht},yi())}finally{U.p=g,w!==null&&R.types!==null&&(w.types=R.types),z.T=w}}function y_(){}function Jc(i,s,o,c){if(i.tag!==5)throw Error(n(476));var p=Ap(i).queue;Tp(i,p,s,st,o===null?y_:function(){return Rp(i),o(c)})}function Ap(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:st},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Rp(i){var s=Ap(i);s.next===null&&(s=i.alternate.memoizedState),_a(i,s.next.queue,{},yi())}function th(){return Be(Pa)}function Dp(){return Se().memoizedState}function Np(){return Se().memoizedState}function b_(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=yi();i=Fn(o);var c=Pn(s,i,o);c!==null&&(ai(c,s,o),ga(c,s,o)),s={cache:Rc()},i.payload=s;return}s=s.return}}function x_(i,s,o){var c=yi();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},no(i)?kp(s,o):(o=yc(i,s,o,c),o!==null&&(ai(o,i,c),zp(o,s,c)))}function Op(i,s,o){var c=yi();_a(i,s,o,c)}function _a(i,s,o,c){var p={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(no(i))kp(s,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,R=g(w,o);if(p.hasEagerState=!0,p.eagerState=R,fi(R,w))return Bl(i,s,p,0),le===null&&Ll(),!1}catch{}if(o=yc(i,s,p,c),o!==null)return ai(o,i,c),zp(o,s,c),!0}return!1}function eh(i,s,o,c){if(c={lane:2,revertLane:kh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},no(i)){if(s)throw Error(n(479))}else s=yc(i,o,c,2),s!==null&&ai(s,i,2)}function no(i){var s=i.alternate;return i===Bt||s!==null&&s===Bt}function kp(i,s){gs=Ql=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function zp(i,s,o){if((o&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,o|=c,s.lanes=o,Pd(i,o)}}var wa={readContext:Be,use:Jl,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye};wa.useEffectEvent=ye;var jp={readContext:Be,use:Jl,useCallback:function(i,s){return Qe().memoizedState=[i,s===void 0?null:s],i},useContext:Be,useEffect:yp,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,eo(4194308,4,_p.bind(null,s,i),o)},useLayoutEffect:function(i,s){return eo(4194308,4,i,s)},useInsertionEffect:function(i,s){eo(4,2,i,s)},useMemo:function(i,s){var o=Qe();s=s===void 0?null:s;var c=i();if(Er){De(!0);try{i()}finally{De(!1)}}return o.memoizedState=[c,s],c},useReducer:function(i,s,o){var c=Qe();if(o!==void 0){var p=o(s);if(Er){De(!0);try{o(s)}finally{De(!1)}}}else p=s;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=x_.bind(null,Bt,i),[c.memoizedState,i]},useRef:function(i){var s=Qe();return i={current:i},s.memoizedState=i},useState:function(i){i=Gc(i);var s=i.queue,o=Op.bind(null,Bt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:$c,useDeferredValue:function(i,s){var o=Qe();return Zc(o,i,s)},useTransition:function(){var i=Gc(!1);return i=Tp.bind(null,Bt,i.queue,!0,!1),Qe().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var c=Bt,p=Qe();if(Gt){if(o===void 0)throw Error(n(407));o=o()}else{if(o=s(),le===null)throw Error(n(349));(qt&127)!==0||ip(c,s,o)}p.memoizedState=o;var g={value:o,getSnapshot:s};return p.queue=g,yp(rp.bind(null,c,g,i),[i]),c.flags|=2048,bs(9,{destroy:void 0},np.bind(null,c,g,o,s),null),o},useId:function(){var i=Qe(),s=le.identifierPrefix;if(Gt){var o=Yi,c=Hi;o=(c&~(1<<32-he(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=$l++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=d_++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:th,useFormState:dp,useActionState:dp,useOptimistic:function(i){var s=Qe();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=eh.bind(null,Bt,!0,o),o.dispatch=s,[i,s]},useMemoCache:Wc,useCacheRefresh:function(){return Qe().memoizedState=b_.bind(null,Bt)},useEffectEvent:function(i){var s=Qe(),o={impl:i};return s.memoizedState=o,function(){if((Jt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}},ih={readContext:Be,use:Jl,useCallback:Ep,useContext:Be,useEffect:Qc,useImperativeHandle:wp,useInsertionEffect:xp,useLayoutEffect:Sp,useMemo:Cp,useReducer:to,useRef:gp,useState:function(){return to(hn)},useDebugValue:$c,useDeferredValue:function(i,s){var o=Se();return Mp(o,ie.memoizedState,i,s)},useTransition:function(){var i=to(hn)[0],s=Se().memoizedState;return[typeof i=="boolean"?i:Sa(i),s]},useSyncExternalStore:ep,useId:Dp,useHostTransitionStatus:th,useFormState:vp,useActionState:vp,useOptimistic:function(i,s){var o=Se();return lp(o,ie,i,s)},useMemoCache:Wc,useCacheRefresh:Np};ih.useEffectEvent=bp;var Lp={readContext:Be,use:Jl,useCallback:Ep,useContext:Be,useEffect:Qc,useImperativeHandle:wp,useInsertionEffect:xp,useLayoutEffect:Sp,useMemo:Cp,useReducer:Xc,useRef:gp,useState:function(){return Xc(hn)},useDebugValue:$c,useDeferredValue:function(i,s){var o=Se();return ie===null?Zc(o,i,s):Mp(o,ie.memoizedState,i,s)},useTransition:function(){var i=Xc(hn)[0],s=Se().memoizedState;return[typeof i=="boolean"?i:Sa(i),s]},useSyncExternalStore:ep,useId:Dp,useHostTransitionStatus:th,useFormState:mp,useActionState:mp,useOptimistic:function(i,s){var o=Se();return ie!==null?lp(o,ie,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Wc,useCacheRefresh:Np};Lp.useEffectEvent=bp;function nh(i,s,o,c){s=i.memoizedState,o=o(c,s),o=o==null?s:m({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var rh={enqueueSetState:function(i,s,o){i=i._reactInternals;var c=yi(),p=Fn(c);p.payload=s,o!=null&&(p.callback=o),s=Pn(i,p,c),s!==null&&(ai(s,i,c),ga(s,i,c))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var c=yi(),p=Fn(c);p.tag=1,p.payload=s,o!=null&&(p.callback=o),s=Pn(i,p,c),s!==null&&(ai(s,i,c),ga(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=yi(),c=Fn(o);c.tag=2,s!=null&&(c.callback=s),s=Pn(i,c,o),s!==null&&(ai(s,i,o),ga(s,i,o))}};function Bp(i,s,o,c,p,g,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!ua(o,c)||!ua(p,g):!0}function Fp(i,s,o,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==i&&rh.enqueueReplaceState(s,s.state,null)}function Cr(i,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(i=i.defaultProps){o===s&&(o=m({},o));for(var p in i)o[p]===void 0&&(o[p]=i[p])}return o}function Pp(i){jl(i)}function Ip(i){console.error(i)}function Vp(i){jl(i)}function ro(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Up(i,s,o){try{var c=i.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function sh(i,s,o){return o=Fn(o),o.tag=3,o.payload={element:null},o.callback=function(){ro(i,s)},o}function Hp(i){return i=Fn(i),i.tag=3,i}function Yp(i,s,o,c){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=c.value;i.payload=function(){return p(g)},i.callback=function(){Up(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){Up(s,o,c),typeof p!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function S_(i,s,o,c,p){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&hs(s,o,p,!0),o=vi.current,o!==null){switch(o.tag){case 31:case 13:return Ri===null?go():o.alternate===null&&be===0&&(be=3),o.flags&=-257,o.flags|=65536,o.lanes=p,c===Wl?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Dh(i,c,p)),!1;case 22:return o.flags|=65536,c===Wl?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Dh(i,c,p)),!1}throw Error(n(435,o.tag))}return Dh(i,c,p),go(),!1}if(Gt)return s=vi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,c!==Ec&&(i=Error(n(422),{cause:c}),fa(Ci(i,o)))):(c!==Ec&&(s=Error(n(423),{cause:c}),fa(Ci(s,o))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=Ci(c,o),p=sh(i.stateNode,c,p),jc(i,p),be!==4&&(be=2)),!1;var g=Error(n(520),{cause:c});if(g=Ci(g,o),Na===null?Na=[g]:Na.push(g),be!==4&&(be=2),s===null)return!0;c=Ci(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=p&-p,o.lanes|=i,i=sh(o.stateNode,c,i),jc(o,i),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Wn===null||!Wn.has(g))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Hp(p),Yp(p,i,o,c),jc(o,p),!1}o=o.return}while(o!==null);return!1}var ah=Error(n(461)),Me=!1;function Fe(i,s,o,c){s.child=i===null?Gv(s,null,o,c):wr(s,i.child,o,c)}function Wp(i,s,o,c,p){o=o.render;var g=s.ref;if("ref"in c){var w={};for(var R in c)R!=="ref"&&(w[R]=c[R])}else w=c;return br(s),c=Vc(i,s,o,w,g,p),R=Uc(),i!==null&&!Me?(Hc(i,s,p),fn(i,s,p)):(Gt&&R&&_c(s),s.flags|=1,Fe(i,s,c,p),s.child)}function qp(i,s,o,c,p){if(i===null){var g=o.type;return typeof g=="function"&&!bc(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Xp(i,s,g,c,p)):(i=Pl(o.type,null,c,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!vh(i,p)){var w=g.memoizedProps;if(o=o.compare,o=o!==null?o:ua,o(w,c)&&i.ref===s.ref)return fn(i,s,p)}return s.flags|=1,i=an(g,c),i.ref=s.ref,i.return=s,s.child=i}function Xp(i,s,o,c,p){if(i!==null){var g=i.memoizedProps;if(ua(g,c)&&i.ref===s.ref)if(Me=!1,s.pendingProps=c=g,vh(i,p))(i.flags&131072)!==0&&(Me=!0);else return s.lanes=i.lanes,fn(i,s,p)}return lh(i,s,o,c,p)}function Gp(i,s,o,c){var p=c.children,g=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,i!==null){for(c=s.child=i.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~g}else c=0,s.child=null;return Kp(i,s,g,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Hl(s,g!==null?g.cachePool:null),g!==null?$v(s,g):Bc(),Zv(s);else return c=s.lanes=536870912,Kp(i,s,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Hl(s,g.cachePool),$v(s,g),Vn(),s.memoizedState=null):(i!==null&&Hl(s,null),Bc(),Vn());return Fe(i,s,p,o),s.child}function Ea(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Kp(i,s,o,c,p){var g=Nc();return g=g===null?null:{parent:Ee._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},i!==null&&Hl(s,null),Bc(),Zv(s),i!==null&&hs(i,s,c,!0),s.childLanes=p,null}function so(i,s){return s=lo({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Qp(i,s,o){return wr(s,i.child,null,o),i=so(s,s.pendingProps),i.flags|=2,pi(s),s.memoizedState=null,i}function __(i,s,o){var c=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Gt){if(c.mode==="hidden")return i=so(s,c),s.lanes=536870912,Ea(null,i);if(Pc(s),(i=fe)?(i=og(i,Ai),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:kn!==null?{id:Hi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},o=kv(i),o.return=s,s.child=o,Le=s,fe=null)):i=null,i===null)throw jn(s);return s.lanes=536870912,null}return so(s,c)}var g=i.memoizedState;if(g!==null){var w=g.dehydrated;if(Pc(s),p)if(s.flags&256)s.flags&=-257,s=Qp(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(Me||hs(i,s,o,!1),p=(o&i.childLanes)!==0,Me||p){if(c=le,c!==null&&(w=Id(c,o),w!==0&&w!==g.retryLane))throw g.retryLane=w,pr(i,w),ai(c,i,w),ah;go(),s=Qp(i,s,o)}else i=g.treeContext,fe=Di(w.nextSibling),Le=s,Gt=!0,zn=null,Ai=!1,i!==null&&Lv(s,i),s=so(s,c),s.flags|=4096;return s}return i=an(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function ao(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function lh(i,s,o,c,p){return br(s),o=Vc(i,s,o,c,void 0,p),c=Uc(),i!==null&&!Me?(Hc(i,s,p),fn(i,s,p)):(Gt&&c&&_c(s),s.flags|=1,Fe(i,s,o,p),s.child)}function $p(i,s,o,c,p,g){return br(s),s.updateQueue=null,o=tp(s,c,o,p),Jv(i),c=Uc(),i!==null&&!Me?(Hc(i,s,g),fn(i,s,g)):(Gt&&c&&_c(s),s.flags|=1,Fe(i,s,o,g),s.child)}function Zp(i,s,o,c,p){if(br(s),s.stateNode===null){var g=ls,w=o.contextType;typeof w=="object"&&w!==null&&(g=Be(w)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=rh,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},kc(s),w=o.contextType,g.context=typeof w=="object"&&w!==null?Be(w):ls,g.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(nh(s,o,w,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&rh.enqueueReplaceState(g,g.state,null),ba(s,c,g,p),ya(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){g=s.stateNode;var R=s.memoizedProps,P=Cr(o,R);g.props=P;var K=g.context,lt=o.contextType;w=ls,typeof lt=="object"&&lt!==null&&(w=Be(lt));var ht=o.getDerivedStateFromProps;lt=typeof ht=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,lt||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||K!==w)&&Fp(s,g,c,w),Bn=!1;var Q=s.memoizedState;g.state=Q,ba(s,c,g,p),ya(),K=s.memoizedState,R||Q!==K||Bn?(typeof ht=="function"&&(nh(s,o,ht,c),K=s.memoizedState),(P=Bn||Bp(s,o,P,c,Q,K,w))?(lt||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=K),g.props=c,g.state=K,g.context=w,c=P):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,zc(i,s),w=s.memoizedProps,lt=Cr(o,w),g.props=lt,ht=s.pendingProps,Q=g.context,K=o.contextType,P=ls,typeof K=="object"&&K!==null&&(P=Be(K)),R=o.getDerivedStateFromProps,(K=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==ht||Q!==P)&&Fp(s,g,c,P),Bn=!1,Q=s.memoizedState,g.state=Q,ba(s,c,g,p),ya();var nt=s.memoizedState;w!==ht||Q!==nt||Bn||i!==null&&i.dependencies!==null&&Vl(i.dependencies)?(typeof R=="function"&&(nh(s,o,R,c),nt=s.memoizedState),(lt=Bn||Bp(s,o,lt,c,Q,nt,P)||i!==null&&i.dependencies!==null&&Vl(i.dependencies))?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,nt,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,nt,P)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=nt),g.props=c,g.state=nt,g.context=P,c=lt):(typeof g.componentDidUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),c=!1)}return g=c,ao(i,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&c?(s.child=wr(s,i.child,null,p),s.child=wr(s,null,o,p)):Fe(i,s,o,p),s.memoizedState=g.state,i=s.child):i=fn(i,s,p),i}function Jp(i,s,o,c){return gr(),s.flags|=256,Fe(i,s,o,c),s.child}var oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uh(i){return{baseLanes:i,cachePool:Uv()}}function ch(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=gi),i}function tm(i,s,o){var c=s.pendingProps,p=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=i!==null&&i.memoizedState===null?!1:(xe.current&2)!==0),w&&(p=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Gt){if(p?In(s):Vn(),(i=fe)?(i=og(i,Ai),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:kn!==null?{id:Hi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},o=kv(i),o.return=s,s.child=o,Le=s,fe=null)):i=null,i===null)throw jn(s);return qh(i)?s.lanes=32:s.lanes=536870912,null}var R=c.children;return c=c.fallback,p?(Vn(),p=s.mode,R=lo({mode:"hidden",children:R},p),c=mr(c,p,o,null),R.return=s,c.return=s,R.sibling=c,s.child=R,c=s.child,c.memoizedState=uh(o),c.childLanes=ch(i,w,o),s.memoizedState=oh,Ea(null,c)):(In(s),hh(s,R))}var P=i.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(g)s.flags&256?(In(s),s.flags&=-257,s=fh(i,s,o)):s.memoizedState!==null?(Vn(),s.child=i.child,s.flags|=128,s=null):(Vn(),R=c.fallback,p=s.mode,c=lo({mode:"visible",children:c.children},p),R=mr(R,p,o,null),R.flags|=2,c.return=s,R.return=s,c.sibling=R,s.child=c,wr(s,i.child,null,o),c=s.child,c.memoizedState=uh(o),c.childLanes=ch(i,w,o),s.memoizedState=oh,s=Ea(null,c));else if(In(s),qh(R)){if(w=R.nextSibling&&R.nextSibling.dataset,w)var K=w.dgst;w=K,c=Error(n(419)),c.stack="",c.digest=w,fa({value:c,source:null,stack:null}),s=fh(i,s,o)}else if(Me||hs(i,s,o,!1),w=(o&i.childLanes)!==0,Me||w){if(w=le,w!==null&&(c=Id(w,o),c!==0&&c!==P.retryLane))throw P.retryLane=c,pr(i,c),ai(w,i,c),ah;Wh(R)||go(),s=fh(i,s,o)}else Wh(R)?(s.flags|=192,s.child=i.child,s=null):(i=P.treeContext,fe=Di(R.nextSibling),Le=s,Gt=!0,zn=null,Ai=!1,i!==null&&Lv(s,i),s=hh(s,c.children),s.flags|=4096);return s}return p?(Vn(),R=c.fallback,p=s.mode,P=i.child,K=P.sibling,c=an(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,K!==null?R=an(K,R):(R=mr(R,p,o,null),R.flags|=2),R.return=s,c.return=s,c.sibling=R,s.child=c,Ea(null,c),c=s.child,R=i.child.memoizedState,R===null?R=uh(o):(p=R.cachePool,p!==null?(P=Ee._currentValue,p=p.parent!==P?{parent:P,pool:P}:p):p=Uv(),R={baseLanes:R.baseLanes|o,cachePool:p}),c.memoizedState=R,c.childLanes=ch(i,w,o),s.memoizedState=oh,Ea(i.child,c)):(In(s),o=i.child,i=o.sibling,o=an(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=o,s.memoizedState=null,o)}function hh(i,s){return s=lo({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function lo(i,s){return i=di(22,i,null,s),i.lanes=0,i}function fh(i,s,o){return wr(s,i.child,null,o),i=hh(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function em(i,s,o){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Tc(i.return,s,o)}function dh(i,s,o,c,p,g){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:p,treeForkCount:g}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=p,w.treeForkCount=g)}function im(i,s,o){var c=s.pendingProps,p=c.revealOrder,g=c.tail;c=c.children;var w=xe.current,R=(w&2)!==0;if(R?(w=w&1|2,s.flags|=128):w&=1,F(xe,w),Fe(i,s,c,o),c=Gt?ha:0,!R&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&em(i,o,s);else if(i.tag===19)em(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(o=s.child,p=null;o!==null;)i=o.alternate,i!==null&&Kl(i)===null&&(p=o),o=o.sibling;o=p,o===null?(p=s.child,s.child=null):(p=o.sibling,o.sibling=null),dh(s,!1,p,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&Kl(i)===null){s.child=p;break}i=p.sibling,p.sibling=o,o=p,p=i}dh(s,!0,o,null,g,c);break;case"together":dh(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function fn(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),Yn|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(hs(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,o=an(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=an(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function vh(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Vl(i)))}function w_(i,s,o){switch(s.tag){case 3:vt(s,s.stateNode.containerInfo),Ln(s,Ee,i.memoizedState.cache),gr();break;case 27:case 5:ut(s);break;case 4:vt(s,s.stateNode.containerInfo);break;case 10:Ln(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Pc(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(In(s),s.flags|=128,null):(o&s.child.childLanes)!==0?tm(i,s,o):(In(s),i=fn(i,s,o),i!==null?i.sibling:null);In(s);break;case 19:var p=(i.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(hs(i,s,o,!1),c=(o&s.childLanes)!==0),p){if(c)return im(i,s,o);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),F(xe,xe.current),c)break;return null;case 22:return s.lanes=0,Gp(i,s,o,s.pendingProps);case 24:Ln(s,Ee,i.memoizedState.cache)}return fn(i,s,o)}function nm(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Me=!0;else{if(!vh(i,o)&&(s.flags&128)===0)return Me=!1,w_(i,s,o);Me=(i.flags&131072)!==0}else Me=!1,Gt&&(s.flags&1048576)!==0&&jv(s,ha,s.index);switch(s.lanes=0,s.tag){case 16:t:{var c=s.pendingProps;if(i=Sr(s.elementType),s.type=i,typeof i=="function")bc(i)?(c=Cr(i,c),s.tag=1,s=Zp(null,s,i,c,o)):(s.tag=0,s=lh(null,s,i,c,o));else{if(i!=null){var p=i.$$typeof;if(p===D){s.tag=11,s=Wp(null,s,i,c,o);break t}else if(p===N){s.tag=14,s=qp(null,s,i,c,o);break t}}throw s=X(i)||i,Error(n(306,s,""))}}return s;case 0:return lh(i,s,s.type,s.pendingProps,o);case 1:return c=s.type,p=Cr(c,s.pendingProps),Zp(i,s,c,p,o);case 3:t:{if(vt(s,s.stateNode.containerInfo),i===null)throw Error(n(387));c=s.pendingProps;var g=s.memoizedState;p=g.element,zc(i,s),ba(s,c,null,o);var w=s.memoizedState;if(c=w.cache,Ln(s,Ee,c),c!==g.cache&&Ac(s,[Ee],o,!0),ya(),c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Jp(i,s,c,o);break t}else if(c!==p){p=Ci(Error(n(424)),s),fa(p),s=Jp(i,s,c,o);break t}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,fe=Di(i.firstChild),Le=s,Gt=!0,zn=null,Ai=!0,o=Gv(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(gr(),c===p){s=fn(i,s,o);break t}Fe(i,s,c,o)}s=s.child}return s;case 26:return ao(i,s),i===null?(o=vg(s.type,null,s.pendingProps,null))?s.memoizedState=o:Gt||(o=s.type,i=s.pendingProps,c=Eo(J.current).createElement(o),c[je]=s,c[ti]=i,Pe(c,o,i),Ne(c),s.stateNode=c):s.memoizedState=vg(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ut(s),i===null&&Gt&&(c=s.stateNode=hg(s.type,s.pendingProps,J.current),Le=s,Ai=!0,p=fe,Kn(s.type)?(Xh=p,fe=Di(c.firstChild)):fe=p),Fe(i,s,s.pendingProps.children,o),ao(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Gt&&((p=c=fe)&&(c=J_(c,s.type,s.pendingProps,Ai),c!==null?(s.stateNode=c,Le=s,fe=Di(c.firstChild),Ai=!1,p=!0):p=!1),p||jn(s)),ut(s),p=s.type,g=s.pendingProps,w=i!==null?i.memoizedProps:null,c=g.children,Uh(p,g)?c=null:w!==null&&Uh(p,w)&&(s.flags|=32),s.memoizedState!==null&&(p=Vc(i,s,v_,null,null,o),Pa._currentValue=p),ao(i,s),Fe(i,s,c,o),s.child;case 6:return i===null&&Gt&&((i=o=fe)&&(o=t1(o,s.pendingProps,Ai),o!==null?(s.stateNode=o,Le=s,fe=null,i=!0):i=!1),i||jn(s)),null;case 13:return tm(i,s,o);case 4:return vt(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=wr(s,null,c,o):Fe(i,s,c,o),s.child;case 11:return Wp(i,s,s.type,s.pendingProps,o);case 7:return Fe(i,s,s.pendingProps,o),s.child;case 8:return Fe(i,s,s.pendingProps.children,o),s.child;case 12:return Fe(i,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Ln(s,s.type,c.value),Fe(i,s,c.children,o),s.child;case 9:return p=s.type._context,c=s.pendingProps.children,br(s),p=Be(p),c=c(p),s.flags|=1,Fe(i,s,c,o),s.child;case 14:return qp(i,s,s.type,s.pendingProps,o);case 15:return Xp(i,s,s.type,s.pendingProps,o);case 19:return im(i,s,o);case 31:return __(i,s,o);case 22:return Gp(i,s,o,s.pendingProps);case 24:return br(s),c=Be(Ee),i===null?(p=Nc(),p===null&&(p=le,g=Rc(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=o),p=g),s.memoizedState={parent:c,cache:p},kc(s),Ln(s,Ee,p)):((i.lanes&o)!==0&&(zc(i,s),ba(s,null,null,o),ya()),p=i.memoizedState,g=s.memoizedState,p.parent!==c?(p={parent:c,cache:c},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Ln(s,Ee,c)):(c=g.cache,Ln(s,Ee,c),c!==p.cache&&Ac(s,[Ee],o,!0))),Fe(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function dn(i){i.flags|=4}function ph(i,s,o,c,p){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(Dm())i.flags|=8192;else throw _r=Wl,Oc}else i.flags&=-16777217}function rm(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!bg(s))if(Dm())i.flags|=8192;else throw _r=Wl,Oc}function oo(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Bd():536870912,i.lanes|=s,ws|=s)}function Ca(i,s){if(!Gt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function de(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,c=0;if(s)for(var p=i.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)o|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=o,s}function E_(i,s,o){var c=s.pendingProps;switch(wc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(s),null;case 1:return de(s),null;case 3:return o=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),un(Ee),pt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(cs(s)?dn(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Cc())),de(s),null;case 26:var p=s.type,g=s.memoizedState;return i===null?(dn(s),g!==null?(de(s),rm(s,g)):(de(s),ph(s,p,null,c,o))):g?g!==i.memoizedState?(dn(s),de(s),rm(s,g)):(de(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&dn(s),de(s),ph(s,p,i,c,o)),null;case 27:if(dt(s),o=J.current,p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&dn(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return de(s),null}i=q.current,cs(s)?Bv(s):(i=hg(p,c,o),s.stateNode=i,dn(s))}return de(s),null;case 5:if(dt(s),p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&dn(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return de(s),null}if(g=q.current,cs(s))Bv(s);else{var w=Eo(J.current);switch(g){case 1:g=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=w.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?w.createElement(p,{is:c.is}):w.createElement(p)}}g[je]=s,g[ti]=c;t:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break t;for(;w.sibling===null;){if(w.return===null||w.return===s)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=g;t:switch(Pe(g,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&dn(s)}}return de(s),ph(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&dn(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(i=J.current,cs(s)){if(i=s.stateNode,o=s.memoizedProps,c=null,p=Le,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[je]=s,i=!!(i.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||tg(i.nodeValue,o)),i||jn(s,!0)}else i=Eo(i).createTextNode(c),i[je]=s,s.stateNode=i}return de(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(c=cs(s),o!==null){if(i===null){if(!c)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[je]=s}else gr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;de(s),i=!1}else o=Cc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(pi(s),s):(pi(s),null);if((s.flags&128)!==0)throw Error(n(558))}return de(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=cs(s),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[je]=s}else gr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;de(s),p=!1}else p=Cc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(pi(s),s):(pi(s),null)}return pi(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,i=i!==null&&i.memoizedState!==null,o&&(c=s.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==p&&(c.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),oo(s,s.updateQueue),de(s),null);case 4:return pt(),i===null&&Bh(s.stateNode.containerInfo),de(s),null;case 10:return un(s.type),de(s),null;case 19:if(L(xe),c=s.memoizedState,c===null)return de(s),null;if(p=(s.flags&128)!==0,g=c.rendering,g===null)if(p)Ca(c,!1);else{if(be!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=Kl(i),g!==null){for(s.flags|=128,Ca(c,!1),i=g.updateQueue,s.updateQueue=i,oo(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)Ov(o,i),o=o.sibling;return F(xe,xe.current&1|2),Gt&&ln(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&Qt()>vo&&(s.flags|=128,p=!0,Ca(c,!1),s.lanes=4194304)}else{if(!p)if(i=Kl(g),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,s.updateQueue=i,oo(s,i),Ca(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Gt)return de(s),null}else 2*Qt()-c.renderingStartTime>vo&&o!==536870912&&(s.flags|=128,p=!0,Ca(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(i=c.last,i!==null?i.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Qt(),i.sibling=null,o=xe.current,F(xe,p?o&1|2:o&1),Gt&&ln(s,c.treeForkCount),i):(de(s),null);case 22:case 23:return pi(s),Fc(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(de(s),s.subtreeFlags&6&&(s.flags|=8192)):de(s),o=s.updateQueue,o!==null&&oo(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),i!==null&&L(xr),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),un(Ee),de(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function C_(i,s){switch(wc(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return un(Ee),pt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return dt(s),null;case 31:if(s.memoizedState!==null){if(pi(s),s.alternate===null)throw Error(n(340));gr()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(pi(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));gr()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return L(xe),null;case 4:return pt(),null;case 10:return un(s.type),null;case 22:case 23:return pi(s),Fc(),i!==null&&L(xr),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return un(Ee),null;case 25:return null;default:return null}}function sm(i,s){switch(wc(s),s.tag){case 3:un(Ee),pt();break;case 26:case 27:case 5:dt(s);break;case 4:pt();break;case 31:s.memoizedState!==null&&pi(s);break;case 13:pi(s);break;case 19:L(xe);break;case 10:un(s.type);break;case 22:case 23:pi(s),Fc(),i!==null&&L(xr);break;case 24:un(Ee)}}function Ma(i,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var p=c.next;o=p;do{if((o.tag&i)===i){c=void 0;var g=o.create,w=o.inst;c=g(),w.destroy=c}o=o.next}while(o!==p)}}catch(R){ee(s,s.return,R)}}function Un(i,s,o){try{var c=s.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var g=p.next;c=g;do{if((c.tag&i)===i){var w=c.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,p=s;var P=o,K=R;try{K()}catch(lt){ee(p,P,lt)}}}c=c.next}while(c!==g)}}catch(lt){ee(s,s.return,lt)}}function am(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{Qv(s,o)}catch(c){ee(i,i.return,c)}}}function lm(i,s,o){o.props=Cr(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(c){ee(i,s,c)}}function Ta(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof o=="function"?i.refCleanup=o(c):o.current=c}}catch(p){ee(i,s,p)}}function Wi(i,s){var o=i.ref,c=i.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(p){ee(i,s,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){ee(i,s,p)}else o.current=null}function om(i){var s=i.type,o=i.memoizedProps,c=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(p){ee(i,i.return,p)}}function mh(i,s,o){try{var c=i.stateNode;X_(c,i.type,o,s),c[ti]=s}catch(p){ee(i,i.return,p)}}function um(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Kn(i.type)||i.tag===4}function gh(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||um(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Kn(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yh(i,s,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=rn));else if(c!==4&&(c===27&&Kn(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(yh(i,s,o),i=i.sibling;i!==null;)yh(i,s,o),i=i.sibling}function uo(i,s,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(c!==4&&(c===27&&Kn(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(uo(i,s,o),i=i.sibling;i!==null;)uo(i,s,o),i=i.sibling}function cm(i){var s=i.stateNode,o=i.memoizedProps;try{for(var c=i.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Pe(s,c,o),s[je]=i,s[ti]=o}catch(g){ee(i,i.return,g)}}var vn=!1,Te=!1,bh=!1,hm=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function M_(i,s){if(i=i.containerInfo,Ih=No,i=wv(i),fc(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var w=0,R=-1,P=-1,K=0,lt=0,ht=i,Q=null;e:for(;;){for(var nt;ht!==o||p!==0&&ht.nodeType!==3||(R=w+p),ht!==g||c!==0&&ht.nodeType!==3||(P=w+c),ht.nodeType===3&&(w+=ht.nodeValue.length),(nt=ht.firstChild)!==null;)Q=ht,ht=nt;for(;;){if(ht===i)break e;if(Q===o&&++K===p&&(R=w),Q===g&&++lt===c&&(P=w),(nt=ht.nextSibling)!==null)break;ht=Q,Q=ht.parentNode}ht=nt}o=R===-1||P===-1?null:{start:R,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Vh={focusedElem:i,selectionRange:o},No=!1,Oe=s;Oe!==null;)if(s=Oe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Oe=i;else for(;Oe!==null;){switch(s=Oe,g=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)p=i[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=s,p=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Et=Cr(o.type,p);i=c.getSnapshotBeforeUpdate(Et,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ot){ee(o,o.return,Ot)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Yh(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,Oe=i;break}Oe=s.return}}function fm(i,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:mn(i,o),c&4&&Ma(5,o);break;case 1:if(mn(i,o),c&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(w){ee(o,o.return,w)}else{var p=Cr(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(p,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){ee(o,o.return,w)}}c&64&&am(o),c&512&&Ta(o,o.return);break;case 3:if(mn(i,o),c&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Qv(i,s)}catch(w){ee(o,o.return,w)}}break;case 27:s===null&&c&4&&cm(o);case 26:case 5:mn(i,o),s===null&&c&4&&om(o),c&512&&Ta(o,o.return);break;case 12:mn(i,o);break;case 31:mn(i,o),c&4&&pm(i,o);break;case 13:mn(i,o),c&4&&mm(i,o),c&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=j_.bind(null,o),e1(i,o))));break;case 22:if(c=o.memoizedState!==null||vn,!c){s=s!==null&&s.memoizedState!==null||Te,p=vn;var g=Te;vn=c,(Te=s)&&!g?gn(i,o,(o.subtreeFlags&8772)!==0):mn(i,o),vn=p,Te=g}break;case 30:break;default:mn(i,o)}}function dm(i){var s=i.alternate;s!==null&&(i.alternate=null,dm(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ku(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ve=null,ii=!1;function pn(i,s,o){for(o=o.child;o!==null;)vm(i,s,o),o=o.sibling}function vm(i,s,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Ze,o)}catch{}switch(o.tag){case 26:Te||Wi(o,s),pn(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Te||Wi(o,s);var c=ve,p=ii;Kn(o.type)&&(ve=o.stateNode,ii=!1),pn(i,s,o),La(o.stateNode),ve=c,ii=p;break;case 5:Te||Wi(o,s);case 6:if(c=ve,p=ii,ve=null,pn(i,s,o),ve=c,ii=p,ve!==null)if(ii)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(o.stateNode)}catch(g){ee(o,s,g)}else try{ve.removeChild(o.stateNode)}catch(g){ee(o,s,g)}break;case 18:ve!==null&&(ii?(i=ve,ag(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Ns(i)):ag(ve,o.stateNode));break;case 4:c=ve,p=ii,ve=o.stateNode.containerInfo,ii=!0,pn(i,s,o),ve=c,ii=p;break;case 0:case 11:case 14:case 15:Un(2,o,s),Te||Un(4,o,s),pn(i,s,o);break;case 1:Te||(Wi(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&lm(o,s,c)),pn(i,s,o);break;case 21:pn(i,s,o);break;case 22:Te=(c=Te)||o.memoizedState!==null,pn(i,s,o),Te=c;break;default:pn(i,s,o)}}function pm(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ns(i)}catch(o){ee(s,s.return,o)}}}function mm(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ns(i)}catch(o){ee(s,s.return,o)}}function T_(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new hm),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new hm),s;default:throw Error(n(435,i.tag))}}function co(i,s){var o=T_(i);s.forEach(function(c){if(!o.has(c)){o.add(c);var p=L_.bind(null,i,c);c.then(p,p)}})}function ni(i,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var p=o[c],g=i,w=s,R=w;t:for(;R!==null;){switch(R.tag){case 27:if(Kn(R.type)){ve=R.stateNode,ii=!1;break t}break;case 5:ve=R.stateNode,ii=!1;break t;case 3:case 4:ve=R.stateNode.containerInfo,ii=!0;break t}R=R.return}if(ve===null)throw Error(n(160));vm(g,w,p),ve=null,ii=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gm(s,i),s=s.sibling}var Bi=null;function gm(i,s){var o=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ni(s,i),ri(i),c&4&&(Un(3,i,i.return),Ma(3,i),Un(5,i,i.return));break;case 1:ni(s,i),ri(i),c&512&&(Te||o===null||Wi(o,o.return)),c&64&&vn&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var p=Bi;if(ni(s,i),ri(i),c&512&&(Te||o===null||Wi(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=i.memoizedState,o===null)if(c===null)if(i.stateNode===null){t:{c=i.type,o=i.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":g=p.getElementsByTagName("title")[0],(!g||g[ta]||g[je]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(c),p.head.insertBefore(g,p.querySelector("head > title"))),Pe(g,c,o),g[je]=i,Ne(g),c=g;break t;case"link":var w=gg("link","href",p).get(c+(o.href||""));if(w){for(var R=0;R<w.length;R++)if(g=w[R],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(R,1);break e}}g=p.createElement(c),Pe(g,c,o),p.head.appendChild(g);break;case"meta":if(w=gg("meta","content",p).get(c+(o.content||""))){for(R=0;R<w.length;R++)if(g=w[R],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(R,1);break e}}g=p.createElement(c),Pe(g,c,o),p.head.appendChild(g);break;default:throw Error(n(468,c))}g[je]=i,Ne(g),c=g}i.stateNode=c}else yg(p,i.type,i.stateNode);else i.stateNode=mg(p,c,i.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?yg(p,i.type,i.stateNode):mg(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&mh(i,i.memoizedProps,o.memoizedProps)}break;case 27:ni(s,i),ri(i),c&512&&(Te||o===null||Wi(o,o.return)),o!==null&&c&4&&mh(i,i.memoizedProps,o.memoizedProps);break;case 5:if(ni(s,i),ri(i),c&512&&(Te||o===null||Wi(o,o.return)),i.flags&32){p=i.stateNode;try{ts(p,"")}catch(Et){ee(i,i.return,Et)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,mh(i,p,o!==null?o.memoizedProps:p)),c&1024&&(bh=!0);break;case 6:if(ni(s,i),ri(i),c&4){if(i.stateNode===null)throw Error(n(162));c=i.memoizedProps,o=i.stateNode;try{o.nodeValue=c}catch(Et){ee(i,i.return,Et)}}break;case 3:if(To=null,p=Bi,Bi=Co(s.containerInfo),ni(s,i),Bi=p,ri(i),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Ns(s.containerInfo)}catch(Et){ee(i,i.return,Et)}bh&&(bh=!1,ym(i));break;case 4:c=Bi,Bi=Co(i.stateNode.containerInfo),ni(s,i),ri(i),Bi=c;break;case 12:ni(s,i),ri(i);break;case 31:ni(s,i),ri(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,co(i,c)));break;case 13:ni(s,i),ri(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fo=Qt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,co(i,c)));break;case 22:p=i.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,K=vn,lt=Te;if(vn=K||p,Te=lt||P,ni(s,i),Te=lt,vn=K,ri(i),c&8192)t:for(s=i.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(o===null||P||vn||Te||Mr(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){P=o=s;try{if(g=P.stateNode,p)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{R=P.stateNode;var ht=P.memoizedProps.style,Q=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;R.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Et){ee(P,P.return,Et)}}}else if(s.tag===6){if(o===null){P=s;try{P.stateNode.nodeValue=p?"":P.memoizedProps}catch(Et){ee(P,P.return,Et)}}}else if(s.tag===18){if(o===null){P=s;try{var nt=P.stateNode;p?lg(nt,!0):lg(P.stateNode,!1)}catch(Et){ee(P,P.return,Et)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,co(i,o))));break;case 19:ni(s,i),ri(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,co(i,c)));break;case 30:break;case 21:break;default:ni(s,i),ri(i)}}function ri(i){var s=i.flags;if(s&2){try{for(var o,c=i.return;c!==null;){if(um(c)){o=c;break}c=c.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var p=o.stateNode,g=gh(i);uo(i,g,p);break;case 5:var w=o.stateNode;o.flags&32&&(ts(w,""),o.flags&=-33);var R=gh(i);uo(i,R,w);break;case 3:case 4:var P=o.stateNode.containerInfo,K=gh(i);yh(i,K,P);break;default:throw Error(n(161))}}catch(lt){ee(i,i.return,lt)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function ym(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;ym(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function mn(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)fm(i,s.alternate,s),s=s.sibling}function Mr(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Un(4,s,s.return),Mr(s);break;case 1:Wi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&lm(s,s.return,o),Mr(s);break;case 27:La(s.stateNode);case 26:case 5:Wi(s,s.return),Mr(s);break;case 22:s.memoizedState===null&&Mr(s);break;case 30:Mr(s);break;default:Mr(s)}i=i.sibling}}function gn(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,p=i,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:gn(p,g,o),Ma(4,g);break;case 1:if(gn(p,g,o),c=g,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){ee(c,c.return,K)}if(c=g,p=c.updateQueue,p!==null){var R=c.stateNode;try{var P=p.shared.hiddenCallbacks;if(P!==null)for(p.shared.hiddenCallbacks=null,p=0;p<P.length;p++)Kv(P[p],R)}catch(K){ee(c,c.return,K)}}o&&w&64&&am(g),Ta(g,g.return);break;case 27:cm(g);case 26:case 5:gn(p,g,o),o&&c===null&&w&4&&om(g),Ta(g,g.return);break;case 12:gn(p,g,o);break;case 31:gn(p,g,o),o&&w&4&&pm(p,g);break;case 13:gn(p,g,o),o&&w&4&&mm(p,g);break;case 22:g.memoizedState===null&&gn(p,g,o),Ta(g,g.return);break;case 30:break;default:gn(p,g,o)}s=s.sibling}}function xh(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&da(o))}function Sh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&da(i))}function Fi(i,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)bm(i,s,o,c),s=s.sibling}function bm(i,s,o,c){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Fi(i,s,o,c),p&2048&&Ma(9,s);break;case 1:Fi(i,s,o,c);break;case 3:Fi(i,s,o,c),p&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&da(i)));break;case 12:if(p&2048){Fi(i,s,o,c),i=s.stateNode;try{var g=s.memoizedProps,w=g.id,R=g.onPostCommit;typeof R=="function"&&R(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){ee(s,s.return,P)}}else Fi(i,s,o,c);break;case 31:Fi(i,s,o,c);break;case 13:Fi(i,s,o,c);break;case 23:break;case 22:g=s.stateNode,w=s.alternate,s.memoizedState!==null?g._visibility&2?Fi(i,s,o,c):Aa(i,s):g._visibility&2?Fi(i,s,o,c):(g._visibility|=2,xs(i,s,o,c,(s.subtreeFlags&10256)!==0||!1)),p&2048&&xh(w,s);break;case 24:Fi(i,s,o,c),p&2048&&Sh(s.alternate,s);break;default:Fi(i,s,o,c)}}function xs(i,s,o,c,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=i,w=s,R=o,P=c,K=w.flags;switch(w.tag){case 0:case 11:case 15:xs(g,w,R,P,p),Ma(8,w);break;case 23:break;case 22:var lt=w.stateNode;w.memoizedState!==null?lt._visibility&2?xs(g,w,R,P,p):Aa(g,w):(lt._visibility|=2,xs(g,w,R,P,p)),p&&K&2048&&xh(w.alternate,w);break;case 24:xs(g,w,R,P,p),p&&K&2048&&Sh(w.alternate,w);break;default:xs(g,w,R,P,p)}s=s.sibling}}function Aa(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,c=s,p=c.flags;switch(c.tag){case 22:Aa(o,c),p&2048&&xh(c.alternate,c);break;case 24:Aa(o,c),p&2048&&Sh(c.alternate,c);break;default:Aa(o,c)}s=s.sibling}}var Ra=8192;function Ss(i,s,o){if(i.subtreeFlags&Ra)for(i=i.child;i!==null;)xm(i,s,o),i=i.sibling}function xm(i,s,o){switch(i.tag){case 26:Ss(i,s,o),i.flags&Ra&&i.memoizedState!==null&&d1(o,Bi,i.memoizedState,i.memoizedProps);break;case 5:Ss(i,s,o);break;case 3:case 4:var c=Bi;Bi=Co(i.stateNode.containerInfo),Ss(i,s,o),Bi=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Ra,Ra=16777216,Ss(i,s,o),Ra=c):Ss(i,s,o));break;default:Ss(i,s,o)}}function Sm(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Da(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Oe=c,wm(c,i)}Sm(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_m(i),i=i.sibling}function _m(i){switch(i.tag){case 0:case 11:case 15:Da(i),i.flags&2048&&Un(9,i,i.return);break;case 3:Da(i);break;case 12:Da(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ho(i)):Da(i);break;default:Da(i)}}function ho(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Oe=c,wm(c,i)}Sm(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Un(8,s,s.return),ho(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ho(s));break;default:ho(s)}i=i.sibling}}function wm(i,s){for(;Oe!==null;){var o=Oe;switch(o.tag){case 0:case 11:case 15:Un(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:da(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Oe=c;else t:for(o=i;Oe!==null;){c=Oe;var p=c.sibling,g=c.return;if(dm(c),c===o){Oe=null;break t}if(p!==null){p.return=g,Oe=p;break t}Oe=g}}}var A_={getCacheForType:function(i){var s=Be(Ee),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return Be(Ee).controller.signal}},R_=typeof WeakMap=="function"?WeakMap:Map,Jt=0,le=null,Ht=null,qt=0,te=0,mi=null,Hn=!1,_s=!1,_h=!1,yn=0,be=0,Yn=0,Tr=0,wh=0,gi=0,ws=0,Na=null,si=null,Eh=!1,fo=0,Em=0,vo=1/0,po=null,Wn=null,Ae=0,qn=null,Es=null,bn=0,Ch=0,Mh=null,Cm=null,Oa=0,Th=null;function yi(){return(Jt&2)!==0&&qt!==0?qt&-qt:z.T!==null?kh():Vd()}function Mm(){if(gi===0)if((qt&536870912)===0||Gt){var i=Xr;Xr<<=1,(Xr&3932160)===0&&(Xr=262144),gi=i}else gi=536870912;return i=vi.current,i!==null&&(i.flags|=32),gi}function ai(i,s,o){(i===le&&(te===2||te===9)||i.cancelPendingCommit!==null)&&(Cs(i,0),Xn(i,qt,gi,!1)),Js(i,o),((Jt&2)===0||i!==le)&&(i===le&&((Jt&2)===0&&(Tr|=o),be===4&&Xn(i,qt,gi,!1)),qi(i))}function Tm(i,s,o){if((Jt&6)!==0)throw Error(n(327));var c=!o&&(s&127)===0&&(s&i.expiredLanes)===0||Zs(i,s),p=c?O_(i,s):Rh(i,s,!0),g=c;do{if(p===0){_s&&!c&&Xn(i,s,0,!1);break}else{if(o=i.current.alternate,g&&!D_(o)){p=Rh(i,s,!1),g=!1;continue}if(p===2){if(g=s,i.errorRecoveryDisabledLanes&g)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var R=i;p=Na;var P=R.current.memoizedState.isDehydrated;if(P&&(Cs(R,w).flags|=256),w=Rh(R,w,!1),w!==2){if(_h&&!P){R.errorRecoveryDisabledLanes|=g,Tr|=g,p=4;break t}g=si,si=p,g!==null&&(si===null?si=g:si.push.apply(si,g))}p=w}if(g=!1,p!==2)continue}}if(p===1){Cs(i,0),Xn(i,s,0,!0);break}t:{switch(c=i,g=p,g){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Xn(c,s,gi,!Hn);break t;case 2:si=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(p=fo+300-Qt(),10<p)){if(Xn(c,s,gi,!Hn),El(c,0,!0)!==0)break t;bn=s,c.timeoutHandle=rg(Am.bind(null,c,o,si,po,Eh,s,gi,Tr,ws,Hn,g,"Throttled",-0,0),p);break t}Am(c,o,si,po,Eh,s,gi,Tr,ws,Hn,g,null,-0,0)}}break}while(!0);qi(i)}function Am(i,s,o,c,p,g,w,R,P,K,lt,ht,Q,nt){if(i.timeoutHandle=-1,ht=s.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rn},xm(s,g,ht);var Et=(g&62914560)===g?fo-Qt():(g&4194048)===g?Em-Qt():0;if(Et=v1(ht,Et),Et!==null){bn=g,i.cancelPendingCommit=Et(Lm.bind(null,i,s,g,o,c,p,w,R,P,lt,ht,null,Q,nt)),Xn(i,g,w,!K);return}}Lm(i,s,g,o,c,p,w,R,P)}function D_(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var p=o[c],g=p.getSnapshot;p=p.value;try{if(!fi(g(),p))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xn(i,s,o,c){s&=~wh,s&=~Tr,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var p=s;0<p;){var g=31-he(p),w=1<<g;c[g]=-1,p&=~w}o!==0&&Fd(i,o,s)}function mo(){return(Jt&6)===0?(ka(0),!1):!0}function Ah(){if(Ht!==null){if(te===0)var i=Ht.return;else i=Ht,on=yr=null,Yc(i),ps=null,pa=0,i=Ht;for(;i!==null;)sm(i.alternate,i),i=i.return;Ht=null}}function Cs(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,Q_(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),bn=0,Ah(),le=i,Ht=o=an(i.current,null),qt=s,te=0,mi=null,Hn=!1,_s=Zs(i,s),_h=!1,ws=gi=wh=Tr=Yn=be=0,si=Na=null,Eh=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var p=31-he(c),g=1<<p;s|=i[p],c&=~g}return yn=s,Ll(),o}function Rm(i,s){Bt=null,z.H=wa,s===vs||s===Yl?(s=Wv(),te=3):s===Oc?(s=Wv(),te=4):te=s===ah?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mi=s,Ht===null&&(be=1,ro(i,Ci(s,i.current)))}function Dm(){var i=vi.current;return i===null?!0:(qt&4194048)===qt?Ri===null:(qt&62914560)===qt||(qt&536870912)!==0?i===Ri:!1}function Nm(){var i=z.H;return z.H=wa,i===null?wa:i}function Om(){var i=z.A;return z.A=A_,i}function go(){be=4,Hn||(qt&4194048)!==qt&&vi.current!==null||(_s=!0),(Yn&134217727)===0&&(Tr&134217727)===0||le===null||Xn(le,qt,gi,!1)}function Rh(i,s,o){var c=Jt;Jt|=2;var p=Nm(),g=Om();(le!==i||qt!==s)&&(po=null,Cs(i,s)),s=!1;var w=be;t:do try{if(te!==0&&Ht!==null){var R=Ht,P=mi;switch(te){case 8:Ah(),w=6;break t;case 3:case 2:case 9:case 6:vi.current===null&&(s=!0);var K=te;if(te=0,mi=null,Ms(i,R,P,K),o&&_s){w=0;break t}break;default:K=te,te=0,mi=null,Ms(i,R,P,K)}}N_(),w=be;break}catch(lt){Rm(i,lt)}while(!0);return s&&i.shellSuspendCounter++,on=yr=null,Jt=c,z.H=p,z.A=g,Ht===null&&(le=null,qt=0,Ll()),w}function N_(){for(;Ht!==null;)km(Ht)}function O_(i,s){var o=Jt;Jt|=2;var c=Nm(),p=Om();le!==i||qt!==s?(po=null,vo=Qt()+500,Cs(i,s)):_s=Zs(i,s);t:do try{if(te!==0&&Ht!==null){s=Ht;var g=mi;e:switch(te){case 1:te=0,mi=null,Ms(i,s,g,1);break;case 2:case 9:if(Hv(g)){te=0,mi=null,zm(s);break}s=function(){te!==2&&te!==9||le!==i||(te=7),qi(i)},g.then(s,s);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:Hv(g)?(te=0,mi=null,zm(s)):(te=0,mi=null,Ms(i,s,g,7));break;case 5:var w=null;switch(Ht.tag){case 26:w=Ht.memoizedState;case 5:case 27:var R=Ht;if(w?bg(w):R.stateNode.complete){te=0,mi=null;var P=R.sibling;if(P!==null)Ht=P;else{var K=R.return;K!==null?(Ht=K,yo(K)):Ht=null}break e}}te=0,mi=null,Ms(i,s,g,5);break;case 6:te=0,mi=null,Ms(i,s,g,6);break;case 8:Ah(),be=6;break t;default:throw Error(n(462))}}k_();break}catch(lt){Rm(i,lt)}while(!0);return on=yr=null,z.H=c,z.A=p,Jt=o,Ht!==null?0:(le=null,qt=0,Ll(),be)}function k_(){for(;Ht!==null&&!Lt();)km(Ht)}function km(i){var s=nm(i.alternate,i,yn);i.memoizedProps=i.pendingProps,s===null?yo(i):Ht=s}function zm(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=$p(o,s,s.pendingProps,s.type,void 0,qt);break;case 11:s=$p(o,s,s.pendingProps,s.type.render,s.ref,qt);break;case 5:Yc(s);default:sm(o,s),s=Ht=Ov(s,yn),s=nm(o,s,yn)}i.memoizedProps=i.pendingProps,s===null?yo(i):Ht=s}function Ms(i,s,o,c){on=yr=null,Yc(s),ps=null,pa=0;var p=s.return;try{if(S_(i,p,s,o,qt)){be=1,ro(i,Ci(o,i.current)),Ht=null;return}}catch(g){if(p!==null)throw Ht=p,g;be=1,ro(i,Ci(o,i.current)),Ht=null;return}s.flags&32768?(Gt||c===1?i=!0:_s||(qt&536870912)!==0?i=!1:(Hn=i=!0,(c===2||c===9||c===3||c===6)&&(c=vi.current,c!==null&&c.tag===13&&(c.flags|=16384))),jm(s,i)):yo(s)}function yo(i){var s=i;do{if((s.flags&32768)!==0){jm(s,Hn);return}i=s.return;var o=E_(s.alternate,s,yn);if(o!==null){Ht=o;return}if(s=s.sibling,s!==null){Ht=s;return}Ht=s=i}while(s!==null);be===0&&(be=5)}function jm(i,s){do{var o=C_(i.alternate,i);if(o!==null){o.flags&=32767,Ht=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Ht=i;return}Ht=i=o}while(i!==null);be=6,Ht=null}function Lm(i,s,o,c,p,g,w,R,P){i.cancelPendingCommit=null;do bo();while(Ae!==0);if((Jt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(g=s.lanes|s.childLanes,g|=gc,fS(i,o,g,w,R,P),i===le&&(Ht=le=null,qt=0),Es=s,qn=i,bn=o,Ch=g,Mh=p,Cm=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,B_(ge,function(){return Vm(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,p=U.p,U.p=2,w=Jt,Jt|=4;try{M_(i,s,o)}finally{Jt=w,U.p=p,z.T=c}}Ae=1,Bm(),Fm(),Pm()}}function Bm(){if(Ae===1){Ae=0;var i=qn,s=Es,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var c=U.p;U.p=2;var p=Jt;Jt|=4;try{gm(s,i);var g=Vh,w=wv(i.containerInfo),R=g.focusedElem,P=g.selectionRange;if(w!==R&&R&&R.ownerDocument&&_v(R.ownerDocument.documentElement,R)){if(P!==null&&fc(R)){var K=P.start,lt=P.end;if(lt===void 0&&(lt=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(lt,R.value.length);else{var ht=R.ownerDocument||document,Q=ht&&ht.defaultView||window;if(Q.getSelection){var nt=Q.getSelection(),Et=R.textContent.length,Ot=Math.min(P.start,Et),re=P.end===void 0?Ot:Math.min(P.end,Et);!nt.extend&&Ot>re&&(w=re,re=Ot,Ot=w);var Y=Sv(R,Ot),H=Sv(R,re);if(Y&&H&&(nt.rangeCount!==1||nt.anchorNode!==Y.node||nt.anchorOffset!==Y.offset||nt.focusNode!==H.node||nt.focusOffset!==H.offset)){var G=ht.createRange();G.setStart(Y.node,Y.offset),nt.removeAllRanges(),Ot>re?(nt.addRange(G),nt.extend(H.node,H.offset)):(G.setEnd(H.node,H.offset),nt.addRange(G))}}}}for(ht=[],nt=R;nt=nt.parentNode;)nt.nodeType===1&&ht.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ht.length;R++){var ct=ht[R];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}No=!!Ih,Vh=Ih=null}finally{Jt=p,U.p=c,z.T=o}}i.current=s,Ae=2}}function Fm(){if(Ae===2){Ae=0;var i=qn,s=Es,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var c=U.p;U.p=2;var p=Jt;Jt|=4;try{fm(i,s.alternate,s)}finally{Jt=p,U.p=c,z.T=o}}Ae=3}}function Pm(){if(Ae===4||Ae===3){Ae=0,ae();var i=qn,s=Es,o=bn,c=Cm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ae=5:(Ae=0,Es=qn=null,Im(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Wn=null),Xu(o),s=s.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Ze,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=z.T,p=U.p,U.p=2,z.T=null;try{for(var g=i.onRecoverableError,w=0;w<c.length;w++){var R=c[w];g(R.value,{componentStack:R.stack})}}finally{z.T=s,U.p=p}}(bn&3)!==0&&bo(),qi(i),p=i.pendingLanes,(o&261930)!==0&&(p&42)!==0?i===Th?Oa++:(Oa=0,Th=i):Oa=0,ka(0)}}function Im(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,da(s)))}function bo(){return Bm(),Fm(),Pm(),Vm()}function Vm(){if(Ae!==5)return!1;var i=qn,s=Ch;Ch=0;var o=Xu(bn),c=z.T,p=U.p;try{U.p=32>o?32:o,z.T=null,o=Mh,Mh=null;var g=qn,w=bn;if(Ae=0,Es=qn=null,bn=0,(Jt&6)!==0)throw Error(n(331));var R=Jt;if(Jt|=4,_m(g.current),bm(g,g.current,w,o),Jt=R,ka(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Ze,g)}catch{}return!0}finally{U.p=p,z.T=c,Im(i,s)}}function Um(i,s,o){s=Ci(o,s),s=sh(i.stateNode,s,2),i=Pn(i,s,2),i!==null&&(Js(i,2),qi(i))}function ee(i,s,o){if(i.tag===3)Um(i,i,o);else for(;s!==null;){if(s.tag===3){Um(s,i,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wn===null||!Wn.has(c))){i=Ci(o,i),o=Hp(2),c=Pn(s,o,2),c!==null&&(Yp(o,c,s,i),Js(c,2),qi(c));break}}s=s.return}}function Dh(i,s,o){var c=i.pingCache;if(c===null){c=i.pingCache=new R_;var p=new Set;c.set(s,p)}else p=c.get(s),p===void 0&&(p=new Set,c.set(s,p));p.has(o)||(_h=!0,p.add(o),i=z_.bind(null,i,s,o),s.then(i,i))}function z_(i,s,o){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,le===i&&(qt&o)===o&&(be===4||be===3&&(qt&62914560)===qt&&300>Qt()-fo?(Jt&2)===0&&Cs(i,0):wh|=o,ws===qt&&(ws=0)),qi(i)}function Hm(i,s){s===0&&(s=Bd()),i=pr(i,s),i!==null&&(Js(i,s),qi(i))}function j_(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),Hm(i,o)}function L_(i,s){var o=0;switch(i.tag){case 31:case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(o=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(s),Hm(i,o)}function B_(i,s){return wt(i,s)}var xo=null,Ts=null,Nh=!1,So=!1,Oh=!1,Gn=0;function qi(i){i!==Ts&&i.next===null&&(Ts===null?xo=Ts=i:Ts=Ts.next=i),So=!0,Nh||(Nh=!0,P_())}function ka(i,s){if(!Oh&&So){Oh=!0;do for(var o=!1,c=xo;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var g=0;else{var w=c.suspendedLanes,R=c.pingedLanes;g=(1<<31-he(42|i)+1)-1,g&=p&~(w&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Xm(c,g))}else g=qt,g=El(c,c===le?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Zs(c,g)||(o=!0,Xm(c,g));c=c.next}while(o);Oh=!1}}function F_(){Ym()}function Ym(){So=Nh=!1;var i=0;Gn!==0&&K_()&&(i=Gn);for(var s=Qt(),o=null,c=xo;c!==null;){var p=c.next,g=Wm(c,s);g===0?(c.next=null,o===null?xo=p:o.next=p,p===null&&(Ts=o)):(o=c,(i!==0||(g&3)!==0)&&(So=!0)),c=p}Ae!==0&&Ae!==5||ka(i),Gn!==0&&(Gn=0)}function Wm(i,s){for(var o=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var w=31-he(g),R=1<<w,P=p[w];P===-1?((R&o)===0||(R&c)!==0)&&(p[w]=hS(R,s)):P<=s&&(i.expiredLanes|=R),g&=~R}if(s=le,o=qt,o=El(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,o===0||i===s&&(te===2||te===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Nt(c),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Zs(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(c!==null&&Nt(c),Xu(o)){case 2:case 8:o=ce;break;case 32:o=ge;break;case 268435456:o=Ge;break;default:o=ge}return c=qm.bind(null,i),o=wt(o,c),i.callbackPriority=s,i.callbackNode=o,s}return c!==null&&c!==null&&Nt(c),i.callbackPriority=2,i.callbackNode=null,2}function qm(i,s){if(Ae!==0&&Ae!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(bo()&&i.callbackNode!==o)return null;var c=qt;return c=El(i,i===le?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Tm(i,c,s),Wm(i,Qt()),i.callbackNode!=null&&i.callbackNode===o?qm.bind(null,i):null)}function Xm(i,s){if(bo())return null;Tm(i,s,!0)}function P_(){$_(function(){(Jt&6)!==0?wt(Xe,F_):Ym()})}function kh(){if(Gn===0){var i=fs;i===0&&(i=en,en<<=1,(en&261888)===0&&(en=256)),Gn=i}return Gn}function Gm(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Al(""+i)}function Km(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function I_(i,s,o,c,p){if(s==="submit"&&o&&o.stateNode===p){var g=Gm((p[ti]||null).action),w=c.submitter;w&&(s=(s=w[ti]||null)?Gm(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var R=new Ol("action","action",null,c,p);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Gn!==0){var P=w?Km(p,w):new FormData(p);Jc(o,{pending:!0,data:P,method:p.method,action:g},null,P)}}else typeof g=="function"&&(R.preventDefault(),P=w?Km(p,w):new FormData(p),Jc(o,{pending:!0,data:P,method:p.method,action:g},g,P))},currentTarget:p}]})}}for(var zh=0;zh<mc.length;zh++){var jh=mc[zh],V_=jh.toLowerCase(),U_=jh[0].toUpperCase()+jh.slice(1);Li(V_,"on"+U_)}Li(Mv,"onAnimationEnd"),Li(Tv,"onAnimationIteration"),Li(Av,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(r_,"onTransitionRun"),Li(s_,"onTransitionStart"),Li(a_,"onTransitionCancel"),Li(Rv,"onTransitionEnd"),Zr("onMouseEnter",["mouseout","mouseover"]),Zr("onMouseLeave",["mouseout","mouseover"]),Zr("onPointerEnter",["pointerout","pointerover"]),Zr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(za));function Qm(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var c=i[o],p=c.event;c=c.listeners;t:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var R=c[w],P=R.instance,K=R.currentTarget;if(R=R.listener,P!==g&&p.isPropagationStopped())break t;g=R,p.currentTarget=K;try{g(p)}catch(lt){jl(lt)}p.currentTarget=null,g=P}else for(w=0;w<c.length;w++){if(R=c[w],P=R.instance,K=R.currentTarget,R=R.listener,P!==g&&p.isPropagationStopped())break t;g=R,p.currentTarget=K;try{g(p)}catch(lt){jl(lt)}p.currentTarget=null,g=P}}}}function Yt(i,s){var o=s[Gu];o===void 0&&(o=s[Gu]=new Set);var c=i+"__bubble";o.has(c)||($m(s,i,2,!1),o.add(c))}function Lh(i,s,o){var c=0;s&&(c|=4),$m(o,i,c,s)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Bh(i){if(!i[_o]){i[_o]=!0,Yd.forEach(function(o){o!=="selectionchange"&&(H_.has(o)||Lh(o,!1,i),Lh(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[_o]||(s[_o]=!0,Lh("selectionchange",!1,s))}}function $m(i,s,o,c){switch(Mg(s)){case 2:var p=g1;break;case 8:p=y1;break;default:p=Zh}o=p.bind(null,s,o,i),p=void 0,!nc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(s,o,{capture:!0,passive:p}):i.addEventListener(s,o,!0):p!==void 0?i.addEventListener(s,o,{passive:p}):i.addEventListener(s,o,!1)}function Fh(i,s,o,c,p){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===p)break;if(w===4)for(w=c.return;w!==null;){var P=w.tag;if((P===3||P===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;R!==null;){if(w=Kr(R),w===null)return;if(P=w.tag,P===5||P===6||P===26||P===27){c=g=w;continue t}R=R.parentNode}}c=c.return}iv(function(){var K=g,lt=ec(o),ht=[];t:{var Q=Dv.get(i);if(Q!==void 0){var nt=Ol,Et=i;switch(i){case"keypress":if(Dl(o)===0)break t;case"keydown":case"keyup":nt=LS;break;case"focusin":Et="focus",nt=lc;break;case"focusout":Et="blur",nt=lc;break;case"beforeblur":case"afterblur":nt=lc;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=sv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=ES;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=PS;break;case Mv:case Tv:case Av:nt=TS;break;case Rv:nt=VS;break;case"scroll":case"scrollend":nt=_S;break;case"wheel":nt=HS;break;case"copy":case"cut":case"paste":nt=RS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=lv;break;case"toggle":case"beforetoggle":nt=WS}var Ot=(s&4)!==0,re=!Ot&&(i==="scroll"||i==="scrollend"),Y=Ot?Q!==null?Q+"Capture":null:Q;Ot=[];for(var H=K,G;H!==null;){var ct=H;if(G=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||G===null||Y===null||(ct=ia(H,Y),ct!=null&&Ot.push(ja(H,ct,G))),re)break;H=H.return}0<Ot.length&&(Q=new nt(Q,Et,null,o,lt),ht.push({event:Q,listeners:Ot}))}}if((s&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",nt=i==="mouseout"||i==="pointerout",Q&&o!==tc&&(Et=o.relatedTarget||o.fromElement)&&(Kr(Et)||Et[Gr]))break t;if((nt||Q)&&(Q=lt.window===lt?lt:(Q=lt.ownerDocument)?Q.defaultView||Q.parentWindow:window,nt?(Et=o.relatedTarget||o.toElement,nt=K,Et=Et?Kr(Et):null,Et!==null&&(re=l(Et),Ot=Et.tag,Et!==re||Ot!==5&&Ot!==27&&Ot!==6)&&(Et=null)):(nt=null,Et=K),nt!==Et)){if(Ot=sv,ct="onMouseLeave",Y="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ot=lv,ct="onPointerLeave",Y="onPointerEnter",H="pointer"),re=nt==null?Q:ea(nt),G=Et==null?Q:ea(Et),Q=new Ot(ct,H+"leave",nt,o,lt),Q.target=re,Q.relatedTarget=G,ct=null,Kr(lt)===K&&(Ot=new Ot(Y,H+"enter",Et,o,lt),Ot.target=G,Ot.relatedTarget=re,ct=Ot),re=ct,nt&&Et)e:{for(Ot=Y_,Y=nt,H=Et,G=0,ct=Y;ct;ct=Ot(ct))G++;ct=0;for(var Tt=H;Tt;Tt=Ot(Tt))ct++;for(;0<G-ct;)Y=Ot(Y),G--;for(;0<ct-G;)H=Ot(H),ct--;for(;G--;){if(Y===H||H!==null&&Y===H.alternate){Ot=Y;break e}Y=Ot(Y),H=Ot(H)}Ot=null}else Ot=null;nt!==null&&Zm(ht,Q,nt,Ot,!1),Et!==null&&re!==null&&Zm(ht,re,Et,Ot,!0)}}t:{if(Q=K?ea(K):window,nt=Q.nodeName&&Q.nodeName.toLowerCase(),nt==="select"||nt==="input"&&Q.type==="file")var $t=pv;else if(dv(Q))if(mv)$t=e_;else{$t=JS;var Ct=ZS}else nt=Q.nodeName,!nt||nt.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Ju(K.elementType)&&($t=pv):$t=t_;if($t&&($t=$t(i,K))){vv(ht,$t,o,lt);break t}Ct&&Ct(i,Q,K),i==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Zu(Q,"number",Q.value)}switch(Ct=K?ea(K):window,i){case"focusin":(dv(Ct)||Ct.contentEditable==="true")&&(rs=Ct,dc=K,ca=null);break;case"focusout":ca=dc=rs=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,Ev(ht,o,lt);break;case"selectionchange":if(n_)break;case"keydown":case"keyup":Ev(ht,o,lt)}var It;if(uc)t:{switch(i){case"compositionstart":var Xt="onCompositionStart";break t;case"compositionend":Xt="onCompositionEnd";break t;case"compositionupdate":Xt="onCompositionUpdate";break t}Xt=void 0}else ns?hv(i,o)&&(Xt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Xt="onCompositionStart");Xt&&(ov&&o.locale!=="ko"&&(ns||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&ns&&(It=nv()):(On=lt,rc="value"in On?On.value:On.textContent,ns=!0)),Ct=wo(K,Xt),0<Ct.length&&(Xt=new av(Xt,i,null,o,lt),ht.push({event:Xt,listeners:Ct}),It?Xt.data=It:(It=fv(o),It!==null&&(Xt.data=It)))),(It=XS?GS(i,o):KS(i,o))&&(Xt=wo(K,"onBeforeInput"),0<Xt.length&&(Ct=new av("onBeforeInput","beforeinput",null,o,lt),ht.push({event:Ct,listeners:Xt}),Ct.data=It)),I_(ht,i,K,o,lt)}Qm(ht,s)})}function ja(i,s,o){return{instance:i,listener:s,currentTarget:o}}function wo(i,s){for(var o=s+"Capture",c=[];i!==null;){var p=i,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=ia(i,o),p!=null&&c.unshift(ja(i,p,g)),p=ia(i,s),p!=null&&c.push(ja(i,p,g))),i.tag===3)return c;i=i.return}return[]}function Y_(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Zm(i,s,o,c,p){for(var g=s._reactName,w=[];o!==null&&o!==c;){var R=o,P=R.alternate,K=R.stateNode;if(R=R.tag,P!==null&&P===c)break;R!==5&&R!==26&&R!==27||K===null||(P=K,p?(K=ia(o,g),K!=null&&w.unshift(ja(o,K,P))):p||(K=ia(o,g),K!=null&&w.push(ja(o,K,P)))),o=o.return}w.length!==0&&i.push({event:s,listeners:w})}var W_=/\r\n?/g,q_=/\u0000|\uFFFD/g;function Jm(i){return(typeof i=="string"?i:""+i).replace(W_,`
`).replace(q_,"")}function tg(i,s){return s=Jm(s),Jm(i)===s}function ne(i,s,o,c,p,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ts(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ts(i,""+c);break;case"className":Ml(i,"class",c);break;case"tabIndex":Ml(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ml(i,o,c);break;case"style":tv(i,c,g);break;case"data":if(s!=="object"){Ml(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Al(""+c),i.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&ne(i,s,"name",p.name,p,null),ne(i,s,"formEncType",p.formEncType,p,null),ne(i,s,"formMethod",p.formMethod,p,null),ne(i,s,"formTarget",p.formTarget,p,null)):(ne(i,s,"encType",p.encType,p,null),ne(i,s,"method",p.method,p,null),ne(i,s,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Al(""+c),i.setAttribute(o,c);break;case"onClick":c!=null&&(i.onclick=rn);break;case"onScroll":c!=null&&Yt("scroll",i);break;case"onScrollEnd":c!=null&&Yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}o=Al(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""+c):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":c===!0?i.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,c):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(o,c):i.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(o):i.setAttribute(o,c);break;case"popover":Yt("beforetoggle",i),Yt("toggle",i),Cl(i,"popover",c);break;case"xlinkActuate":nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":nn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":nn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":nn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":nn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Cl(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=xS.get(o)||o,Cl(i,o,c))}}function Ph(i,s,o,c,p,g){switch(o){case"style":tv(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(o=c.__html,o!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"children":typeof c=="string"?ts(i,c):(typeof c=="number"||typeof c=="bigint")&&ts(i,""+c);break;case"onScroll":c!=null&&Yt("scroll",i);break;case"onScrollEnd":c!=null&&Yt("scrollend",i);break;case"onClick":c!=null&&(i.onclick=rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wd.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),s=o.slice(2,p?o.length-7:void 0),g=i[ti]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(s,g,p),typeof c=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,c,p);break t}o in i?i[o]=c:c===!0?i.setAttribute(o,""):Cl(i,o,c)}}}function Pe(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",i),Yt("load",i);var c=!1,p=!1,g;for(g in o)if(o.hasOwnProperty(g)){var w=o[g];if(w!=null)switch(g){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ne(i,s,g,w,o,null)}}p&&ne(i,s,"srcSet",o.srcSet,o,null),c&&ne(i,s,"src",o.src,o,null);return;case"input":Yt("invalid",i);var R=g=w=p=null,P=null,K=null;for(c in o)if(o.hasOwnProperty(c)){var lt=o[c];if(lt!=null)switch(c){case"name":p=lt;break;case"type":w=lt;break;case"checked":P=lt;break;case"defaultChecked":K=lt;break;case"value":g=lt;break;case"defaultValue":R=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,s));break;default:ne(i,s,c,lt,o,null)}}Qd(i,g,R,P,K,w,p,!1);return;case"select":Yt("invalid",i),c=w=g=null;for(p in o)if(o.hasOwnProperty(p)&&(R=o[p],R!=null))switch(p){case"value":g=R;break;case"defaultValue":w=R;break;case"multiple":c=R;default:ne(i,s,p,R,o,null)}s=g,o=w,i.multiple=!!c,s!=null?Jr(i,!!c,s,!1):o!=null&&Jr(i,!!c,o,!0);return;case"textarea":Yt("invalid",i),g=p=c=null;for(w in o)if(o.hasOwnProperty(w)&&(R=o[w],R!=null))switch(w){case"value":c=R;break;case"defaultValue":p=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:ne(i,s,w,R,o,null)}Zd(i,c,p,g);return;case"option":for(P in o)o.hasOwnProperty(P)&&(c=o[P],c!=null)&&(P==="selected"?i.selected=c&&typeof c!="function"&&typeof c!="symbol":ne(i,s,P,c,o,null));return;case"dialog":Yt("beforetoggle",i),Yt("toggle",i),Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":Yt("load",i);break;case"video":case"audio":for(c=0;c<za.length;c++)Yt(za[c],i);break;case"image":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"embed":case"source":case"link":Yt("error",i),Yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(c=o[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ne(i,s,K,c,o,null)}return;default:if(Ju(s)){for(lt in o)o.hasOwnProperty(lt)&&(c=o[lt],c!==void 0&&Ph(i,s,lt,c,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(c=o[R],c!=null&&ne(i,s,R,c,o,null))}function X_(i,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,w=null,R=null,P=null,K=null,lt=null;for(nt in o){var ht=o[nt];if(o.hasOwnProperty(nt)&&ht!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":P=ht;default:c.hasOwnProperty(nt)||ne(i,s,nt,null,c,ht)}}for(var Q in c){var nt=c[Q];if(ht=o[Q],c.hasOwnProperty(Q)&&(nt!=null||ht!=null))switch(Q){case"type":g=nt;break;case"name":p=nt;break;case"checked":K=nt;break;case"defaultChecked":lt=nt;break;case"value":w=nt;break;case"defaultValue":R=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,s));break;default:nt!==ht&&ne(i,s,Q,nt,c,ht)}}$u(i,w,R,P,K,lt,g,p);return;case"select":nt=w=R=Q=null;for(g in o)if(P=o[g],o.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":nt=P;default:c.hasOwnProperty(g)||ne(i,s,g,null,c,P)}for(p in c)if(g=c[p],P=o[p],c.hasOwnProperty(p)&&(g!=null||P!=null))switch(p){case"value":Q=g;break;case"defaultValue":R=g;break;case"multiple":w=g;default:g!==P&&ne(i,s,p,g,c,P)}s=R,o=w,c=nt,Q!=null?Jr(i,!!o,Q,!1):!!c!=!!o&&(s!=null?Jr(i,!!o,s,!0):Jr(i,!!o,o?[]:"",!1));return;case"textarea":nt=Q=null;for(R in o)if(p=o[R],o.hasOwnProperty(R)&&p!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ne(i,s,R,null,c,p)}for(w in c)if(p=c[w],g=o[w],c.hasOwnProperty(w)&&(p!=null||g!=null))switch(w){case"value":Q=p;break;case"defaultValue":nt=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==g&&ne(i,s,w,p,c,g)}$d(i,Q,nt);return;case"option":for(var Et in o)Q=o[Et],o.hasOwnProperty(Et)&&Q!=null&&!c.hasOwnProperty(Et)&&(Et==="selected"?i.selected=!1:ne(i,s,Et,null,c,Q));for(P in c)Q=c[P],nt=o[P],c.hasOwnProperty(P)&&Q!==nt&&(Q!=null||nt!=null)&&(P==="selected"?i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":ne(i,s,P,Q,c,nt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in o)Q=o[Ot],o.hasOwnProperty(Ot)&&Q!=null&&!c.hasOwnProperty(Ot)&&ne(i,s,Ot,null,c,Q);for(K in c)if(Q=c[K],nt=o[K],c.hasOwnProperty(K)&&Q!==nt&&(Q!=null||nt!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,s));break;default:ne(i,s,K,Q,c,nt)}return;default:if(Ju(s)){for(var re in o)Q=o[re],o.hasOwnProperty(re)&&Q!==void 0&&!c.hasOwnProperty(re)&&Ph(i,s,re,void 0,c,Q);for(lt in c)Q=c[lt],nt=o[lt],!c.hasOwnProperty(lt)||Q===nt||Q===void 0&&nt===void 0||Ph(i,s,lt,Q,c,nt);return}}for(var Y in o)Q=o[Y],o.hasOwnProperty(Y)&&Q!=null&&!c.hasOwnProperty(Y)&&ne(i,s,Y,null,c,Q);for(ht in c)Q=c[ht],nt=o[ht],!c.hasOwnProperty(ht)||Q===nt||Q==null&&nt==null||ne(i,s,ht,Q,c,nt)}function eg(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function G_(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var p=o[c],g=p.transferSize,w=p.initiatorType,R=p.duration;if(g&&R&&eg(w)){for(w=0,R=p.responseEnd,c+=1;c<o.length;c++){var P=o[c],K=P.startTime;if(K>R)break;var lt=P.transferSize,ht=P.initiatorType;lt&&eg(ht)&&(P=P.responseEnd,w+=lt*(P<R?1:(R-K)/(P-K)))}if(--c,s+=8*(g+w)/(p.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ih=null,Vh=null;function Eo(i){return i.nodeType===9?i:i.ownerDocument}function ig(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ng(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Uh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hh=null;function K_(){var i=window.event;return i&&i.type==="popstate"?i===Hh?!1:(Hh=i,!0):(Hh=null,!1)}var rg=typeof setTimeout=="function"?setTimeout:void 0,Q_=typeof clearTimeout=="function"?clearTimeout:void 0,sg=typeof Promise=="function"?Promise:void 0,$_=typeof queueMicrotask=="function"?queueMicrotask:typeof sg<"u"?function(i){return sg.resolve(null).then(i).catch(Z_)}:rg;function Z_(i){setTimeout(function(){throw i})}function Kn(i){return i==="head"}function ag(i,s){var o=s,c=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(c===0){i.removeChild(p),Ns(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")La(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,La(o);for(var g=o.firstChild;g;){var w=g.nextSibling,R=g.nodeName;g[ta]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=w}}else o==="body"&&La(i.ownerDocument.body);o=p}while(o);Ns(s)}function lg(i,s){var o=i;i=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=c}while(o)}function Yh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Yh(o),Ku(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function J_(i,s,o,c){for(;i.nodeType===1;){var p=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[ta])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Di(i.nextSibling),i===null)break}return null}function t1(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Di(i.nextSibling),i===null))return null;return i}function og(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Di(i.nextSibling),i===null))return null;return i}function Wh(i){return i.data==="$?"||i.data==="$~"}function qh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function e1(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Di(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Xh=null;function ug(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return Di(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function cg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function hg(i,s,o){switch(s=Eo(o),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function La(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ku(i)}var Ni=new Map,fg=new Set;function Co(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xn=U.d;U.d={f:i1,r:n1,D:r1,C:s1,L:a1,m:l1,X:u1,S:o1,M:c1};function i1(){var i=xn.f(),s=mo();return i||s}function n1(i){var s=Qr(i);s!==null&&s.tag===5&&s.type==="form"?Rp(s):xn.r(i)}var As=typeof document>"u"?null:document;function dg(i,s,o){var c=As;if(c&&typeof s=="string"&&s){var p=wi(s);p='link[rel="'+i+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),fg.has(p)||(fg.add(p),i={rel:i,crossOrigin:o,href:s},c.querySelector(p)===null&&(s=c.createElement("link"),Pe(s,"link",i),Ne(s),c.head.appendChild(s)))}}function r1(i){xn.D(i),dg("dns-prefetch",i,null)}function s1(i,s){xn.C(i,s),dg("preconnect",i,s)}function a1(i,s,o){xn.L(i,s,o);var c=As;if(c&&i&&s){var p='link[rel="preload"][as="'+wi(s)+'"]';s==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+wi(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+wi(o.imageSizes)+'"]')):p+='[href="'+wi(i)+'"]';var g=p;switch(s){case"style":g=Rs(i);break;case"script":g=Ds(i)}Ni.has(g)||(i=m({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),Ni.set(g,i),c.querySelector(p)!==null||s==="style"&&c.querySelector(Ba(g))||s==="script"&&c.querySelector(Fa(g))||(s=c.createElement("link"),Pe(s,"link",i),Ne(s),c.head.appendChild(s)))}}function l1(i,s){xn.m(i,s);var o=As;if(o&&i){var c=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+wi(c)+'"][href="'+wi(i)+'"]',g=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ds(i)}if(!Ni.has(g)&&(i=m({rel:"modulepreload",href:i},s),Ni.set(g,i),o.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fa(g)))return}c=o.createElement("link"),Pe(c,"link",i),Ne(c),o.head.appendChild(c)}}}function o1(i,s,o){xn.S(i,s,o);var c=As;if(c&&i){var p=$r(c).hoistableStyles,g=Rs(i);s=s||"default";var w=p.get(g);if(!w){var R={loading:0,preload:null};if(w=c.querySelector(Ba(g)))R.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":s},o),(o=Ni.get(g))&&Gh(i,o);var P=w=c.createElement("link");Ne(P),Pe(P,"link",i),P._p=new Promise(function(K,lt){P.onload=K,P.onerror=lt}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Mo(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:R},p.set(g,w)}}}function u1(i,s){xn.X(i,s);var o=As;if(o&&i){var c=$r(o).hoistableScripts,p=Ds(i),g=c.get(p);g||(g=o.querySelector(Fa(p)),g||(i=m({src:i,async:!0},s),(s=Ni.get(p))&&Kh(i,s),g=o.createElement("script"),Ne(g),Pe(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function c1(i,s){xn.M(i,s);var o=As;if(o&&i){var c=$r(o).hoistableScripts,p=Ds(i),g=c.get(p);g||(g=o.querySelector(Fa(p)),g||(i=m({src:i,async:!0,type:"module"},s),(s=Ni.get(p))&&Kh(i,s),g=o.createElement("script"),Ne(g),Pe(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function vg(i,s,o,c){var p=(p=J.current)?Co(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Rs(o.href),o=$r(p).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Rs(o.href);var g=$r(p).hoistableStyles,w=g.get(i);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,w),(g=p.querySelector(Ba(i)))&&!g._p&&(w.instance=g,w.state.loading=5),Ni.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ni.set(i,o),g||h1(p,i,o,w.state))),s&&c===null)throw Error(n(528,""));return w}if(s&&c!==null)throw Error(n(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ds(o),o=$r(p).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Rs(i){return'href="'+wi(i)+'"'}function Ba(i){return'link[rel="stylesheet"]['+i+"]"}function pg(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function h1(i,s,o,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Pe(s,"link",o),Ne(s),i.head.appendChild(s))}function Ds(i){return'[src="'+wi(i)+'"]'}function Fa(i){return"script[async]"+i}function mg(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+wi(o.href)+'"]');if(c)return s.instance=c,Ne(c),c;var p=m({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ne(c),Pe(c,"style",p),Mo(c,o.precedence,i),s.instance=c;case"stylesheet":p=Rs(o.href);var g=i.querySelector(Ba(p));if(g)return s.state.loading|=4,s.instance=g,Ne(g),g;c=pg(o),(p=Ni.get(p))&&Gh(c,p),g=(i.ownerDocument||i).createElement("link"),Ne(g);var w=g;return w._p=new Promise(function(R,P){w.onload=R,w.onerror=P}),Pe(g,"link",c),s.state.loading|=4,Mo(g,o.precedence,i),s.instance=g;case"script":return g=Ds(o.src),(p=i.querySelector(Fa(g)))?(s.instance=p,Ne(p),p):(c=o,(p=Ni.get(g))&&(c=m({},o),Kh(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),Ne(p),Pe(p,"link",c),i.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Mo(c,o.precedence,i));return s.instance}function Mo(i,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,g=p,w=0;w<c.length;w++){var R=c[w];if(R.dataset.precedence===s)g=R;else if(g!==p)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Gh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Kh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var To=null;function gg(i,s,o){if(To===null){var c=new Map,p=To=new Map;p.set(o,c)}else p=To,c=p.get(o),c||(c=new Map,p.set(o,c));if(c.has(i))return c;for(c.set(i,null),o=o.getElementsByTagName(i),p=0;p<o.length;p++){var g=o[p];if(!(g[ta]||g[je]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=i+w;var R=c.get(w);R?R.push(g):c.set(w,[g])}}return c}function yg(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function f1(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function bg(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function d1(i,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Rs(c.href),g=s.querySelector(Ba(p));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Ao.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=g,Ne(g);return}g=s.ownerDocument||s,c=pg(c),(p=Ni.get(p))&&Gh(c,p),g=g.createElement("link"),Ne(g);var w=g;w._p=new Promise(function(R,P){w.onload=R,w.onerror=P}),Pe(g,"link",c),o.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Ao.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var Qh=0;function v1(i,s){return i.stylesheets&&i.count===0&&Do(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var c=setTimeout(function(){if(i.stylesheets&&Do(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+s);0<i.imgBytes&&Qh===0&&(Qh=62500*G_());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Do(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>Qh?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Ao(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Do(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ro=null;function Do(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ro=new Map,s.forEach(p1,i),Ro=null,Ao.call(i))}function p1(i,s){if(!(s.state.loading&4)){var o=Ro.get(i);if(o)var c=o.get(null);else{o=new Map,Ro.set(i,o);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var w=p[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}p=s.instance,w=p.getAttribute("data-precedence"),g=o.get(w)||c,g===c&&o.set(null,p),o.set(w,p),this.count++,c=Ao.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),g?g.parentNode.insertBefore(p,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),s.state.loading|=4}}var Pa={$$typeof:T,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function m1(i,s,o,c,p,g,w,R,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.hiddenUpdates=Wu(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function xg(i,s,o,c,p,g,w,R,P,K,lt,ht){return i=new m1(i,s,o,w,P,K,lt,ht,R),s=1,g===!0&&(s|=24),g=di(3,null,null,s),i.current=g,g.stateNode=i,s=Rc(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},kc(g),i}function Sg(i){return i?(i=ls,i):ls}function _g(i,s,o,c,p,g){p=Sg(p),c.context===null?c.context=p:c.pendingContext=p,c=Fn(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Pn(i,c,s),o!==null&&(ai(o,i,s),ga(o,i,s))}function wg(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function $h(i,s){wg(i,s),(i=i.alternate)&&wg(i,s)}function Eg(i){if(i.tag===13||i.tag===31){var s=pr(i,67108864);s!==null&&ai(s,i,67108864),$h(i,67108864)}}function Cg(i){if(i.tag===13||i.tag===31){var s=yi();s=qu(s);var o=pr(i,s);o!==null&&ai(o,i,s),$h(i,s)}}var No=!0;function g1(i,s,o,c){var p=z.T;z.T=null;var g=U.p;try{U.p=2,Zh(i,s,o,c)}finally{U.p=g,z.T=p}}function y1(i,s,o,c){var p=z.T;z.T=null;var g=U.p;try{U.p=8,Zh(i,s,o,c)}finally{U.p=g,z.T=p}}function Zh(i,s,o,c){if(No){var p=Jh(c);if(p===null)Fh(i,s,c,Oo,o),Tg(i,c);else if(x1(p,i,s,o,c))c.stopPropagation();else if(Tg(i,c),s&4&&-1<b1.indexOf(i)){for(;p!==null;){var g=Qr(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=cr(g.pendingLanes);if(w!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var P=1<<31-he(w);R.entanglements[1]|=P,w&=~P}qi(g),(Jt&6)===0&&(vo=Qt()+500,ka(0))}}break;case 31:case 13:R=pr(g,2),R!==null&&ai(R,g,2),mo(),$h(g,2)}if(g=Jh(c),g===null&&Fh(i,s,c,Oo,o),g===p)break;p=g}p!==null&&c.stopPropagation()}else Fh(i,s,c,null,o)}}function Jh(i){return i=ec(i),tf(i)}var Oo=null;function tf(i){if(Oo=null,i=Kr(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=u(s),i!==null)return i;i=null}else if(o===31){if(i=h(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Oo=i,null}function Mg(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case Xe:return 2;case ce:return 8;case ge:case He:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var ef=!1,Qn=null,$n=null,Zn=null,Ia=new Map,Va=new Map,Jn=[],b1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tg(i,s){switch(i){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Ia.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Va.delete(s.pointerId)}}function Ua(i,s,o,c,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},s!==null&&(s=Qr(s),s!==null&&Eg(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function x1(i,s,o,c,p){switch(s){case"focusin":return Qn=Ua(Qn,i,s,o,c,p),!0;case"dragenter":return $n=Ua($n,i,s,o,c,p),!0;case"mouseover":return Zn=Ua(Zn,i,s,o,c,p),!0;case"pointerover":var g=p.pointerId;return Ia.set(g,Ua(Ia.get(g)||null,i,s,o,c,p)),!0;case"gotpointercapture":return g=p.pointerId,Va.set(g,Ua(Va.get(g)||null,i,s,o,c,p)),!0}return!1}function Ag(i){var s=Kr(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){i.blockedOn=s,Ud(i.priority,function(){Cg(o)});return}}else if(s===31){if(s=h(o),s!==null){i.blockedOn=s,Ud(i.priority,function(){Cg(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ko(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=Jh(i.nativeEvent);if(o===null){o=i.nativeEvent;var c=new o.constructor(o.type,o);tc=c,o.target.dispatchEvent(c),tc=null}else return s=Qr(o),s!==null&&Eg(s),i.blockedOn=o,!1;s.shift()}return!0}function Rg(i,s,o){ko(i)&&o.delete(s)}function S1(){ef=!1,Qn!==null&&ko(Qn)&&(Qn=null),$n!==null&&ko($n)&&($n=null),Zn!==null&&ko(Zn)&&(Zn=null),Ia.forEach(Rg),Va.forEach(Rg)}function zo(i,s){i.blockedOn===s&&(i.blockedOn=null,ef||(ef=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,S1)))}var jo=null;function Dg(i){jo!==i&&(jo=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jo===i&&(jo=null);for(var s=0;s<i.length;s+=3){var o=i[s],c=i[s+1],p=i[s+2];if(typeof c!="function"){if(tf(c||o)===null)continue;break}var g=Qr(o);g!==null&&(i.splice(s,3),s-=3,Jc(g,{pending:!0,data:p,method:o.method,action:c},c,p))}}))}function Ns(i){function s(P){return zo(P,i)}Qn!==null&&zo(Qn,i),$n!==null&&zo($n,i),Zn!==null&&zo(Zn,i),Ia.forEach(s),Va.forEach(s);for(var o=0;o<Jn.length;o++){var c=Jn[o];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Jn.length&&(o=Jn[0],o.blockedOn===null);)Ag(o),o.blockedOn===null&&Jn.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var p=o[c],g=o[c+1],w=p[ti]||null;if(typeof g=="function")w||Dg(o);else if(w){var R=null;if(g&&g.hasAttribute("formAction")){if(p=g,w=g[ti]||null)R=w.formAction;else if(tf(p)!==null)continue}else R=w.action;typeof R=="function"?o[c+1]=R:(o.splice(c,3),c-=3),Dg(o)}}}function Ng(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function nf(i){this._internalRoot=i}Lo.prototype.render=nf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var o=s.current,c=yi();_g(o,c,i,s,null,null)},Lo.prototype.unmount=nf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;_g(i.current,2,null,i,null,null),mo(),s[Gr]=null}};function Lo(i){this._internalRoot=i}Lo.prototype.unstable_scheduleHydration=function(i){if(i){var s=Vd();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Jn.length&&s!==0&&s<Jn[o].priority;o++);Jn.splice(o,0,i),o===0&&Ag(i)}};var Og=t.version;if(Og!=="19.2.3")throw Error(n(527,Og,"19.2.3"));U.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=d(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var _1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Ze=Bo.inject(_1),Ke=Bo}catch{}}return Ya.createRoot=function(i,s){if(!a(i))throw Error(n(299));var o=!1,c="",p=Pp,g=Ip,w=Vp;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=xg(i,1,!1,null,null,o,c,null,p,g,w,Ng),i[Gr]=s.current,Bh(i),new nf(s)},Ya.hydrateRoot=function(i,s,o){if(!a(i))throw Error(n(299));var c=!1,p="",g=Pp,w=Ip,R=Vp,P=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),s=xg(i,1,!0,s,o??null,c,p,P,g,w,R,Ng),s.context=Sg(null),o=s.current,c=yi(),c=qu(c),p=Fn(c),p.callback=null,Pn(o,p,c),o=c,s.current.lanes=o,Js(s,o),qi(s),i[Gr]=s.current,Bh(i),new Lo(s)},Ya.version="19.2.3",Ya}var Hg;function k1(){if(Hg)return af.exports;Hg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),af.exports=O1(),af.exports}var z1=k1();const Yg=r=>{let t;const e=new Set,n=(d,v)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const y=t;t=v??(typeof m!="object"||m===null)?m:Object.assign({},t,m),e.forEach(x=>x(t,y))}},a=()=>t,h={setState:n,getState:a,getInitialState:()=>f,subscribe:d=>(e.add(d),()=>e.delete(d))},f=t=r(n,a,h);return h},j1=(r=>r?Yg(r):Yg),L1=r=>r;function B1(r,t=L1){const e=kt.useSyncExternalStore(r.subscribe,kt.useCallback(()=>t(r.getState()),[r,t]),kt.useCallback(()=>t(r.getInitialState()),[r,t]));return kt.useDebugValue(e),e}const F1=r=>{const t=j1(r),e=n=>B1(t,n);return Object.assign(e,t),e},eb=(r=>F1);function P1(r,t){let e;try{e=r()}catch{return}return{getItem:a=>{var l;const u=f=>f===null?null:JSON.parse(f,void 0),h=(l=e.getItem(a))!=null?l:null;return h instanceof Promise?h.then(u):u(h)},setItem:(a,l)=>e.setItem(a,JSON.stringify(l,void 0)),removeItem:a=>e.removeItem(a)}}const Uf=r=>t=>{try{const e=r(t);return e instanceof Promise?e:{then(n){return Uf(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return Uf(n)(e)}}}},I1=(r,t)=>(e,n,a)=>{let l={storage:P1(()=>localStorage),partialize:_=>_,version:0,merge:(_,C)=>({...C,..._}),...t},u=!1,h=0;const f=new Set,d=new Set;let v=l.storage;if(!v)return r((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),e(..._)},n,a);const m=()=>{const _=l.partialize({...n()});return v.setItem(l.name,{state:_,version:l.version})},y=a.setState;a.setState=(_,C)=>(y(_,C),m());const x=r((..._)=>(e(..._),m()),n,a);a.getInitialState=()=>x;let b;const S=()=>{var _,C;if(!v)return;const A=++h;u=!1,f.forEach(D=>{var M;return D((M=n())!=null?M:x)});const T=((C=l.onRehydrateStorage)==null?void 0:C.call(l,(_=n())!=null?_:x))||void 0;return Uf(v.getItem.bind(v))(l.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==l.version){if(l.migrate){const M=l.migrate(D.state,D.version);return M instanceof Promise?M.then(j=>[!0,j]):[!0,M]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var M;if(A!==h)return;const[j,N]=D;if(b=l.merge(N,(M=n())!=null?M:x),e(b,!0),j)return m()}).then(()=>{A===h&&(T?.(b,void 0),b=n(),u=!0,d.forEach(D=>D(b)))}).catch(D=>{A===h&&T?.(void 0,D)})};return a.persist={setOptions:_=>{l={...l,..._},_.storage&&(v=_.storage)},clearStorage:()=>{v?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>S(),hasHydrated:()=>u,onHydrate:_=>(f.add(_),()=>{f.delete(_)}),onFinishHydration:_=>(d.add(_),()=>{d.delete(_)})},l.skipHydration||S(),b||x},ib=I1;function nb(r,t){return function(){return r.apply(t,arguments)}}const{toString:V1}=Object.prototype,{getPrototypeOf:od}=Object,{iterator:Eu,toStringTag:rb}=Symbol,Cu=(r=>t=>{const e=V1.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ui=r=>(r=r.toLowerCase(),t=>Cu(t)===r),Mu=r=>t=>typeof t===r,{isArray:Qs}=Array,Ys=Mu("undefined");function vl(r){return r!==null&&!Ys(r)&&r.constructor!==null&&!Ys(r.constructor)&&li(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const sb=Ui("ArrayBuffer");function U1(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&sb(r.buffer),t}const H1=Mu("string"),li=Mu("function"),ab=Mu("number"),pl=r=>r!==null&&typeof r=="object",Y1=r=>r===!0||r===!1,Jo=r=>{if(Cu(r)!=="object")return!1;const t=od(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(rb in r)&&!(Eu in r)},W1=r=>{if(!pl(r)||vl(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},q1=Ui("Date"),X1=Ui("File"),G1=Ui("Blob"),K1=Ui("FileList"),Q1=r=>pl(r)&&li(r.pipe),$1=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||li(r.append)&&((t=Cu(r))==="formdata"||t==="object"&&li(r.toString)&&r.toString()==="[object FormData]"))},Z1=Ui("URLSearchParams"),[J1,tw,ew,iw]=["ReadableStream","Request","Response","Headers"].map(Ui),nw=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ml(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let n,a;if(typeof r!="object"&&(r=[r]),Qs(r))for(n=0,a=r.length;n<a;n++)t.call(null,r[n],n,r);else{if(vl(r))return;const l=e?Object.getOwnPropertyNames(r):Object.keys(r),u=l.length;let h;for(n=0;n<u;n++)h=l[n],t.call(null,r[h],h,r)}}function lb(r,t){if(vl(r))return null;t=t.toLowerCase();const e=Object.keys(r);let n=e.length,a;for(;n-- >0;)if(a=e[n],t===a.toLowerCase())return a;return null}const Or=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ob=r=>!Ys(r)&&r!==Or;function Hf(){const{caseless:r,skipUndefined:t}=ob(this)&&this||{},e={},n=(a,l)=>{const u=r&&lb(e,l)||l;Jo(e[u])&&Jo(a)?e[u]=Hf(e[u],a):Jo(a)?e[u]=Hf({},a):Qs(a)?e[u]=a.slice():(!t||!Ys(a))&&(e[u]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&ml(arguments[a],n);return e}const rw=(r,t,e,{allOwnKeys:n}={})=>(ml(t,(a,l)=>{e&&li(a)?r[l]=nb(a,e):r[l]=a},{allOwnKeys:n}),r),sw=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),aw=(r,t,e,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},lw=(r,t,e,n)=>{let a,l,u;const h={};if(t=t||{},r==null)return t;do{for(a=Object.getOwnPropertyNames(r),l=a.length;l-- >0;)u=a[l],(!n||n(u,r,t))&&!h[u]&&(t[u]=r[u],h[u]=!0);r=e!==!1&&od(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},ow=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const n=r.indexOf(t,e);return n!==-1&&n===e},uw=r=>{if(!r)return null;if(Qs(r))return r;let t=r.length;if(!ab(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},cw=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&od(Uint8Array)),hw=(r,t)=>{const n=(r&&r[Eu]).call(r);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(r,l[0],l[1])}},fw=(r,t)=>{let e;const n=[];for(;(e=r.exec(t))!==null;)n.push(e);return n},dw=Ui("HTMLFormElement"),vw=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,a){return n.toUpperCase()+a}),Wg=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),pw=Ui("RegExp"),ub=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),n={};ml(e,(a,l)=>{let u;(u=t(a,l,r))!==!1&&(n[l]=u||a)}),Object.defineProperties(r,n)},mw=r=>{ub(r,(t,e)=>{if(li(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=r[e];if(li(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},gw=(r,t)=>{const e={},n=a=>{a.forEach(l=>{e[l]=!0})};return Qs(r)?n(r):n(String(r).split(t)),e},yw=()=>{},bw=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function xw(r){return!!(r&&li(r.append)&&r[rb]==="FormData"&&r[Eu])}const Sw=r=>{const t=new Array(10),e=(n,a)=>{if(pl(n)){if(t.indexOf(n)>=0)return;if(vl(n))return n;if(!("toJSON"in n)){t[a]=n;const l=Qs(n)?[]:{};return ml(n,(u,h)=>{const f=e(u,a+1);!Ys(f)&&(l[h]=f)}),t[a]=void 0,l}}return n};return e(r,0)},_w=Ui("AsyncFunction"),ww=r=>r&&(pl(r)||li(r))&&li(r.then)&&li(r.catch),cb=((r,t)=>r?setImmediate:t?((e,n)=>(Or.addEventListener("message",({source:a,data:l})=>{a===Or&&l===e&&n.length&&n.shift()()},!1),a=>{n.push(a),Or.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",li(Or.postMessage)),Ew=typeof queueMicrotask<"u"?queueMicrotask.bind(Or):typeof process<"u"&&process.nextTick||cb,Cw=r=>r!=null&&li(r[Eu]),et={isArray:Qs,isArrayBuffer:sb,isBuffer:vl,isFormData:$1,isArrayBufferView:U1,isString:H1,isNumber:ab,isBoolean:Y1,isObject:pl,isPlainObject:Jo,isEmptyObject:W1,isReadableStream:J1,isRequest:tw,isResponse:ew,isHeaders:iw,isUndefined:Ys,isDate:q1,isFile:X1,isBlob:G1,isRegExp:pw,isFunction:li,isStream:Q1,isURLSearchParams:Z1,isTypedArray:cw,isFileList:K1,forEach:ml,merge:Hf,extend:rw,trim:nw,stripBOM:sw,inherits:aw,toFlatObject:lw,kindOf:Cu,kindOfTest:Ui,endsWith:ow,toArray:uw,forEachEntry:hw,matchAll:fw,isHTMLForm:dw,hasOwnProperty:Wg,hasOwnProp:Wg,reduceDescriptors:ub,freezeMethods:mw,toObjectSet:gw,toCamelCase:vw,noop:yw,toFiniteNumber:bw,findKey:lb,global:Or,isContextDefined:ob,isSpecCompliantForm:xw,toJSONObject:Sw,isAsyncFn:_w,isThenable:ww,setImmediate:cb,asap:Ew,isIterable:Cw};function Ft(r,t,e,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}et.inherits(Ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:et.toJSONObject(this.config),code:this.code,status:this.status}}});const hb=Ft.prototype,fb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{fb[r]={value:r}});Object.defineProperties(Ft,fb);Object.defineProperty(hb,"isAxiosError",{value:!0});Ft.from=(r,t,e,n,a,l)=>{const u=Object.create(hb);et.toFlatObject(r,u,function(v){return v!==Error.prototype},d=>d!=="isAxiosError");const h=r&&r.message?r.message:"Error",f=t==null&&r?r.code:t;return Ft.call(u,h,f,e,n,a),r&&u.cause==null&&Object.defineProperty(u,"cause",{value:r,configurable:!0}),u.name=r&&r.name||"Error",l&&Object.assign(u,l),u};const Mw=null;function Yf(r){return et.isPlainObject(r)||et.isArray(r)}function db(r){return et.endsWith(r,"[]")?r.slice(0,-2):r}function qg(r,t,e){return r?r.concat(t).map(function(a,l){return a=db(a),!e&&l?"["+a+"]":a}).join(e?".":""):t}function Tw(r){return et.isArray(r)&&!r.some(Yf)}const Aw=et.toFlatObject(et,{},null,function(t){return/^is[A-Z]/.test(t)});function Tu(r,t,e){if(!et.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=et.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,_){return!et.isUndefined(_[S])});const n=e.metaTokens,a=e.visitor||v,l=e.dots,u=e.indexes,f=(e.Blob||typeof Blob<"u"&&Blob)&&et.isSpecCompliantForm(t);if(!et.isFunction(a))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(et.isDate(b))return b.toISOString();if(et.isBoolean(b))return b.toString();if(!f&&et.isBlob(b))throw new Ft("Blob is not supported. Use a Buffer instead.");return et.isArrayBuffer(b)||et.isTypedArray(b)?f&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function v(b,S,_){let C=b;if(b&&!_&&typeof b=="object"){if(et.endsWith(S,"{}"))S=n?S:S.slice(0,-2),b=JSON.stringify(b);else if(et.isArray(b)&&Tw(b)||(et.isFileList(b)||et.endsWith(S,"[]"))&&(C=et.toArray(b)))return S=db(S),C.forEach(function(T,D){!(et.isUndefined(T)||T===null)&&t.append(u===!0?qg([S],D,l):u===null?S:S+"[]",d(T))}),!1}return Yf(b)?!0:(t.append(qg(_,S,l),d(b)),!1)}const m=[],y=Object.assign(Aw,{defaultVisitor:v,convertValue:d,isVisitable:Yf});function x(b,S){if(!et.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+S.join("."));m.push(b),et.forEach(b,function(C,A){(!(et.isUndefined(C)||C===null)&&a.call(t,C,et.isString(A)?A.trim():A,S,y))===!0&&x(C,S?S.concat(A):[A])}),m.pop()}}if(!et.isObject(r))throw new TypeError("data must be an object");return x(r),t}function Xg(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ud(r,t){this._pairs=[],r&&Tu(r,this,t)}const vb=ud.prototype;vb.append=function(t,e){this._pairs.push([t,e])};vb.toString=function(t){const e=t?function(n){return t.call(this,n,Xg)}:Xg;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function Rw(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function pb(r,t,e){if(!t)return r;const n=e&&e.encode||Rw;et.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let l;if(a?l=a(t,e):l=et.isURLSearchParams(t)?t.toString():new ud(t,e).toString(n),l){const u=r.indexOf("#");u!==-1&&(r=r.slice(0,u)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class Gg{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){et.forEach(this.handlers,function(n){n!==null&&t(n)})}}const mb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dw=typeof URLSearchParams<"u"?URLSearchParams:ud,Nw=typeof FormData<"u"?FormData:null,Ow=typeof Blob<"u"?Blob:null,kw={isBrowser:!0,classes:{URLSearchParams:Dw,FormData:Nw,Blob:Ow},protocols:["http","https","file","blob","url","data"]},cd=typeof window<"u"&&typeof document<"u",Wf=typeof navigator=="object"&&navigator||void 0,zw=cd&&(!Wf||["ReactNative","NativeScript","NS"].indexOf(Wf.product)<0),jw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Lw=cd&&window.location.href||"http://localhost",Bw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cd,hasStandardBrowserEnv:zw,hasStandardBrowserWebWorkerEnv:jw,navigator:Wf,origin:Lw},Symbol.toStringTag,{value:"Module"})),qe={...Bw,...kw};function Fw(r,t){return Tu(r,new qe.classes.URLSearchParams,{visitor:function(e,n,a,l){return qe.isNode&&et.isBuffer(e)?(this.append(n,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function Pw(r){return et.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Iw(r){const t={},e=Object.keys(r);let n;const a=e.length;let l;for(n=0;n<a;n++)l=e[n],t[l]=r[l];return t}function gb(r){function t(e,n,a,l){let u=e[l++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),f=l>=e.length;return u=!u&&et.isArray(a)?a.length:u,f?(et.hasOwnProp(a,u)?a[u]=[a[u],n]:a[u]=n,!h):((!a[u]||!et.isObject(a[u]))&&(a[u]=[]),t(e,n,a[u],l)&&et.isArray(a[u])&&(a[u]=Iw(a[u])),!h)}if(et.isFormData(r)&&et.isFunction(r.entries)){const e={};return et.forEachEntry(r,(n,a)=>{t(Pw(n),a,e,0)}),e}return null}function Vw(r,t,e){if(et.isString(r))try{return(t||JSON.parse)(r),et.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}const gl={transitional:mb,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",a=n.indexOf("application/json")>-1,l=et.isObject(t);if(l&&et.isHTMLForm(t)&&(t=new FormData(t)),et.isFormData(t))return a?JSON.stringify(gb(t)):t;if(et.isArrayBuffer(t)||et.isBuffer(t)||et.isStream(t)||et.isFile(t)||et.isBlob(t)||et.isReadableStream(t))return t;if(et.isArrayBufferView(t))return t.buffer;if(et.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Fw(t,this.formSerializer).toString();if((h=et.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Tu(h?{"files[]":t}:t,f&&new f,this.formSerializer)}}return l||a?(e.setContentType("application/json",!1),Vw(t)):t}],transformResponse:[function(t){const e=this.transitional||gl.transitional,n=e&&e.forcedJSONParsing,a=this.responseType==="json";if(et.isResponse(t)||et.isReadableStream(t))return t;if(t&&et.isString(t)&&(n&&!this.responseType||a)){const u=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(h){if(u)throw h.name==="SyntaxError"?Ft.from(h,Ft.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};et.forEach(["delete","get","head","post","put","patch"],r=>{gl.headers[r]={}});const Uw=et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hw=r=>{const t={};let e,n,a;return r&&r.split(`
`).forEach(function(u){a=u.indexOf(":"),e=u.substring(0,a).trim().toLowerCase(),n=u.substring(a+1).trim(),!(!e||t[e]&&Uw[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Kg=Symbol("internals");function Wa(r){return r&&String(r).trim().toLowerCase()}function tu(r){return r===!1||r==null?r:et.isArray(r)?r.map(tu):String(r)}function Yw(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(r);)t[n[1]]=n[2];return t}const Ww=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function cf(r,t,e,n,a){if(et.isFunction(n))return n.call(this,t,e);if(a&&(t=e),!!et.isString(t)){if(et.isString(n))return t.indexOf(n)!==-1;if(et.isRegExp(n))return n.test(t)}}function qw(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function Xw(r,t){const e=et.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+e,{value:function(a,l,u){return this[n].call(this,t,a,l,u)},configurable:!0})})}let oi=class{constructor(t){t&&this.set(t)}set(t,e,n){const a=this;function l(h,f,d){const v=Wa(f);if(!v)throw new Error("header name must be a non-empty string");const m=et.findKey(a,v);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||f]=tu(h))}const u=(h,f)=>et.forEach(h,(d,v)=>l(d,v,f));if(et.isPlainObject(t)||t instanceof this.constructor)u(t,e);else if(et.isString(t)&&(t=t.trim())&&!Ww(t))u(Hw(t),e);else if(et.isObject(t)&&et.isIterable(t)){let h={},f,d;for(const v of t){if(!et.isArray(v))throw TypeError("Object iterator must return a key-value pair");h[d=v[0]]=(f=h[d])?et.isArray(f)?[...f,v[1]]:[f,v[1]]:v[1]}u(h,e)}else t!=null&&l(e,t,n);return this}get(t,e){if(t=Wa(t),t){const n=et.findKey(this,t);if(n){const a=this[n];if(!e)return a;if(e===!0)return Yw(a);if(et.isFunction(e))return e.call(this,a,n);if(et.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Wa(t),t){const n=et.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||cf(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let a=!1;function l(u){if(u=Wa(u),u){const h=et.findKey(n,u);h&&(!e||cf(n,n[h],h,e))&&(delete n[h],a=!0)}}return et.isArray(t)?t.forEach(l):l(t),a}clear(t){const e=Object.keys(this);let n=e.length,a=!1;for(;n--;){const l=e[n];(!t||cf(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const e=this,n={};return et.forEach(this,(a,l)=>{const u=et.findKey(n,l);if(u){e[u]=tu(a),delete e[l];return}const h=t?qw(l):String(l).trim();h!==l&&delete e[l],e[h]=tu(a),n[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return et.forEach(this,(n,a)=>{n!=null&&n!==!1&&(e[a]=t&&et.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Kg]=this[Kg]={accessors:{}}).accessors,a=this.prototype;function l(u){const h=Wa(u);n[h]||(Xw(a,u),n[h]=!0)}return et.isArray(t)?t.forEach(l):l(t),this}};oi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);et.reduceDescriptors(oi.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[e]=n}}});et.freezeMethods(oi);function hf(r,t){const e=this||gl,n=t||e,a=oi.from(n.headers);let l=n.data;return et.forEach(r,function(h){l=h.call(e,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function yb(r){return!!(r&&r.__CANCEL__)}function $s(r,t,e){Ft.call(this,r??"canceled",Ft.ERR_CANCELED,t,e),this.name="CanceledError"}et.inherits($s,Ft,{__CANCEL__:!0});function bb(r,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?r(e):t(new Ft("Request failed with status code "+e.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Gw(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function Kw(r,t){r=r||10;const e=new Array(r),n=new Array(r);let a=0,l=0,u;return t=t!==void 0?t:1e3,function(f){const d=Date.now(),v=n[l];u||(u=d),e[a]=f,n[a]=d;let m=l,y=0;for(;m!==a;)y+=e[m++],m=m%r;if(a=(a+1)%r,a===l&&(l=(l+1)%r),d-u<t)return;const x=v&&d-v;return x?Math.round(y*1e3/x):void 0}}function Qw(r,t){let e=0,n=1e3/t,a,l;const u=(d,v=Date.now())=>{e=v,a=null,l&&(clearTimeout(l),l=null),r(...d)};return[(...d)=>{const v=Date.now(),m=v-e;m>=n?u(d,v):(a=d,l||(l=setTimeout(()=>{l=null,u(a)},n-m)))},()=>a&&u(a)]}const ou=(r,t,e=3)=>{let n=0;const a=Kw(50,250);return Qw(l=>{const u=l.loaded,h=l.lengthComputable?l.total:void 0,f=u-n,d=a(f),v=u<=h;n=u;const m={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:d||void 0,estimated:d&&h&&v?(h-u)/d:void 0,event:l,lengthComputable:h!=null,[t?"download":"upload"]:!0};r(m)},e)},Qg=(r,t)=>{const e=r!=null;return[n=>t[0]({lengthComputable:e,total:r,loaded:n}),t[1]]},$g=r=>(...t)=>et.asap(()=>r(...t)),$w=qe.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,qe.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0,Zw=qe.hasStandardBrowserEnv?{write(r,t,e,n,a,l,u){if(typeof document>"u")return;const h=[`${r}=${encodeURIComponent(t)}`];et.isNumber(e)&&h.push(`expires=${new Date(e).toUTCString()}`),et.isString(n)&&h.push(`path=${n}`),et.isString(a)&&h.push(`domain=${a}`),l===!0&&h.push("secure"),et.isString(u)&&h.push(`SameSite=${u}`),document.cookie=h.join("; ")},read(r){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Jw(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function tE(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function xb(r,t,e){let n=!Jw(t);return r&&(n||e==!1)?tE(r,t):t}const Zg=r=>r instanceof oi?{...r}:r;function Lr(r,t){t=t||{};const e={};function n(d,v,m,y){return et.isPlainObject(d)&&et.isPlainObject(v)?et.merge.call({caseless:y},d,v):et.isPlainObject(v)?et.merge({},v):et.isArray(v)?v.slice():v}function a(d,v,m,y){if(et.isUndefined(v)){if(!et.isUndefined(d))return n(void 0,d,m,y)}else return n(d,v,m,y)}function l(d,v){if(!et.isUndefined(v))return n(void 0,v)}function u(d,v){if(et.isUndefined(v)){if(!et.isUndefined(d))return n(void 0,d)}else return n(void 0,v)}function h(d,v,m){if(m in t)return n(d,v);if(m in r)return n(void 0,d)}const f={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(d,v,m)=>a(Zg(d),Zg(v),m,!0)};return et.forEach(Object.keys({...r,...t}),function(v){const m=f[v]||a,y=m(r[v],t[v],v);et.isUndefined(y)&&m!==h||(e[v]=y)}),e}const Sb=r=>{const t=Lr({},r);let{data:e,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:u,auth:h}=t;if(t.headers=u=oi.from(u),t.url=pb(xb(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),et.isFormData(e)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(et.isFunction(e.getHeaders)){const f=e.getHeaders(),d=["content-type","content-length"];Object.entries(f).forEach(([v,m])=>{d.includes(v.toLowerCase())&&u.set(v,m)})}}if(qe.hasStandardBrowserEnv&&(n&&et.isFunction(n)&&(n=n(t)),n||n!==!1&&$w(t.url))){const f=a&&l&&Zw.read(l);f&&u.set(a,f)}return t},eE=typeof XMLHttpRequest<"u",iE=eE&&function(r){return new Promise(function(e,n){const a=Sb(r);let l=a.data;const u=oi.from(a.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:d}=a,v,m,y,x,b;function S(){x&&x(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(v),a.signal&&a.signal.removeEventListener("abort",v)}let _=new XMLHttpRequest;_.open(a.method.toUpperCase(),a.url,!0),_.timeout=a.timeout;function C(){if(!_)return;const T=oi.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),M={data:!h||h==="text"||h==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:T,config:r,request:_};bb(function(N){e(N),S()},function(N){n(N),S()},M),_=null}"onloadend"in _?_.onloadend=C:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(C)},_.onabort=function(){_&&(n(new Ft("Request aborted",Ft.ECONNABORTED,r,_)),_=null)},_.onerror=function(D){const M=D&&D.message?D.message:"Network Error",j=new Ft(M,Ft.ERR_NETWORK,r,_);j.event=D||null,n(j),_=null},_.ontimeout=function(){let D=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const M=a.transitional||mb;a.timeoutErrorMessage&&(D=a.timeoutErrorMessage),n(new Ft(D,M.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,r,_)),_=null},l===void 0&&u.setContentType(null),"setRequestHeader"in _&&et.forEach(u.toJSON(),function(D,M){_.setRequestHeader(M,D)}),et.isUndefined(a.withCredentials)||(_.withCredentials=!!a.withCredentials),h&&h!=="json"&&(_.responseType=a.responseType),d&&([y,b]=ou(d,!0),_.addEventListener("progress",y)),f&&_.upload&&([m,x]=ou(f),_.upload.addEventListener("progress",m),_.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(v=T=>{_&&(n(!T||T.type?new $s(null,r,_):T),_.abort(),_=null)},a.cancelToken&&a.cancelToken.subscribe(v),a.signal&&(a.signal.aborted?v():a.signal.addEventListener("abort",v)));const A=Gw(a.url);if(A&&qe.protocols.indexOf(A)===-1){n(new Ft("Unsupported protocol "+A+":",Ft.ERR_BAD_REQUEST,r));return}_.send(l||null)})},nE=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let n=new AbortController,a;const l=function(d){if(!a){a=!0,h();const v=d instanceof Error?d:this.reason;n.abort(v instanceof Ft?v:new $s(v instanceof Error?v.message:v))}};let u=t&&setTimeout(()=>{u=null,l(new Ft(`timeout ${t} of ms exceeded`,Ft.ETIMEDOUT))},t);const h=()=>{r&&(u&&clearTimeout(u),u=null,r.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),r=null)};r.forEach(d=>d.addEventListener("abort",l));const{signal:f}=n;return f.unsubscribe=()=>et.asap(h),f}},rE=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let n=0,a;for(;n<e;)a=n+t,yield r.slice(n,a),n=a},sE=async function*(r,t){for await(const e of aE(r))yield*rE(e,t)},aE=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Jg=(r,t,e,n)=>{const a=sE(r,t);let l=0,u,h=f=>{u||(u=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:d,value:v}=await a.next();if(d){h(),f.close();return}let m=v.byteLength;if(e){let y=l+=m;e(y)}f.enqueue(new Uint8Array(v))}catch(d){throw h(d),d}},cancel(f){return h(f),a.return()}},{highWaterMark:2})},t0=64*1024,{isFunction:Fo}=et,lE=(({Request:r,Response:t})=>({Request:r,Response:t}))(et.global),{ReadableStream:e0,TextEncoder:i0}=et.global,n0=(r,...t)=>{try{return!!r(...t)}catch{return!1}},oE=r=>{r=et.merge.call({skipUndefined:!0},lE,r);const{fetch:t,Request:e,Response:n}=r,a=t?Fo(t):typeof fetch=="function",l=Fo(e),u=Fo(n);if(!a)return!1;const h=a&&Fo(e0),f=a&&(typeof i0=="function"?(b=>S=>b.encode(S))(new i0):async b=>new Uint8Array(await new e(b).arrayBuffer())),d=l&&h&&n0(()=>{let b=!1;const S=new e(qe.origin,{body:new e0,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!S}),v=u&&h&&n0(()=>et.isReadableStream(new n("").body)),m={stream:v&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!m[b]&&(m[b]=(S,_)=>{let C=S&&S[b];if(C)return C.call(S);throw new Ft(`Response type '${b}' is not supported`,Ft.ERR_NOT_SUPPORT,_)})});const y=async b=>{if(b==null)return 0;if(et.isBlob(b))return b.size;if(et.isSpecCompliantForm(b))return(await new e(qe.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(et.isArrayBufferView(b)||et.isArrayBuffer(b))return b.byteLength;if(et.isURLSearchParams(b)&&(b=b+""),et.isString(b))return(await f(b)).byteLength},x=async(b,S)=>{const _=et.toFiniteNumber(b.getContentLength());return _??y(S)};return async b=>{let{url:S,method:_,data:C,signal:A,cancelToken:T,timeout:D,onDownloadProgress:M,onUploadProgress:j,responseType:N,headers:V,withCredentials:B="same-origin",fetchOptions:I}=Sb(b),W=t||fetch;N=N?(N+"").toLowerCase():"text";let Z=nE([A,T&&T.toAbortSignal()],D),it=null;const X=Z&&Z.unsubscribe&&(()=>{Z.unsubscribe()});let ot;try{if(j&&d&&_!=="get"&&_!=="head"&&(ot=await x(V,C))!==0){let O=new e(S,{method:"POST",body:C,duplex:"half"}),L;if(et.isFormData(C)&&(L=O.headers.get("content-type"))&&V.setContentType(L),O.body){const[F,q]=Qg(ot,ou($g(j)));C=Jg(O.body,t0,F,q)}}et.isString(B)||(B=B?"include":"omit");const z=l&&"credentials"in e.prototype,U={...I,signal:Z,method:_.toUpperCase(),headers:V.normalize().toJSON(),body:C,duplex:"half",credentials:z?B:void 0};it=l&&new e(S,U);let st=await(l?W(it,I):W(S,U));const ft=v&&(N==="stream"||N==="response");if(v&&(M||ft&&X)){const O={};["status","statusText","headers"].forEach($=>{O[$]=st[$]});const L=et.toFiniteNumber(st.headers.get("content-length")),[F,q]=M&&Qg(L,ou($g(M),!0))||[];st=new n(Jg(st.body,t0,F,()=>{q&&q(),X&&X()}),O)}N=N||"text";let rt=await m[et.findKey(m,N)||"text"](st,b);return!ft&&X&&X(),await new Promise((O,L)=>{bb(O,L,{data:rt,headers:oi.from(st.headers),status:st.status,statusText:st.statusText,config:b,request:it})})}catch(z){throw X&&X(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new Ft("Network Error",Ft.ERR_NETWORK,b,it),{cause:z.cause||z}):Ft.from(z,z&&z.code,b,it)}}},uE=new Map,_b=r=>{let t=r&&r.env||{};const{fetch:e,Request:n,Response:a}=t,l=[n,a,e];let u=l.length,h=u,f,d,v=uE;for(;h--;)f=l[h],d=v.get(f),d===void 0&&v.set(f,d=h?new Map:oE(t)),v=d;return d};_b();const hd={http:Mw,xhr:iE,fetch:{get:_b}};et.forEach(hd,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const r0=r=>`- ${r}`,cE=r=>et.isFunction(r)||r===null||r===!1;function hE(r,t){r=et.isArray(r)?r:[r];const{length:e}=r;let n,a;const l={};for(let u=0;u<e;u++){n=r[u];let h;if(a=n,!cE(n)&&(a=hd[(h=String(n)).toLowerCase()],a===void 0))throw new Ft(`Unknown adapter '${h}'`);if(a&&(et.isFunction(a)||(a=a.get(t))))break;l[h||"#"+u]=a}if(!a){const u=Object.entries(l).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let h=e?u.length>1?`since :
`+u.map(r0).join(`
`):" "+r0(u[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return a}const wb={getAdapter:hE,adapters:hd};function ff(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new $s(null,r)}function s0(r){return ff(r),r.headers=oi.from(r.headers),r.data=hf.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),wb.getAdapter(r.adapter||gl.adapter,r)(r).then(function(n){return ff(r),n.data=hf.call(r,r.transformResponse,n),n.headers=oi.from(n.headers),n},function(n){return yb(n)||(ff(r),n&&n.response&&(n.response.data=hf.call(r,r.transformResponse,n.response),n.response.headers=oi.from(n.response.headers))),Promise.reject(n)})}const Eb="1.13.2",Au={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{Au[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const a0={};Au.transitional=function(t,e,n){function a(l,u){return"[Axios v"+Eb+"] Transitional option '"+l+"'"+u+(n?". "+n:"")}return(l,u,h)=>{if(t===!1)throw new Ft(a(u," has been removed"+(e?" in "+e:"")),Ft.ERR_DEPRECATED);return e&&!a0[u]&&(a0[u]=!0,console.warn(a(u," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(l,u,h):!0}};Au.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function fE(r,t,e){if(typeof r!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let a=n.length;for(;a-- >0;){const l=n[a],u=t[l];if(u){const h=r[l],f=h===void 0||u(h,l,r);if(f!==!0)throw new Ft("option "+l+" must be "+f,Ft.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Ft("Unknown option "+l,Ft.ERR_BAD_OPTION)}}const eu={assertOptions:fE,validators:Au},Xi=eu.validators;let zr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Gg,response:new Gg}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Lr(this.defaults,e);const{transitional:n,paramsSerializer:a,headers:l}=e;n!==void 0&&eu.assertOptions(n,{silentJSONParsing:Xi.transitional(Xi.boolean),forcedJSONParsing:Xi.transitional(Xi.boolean),clarifyTimeoutError:Xi.transitional(Xi.boolean)},!1),a!=null&&(et.isFunction(a)?e.paramsSerializer={serialize:a}:eu.assertOptions(a,{encode:Xi.function,serialize:Xi.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),eu.assertOptions(e,{baseUrl:Xi.spelling("baseURL"),withXsrfToken:Xi.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let u=l&&et.merge(l.common,l[e.method]);l&&et.forEach(["delete","get","head","post","put","patch","common"],b=>{delete l[b]}),e.headers=oi.concat(u,l);const h=[];let f=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(f=f&&S.synchronous,h.unshift(S.fulfilled,S.rejected))});const d=[];this.interceptors.response.forEach(function(S){d.push(S.fulfilled,S.rejected)});let v,m=0,y;if(!f){const b=[s0.bind(this),void 0];for(b.unshift(...h),b.push(...d),y=b.length,v=Promise.resolve(e);m<y;)v=v.then(b[m++],b[m++]);return v}y=h.length;let x=e;for(;m<y;){const b=h[m++],S=h[m++];try{x=b(x)}catch(_){S.call(this,_);break}}try{v=s0.call(this,x)}catch(b){return Promise.reject(b)}for(m=0,y=d.length;m<y;)v=v.then(d[m++],d[m++]);return v}getUri(t){t=Lr(this.defaults,t);const e=xb(t.baseURL,t.url,t.allowAbsoluteUrls);return pb(e,t.params,t.paramsSerializer)}};et.forEach(["delete","get","head","options"],function(t){zr.prototype[t]=function(e,n){return this.request(Lr(n||{},{method:t,url:e,data:(n||{}).data}))}});et.forEach(["post","put","patch"],function(t){function e(n){return function(l,u,h){return this.request(Lr(h||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}zr.prototype[t]=e(),zr.prototype[t+"Form"]=e(!0)});let dE=class Cb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const u=new Promise(h=>{n.subscribe(h),l=h}).then(a);return u.cancel=function(){n.unsubscribe(l)},u},t(function(l,u,h){n.reason||(n.reason=new $s(l,u,h),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Cb(function(a){t=a}),cancel:t}}};function vE(r){return function(e){return r.apply(null,e)}}function pE(r){return et.isObject(r)&&r.isAxiosError===!0}const qf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(qf).forEach(([r,t])=>{qf[t]=r});function Mb(r){const t=new zr(r),e=nb(zr.prototype.request,t);return et.extend(e,zr.prototype,t,{allOwnKeys:!0}),et.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return Mb(Lr(r,a))},e}const pe=Mb(gl);pe.Axios=zr;pe.CanceledError=$s;pe.CancelToken=dE;pe.isCancel=yb;pe.VERSION=Eb;pe.toFormData=Tu;pe.AxiosError=Ft;pe.Cancel=pe.CanceledError;pe.all=function(t){return Promise.all(t)};pe.spread=vE;pe.isAxiosError=pE;pe.mergeConfig=Lr;pe.AxiosHeaders=oi;pe.formToJSON=r=>gb(et.isHTMLForm(r)?new FormData(r):r);pe.getAdapter=wb.getAdapter;pe.HttpStatusCode=qf;pe.default=pe;const{Axios:JD,AxiosError:tN,CanceledError:eN,isCancel:iN,CancelToken:nN,VERSION:rN,all:sN,Cancel:aN,isAxiosError:lN,spread:oN,toFormData:uN,AxiosHeaders:cN,HttpStatusCode:hN,formToJSON:fN,getAdapter:dN,mergeConfig:vN}=pe,iu=!0,fd={ORDER_SERVICE:"https://7c144340.r3.cpolar.cn",DEPTH_SERVICE:"https://7c144340.r3.cpolar.cn",WS_SERVICE:"wss://7c144340.r3.cpolar.cn/ws",MARKET_SERVICE:"https://7c144340.r3.cpolar.cn",KLINE_SERVICE:"https://7c144340.r3.cpolar.cn"},uu=eb()(ib(r=>({config:fd,isConfigured:!0,setConfig:t=>r({config:t,isConfigured:!0}),clearConfig:()=>r({config:null,isConfigured:!1})}),{name:"exchange-config",skipHydration:iu}));function Tb(){const{config:r}=uu.getState();return r||fd}class mE{orderClient;depthClient;marketClient;klineClient;token=null;constructor(){this.init()}init(){const t=Tb();this.orderClient=pe.create({baseURL:t.ORDER_SERVICE}),this.depthClient=pe.create({baseURL:t.DEPTH_SERVICE}),this.marketClient=pe.create({baseURL:t.MARKET_SERVICE}),this.klineClient=pe.create({baseURL:t.KLINE_SERVICE}),this.orderClient.interceptors.request.use(e=>(this.token&&(e.headers.Authorization=`Bearer ${this.token}`),e))}convertApiOrderToOrder(t){return{id:t.id,clientOrderId:t.client_order_id,symbol:t.symbol,side:t.side,type:t.type,price:t.price,qty:t.qty,quoteQty:t.quote_qty,filledQty:t.filled_qty,filledQuote:t.filled_quote,status:t.status,totalFee:t.total_fee,feeAsset:t.fee_asset,createdAt:t.created_at,updatedAt:t.updated_at}}setToken(t){this.token=t}getToken(){return this.token}async getAuthToken(t){const e=await this.orderClient.post("/api/v1/auth/token",{user_id:t});return{token:e.data.data.token,userId:e.data.data.user_id}}async getTicker(t){return(await this.marketClient.get(`/api/v1/ticker/${t}`)).data.data}async getDepth(t,e=100){return(await this.depthClient.get("/api/v1/depth",{params:{symbol:t,limit:e,with_id:!0}})).data}getIntervalMs(t){return{"1m":6e4,"5m":3e5,"15m":9e5,"30m":18e5,"1h":36e5,"4h":144e5,"1d":864e5,"1w":6048e5}[t]||60*1e3}async getKlines(t,e,n=500,a){try{const l={symbol:t,interval:e};if(a){const h=this.getIntervalMs(e);l.end_time=a,l.start_time=a-n*h}else l.limit=n;const u=await this.klineClient.get("/api/v1/klines",{params:l});return Array.isArray(u.data)?u.data:u.data&&u.data.data&&Array.isArray(u.data.data)||u.data&&u.data.code===0&&Array.isArray(u.data.data)?u.data.data:(console.warn("KAPI:",u.data),[])}catch(l){return console.error("KAPI:",l),[]}}async getAssets(){return(await this.orderClient.get("/api/v1/assets")).data.data}async getAsset(t){return(await this.orderClient.get(`/api/v1/assets/${t}`)).data.data}async placeOrder(t){const e=await this.orderClient.post("/api/v1/orders",t);return{orderId:e.data.data.order_id,clientOrderId:e.data.data.client_order_id}}async cancelOrder(t){await this.orderClient.delete(`/api/v1/orders/${t}`)}async getOrders(t){const e=await this.orderClient.get("/api/v1/orders",{params:t});return{orders:e.data.data.orders.map(n=>this.convertApiOrderToOrder(n)),total:e.data.data.total}}async getOrder(t){const e=await this.orderClient.get(`/api/v1/orders/${t}`);return this.convertApiOrderToOrder(e.data.data)}async getOpenOrders(t){return(await this.orderClient.get("/api/v1/openOrders",{params:t})).data.data.map(n=>this.convertApiOrderToOrder(n))}async getTrades(t,e=50){return(await this.orderClient.get("/api/v1/trades",{params:{symbol:t,limit:e}})).data.data}async getMyTrades(t){return(await this.orderClient.get("/api/v1/myTrades",{params:{symbol:t?.symbol,limit:t?.limit,from_id:t?.fromId}})).data.data}}const _e=new mE;class gE{ws=null;reconnectTimer=null;heartbeatTimer=null;subscriptions=new Set;handlers=new Map;isConnecting=!1;token=null;isAuthenticated=!1;isAuthenticating=!1;pendingPrivateSubscriptions=[];connectionStatus="disconnected";statusCallbacks=new Set;getWsUrl(){return Tb().WS_SERVICE}setConnectionStatus(t){this.connectionStatus!==t&&(this.connectionStatus=t,this.statusCallbacks.forEach(e=>{try{e(t)}catch(n){console.error("[WS] Status callback error:",n)}}))}getConnectionStatus(){return this.connectionStatus}onConnectionStatusChange(t){return this.statusCallbacks.add(t),()=>{this.statusCallbacks.delete(t)}}reinit(){this.disconnect(),this.subscriptions.clear(),this.handlers.clear(),this.isAuthenticated=!1,this.isAuthenticating=!1,this.pendingPrivateSubscriptions=[]}connect(){return new Promise((t,e)=>{if(this.ws?.readyState===WebSocket.OPEN){t();return}if(this.isConnecting){const n=setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&(clearInterval(n),t())},100);return}this.isConnecting=!0,this.setConnectionStatus("connecting"),this.ws=new WebSocket(this.getWsUrl()),this.ws.onopen=()=>{this.isConnecting=!1,this.isAuthenticated=!1,this.setConnectionStatus("connected"),this.startHeartbeat(),this.token?this.authenticate(this.token):this.resubscribePublicChannels(),t()},this.ws.onmessage=n=>{const a=n.data.split(`
`).filter(l=>l.trim());for(const l of a)try{const u=JSON.parse(l);if(u.op==="pong"||u.op==="subscribe"||u.op==="unsubscribe")continue;if(u.op==="auth"){console.log("[WS] Auth response:",u),this.isAuthenticating=!1,u.code===0||u.success?(this.isAuthenticated=!0,this.subscribePrivateChannels()):console.error("[WS] Auth failed:",u.message||u.msg);continue}const h=u.ch||u.channel,f=u.d||u.data;h&&f&&this.notifyHandlers(h,f)}catch(u){console.error("[WS] Message parse error:",u)}},this.ws.onclose=()=>{this.isConnecting=!1,this.isAuthenticated=!1,this.setConnectionStatus("disconnected"),this.stopHeartbeat(),this.scheduleReconnect()},this.ws.onerror=n=>{console.error("[WS] Error:",n),this.isConnecting=!1,e(n)}})}disconnect(){this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws&&(this.ws.close(),this.ws=null),this.subscriptions.clear(),this.handlers.clear()}scheduleReconnect(){this.reconnectTimer||(this.reconnectTimer=window.setTimeout(()=>{this.reconnectTimer=null,this.connect()},3e3))}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=window.setInterval(()=>{this.send({op:"ping"})},3e4)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}sendSubscribe(t){this.send({op:"subscribe",args:t})}sendUnsubscribe(t){this.send({op:"unsubscribe",args:t})}authenticate(t){this.isAuthenticated||this.isAuthenticating||(this.token=t,this.ws?.readyState===WebSocket.OPEN&&(this.isAuthenticating=!0,this.send({op:"auth",args:[t]})))}isPrivateChannel(t){return t==="order"||t==="balance"}resubscribePublicChannels(){const t=[];this.subscriptions.forEach(e=>{this.isPrivateChannel(e)||t.push(e)}),t.length>0&&this.sendSubscribe(t)}subscribePrivateChannels(){if(this.pendingPrivateSubscriptions.length>0){const t=[...new Set(this.pendingPrivateSubscriptions)];console.log("[WS] Subscribing private channels:",t),this.sendSubscribe(t),t.forEach(e=>{this.subscriptions.add(e)}),this.pendingPrivateSubscriptions=[]}}setToken(t){if(this.token=t,t&&this.ws?.readyState===WebSocket.OPEN&&!this.isAuthenticated&&!this.isAuthenticating)this.authenticate(t);else if(!t){this.isAuthenticated=!1,this.isAuthenticating=!1,this.pendingPrivateSubscriptions=[];const e=[];this.subscriptions.forEach(n=>{this.isPrivateChannel(n)&&(e.push(n),this.subscriptions.delete(n),this.handlers.delete(n))}),e.length>0&&this.sendUnsubscribe(e)}}subscribe(t,e){return this.subscriptions.has(t)||(this.subscriptions.add(t),this.isPrivateChannel(t)?this.isAuthenticated?this.sendSubscribe([t]):(this.pendingPrivateSubscriptions.includes(t)||this.pendingPrivateSubscriptions.push(t),this.token&&this.ws?.readyState===WebSocket.OPEN&&this.authenticate(this.token)):this.sendSubscribe([t])),this.handlers.has(t)||this.handlers.set(t,new Set),this.handlers.get(t).add(e),()=>{this.unsubscribe(t,e)}}unsubscribe(t,e){const n=this.handlers.get(t);n&&(n.delete(e),n.size===0&&(this.handlers.delete(t),this.subscriptions.delete(t),this.sendUnsubscribe([t])))}unsubscribeAll(t){const e=[];this.subscriptions.forEach(n=>{n.startsWith(t)&&e.push(n)}),e.forEach(n=>{this.subscriptions.delete(n),this.handlers.delete(n)}),e.length>0&&this.sendUnsubscribe(e)}notifyHandlers(t,e){const n=this.handlers.get(t);n&&n.forEach(a=>{try{a(t,e)}catch(l){console.error("[WS] Handler error:",l)}})}}const se=new gE,yE="BTC_USDT",l0=50,bE=[{label:"0.01",value:2},{label:"0.1",value:1},{label:"1",value:0},{label:"10",value:-1},{label:"100",value:-2}],Wt=eb()(ib((r,t)=>({isLoggedIn:!1,userId:null,token:null,assets:[],orders:[],openOrders:[],symbol:yE,ticker:null,interval:"1m",lastKline:null,login:async e=>{try{const{token:n,userId:a}=await _e.getAuthToken(e);_e.setToken(n),se.setToken(n),r({isLoggedIn:!0,userId:a,token:n}),await t().fetchAssets()}catch(n){throw console.error("Login failed:",n),n}},logout:()=>{_e.setToken(null),se.setToken(null),r({isLoggedIn:!1,userId:null,token:null,assets:[],orders:[],openOrders:[]})},fetchAssets:async()=>{try{const e=await _e.getAssets();r({assets:e})}catch(e){console.error("Fetch assets failed:",e)}},fetchOrders:async()=>{try{const{orders:e}=await _e.getOrders({symbol:t().symbol,pageSize:50});r({orders:e})}catch(e){console.error("Fetch orders failed:",e)}},fetchOpenOrders:async()=>{try{const e=await _e.getOpenOrders();r({openOrders:e})}catch(e){console.error("Fetch open orders failed:",e)}},updateOrder:e=>{r(n=>{const a=n.orders.findIndex(l=>l.id===e.id);if(a>=0){const l=[...n.orders];return l[a]=e,{orders:l}}else return{orders:[e,...n.orders]}})},updateOpenOrders:e=>{r(n=>{const a=e.status===1||e.status===2,l=n.openOrders.findIndex(u=>u.id===e.id);if(a)if(l>=0){const u=[...n.openOrders];return u[l]=e,{openOrders:u}}else return{openOrders:[e,...n.openOrders]};else if(l>=0)return{openOrders:n.openOrders.filter(h=>h.id!==e.id)};return n})},updateAsset:e=>{r(n=>{const a=n.assets.findIndex(l=>l.asset===e.asset);if(a>=0){const l=[...n.assets];return l[a]=e,{assets:l}}else return{assets:[...n.assets,e]}})},updateAssetDelta:(e,n)=>{r(a=>{const l=a.assets.findIndex(u=>u.asset===e);if(l>=0){const u=a.assets[l],h=(parseFloat(u.available)+parseFloat(n)).toString(),f=(parseFloat(h)+parseFloat(u.frozen)).toString(),d=[...a.assets];return d[l]={...u,available:h,total:f},{assets:d}}else{const u=parseFloat(n).toString();return{assets:[...a.assets,{asset:e,available:u,frozen:"0",total:u}]}}})},setSymbol:e=>{r({symbol:e,ticker:null})},setTicker:e=>{r({ticker:e})},setInterval:e=>{r({interval:e})},setLastKline:e=>{r({lastKline:e})}}),{name:"exchange-storage",partialize:r=>({token:r.token,userId:r.userId,isLoggedIn:r.isLoggedIn,symbol:r.symbol,interval:r.interval})})),{token:df}=Wt.getState();df&&(_e.setToken(df),se.setToken(df));function Ab(){const r=Wt(a=>a.symbol),t=Wt(a=>a.ticker),e=Wt(a=>a.setTicker),n=k.useCallback((a,l)=>{const u=l;e({symbol:u.s,lastPrice:u.lp,lastQty:u.lq,open24h:u.o,high24h:u.h,low24h:u.l,volume24h:u.v,quoteVolume24h:u.qv,priceChange24h:u.c,priceChangePercent:u.cp,bestBid:u.bb,bestAsk:u.ba,timestamp:u.t})},[e]);return k.useEffect(()=>{const a=`ticker@${r}`;return se.connect().then(()=>{se.subscribe(a,n)}).catch(()=>{}),()=>{se.unsubscribe(a,n)}},[r,n]),t}function dd(){const[r,t]=k.useState(se.getConnectionStatus());return k.useEffect(()=>se.onConnectionStatusChange(n=>{t(n)}),[]),r}function xE(r,t,e){const n=parseFloat(r);if(t>=0){const a=Math.pow(10,-t);return e==="bid"?(Math.floor(n/a)*a).toFixed(t):(Math.ceil(n/a)*a).toFixed(t)}else{const a=Math.pow(10,-t);return String(e==="bid"?Math.floor(n/a)*a:Math.ceil(n/a)*a)}}function o0(r,t,e,n){const a=new Map;for(const[f,d]of r){if(parseFloat(d)===0)continue;const v=xE(f,t,e),m=a.get(v)||0;a.set(v,m+parseFloat(d))}const u=[...a.entries()].sort((f,d)=>e==="bid"?parseFloat(d[0])-parseFloat(f[0]):parseFloat(f[0])-parseFloat(d[0])).slice(0,n);let h=0;return u.map(([f,d])=>(h+=d,[f,d.toFixed(8),h.toFixed(8)]))}function SE(r=2){const t=Wt(N=>N.symbol),e=dd(),[n,a]=k.useState({bids:[],asks:[],isReady:!1}),l=k.useRef(new Map),u=k.useRef(new Map),h=k.useRef(0),f=k.useRef([]),d=k.useRef(!1),v=k.useRef(0),m=k.useRef(!1),y=k.useRef(e),x=5,b=500,S=k.useRef(t);S.current=t;const _=k.useRef(r);_.current=r;const C=k.useCallback(()=>{const N=o0(l.current,_.current,"bid",l0),V=o0(u.current,_.current,"ask",l0);a({bids:N,asks:V,isReady:!0})},[]),A=k.useCallback(N=>{for(const[V,B]of N.b)B==="0"||parseFloat(B)===0?l.current.delete(V):l.current.set(V,B);for(const[V,B]of N.a)B==="0"||parseFloat(B)===0?u.current.delete(V):u.current.set(V,B);h.current=N.u},[]),T=k.useRef(void 0),D=k.useCallback(async(N=!1)=>{if(!d.current){d.current=!0;try{if(N){if(v.current++,v.current>x){d.current=!1;return}await new Promise(Z=>setTimeout(Z,b))}const V=await _e.getDepth(S.current,500),B=V.id;l.current.clear(),u.current.clear();for(const[Z,it]of V.bids)l.current.set(Z,it);for(const[Z,it]of V.asks)u.current.set(Z,it);const I=f.current.sort((Z,it)=>Z.U-it.U);let W=-1;for(let Z=0;Z<I.length;Z++){const it=I[Z];if(!(it.u<=B)&&it.U<=B+1&&it.u>=B+1){W=Z;break}}if(W>=0){for(let Z=W;Z<I.length;Z++){const it=I[Z];if(Z>W&&it.U>h.current+1)break;it.u<=h.current||A(it)}v.current=0}else h.current=B;f.current=[],C()}catch(V){console.error("Failed to initialize order book:",V)}finally{d.current=!1}}},[A,C]);T.current=D;const M=k.useRef(void 0);M.current=(N,V)=>{const B=V;if(d.current||h.current===0){f.current.push(B);return}if(!(B.u<=h.current)){if(B.U>h.current+1){h.current=0,T.current?.(!0);return}A(B),C()}};const j=k.useCallback((N,V)=>{M.current?.(N,V)},[]);return k.useEffect(()=>{const N=y.current!=="connected"&&e==="connected",V=S.current!==t||N;if(S.current=t,y.current=e,!V)return;l.current.clear(),u.current.clear(),h.current=0,f.current=[],v.current=0,m.current=!1,a({bids:[],asks:[],isReady:!1});const B=`depth_update@${t}`;let I=!0;return _e.getDepth(t,500).then(W=>{if(!I)return;for(const[it,X]of W.bids)l.current.set(it,X);for(const[it,X]of W.asks)u.current.set(it,X);h.current=W.id;const Z=f.current.sort((it,X)=>it.U-X.U);for(const it of Z)if(!(it.u<=h.current)){if(it.U>h.current+1)break;A(it)}f.current=[],C()}).catch(W=>{console.error("Failed to get initial depth:",W)}),se.connect().then(()=>{I&&(m.current=!0,se.subscribe(B,j))}).catch(()=>{}),()=>{I=!1,se.unsubscribe(B,j)}},[t,e,j,A,C]),k.useEffect(()=>{h.current>0&&C()},[r,C]),n}function _E(r=50){const t=Wt(f=>f.symbol),e=dd(),[n,a]=k.useState([]),l=k.useRef(r),u=k.useRef(t),h=k.useRef(e);return k.useEffect(()=>{l.current=r},[r]),k.useEffect(()=>{const f=h.current!=="connected"&&e==="connected",d=u.current!==t||f;if(u.current=t,h.current=e,!d)return;a([]);const v=`trade@${t}`,m=(y,x)=>{const b=x,S={id:String(b.id),symbol:b.s,price:b.p,qty:b.q,quote_qty:b.qq,taker_side:b.ts,created_at:b.t};a(_=>_.some(A=>A.id===S.id)?_:[S,..._].slice(0,l.current))};return _e.getTrades(t,r).then(y=>{y&&y.length>0&&a(y)}).catch(y=>{console.error("Failed to fetch trades:",y)}),se.connect().then(()=>{se.subscribe(v,m)}).catch(()=>{}),()=>{se.unsubscribe(v,m)}},[t,r,e]),n}function wE(r){const[t,e]=k.useState(()=>typeof window<"u"?window.matchMedia(r).matches:!1);return k.useEffect(()=>{const n=window.matchMedia(r),a=l=>e(l.matches);return n.addEventListener?(n.addEventListener("change",a),()=>n.removeEventListener("change",a)):(n.addListener(a),()=>n.removeListener(a))},[r]),t}function Yr(){return wE("(max-width: 768px)")}var vd=tb(),EE=Object.defineProperty,CE=(r,t,e)=>t in r?EE(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,vf=(r,t,e)=>(CE(r,typeof t!="symbol"?t+"":t,e),e);let ME=class{constructor(){vf(this,"current",this.detect()),vf(this,"handoffState","pending"),vf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Zi=new ME;function yl(r){var t;return Zi.isServer?null:r==null?document:(t=r?.ownerDocument)!=null?t:document}function Xf(r){var t,e;return Zi.isServer?null:r==null?document:(e=(t=r?.getRootNode)==null?void 0:t.call(r))!=null?e:document}function Rb(r){var t,e;return(e=(t=Xf(r))==null?void 0:t.activeElement)!=null?e:null}function TE(r){return Rb(r)===r}function Ru(r){typeof queueMicrotask=="function"?queueMicrotask(r):Promise.resolve().then(r).catch(t=>setTimeout(()=>{throw t}))}function Rn(){let r=[],t={addEventListener(e,n,a,l){return e.addEventListener(n,a,l),t.add(()=>e.removeEventListener(n,a,l))},requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...e){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...e))},setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){let n={current:!0};return Ru(()=>{n.current&&e[0]()}),t.add(()=>{n.current=!1})},style(e,n,a){let l=e.style.getPropertyValue(n);return Object.assign(e.style,{[n]:a}),this.add(()=>{Object.assign(e.style,{[n]:l})})},group(e){let n=Rn();return e(n),this.add(()=>n.dispose())},add(e){return r.includes(e)||r.push(e),()=>{let n=r.indexOf(e);if(n>=0)for(let a of r.splice(n,1))a()}},dispose(){for(let e of r.splice(0))e()}};return t}function Du(){let[r]=k.useState(Rn);return k.useEffect(()=>()=>r.dispose(),[r]),r}let ui=(r,t)=>{Zi.isServer?k.useEffect(r,t):k.useLayoutEffect(r,t)};function Wr(r){let t=k.useRef(r);return ui(()=>{t.current=r},[r]),t}let ue=function(r){let t=Wr(r);return kt.useCallback((...e)=>t.current(...e),[t])};function bl(r){return k.useMemo(()=>r,Object.values(r))}let AE=k.createContext(void 0);function RE(){return k.useContext(AE)}function Gf(...r){return Array.from(new Set(r.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Tn(r,t,...e){if(r in t){let a=t[r];return typeof a=="function"?a(...e):a}let n=new Error(`Tried to handle "${r}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Tn),n}var cu=(r=>(r[r.None=0]="None",r[r.RenderStrategy=1]="RenderStrategy",r[r.Static=2]="Static",r))(cu||{}),nr=(r=>(r[r.Unmount=0]="Unmount",r[r.Hidden=1]="Hidden",r))(nr||{});function ki(){let r=NE();return k.useCallback(t=>DE({mergeRefs:r,...t}),[r])}function DE({ourProps:r,theirProps:t,slot:e,defaultTag:n,features:a,visible:l=!0,name:u,mergeRefs:h}){h=h??OE;let f=Db(t,r);if(l)return Po(f,e,n,u,h);let d=a??0;if(d&2){let{static:v=!1,...m}=f;if(v)return Po(m,e,n,u,h)}if(d&1){let{unmount:v=!0,...m}=f;return Tn(v?0:1,{0(){return null},1(){return Po({...m,hidden:!0,style:{display:"none"}},e,n,u,h)}})}return Po(f,e,n,u,h)}function Po(r,t={},e,n,a){let{as:l=e,children:u,refName:h="ref",...f}=pf(r,["unmount","static"]),d=r.ref!==void 0?{[h]:r.ref}:{},v=typeof u=="function"?u(t):u;"className"in f&&f.className&&typeof f.className=="function"&&(f.className=f.className(t)),f["aria-labelledby"]&&f["aria-labelledby"]===f.id&&(f["aria-labelledby"]=void 0);let m={};if(t){let y=!1,x=[];for(let[b,S]of Object.entries(t))typeof S=="boolean"&&(y=!0),S===!0&&x.push(b.replace(/([A-Z])/g,_=>`-${_.toLowerCase()}`));if(y){m["data-headlessui-state"]=x.join(" ");for(let b of x)m[`data-${b}`]=""}}if(el(l)&&(Object.keys(Rr(f)).length>0||Object.keys(Rr(m)).length>0))if(!k.isValidElement(v)||Array.isArray(v)&&v.length>1||zE(v)){if(Object.keys(Rr(f)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Rr(f)).concat(Object.keys(Rr(m))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=v.props,x=y?.className,b=typeof x=="function"?(...C)=>Gf(x(...C),f.className):Gf(x,f.className),S=b?{className:b}:{},_=Db(v.props,Rr(pf(f,["ref"])));for(let C in m)C in _&&delete m[C];return k.cloneElement(v,Object.assign({},_,m,d,{ref:a(kE(v),d.ref)},S))}return k.createElement(l,Object.assign({},pf(f,["ref"]),!el(l)&&d,!el(l)&&m),v)}function NE(){let r=k.useRef([]),t=k.useCallback(e=>{for(let n of r.current)n!=null&&(typeof n=="function"?n(e):n.current=e)},[]);return(...e)=>{if(!e.every(n=>n==null))return r.current=e,t}}function OE(...r){return r.every(t=>t==null)?void 0:t=>{for(let e of r)e!=null&&(typeof e=="function"?e(t):e.current=t)}}function Db(...r){if(r.length===0)return{};if(r.length===1)return r[0];let t={},e={};for(let n of r)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(e[a]!=null||(e[a]=[]),e[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])for(let n in e)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(e[n]=[a=>{var l;return(l=a?.preventDefault)==null?void 0:l.call(a)}]);for(let n in e)Object.assign(t,{[n](a,...l){let u=e[n];for(let h of u){if((a instanceof Event||a?.nativeEvent instanceof Event)&&a.defaultPrevented)return;h(a,...l)}}});return t}function hi(r){var t;return Object.assign(k.forwardRef(r),{displayName:(t=r.displayName)!=null?t:r.name})}function Rr(r){let t=Object.assign({},r);for(let e in t)t[e]===void 0&&delete t[e];return t}function pf(r,t=[]){let e=Object.assign({},r);for(let n of t)n in e&&delete e[n];return e}function kE(r){return kt.version.split(".")[0]>="19"?r.props.ref:r.ref}function el(r){return r===k.Fragment||r===Symbol.for("react.fragment")}function zE(r){return el(r.type)}let jE="span";var hu=(r=>(r[r.None=1]="None",r[r.Focusable=2]="Focusable",r[r.Hidden=4]="Hidden",r))(hu||{});function LE(r,t){var e;let{features:n=1,...a}=r,l={ref:t,"aria-hidden":(n&2)===2?!0:(e=a["aria-hidden"])!=null?e:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return ki()({ourProps:l,theirProps:a,slot:{},defaultTag:jE,name:"Hidden"})}let Kf=hi(LE);function BE(r){return typeof r!="object"||r===null?!1:"nodeType"in r}function ar(r){return BE(r)&&"tagName"in r}function Br(r){return ar(r)&&"accessKey"in r}function rr(r){return ar(r)&&"tabIndex"in r}function FE(r){return ar(r)&&"style"in r}function PE(r){return Br(r)&&r.nodeName==="IFRAME"}function IE(r){return Br(r)&&r.nodeName==="INPUT"}let Nb=Symbol();function VE(r,t=!0){return Object.assign(r,{[Nb]:t})}function Ji(...r){let t=k.useRef(r);k.useEffect(()=>{t.current=r},[r]);let e=ue(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return r.every(n=>n==null||n?.[Nb])?void 0:e}let pd=k.createContext(null);pd.displayName="DescriptionContext";function Ob(){let r=k.useContext(pd);if(r===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Ob),t}return r}function UE(){let[r,t]=k.useState([]);return[r.length>0?r.join(" "):void 0,k.useMemo(()=>function(e){let n=ue(l=>(t(u=>[...u,l]),()=>t(u=>{let h=u.slice(),f=h.indexOf(l);return f!==-1&&h.splice(f,1),h}))),a=k.useMemo(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return kt.createElement(pd.Provider,{value:a},e.children)},[t])]}let HE="p";function YE(r,t){let e=k.useId(),n=RE(),{id:a=`headlessui-description-${e}`,...l}=r,u=Ob(),h=Ji(t);ui(()=>u.register(a),[a,u.register]);let f=bl({...u.slot,disabled:n||!1}),d={ref:h,...u.props,id:a};return ki()({ourProps:d,theirProps:l,slot:f,defaultTag:HE,name:u.name||"Description"})}let WE=hi(YE),qE=Object.assign(WE,{});var kb=(r=>(r.Space=" ",r.Enter="Enter",r.Escape="Escape",r.Backspace="Backspace",r.Delete="Delete",r.ArrowLeft="ArrowLeft",r.ArrowUp="ArrowUp",r.ArrowRight="ArrowRight",r.ArrowDown="ArrowDown",r.Home="Home",r.End="End",r.PageUp="PageUp",r.PageDown="PageDown",r.Tab="Tab",r))(kb||{});let XE=k.createContext(()=>{});function GE({value:r,children:t}){return kt.createElement(XE.Provider,{value:r},t)}let zb=class extends Map{constructor(t){super(),this.factory=t}get(t){let e=super.get(t);return e===void 0&&(e=this.factory(t),this.set(t,e)),e}};var KE=Object.defineProperty,QE=(r,t,e)=>t in r?KE(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,$E=(r,t,e)=>(QE(r,t+"",e),e),jb=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)},Oi=(r,t,e)=>(jb(r,t,"read from private field"),e?e.call(r):t.get(r)),mf=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},u0=(r,t,e,n)=>(jb(r,t,"write to private field"),t.set(r,e),e),Ki,$a,Za;let ZE=class{constructor(t){mf(this,Ki,{}),mf(this,$a,new zb(()=>new Set)),mf(this,Za,new Set),$E(this,"disposables",Rn()),u0(this,Ki,t),Zi.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Oi(this,Ki)}subscribe(t,e){if(Zi.isServer)return()=>{};let n={selector:t,callback:e,current:t(Oi(this,Ki))};return Oi(this,Za).add(n),this.disposables.add(()=>{Oi(this,Za).delete(n)})}on(t,e){return Zi.isServer?()=>{}:(Oi(this,$a).get(t).add(e),this.disposables.add(()=>{Oi(this,$a).get(t).delete(e)}))}send(t){let e=this.reduce(Oi(this,Ki),t);if(e!==Oi(this,Ki)){u0(this,Ki,e);for(let n of Oi(this,Za)){let a=n.selector(Oi(this,Ki));Lb(n.current,a)||(n.current=a,n.callback(a))}for(let n of Oi(this,$a).get(t.type))n(Oi(this,Ki),t)}}};Ki=new WeakMap,$a=new WeakMap,Za=new WeakMap;function Lb(r,t){return Object.is(r,t)?!0:typeof r!="object"||r===null||typeof t!="object"||t===null?!1:Array.isArray(r)&&Array.isArray(t)?r.length!==t.length?!1:gf(r[Symbol.iterator](),t[Symbol.iterator]()):r instanceof Map&&t instanceof Map||r instanceof Set&&t instanceof Set?r.size!==t.size?!1:gf(r.entries(),t.entries()):c0(r)&&c0(t)?gf(Object.entries(r)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function gf(r,t){do{let e=r.next(),n=t.next();if(e.done&&n.done)return!0;if(e.done||n.done||!Object.is(e.value,n.value))return!1}while(!0)}function c0(r){if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let t=Object.getPrototypeOf(r);return t===null||Object.getPrototypeOf(t)===null}var JE=Object.defineProperty,tC=(r,t,e)=>t in r?JE(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,h0=(r,t,e)=>(tC(r,typeof t!="symbol"?t+"":t,e),e),eC=(r=>(r[r.Push=0]="Push",r[r.Pop=1]="Pop",r))(eC||{});let iC={0(r,t){let e=t.id,n=r.stack,a=r.stack.indexOf(e);if(a!==-1){let l=r.stack.slice();return l.splice(a,1),l.push(e),n=l,{...r,stack:n}}return{...r,stack:[...r.stack,e]}},1(r,t){let e=t.id,n=r.stack.indexOf(e);if(n===-1)return r;let a=r.stack.slice();return a.splice(n,1),{...r,stack:a}}},nC=class Bb extends ZE{constructor(){super(...arguments),h0(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),h0(this,"selectors",{isTop:(t,e)=>t.stack[t.stack.length-1]===e,inStack:(t,e)=>t.stack.includes(e)})}static new(){return new Bb({stack:[]})}reduce(t,e){return Tn(e.type,iC,t,e)}};const Fb=new zb(()=>nC.new());var yf={exports:{}},bf={};var f0;function rC(){if(f0)return bf;f0=1;var r=wu();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var e=typeof Object.is=="function"?Object.is:t,n=r.useSyncExternalStore,a=r.useRef,l=r.useEffect,u=r.useMemo,h=r.useDebugValue;return bf.useSyncExternalStoreWithSelector=function(f,d,v,m,y){var x=a(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=u(function(){function _(M){if(!C){if(C=!0,A=M,M=m(M),y!==void 0&&b.hasValue){var j=b.value;if(y(j,M))return T=j}return T=M}if(j=T,e(A,M))return j;var N=m(M);return y!==void 0&&y(j,N)?(A=M,j):(A=M,T=N)}var C=!1,A,T,D=v===void 0?null:v;return[function(){return _(d())},D===null?void 0:function(){return _(D())}]},[d,v,m,y]);var S=n(f,x[0],x[1]);return l(function(){b.hasValue=!0,b.value=S},[S]),h(S),S},bf}var d0;function sC(){return d0||(d0=1,yf.exports=rC()),yf.exports}var aC=sC();function Pb(r,t,e=Lb){return aC.useSyncExternalStoreWithSelector(ue(n=>r.subscribe(lC,n)),ue(()=>r.state),ue(()=>r.state),ue(t),e)}function lC(r){return r}function xl(r,t){let e=k.useId(),n=Fb.get(t),[a,l]=Pb(n,k.useCallback(u=>[n.selectors.isTop(u,e),n.selectors.inStack(u,e)],[n,e]));return ui(()=>{if(r)return n.actions.push(e),()=>n.actions.pop(e)},[n,r,e]),r?l?a:!0:!1}let Qf=new Map,il=new Map;function v0(r){var t;let e=(t=il.get(r))!=null?t:0;return il.set(r,e+1),e!==0?()=>p0(r):(Qf.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0,()=>p0(r))}function p0(r){var t;let e=(t=il.get(r))!=null?t:1;if(e===1?il.delete(r):il.set(r,e-1),e!==1)return;let n=Qf.get(r);n&&(n["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",n["aria-hidden"]),r.inert=n.inert,Qf.delete(r))}function oC(r,{allowed:t,disallowed:e}={}){let n=xl(r,"inert-others");ui(()=>{var a,l;if(!n)return;let u=Rn();for(let f of(a=e?.())!=null?a:[])f&&u.add(v0(f));let h=(l=t?.())!=null?l:[];for(let f of h){if(!f)continue;let d=yl(f);if(!d)continue;let v=f.parentElement;for(;v&&v!==d.body;){for(let m of v.children)h.some(y=>m.contains(y))||u.add(v0(m));v=v.parentElement}}return u.dispose},[n,t,e])}function uC(r,t,e){let n=Wr(a=>{let l=a.getBoundingClientRect();l.x===0&&l.y===0&&l.width===0&&l.height===0&&e()});k.useEffect(()=>{if(!r)return;let a=t===null?null:Br(t)?t:t.current;if(!a)return;let l=Rn();if(typeof ResizeObserver<"u"){let u=new ResizeObserver(()=>n.current(a));u.observe(a),l.add(()=>u.disconnect())}if(typeof IntersectionObserver<"u"){let u=new IntersectionObserver(()=>n.current(a));u.observe(a),l.add(()=>u.disconnect())}return()=>l.dispose()},[t,n,r])}let fu=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(r=>`${r}:not([tabindex='-1'])`).join(","),cC=["[data-autofocus]"].map(r=>`${r}:not([tabindex='-1'])`).join(",");var _n=(r=>(r[r.First=1]="First",r[r.Previous=2]="Previous",r[r.Next=4]="Next",r[r.Last=8]="Last",r[r.WrapAround=16]="WrapAround",r[r.NoScroll=32]="NoScroll",r[r.AutoFocus=64]="AutoFocus",r))(_n||{}),$f=(r=>(r[r.Error=0]="Error",r[r.Overflow=1]="Overflow",r[r.Success=2]="Success",r[r.Underflow=3]="Underflow",r))($f||{}),hC=(r=>(r[r.Previous=-1]="Previous",r[r.Next=1]="Next",r))(hC||{});function fC(r=document.body){return r==null?[]:Array.from(r.querySelectorAll(fu)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}function dC(r=document.body){return r==null?[]:Array.from(r.querySelectorAll(cC)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ib=(r=>(r[r.Strict=0]="Strict",r[r.Loose=1]="Loose",r))(Ib||{});function vC(r,t=0){var e;return r===((e=yl(r))==null?void 0:e.body)?!1:Tn(t,{0(){return r.matches(fu)},1(){let n=r;for(;n!==null;){if(n.matches(fu))return!0;n=n.parentElement}return!1}})}var pC=(r=>(r[r.Keyboard=0]="Keyboard",r[r.Mouse=1]="Mouse",r))(pC||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",r=>{r.metaKey||r.altKey||r.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",r=>{r.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:r.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Mn(r){r?.focus({preventScroll:!0})}let mC=["textarea","input"].join(",");function gC(r){var t,e;return(e=(t=r?.matches)==null?void 0:t.call(r,mC))!=null?e:!1}function yC(r,t=e=>e){return r.slice().sort((e,n)=>{let a=t(e),l=t(n);if(a===null||l===null)return 0;let u=a.compareDocumentPosition(l);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function nl(r,t,{sorted:e=!0,relativeTo:n=null,skipElements:a=[]}={}){let l=Array.isArray(r)?r.length>0?Xf(r[0]):document:Xf(r),u=Array.isArray(r)?e?yC(r):r:t&64?dC(r):fC(r);a.length>0&&u.length>1&&(u=u.filter(x=>!a.some(b=>b!=null&&"current"in b?b?.current===x:b===x))),n=n??l?.activeElement;let h=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,u.indexOf(n))-1;if(t&4)return Math.max(0,u.indexOf(n))+1;if(t&8)return u.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},v=0,m=u.length,y;do{if(v>=m||v+m<=0)return 0;let x=f+v;if(t&16)x=(x+m)%m;else{if(x<0)return 3;if(x>=m)return 1}y=u[x],y?.focus(d),v+=h}while(y!==Rb(y));return t&6&&gC(y)&&y.select(),2}function Vb(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function bC(){return/Android/gi.test(window.navigator.userAgent)}function m0(){return Vb()||bC()}function Io(r,t,e,n){let a=Wr(e);k.useEffect(()=>{if(!r)return;function l(u){a.current(u)}return document.addEventListener(t,l,n),()=>document.removeEventListener(t,l,n)},[r,t,n])}function Ub(r,t,e,n){let a=Wr(e);k.useEffect(()=>{if(!r)return;function l(u){a.current(u)}return window.addEventListener(t,l,n),()=>window.removeEventListener(t,l,n)},[r,t,n])}const g0=30;function xC(r,t,e){let n=Wr(e),a=k.useCallback(function(h,f){if(h.defaultPrevented)return;let d=f(h);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let v=(function m(y){return typeof y=="function"?m(y()):Array.isArray(y)||y instanceof Set?y:[y]})(t);for(let m of v)if(m!==null&&(m.contains(d)||h.composed&&h.composedPath().includes(m)))return;return!vC(d,Ib.Loose)&&d.tabIndex!==-1&&h.preventDefault(),n.current(h,d)},[n,t]),l=k.useRef(null);Io(r,"pointerdown",h=>{var f,d;m0()||(l.current=((d=(f=h.composedPath)==null?void 0:f.call(h))==null?void 0:d[0])||h.target)},!0),Io(r,"pointerup",h=>{if(m0()||!l.current)return;let f=l.current;return l.current=null,a(h,()=>f)},!0);let u=k.useRef({x:0,y:0});Io(r,"touchstart",h=>{u.current.x=h.touches[0].clientX,u.current.y=h.touches[0].clientY},!0),Io(r,"touchend",h=>{let f={x:h.changedTouches[0].clientX,y:h.changedTouches[0].clientY};if(!(Math.abs(f.x-u.current.x)>=g0||Math.abs(f.y-u.current.y)>=g0))return a(h,()=>rr(h.target)?h.target:null)},!0),Ub(r,"blur",h=>a(h,()=>PE(window.document.activeElement)?window.document.activeElement:null),!0)}function md(...r){return k.useMemo(()=>yl(...r),[...r])}function Hb(r,t,e,n){let a=Wr(e);k.useEffect(()=>{r=r??window;function l(u){a.current(u)}return r.addEventListener(t,l,n),()=>r.removeEventListener(t,l,n)},[r,t,n])}function SC(r){return k.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getSnapshot)}function _C(r,t){let e=r(),n=new Set;return{getSnapshot(){return e},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...l){let u=t[a].call(e,...l);u&&(e=u,n.forEach(h=>h()))}}}function wC(){let r;return{before({doc:t}){var e;let n=t.documentElement,a=(e=t.defaultView)!=null?e:window;r=Math.max(0,a.innerWidth-n.clientWidth)},after({doc:t,d:e}){let n=t.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),l=Math.max(0,r-a);e.style(n,"paddingRight",`${l}px`)}}}function EC(){return Vb()?{before({doc:r,d:t,meta:e}){function n(a){for(let l of e().containers)for(let u of l())if(u.contains(a))return!0;return!1}t.microTask(()=>{var a;if(window.getComputedStyle(r.documentElement).scrollBehavior!=="auto"){let h=Rn();h.style(r.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>h.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,u=null;t.addEventListener(r,"click",h=>{if(rr(h.target))try{let f=h.target.closest("a");if(!f)return;let{hash:d}=new URL(f.href),v=r.querySelector(d);rr(v)&&!n(v)&&(u=v)}catch{}},!0),t.group(h=>{t.addEventListener(r,"touchstart",f=>{if(h.dispose(),rr(f.target)&&FE(f.target))if(n(f.target)){let d=f.target;for(;d.parentElement&&n(d.parentElement);)d=d.parentElement;h.style(d,"overscrollBehavior","contain")}else h.style(f.target,"touchAction","none")})}),t.addEventListener(r,"touchmove",h=>{if(rr(h.target)){if(IE(h.target))return;if(n(h.target)){let f=h.target;for(;f.parentElement&&f.dataset.headlessuiPortal!==""&&!(f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth);)f=f.parentElement;f.dataset.headlessuiPortal===""&&h.preventDefault()}else h.preventDefault()}},{passive:!1}),t.add(()=>{var h;let f=(h=window.scrollY)!=null?h:window.pageYOffset;l!==f&&window.scrollTo(0,l),u&&u.isConnected&&(u.scrollIntoView({block:"nearest"}),u=null)})})}}:{}}function CC(){return{before({doc:r,d:t}){t.style(r.documentElement,"overflow","hidden")}}}function y0(r){let t={};for(let e of r)Object.assign(t,e(t));return t}let kr=_C(()=>new Map,{PUSH(r,t){var e;let n=(e=this.get(r))!=null?e:{doc:r,count:0,d:Rn(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(t),n.computedMeta=y0(n.meta),this.set(r,n),this},POP(r,t){let e=this.get(r);return e&&(e.count--,e.meta.delete(t),e.computedMeta=y0(e.meta)),this},SCROLL_PREVENT(r){let t={doc:r.doc,d:r.d,meta(){return r.computedMeta}},e=[EC(),wC(),CC()];e.forEach(({before:n})=>n?.(t)),e.forEach(({after:n})=>n?.(t))},SCROLL_ALLOW({d:r}){r.dispose()},TEARDOWN({doc:r}){this.delete(r)}});kr.subscribe(()=>{let r=kr.getSnapshot(),t=new Map;for(let[e]of r)t.set(e,e.documentElement.style.overflow);for(let e of r.values()){let n=t.get(e.doc)==="hidden",a=e.count!==0;(a&&!n||!a&&n)&&kr.dispatch(e.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",e),e.count===0&&kr.dispatch("TEARDOWN",e)}});function MC(r,t,e=()=>({containers:[]})){let n=SC(kr),a=t?n.get(t):void 0,l=a?a.count>0:!1;return ui(()=>{if(!(!t||!r))return kr.dispatch("PUSH",t,e),()=>kr.dispatch("POP",t,e)},[r,t]),l}function TC(r,t,e=()=>[document.body]){let n=xl(r,"scroll-lock");MC(n,t,a=>{var l;return{containers:[...(l=a.containers)!=null?l:[],e]}})}function AC(r=0){let[t,e]=k.useState(r),n=k.useCallback(f=>e(f),[]),a=k.useCallback(f=>e(d=>d|f),[]),l=k.useCallback(f=>(t&f)===f,[t]),u=k.useCallback(f=>e(d=>d&~f),[]),h=k.useCallback(f=>e(d=>d^f),[]);return{flags:t,setFlag:n,addFlag:a,hasFlag:l,removeFlag:u,toggleFlag:h}}var RC={},b0,x0;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((b0=process==null?void 0:RC)==null?void 0:b0.NODE_ENV)==="test"&&typeof((x0=Element?.prototype)==null?void 0:x0.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var DC=(r=>(r[r.None=0]="None",r[r.Closed=1]="Closed",r[r.Enter=2]="Enter",r[r.Leave=4]="Leave",r))(DC||{});function NC(r){let t={};for(let e in r)r[e]===!0&&(t[`data-${e}`]="");return t}function OC(r,t,e,n){let[a,l]=k.useState(e),{hasFlag:u,addFlag:h,removeFlag:f}=AC(r&&a?3:0),d=k.useRef(!1),v=k.useRef(!1),m=Du();return ui(()=>{var y;if(r){if(e&&l(!0),!t){e&&h(3);return}return(y=n?.start)==null||y.call(n,e),kC(t,{inFlight:d,prepare(){v.current?v.current=!1:v.current=d.current,d.current=!0,!v.current&&(e?(h(3),f(4)):(h(4),f(2)))},run(){v.current?e?(f(3),h(4)):(f(4),h(3)):e?f(1):h(1)},done(){var x;v.current&&LC(t)||(d.current=!1,f(7),e||l(!1),(x=n?.end)==null||x.call(n,e))}})}},[r,e,t,m]),r?[a,{closed:u(1),enter:u(2),leave:u(4),transition:u(2)||u(4)}]:[e,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function kC(r,{prepare:t,run:e,done:n,inFlight:a}){let l=Rn();return jC(r,{prepare:t,inFlight:a}),l.nextFrame(()=>{e(),l.requestAnimationFrame(()=>{l.add(zC(r,n))})}),l.dispose}function zC(r,t){var e,n;let a=Rn();if(!r)return a.dispose;let l=!1;a.add(()=>{l=!0});let u=(n=(e=r.getAnimations)==null?void 0:e.call(r).filter(h=>h instanceof CSSTransition))!=null?n:[];return u.length===0?(t(),a.dispose):(Promise.allSettled(u.map(h=>h.finished)).then(()=>{l||t()}),a.dispose)}function jC(r,{inFlight:t,prepare:e}){if(t!=null&&t.current){e();return}let n=r.style.transition;r.style.transition="none",e(),r.offsetHeight,r.style.transition=n}function LC(r){var t,e;return((e=(t=r.getAnimations)==null?void 0:t.call(r))!=null?e:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}function gd(r,t){let e=k.useRef([]),n=ue(r);k.useEffect(()=>{let a=[...e.current];for(let[l,u]of t.entries())if(e.current[l]!==u){let h=n(t,a);return e.current=t,h}},[n,...t])}let Nu=k.createContext(null);Nu.displayName="OpenClosedContext";var Ii=(r=>(r[r.Open=1]="Open",r[r.Closed=2]="Closed",r[r.Closing=4]="Closing",r[r.Opening=8]="Opening",r))(Ii||{});function Ou(){return k.useContext(Nu)}function BC({value:r,children:t}){return kt.createElement(Nu.Provider,{value:r},t)}function FC({children:r}){return kt.createElement(Nu.Provider,{value:null},r)}function PC(r){function t(){document.readyState!=="loading"&&(r(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let ir=[];PC(()=>{function r(t){if(!rr(t.target)||t.target===document.body||ir[0]===t.target)return;let e=t.target;e=e.closest(fu),ir.unshift(e??t.target),ir=ir.filter(n=>n!=null&&n.isConnected),ir.splice(10)}window.addEventListener("click",r,{capture:!0}),window.addEventListener("mousedown",r,{capture:!0}),window.addEventListener("focus",r,{capture:!0}),document.body.addEventListener("click",r,{capture:!0}),document.body.addEventListener("mousedown",r,{capture:!0}),document.body.addEventListener("focus",r,{capture:!0})});function Yb(r){let t=ue(r),e=k.useRef(!1);k.useEffect(()=>(e.current=!1,()=>{e.current=!0,Ru(()=>{e.current&&t()})}),[t])}let Wb=k.createContext(!1);function IC(){return k.useContext(Wb)}function S0(r){return kt.createElement(Wb.Provider,{value:r.force},r.children)}function VC(r){let t=IC(),e=k.useContext(Xb),[n,a]=k.useState(()=>{var l;if(!t&&e!==null)return(l=e.current)!=null?l:null;if(Zi.isServer)return null;let u=r?.getElementById("headlessui-portal-root");if(u)return u;if(r===null)return null;let h=r.createElement("div");return h.setAttribute("id","headlessui-portal-root"),r.body.appendChild(h)});return k.useEffect(()=>{n!==null&&(r!=null&&r.body.contains(n)||r==null||r.body.appendChild(n))},[n,r]),k.useEffect(()=>{t||e!==null&&a(e.current)},[e,a,t]),n}let qb=k.Fragment,UC=hi(function(r,t){let{ownerDocument:e=null,...n}=r,a=k.useRef(null),l=Ji(VE(y=>{a.current=y}),t),u=md(a.current),h=e??u,f=VC(h),d=k.useContext(Zf),v=Du(),m=ki();return Yb(()=>{var y;f&&f.childNodes.length<=0&&((y=f.parentElement)==null||y.removeChild(f))}),f?vd.createPortal(kt.createElement("div",{"data-headlessui-portal":"",ref:y=>{v.dispose(),d&&y&&v.add(d.register(y))}},m({ourProps:{ref:l},theirProps:n,slot:{},defaultTag:qb,name:"Portal"})),f):null});function HC(r,t){let e=Ji(t),{enabled:n=!0,ownerDocument:a,...l}=r,u=ki();return n?kt.createElement(UC,{...l,ownerDocument:a,ref:e}):u({ourProps:{ref:e},theirProps:l,slot:{},defaultTag:qb,name:"Portal"})}let YC=k.Fragment,Xb=k.createContext(null);function WC(r,t){let{target:e,...n}=r,a={ref:Ji(t)},l=ki();return kt.createElement(Xb.Provider,{value:e},l({ourProps:a,theirProps:n,defaultTag:YC,name:"Popover.Group"}))}let Zf=k.createContext(null);function qC(){let r=k.useContext(Zf),t=k.useRef([]),e=ue(l=>(t.current.push(l),r&&r.register(l),()=>n(l))),n=ue(l=>{let u=t.current.indexOf(l);u!==-1&&t.current.splice(u,1),r&&r.unregister(l)}),a=k.useMemo(()=>({register:e,unregister:n,portals:t}),[e,n,t]);return[t,k.useMemo(()=>function({children:l}){return kt.createElement(Zf.Provider,{value:a},l)},[a])]}let XC=hi(HC),Gb=hi(WC),GC=Object.assign(XC,{Group:Gb});function KC(r,t=typeof document<"u"?document.defaultView:null,e){let n=xl(r,"escape");Hb(t,"keydown",a=>{n&&(a.defaultPrevented||a.key===kb.Escape&&e(a))})}function QC(){var r;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[e,n]=k.useState((r=t?.matches)!=null?r:!1);return ui(()=>{if(!t)return;function a(l){n(l.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),e}function $C({defaultContainers:r=[],portals:t,mainTreeNode:e}={}){let n=ue(()=>{var a,l;let u=yl(e),h=[];for(let f of r)f!==null&&(ar(f)?h.push(f):"current"in f&&ar(f.current)&&h.push(f.current));if(t!=null&&t.current)for(let f of t.current)h.push(f);for(let f of(a=u?.querySelectorAll("html > *, body > *"))!=null?a:[])f!==document.body&&f!==document.head&&ar(f)&&f.id!=="headlessui-portal-root"&&(e&&(f.contains(e)||f.contains((l=e?.getRootNode())==null?void 0:l.host))||h.some(d=>f.contains(d))||h.push(f));return h});return{resolveContainers:n,contains:ue(a=>n().some(l=>l.contains(a)))}}let Kb=k.createContext(null);function _0({children:r,node:t}){let[e,n]=k.useState(null),a=Qb(t??e);return kt.createElement(Kb.Provider,{value:a},r,a===null&&kt.createElement(Kf,{features:hu.Hidden,ref:l=>{var u,h;if(l){for(let f of(h=(u=yl(l))==null?void 0:u.querySelectorAll("html > *, body > *"))!=null?h:[])if(f!==document.body&&f!==document.head&&ar(f)&&f!=null&&f.contains(l)){n(f);break}}}}))}function Qb(r=null){var t;return(t=k.useContext(Kb))!=null?t:r}function ZC(){let r=typeof document>"u";return"useSyncExternalStore"in Bg?(t=>t.useSyncExternalStore)(Bg)(()=>()=>{},()=>!1,()=>!r):!1}function ku(){let r=ZC(),[t,e]=k.useState(Zi.isHandoffComplete);return t&&Zi.isHandoffComplete===!1&&e(!1),k.useEffect(()=>{t!==!0&&e(!0)},[t]),k.useEffect(()=>Zi.handoff(),[]),r?!1:t}function yd(){let r=k.useRef(!1);return ui(()=>(r.current=!0,()=>{r.current=!1}),[]),r}var Ja=(r=>(r[r.Forwards=0]="Forwards",r[r.Backwards=1]="Backwards",r))(Ja||{});function JC(){let r=k.useRef(0);return Ub(!0,"keydown",t=>{t.key==="Tab"&&(r.current=t.shiftKey?1:0)},!0),r}function $b(r){if(!r)return new Set;if(typeof r=="function")return new Set(r());let t=new Set;for(let e of r.current)ar(e.current)&&t.add(e.current);return t}let tM="div";var Dr=(r=>(r[r.None=0]="None",r[r.InitialFocus=1]="InitialFocus",r[r.TabLock=2]="TabLock",r[r.FocusLock=4]="FocusLock",r[r.RestoreFocus=8]="RestoreFocus",r[r.AutoFocus=16]="AutoFocus",r))(Dr||{});function eM(r,t){let e=k.useRef(null),n=Ji(e,t),{initialFocus:a,initialFocusFallback:l,containers:u,features:h=15,...f}=r;ku()||(h=0);let d=md(e.current);sM(h,{ownerDocument:d});let v=aM(h,{ownerDocument:d,container:e,initialFocus:a,initialFocusFallback:l});lM(h,{ownerDocument:d,container:e,containers:u,previousActiveElement:v});let m=JC(),y=ue(A=>{if(!Br(e.current))return;let T=e.current;(D=>D())(()=>{Tn(m.current,{[Ja.Forwards]:()=>{nl(T,_n.First,{skipElements:[A.relatedTarget,l]})},[Ja.Backwards]:()=>{nl(T,_n.Last,{skipElements:[A.relatedTarget,l]})}})})}),x=xl(!!(h&2),"focus-trap#tab-lock"),b=Du(),S=k.useRef(!1),_={ref:n,onKeyDown(A){A.key=="Tab"&&(S.current=!0,b.requestAnimationFrame(()=>{S.current=!1}))},onBlur(A){if(!(h&4))return;let T=$b(u);Br(e.current)&&T.add(e.current);let D=A.relatedTarget;rr(D)&&D.dataset.headlessuiFocusGuard!=="true"&&(Zb(T,D)||(S.current?nl(e.current,Tn(m.current,{[Ja.Forwards]:()=>_n.Next,[Ja.Backwards]:()=>_n.Previous})|_n.WrapAround,{relativeTo:A.target}):rr(A.target)&&Mn(A.target)))}},C=ki();return kt.createElement(kt.Fragment,null,x&&kt.createElement(Kf,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:hu.Focusable}),C({ourProps:_,theirProps:f,defaultTag:tM,name:"FocusTrap"}),x&&kt.createElement(Kf,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:hu.Focusable}))}let iM=hi(eM),nM=Object.assign(iM,{features:Dr});function rM(r=!0){let t=k.useRef(ir.slice());return gd(([e],[n])=>{n===!0&&e===!1&&Ru(()=>{t.current.splice(0)}),n===!1&&e===!0&&(t.current=ir.slice())},[r,ir,t]),ue(()=>{var e;return(e=t.current.find(n=>n!=null&&n.isConnected))!=null?e:null})}function sM(r,{ownerDocument:t}){let e=!!(r&8),n=rM(e);gd(()=>{e||TE(t?.body)&&Mn(n())},[e]),Yb(()=>{e&&Mn(n())})}function aM(r,{ownerDocument:t,container:e,initialFocus:n,initialFocusFallback:a}){let l=k.useRef(null),u=xl(!!(r&1),"focus-trap#initial-focus"),h=yd();return gd(()=>{if(r===0)return;if(!u){a!=null&&a.current&&Mn(a.current);return}let f=e.current;f&&Ru(()=>{if(!h.current)return;let d=t?.activeElement;if(n!=null&&n.current){if(n?.current===d){l.current=d;return}}else if(f.contains(d)){l.current=d;return}if(n!=null&&n.current)Mn(n.current);else{if(r&16){if(nl(f,_n.First|_n.AutoFocus)!==$f.Error)return}else if(nl(f,_n.First)!==$f.Error)return;if(a!=null&&a.current&&(Mn(a.current),t?.activeElement===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=t?.activeElement})},[a,u,r]),l}function lM(r,{ownerDocument:t,container:e,containers:n,previousActiveElement:a}){let l=yd(),u=!!(r&4);Hb(t?.defaultView,"focus",h=>{if(!u||!l.current)return;let f=$b(n);Br(e.current)&&f.add(e.current);let d=a.current;if(!d)return;let v=h.target;Br(v)?Zb(f,v)?(a.current=v,Mn(v)):(h.preventDefault(),h.stopPropagation(),Mn(d)):Mn(a.current)},!0)}function Zb(r,t){for(let e of r)if(e.contains(t))return!0;return!1}function Jb(r){var t;return!!(r.enter||r.enterFrom||r.enterTo||r.leave||r.leaveFrom||r.leaveTo)||!el((t=r.as)!=null?t:ex)||kt.Children.count(r.children)===1}let zu=k.createContext(null);zu.displayName="TransitionContext";var oM=(r=>(r.Visible="visible",r.Hidden="hidden",r))(oM||{});function uM(){let r=k.useContext(zu);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}function cM(){let r=k.useContext(ju);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}let ju=k.createContext(null);ju.displayName="NestingContext";function Lu(r){return"children"in r?Lu(r.children):r.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function tx(r,t){let e=Wr(r),n=k.useRef([]),a=yd(),l=Du(),u=ue((x,b=nr.Hidden)=>{let S=n.current.findIndex(({el:_})=>_===x);S!==-1&&(Tn(b,{[nr.Unmount](){n.current.splice(S,1)},[nr.Hidden](){n.current[S].state="hidden"}}),l.microTask(()=>{var _;!Lu(n)&&a.current&&((_=e.current)==null||_.call(e))}))}),h=ue(x=>{let b=n.current.find(({el:S})=>S===x);return b?b.state!=="visible"&&(b.state="visible"):n.current.push({el:x,state:"visible"}),()=>u(x,nr.Unmount)}),f=k.useRef([]),d=k.useRef(Promise.resolve()),v=k.useRef({enter:[],leave:[]}),m=ue((x,b,S)=>{f.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([_])=>_!==x)),t?.chains.current[b].push([x,new Promise(_=>{f.current.push(_)})]),t?.chains.current[b].push([x,new Promise(_=>{Promise.all(v.current[b].map(([C,A])=>A)).then(()=>_())})]),b==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>S(b)):S(b)}),y=ue((x,b,S)=>{Promise.all(v.current[b].splice(0).map(([_,C])=>C)).then(()=>{var _;(_=f.current.shift())==null||_()}).then(()=>S(b))});return k.useMemo(()=>({children:n,register:h,unregister:u,onStart:m,onStop:y,wait:d,chains:v}),[h,u,n,m,y,v,d])}let ex=k.Fragment,ix=cu.RenderStrategy;function hM(r,t){var e,n;let{transition:a=!0,beforeEnter:l,afterEnter:u,beforeLeave:h,afterLeave:f,enter:d,enterFrom:v,enterTo:m,entered:y,leave:x,leaveFrom:b,leaveTo:S,..._}=r,[C,A]=k.useState(null),T=k.useRef(null),D=Jb(r),M=Ji(...D?[T,t,A]:t===null?[]:[t]),j=(e=_.unmount)==null||e?nr.Unmount:nr.Hidden,{show:N,appear:V,initial:B}=uM(),[I,W]=k.useState(N?"visible":"hidden"),Z=cM(),{register:it,unregister:X}=Z;ui(()=>it(T),[it,T]),ui(()=>{if(j===nr.Hidden&&T.current){if(N&&I!=="visible"){W("visible");return}return Tn(I,{hidden:()=>X(T),visible:()=>it(T)})}},[I,T,it,X,N,j]);let ot=ku();ui(()=>{if(D&&ot&&I==="visible"&&T.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[T,I,ot,D]);let z=B&&!V,U=V&&N&&B,st=k.useRef(!1),ft=tx(()=>{st.current||(W("hidden"),X(T))},Z),rt=ue(tt=>{st.current=!0;let vt=tt?"enter":"leave";ft.onStart(T,vt,pt=>{pt==="enter"?l?.():pt==="leave"&&h?.()})}),O=ue(tt=>{let vt=tt?"enter":"leave";st.current=!1,ft.onStop(T,vt,pt=>{pt==="enter"?u?.():pt==="leave"&&f?.()}),vt==="leave"&&!Lu(ft)&&(W("hidden"),X(T))});k.useEffect(()=>{D&&a||(rt(N),O(N))},[N,D,a]);let L=!(!a||!D||!ot||z),[,F]=OC(L,C,N,{start:rt,end:O}),q=Rr({ref:M,className:((n=Gf(_.className,U&&d,U&&v,F.enter&&d,F.enter&&F.closed&&v,F.enter&&!F.closed&&m,F.leave&&x,F.leave&&!F.closed&&b,F.leave&&F.closed&&S,!F.transition&&N&&y))==null?void 0:n.trim())||void 0,...NC(F)}),$=0;I==="visible"&&($|=Ii.Open),I==="hidden"&&($|=Ii.Closed),N&&I==="hidden"&&($|=Ii.Opening),!N&&I==="visible"&&($|=Ii.Closing);let J=ki();return kt.createElement(ju.Provider,{value:ft},kt.createElement(BC,{value:$},J({ourProps:q,theirProps:_,defaultTag:ex,features:ix,visible:I==="visible",name:"Transition.Child"})))}function fM(r,t){let{show:e,appear:n=!1,unmount:a=!0,...l}=r,u=k.useRef(null),h=Jb(r),f=Ji(...h?[u,t]:t===null?[]:[t]);ku();let d=Ou();if(e===void 0&&d!==null&&(e=(d&Ii.Open)===Ii.Open),e===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,m]=k.useState(e?"visible":"hidden"),y=tx(()=>{e||m("hidden")}),[x,b]=k.useState(!0),S=k.useRef([e]);ui(()=>{x!==!1&&S.current[S.current.length-1]!==e&&(S.current.push(e),b(!1))},[S,e]);let _=k.useMemo(()=>({show:e,appear:n,initial:x}),[e,n,x]);ui(()=>{e?m("visible"):!Lu(y)&&u.current!==null&&m("hidden")},[e,y]);let C={unmount:a},A=ue(()=>{var M;x&&b(!1),(M=r.beforeEnter)==null||M.call(r)}),T=ue(()=>{var M;x&&b(!1),(M=r.beforeLeave)==null||M.call(r)}),D=ki();return kt.createElement(ju.Provider,{value:y},kt.createElement(zu.Provider,{value:_},D({ourProps:{...C,as:k.Fragment,children:kt.createElement(nx,{ref:f,...C,...l,beforeEnter:A,beforeLeave:T})},theirProps:{},defaultTag:k.Fragment,features:ix,visible:v==="visible",name:"Transition"})))}function dM(r,t){let e=k.useContext(zu)!==null,n=Ou()!==null;return kt.createElement(kt.Fragment,null,!e&&n?kt.createElement(Jf,{ref:t,...r}):kt.createElement(nx,{ref:t,...r}))}let Jf=hi(fM),nx=hi(hM),Fr=hi(dM),bd=Object.assign(Jf,{Child:Fr,Root:Jf});var vM=(r=>(r[r.Open=0]="Open",r[r.Closed=1]="Closed",r))(vM||{}),pM=(r=>(r[r.SetTitleId=0]="SetTitleId",r))(pM||{});let mM={0(r,t){return r.titleId===t.id?r:{...r,titleId:t.id}}},xd=k.createContext(null);xd.displayName="DialogContext";function Bu(r){let t=k.useContext(xd);if(t===null){let e=new Error(`<${r} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,Bu),e}return t}function gM(r,t){return Tn(t.type,mM,r,t)}let w0=hi(function(r,t){let e=k.useId(),{id:n=`headlessui-dialog-${e}`,open:a,onClose:l,initialFocus:u,role:h="dialog",autoFocus:f=!0,__demoMode:d=!1,unmount:v=!1,...m}=r,y=k.useRef(!1);h=(function(){return h==="dialog"||h==="alertdialog"?h:(y.current||(y.current=!0,console.warn(`Invalid role [${h}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=Ou();a===void 0&&x!==null&&(a=(x&Ii.Open)===Ii.Open);let b=k.useRef(null),S=Ji(b,t),_=md(b.current),C=a?0:1,[A,T]=k.useReducer(gM,{titleId:null,descriptionId:null,panelRef:k.createRef()}),D=ue(()=>l(!1)),M=ue(F=>T({type:0,id:F})),j=ku()?C===0:!1,[N,V]=qC(),B={get current(){var F;return(F=A.panelRef.current)!=null?F:b.current}},I=Qb(),{resolveContainers:W}=$C({mainTreeNode:I,portals:N,defaultContainers:[B]}),Z=x!==null?(x&Ii.Closing)===Ii.Closing:!1;oC(d||Z?!1:j,{allowed:ue(()=>{var F,q;return[(q=(F=b.current)==null?void 0:F.closest("[data-headlessui-portal]"))!=null?q:null]}),disallowed:ue(()=>{var F;return[(F=I?.closest("body > *:not(#headlessui-portal-root)"))!=null?F:null]})});let it=Fb.get(null);ui(()=>{if(j)return it.actions.push(n),()=>it.actions.pop(n)},[it,n,j]);let X=Pb(it,k.useCallback(F=>it.selectors.isTop(F,n),[it,n]));xC(X,W,F=>{F.preventDefault(),D()}),KC(X,_?.defaultView,F=>{F.preventDefault(),F.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),D()}),TC(d||Z?!1:j,_,W),uC(j,b,D);let[ot,z]=UE(),U=k.useMemo(()=>[{dialogState:C,close:D,setTitleId:M,unmount:v},A],[C,D,M,v,A]),st=bl({open:C===0}),ft={ref:S,id:n,role:h,tabIndex:-1,"aria-modal":d?void 0:C===0?!0:void 0,"aria-labelledby":A.titleId,"aria-describedby":ot,unmount:v},rt=!QC(),O=Dr.None;j&&!d&&(O|=Dr.RestoreFocus,O|=Dr.TabLock,f&&(O|=Dr.AutoFocus),rt&&(O|=Dr.InitialFocus));let L=ki();return kt.createElement(FC,null,kt.createElement(S0,{force:!0},kt.createElement(GC,null,kt.createElement(xd.Provider,{value:U},kt.createElement(Gb,{target:b},kt.createElement(S0,{force:!1},kt.createElement(z,{slot:st},kt.createElement(V,null,kt.createElement(nM,{initialFocus:u,initialFocusFallback:b,containers:W,features:O},kt.createElement(GE,{value:D},L({ourProps:ft,theirProps:m,slot:st,defaultTag:yM,features:bM,visible:C===0,name:"Dialog"})))))))))))}),yM="div",bM=cu.RenderStrategy|cu.Static;function xM(r,t){let{transition:e=!1,open:n,...a}=r,l=Ou(),u=r.hasOwnProperty("open")||l!==null,h=r.hasOwnProperty("onClose");if(!u&&!h)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!u)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!h)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof r.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r.open}`);if(typeof r.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${r.onClose}`);return(n!==void 0||e)&&!a.static?kt.createElement(_0,null,kt.createElement(bd,{show:n,transition:e,unmount:a.unmount},kt.createElement(w0,{ref:t,...a}))):kt.createElement(_0,null,kt.createElement(w0,{ref:t,open:n,...a}))}let SM="div";function _M(r,t){let e=k.useId(),{id:n=`headlessui-dialog-panel-${e}`,transition:a=!1,...l}=r,[{dialogState:u,unmount:h},f]=Bu("Dialog.Panel"),d=Ji(t,f.panelRef),v=bl({open:u===0}),m=ue(_=>{_.stopPropagation()}),y={ref:d,id:n,onClick:m},x=a?Fr:k.Fragment,b=a?{unmount:h}:{},S=ki();return kt.createElement(x,{...b},S({ourProps:y,theirProps:l,slot:v,defaultTag:SM,name:"Dialog.Panel"}))}let wM="div";function EM(r,t){let{transition:e=!1,...n}=r,[{dialogState:a,unmount:l}]=Bu("Dialog.Backdrop"),u=bl({open:a===0}),h={ref:t,"aria-hidden":!0},f=e?Fr:k.Fragment,d=e?{unmount:l}:{},v=ki();return kt.createElement(f,{...d},v({ourProps:h,theirProps:n,slot:u,defaultTag:wM,name:"Dialog.Backdrop"}))}let CM="h2";function MM(r,t){let e=k.useId(),{id:n=`headlessui-dialog-title-${e}`,...a}=r,[{dialogState:l,setTitleId:u}]=Bu("Dialog.Title"),h=Ji(t);k.useEffect(()=>(u(n),()=>u(null)),[n,u]);let f=bl({open:l===0}),d={ref:h,id:n};return ki()({ourProps:d,theirProps:a,slot:f,defaultTag:CM,name:"Dialog.Title"})}let TM=hi(xM),Sd=hi(_M);hi(EM);let _d=hi(MM),rx=Object.assign(TM,{Panel:Sd,Title:_d,Description:qE});function sx({isOpen:r,title:t="",message:e,confirmText:n="",cancelText:a="",type:l="warning",onConfirm:u,onCancel:h}){const f=k.useRef(null),v={danger:{icon:"#F6465D",iconBg:"rgba(246, 70, 93, 0.15)",confirmBg:"#F6465D",confirmHover:"#d93d53"},warning:{icon:"#f0b90b",iconBg:"rgba(240, 185, 11, 0.15)",confirmBg:"#fcd535",confirmHover:"#f0b90b"},info:{icon:"#1e96fc",iconBg:"rgba(30, 150, 252, 0.15)",confirmBg:"#1e96fc",confirmHover:"#1a85e0"}}[l],m={danger:"",warning:"",info:""};return E.jsx(bd,{appear:!0,show:r,as:k.Fragment,children:E.jsxs(rx,{as:"div",className:"relative z-[9999]",initialFocus:f,onClose:h,children:[E.jsx(Fr,{as:k.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:E.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm"})}),E.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:E.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:E.jsx(Fr,{as:k.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:E.jsxs(Sd,{className:"w-full max-w-[420px] transform overflow-hidden rounded-lg bg-[#1e2329] shadow-2xl transition-all",children:[E.jsx("button",{onClick:h,className:"absolute top-4 right-4 text-[#848e9c] hover:text-white transition-colors text-xl w-6 h-6 flex items-center justify-center",children:""}),E.jsxs("div",{className:"p-6",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-4 pr-6",children:[E.jsx("span",{className:"text-xl flex-shrink-0",style:{color:v.icon},children:m[l]}),E.jsx(_d,{as:"h3",className:"text-base font-medium text-white",children:t})]}),E.jsx("p",{className:"text-sm text-[#848e9c] leading-relaxed mb-6 pl-8",children:e}),E.jsxs("div",{className:"flex items-center justify-end gap-3",children:[E.jsx("button",{onClick:h,className:"px-4 py-1.5 text-sm text-[#848e9c] hover:text-white transition-colors",children:a}),E.jsx("button",{ref:f,onClick:u,className:"px-5 py-1.5 rounded text-sm font-medium transition-colors hover:opacity-90",style:{backgroundColor:v.confirmBg,color:l==="danger"?"#fff":"#0c0e12"},children:n})]})]})]})})})})]})})}function AM({isOpen:r,title:t,onClose:e,children:n,width:a="360px"}){const l=k.useRef(null);return k.useEffect(()=>(r&&(document.body.style.overflow="hidden",l.current?.focus()),()=>{document.body.style.overflow=""}),[r]),k.useEffect(()=>{const u=h=>{h.key==="Escape"&&e()};return r&&window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[r,e]),r?vd.createPortal(E.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onClick:e,children:[E.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),E.jsxs("div",{ref:l,className:"relative bg-[#1e2329] rounded-xl shadow-2xl mx-4 animate-modal-in",style:{width:a,maxWidth:"90vw"},onClick:u=>u.stopPropagation(),tabIndex:-1,children:[E.jsxs("div",{className:"flex items-center justify-between px-8 py-5 border-b border-[#2b3139]",children:[E.jsx("h3",{className:"text-lg font-semibold text-white",children:t}),E.jsx("button",{onClick:e,className:"text-[#848e9c] hover:text-white transition-colors text-xl leading-none w-8 h-8 flex items-center justify-center rounded hover:bg-[#2b3139]",children:""})]}),E.jsx("div",{className:"px-8 py-6",children:n})]})]}),document.body):null}let RM=0,Fs=null;const Ws={success:r=>Fs?.("success",r),error:r=>Fs?.("error",r),warning:r=>Fs?.("warning",r),info:r=>Fs?.("info",r)},DM={success:"",error:"",warning:"",info:""},xf={success:{bg:"rgba(14, 203, 129, 0.15)",border:"#0ECB81",icon:"#0ECB81"},error:{bg:"rgba(246, 70, 93, 0.15)",border:"#F6465D",icon:"#F6465D"},warning:{bg:"rgba(240, 185, 11, 0.15)",border:"#f0b90b",icon:"#f0b90b"},info:{bg:"rgba(30, 150, 252, 0.15)",border:"#1e96fc",icon:"#1e96fc"}};function NM(){const[r,t]=k.useState([]);return k.useEffect(()=>(Fs=(e,n)=>{const a=++RM;t(l=>[...l,{id:a,type:e,message:n}]),setTimeout(()=>{t(l=>l.filter(u=>u.id!==a))},3e3)},()=>{Fs=null}),[]),r.length===0?null:vd.createPortal(E.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2",children:r.map(e=>E.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg animate-slide-in min-w-[280px] max-w-[400px]",style:{backgroundColor:xf[e.type].bg,border:`1px solid ${xf[e.type].border}`,backdropFilter:"blur(8px)"},children:[E.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full text-sm font-bold",style:{backgroundColor:xf[e.type].icon,color:"#181a20"},children:DM[e.type]}),E.jsx("span",{className:"text-sm text-white flex-1",children:e.message}),E.jsx("button",{onClick:()=>t(n=>n.filter(a=>a.id!==e.id)),className:"text-[#848e9c] hover:text-white transition-colors text-lg leading-none",children:""})]},e.id))}),document.body)}function OM({onOpenConfig:r}){const t=Wt(I=>I.symbol),e=Wt(I=>I.isLoggedIn),n=Wt(I=>I.assets),a=Wt(I=>I.login),l=Wt(I=>I.logout),u=Ab(),h=Yr(),[f,d]=k.useState(!1),[v,m]=k.useState(!1),[y,x]=k.useState(!1),[b,S]=k.useState(""),[_,C]=k.useState(!1),A=async()=>{if(b){C(!0);try{await a(parseInt(b)),d(!1),S(""),Ws.success("")}catch{Ws.error("")}finally{C(!1)}}},T=parseFloat(u?.priceChangePercent||"0"),D=T>=0,[M,j]=t.split("_"),N=n.find(I=>I.asset===M),V=n.find(I=>I.asset===j),B=h?"48px":"64px";return E.jsxs(E.Fragment,{children:[E.jsxs("header",{style:{height:B,minHeight:B,backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:h?"0":"0 32px",flexShrink:0,position:"relative"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:h?"10px":"20px",overflow:"auto",flex:1,minWidth:0,maxWidth:h?"100%":"calc(100% - 300px)",paddingLeft:h?"8px":"0",paddingRight:h?"48px":"0"},className:"scrollbar-hide",children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexShrink:0},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[!h&&E.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"#F0B90B"}),E.jsx("path",{d:"M2 17L12 22L22 17L12 12L2 17Z",fill:"#F0B90B",opacity:"0.6"}),E.jsx("path",{d:"M2 12L12 17L22 12",stroke:"#F0B90B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),!h&&E.jsx("span",{style:{fontSize:"20px",fontWeight:"bold",background:"linear-gradient(135deg, #F0B90B 0%, #FCD535 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"ExchangeHub"})]}),!h&&E.jsx("div",{style:{width:"1px",height:"24px",backgroundColor:"var(--color-border)"}}),E.jsx("span",{style:{fontSize:h?"14px":"17px",fontWeight:600,whiteSpace:"nowrap"},children:t.replace("_","/")})]}),u&&E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:h?"10px":"24px",flexShrink:0,whiteSpace:"nowrap"},children:[E.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[E.jsx("span",{style:{fontSize:h?"16px":"22px",fontWeight:"bold",color:D?"var(--color-green)":"var(--color-red)",whiteSpace:"nowrap"},children:parseFloat(u.lastPrice).toFixed(2)}),!h&&E.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"12px",whiteSpace:"nowrap"},children:[" $",parseFloat(u.lastPrice).toFixed(2)]})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:h?"11px":"12px",whiteSpace:"nowrap"},children:"24h"}),E.jsxs("span",{style:{color:D?"var(--color-green)":"var(--color-red)",fontSize:h?"12px":"13px",whiteSpace:"nowrap"},children:[D?"+":"",T.toFixed(2),"%"]})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:h?"11px":"12px",whiteSpace:"nowrap"},children:"24h"}),E.jsx("span",{style:{fontSize:h?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.high24h).toFixed(2)})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:h?"11px":"12px",whiteSpace:"nowrap"},children:"24h"}),E.jsx("span",{style:{fontSize:h?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.low24h).toFixed(2)})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[E.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:h?"11px":"12px",whiteSpace:"nowrap"},children:["24h(",M,")"]}),E.jsx("span",{style:{fontSize:h?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.volume24h).toFixed(4)})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[E.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:h?"11px":"12px",whiteSpace:"nowrap"},children:["24h(",j,")"]}),E.jsx("span",{style:{fontSize:h?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.quoteVolume24h).toFixed(2)})]})]})]}),h?E.jsx("button",{onClick:()=>x(!y),style:{padding:"8px",backgroundColor:"var(--color-bg-secondary)",border:"none",cursor:"pointer",color:"var(--color-text-primary)",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",right:"0",top:"0",bottom:"0",width:"48px",zIndex:10},children:E.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),E.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),E.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}):E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[!iu,e?E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"12px"},children:M}),E.jsxs("span",{style:{fontSize:"13px"},children:[N?parseFloat(N.available).toFixed(8):"0.00000000",N&&parseFloat(N.frozen)>0&&E.jsxs("span",{style:{color:"var(--color-text-tertiary)",marginLeft:"4px",fontSize:"12px"},children:["(: ",parseFloat(N.frozen).toFixed(8),")"]})]})]}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"12px"},children:j}),E.jsxs("span",{style:{fontSize:"13px"},children:[V?parseFloat(V.available).toFixed(2):"0.00",V&&parseFloat(V.frozen)>0&&E.jsxs("span",{style:{color:"var(--color-text-tertiary)",marginLeft:"4px",fontSize:"12px"},children:["(: ",parseFloat(V.frozen).toFixed(2),")"]})]})]})]}),E.jsx("button",{onClick:()=>m(!0),style:{padding:"6px 16px",fontSize:"13px",border:"1px solid var(--color-border)",borderRadius:"4px",backgroundColor:"transparent",color:"var(--color-text-primary)",cursor:"pointer"},children:""})]}):E.jsx("button",{onClick:()=>d(!0),style:{padding:"6px 16px",fontSize:"13px",backgroundColor:"var(--color-yellow)",color:"black",fontWeight:500,borderRadius:"4px",border:"none",cursor:"pointer"},children:""})]})]}),h&&y&&E.jsxs(E.Fragment,{children:[E.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999},onClick:()=>x(!1)}),E.jsx("div",{style:{position:"absolute",top:"48px",left:0,right:0,backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",animation:"slideDown 0.2s ease-out"},children:E.jsx("div",{style:{padding:"16px"},children:e?E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:{marginBottom:"16px"},children:[E.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"12px",marginBottom:"8px"},children:""}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"4px"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"13px"},children:M}),E.jsx("span",{style:{fontSize:"13px",fontFamily:"monospace"},children:N?parseFloat(N.available).toFixed(8):"0.00000000"})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"4px"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"13px"},children:j}),E.jsx("span",{style:{fontSize:"13px",fontFamily:"monospace"},children:V?parseFloat(V.available).toFixed(2):"0.00"})]})]})]}),E.jsxs("div",{style:{display:"flex",gap:"8px"},children:[!iu,E.jsx("button",{onClick:()=>{x(!1),m(!0)},style:{flex:1,padding:"10px",fontSize:"13px",border:"1px solid var(--color-red)",borderRadius:"4px",backgroundColor:"transparent",color:"var(--color-red)",cursor:"pointer"},children:""})]})]}):E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[E.jsx("button",{onClick:()=>{x(!1),d(!0)},style:{padding:"12px",fontSize:"14px",backgroundColor:"var(--color-yellow)",color:"black",fontWeight:500,borderRadius:"4px",border:"none",cursor:"pointer"},children:""}),!iu]})})})]}),E.jsx(sx,{isOpen:v,title:"",message:"",confirmText:"",cancelText:"",type:"warning",onConfirm:()=>{m(!1),l()},onCancel:()=>m(!1)}),E.jsx(AM,{isOpen:f,title:"",onClose:()=>d(!1),width:"480px",children:E.jsxs("div",{className:"flex flex-col gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm text-[#b7bdc6] mb-2.5",children:" ID"}),E.jsx("input",{type:"number",placeholder:" ID",value:b,onChange:I=>S(I.target.value),onKeyDown:I=>I.key==="Enter"&&A(),className:"w-full px-4 py-2.5 text-sm bg-transparent border border-[#434343] rounded outline-none text-white placeholder-[#848e9c] hover:border-[#5e6673] focus:border-[#f0b90b] transition-colors"})]}),E.jsxs("div",{className:"flex justify-end gap-3",children:[E.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2.5 text-sm font-normal text-white bg-transparent border border-[#434343] hover:border-[#5e6673] rounded transition-colors",children:""}),E.jsx("button",{onClick:A,disabled:_||!b,className:"px-6 py-2.5 text-sm font-normal text-[#000] bg-[#fcd535] hover:bg-[#f0b90b] rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?"...":""})]})]})})]})}function rl(r){const t=Math.abs(r);return t>=1e6?`${(r/1e6).toFixed(2)}M`:t>=1e4?`${(r/1e3).toFixed(2)}K`:t>=1?r.toFixed(2):r.toFixed(4)}function Sf(r){return r>=1e3?r.toFixed(2):r>=1?r.toFixed(4):r.toFixed(6)}function E0(){const[r,t]=k.useState(2),{bids:e,asks:n,isReady:a}=SE(r),l=Wt(T=>T.ticker),u=Yr(),h=u?8:15,f=(T,D)=>{const M=T.slice(0,D).map(j=>({data:j,isPlaceholder:!1}));for(;M.length<D;)M.push({data:["--","--","--"],isPlaceholder:!0});return M},d=k.useMemo(()=>f(n,h).reverse(),[n]),v=k.useMemo(()=>f(e,h),[e]),{buyPercent:m,sellPercent:y}=k.useMemo(()=>{const T=e.slice(0,20),D=n.slice(0,20),M=T.reduce((V,[B,I])=>V+parseFloat(B)*parseFloat(I),0),j=D.reduce((V,[B,I])=>V+parseFloat(B)*parseFloat(I),0),N=M+j;return N===0?{buyPercent:50,sellPercent:50}:{buyPercent:M/N*100,sellPercent:j/N*100}},[e,n]),x=k.useMemo(()=>{const T=v.filter(D=>!D.isPlaceholder);return T.length>0?Math.max(...T.map(D=>parseFloat(D.data[1]))):1},[v]),b=k.useMemo(()=>{const T=d.filter(D=>!D.isPlaceholder);return T.length>0?Math.max(...T.map(D=>parseFloat(D.data[1]))):1},[d]),S=k.useRef(null);k.useEffect(()=>{S.current&&(S.current.scrollTop=S.current.scrollHeight)},[d]);const _=l?.lastPrice||"0",A=parseFloat(l?.priceChangePercent||"0")>=0;return E.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"var(--color-bg-secondary)",overflow:"hidden"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderBottom:"1px solid var(--color-border)",flexShrink:0},children:[E.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:""}),E.jsx("select",{value:r,onChange:T=>t(parseInt(T.target.value)),style:{padding:"3px 10px",fontSize:"12px",backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"3px",color:"var(--color-text-primary)",outline:"none",cursor:"pointer"},children:bE.map(T=>E.jsx("option",{value:T.value,children:T.label},T.value))})]}),E.jsxs("div",{style:{display:"flex",alignItems:"center",padding:u?"4px 8px":"6px 16px",fontSize:u?"11px":"12px",color:"var(--color-text-secondary)",borderBottom:"1px solid var(--color-border)",flexShrink:0},children:[E.jsx("span",{style:{flex:1},children:""}),E.jsx("span",{style:{flex:1,textAlign:"right"},children:""}),!u&&E.jsx("span",{style:{flex:1,textAlign:"right"},children:""})]}),E.jsx("div",{style:{flexShrink:0},children:a?E.jsx("div",{ref:S,children:d.map(({data:[T,D],isPlaceholder:M},j)=>{const N=M?0:parseFloat(D)/b*100,V=M?0:parseFloat(T)*parseFloat(D);return E.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",padding:u?"1px 8px":"2px 16px",fontSize:u?"11px":"12px",cursor:M?"default":"pointer",opacity:M?.3:1},children:[!M&&E.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,backgroundColor:"rgba(246, 70, 93, 0.12)",width:`${N}%`,transition:"width 0.11s ease-out"}}),E.jsx("span",{style:{flex:1,color:"var(--color-red)",position:"relative",fontFamily:"monospace"},children:T}),E.jsx("span",{style:{flex:1,textAlign:"right",position:"relative",fontFamily:"monospace"},children:M?"--":Sf(parseFloat(D))}),!u&&E.jsx("span",{style:{flex:1,textAlign:"right",color:"var(--color-text-secondary)",position:"relative",fontFamily:"monospace"},children:M?"--":rl(V)})]},`ask-${j}`)})}):E.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"200px",color:"var(--color-text-secondary)",fontSize:"13px"},children:"..."})}),E.jsx("div",{style:{padding:"8px 16px",borderTop:"1px solid var(--color-border)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)",flexShrink:0},children:E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[E.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",fontFamily:"monospace",color:A?"var(--color-green)":"var(--color-red)"},children:parseFloat(_).toFixed(2)}),E.jsx("span",{style:{fontSize:"13px",color:A?"var(--color-green)":"var(--color-red)"},children:A?"":""})]})}),E.jsx("div",{style:{flexShrink:0},children:a&&E.jsx("div",{children:v.map(({data:[T,D],isPlaceholder:M},j)=>{const N=M?0:parseFloat(D)/x*100,V=M?0:parseFloat(T)*parseFloat(D);return E.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",padding:u?"1px 8px":"2px 16px",fontSize:u?"11px":"12px",cursor:M?"default":"pointer",opacity:M?.3:1},children:[!M&&E.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,backgroundColor:"rgba(14, 203, 129, 0.12)",width:`${N}%`,transition:"width 0.3s ease-out"}}),E.jsx("span",{style:{flex:1,color:"var(--color-green)",position:"relative",fontFamily:"monospace"},children:T}),E.jsx("span",{style:{flex:1,textAlign:"right",position:"relative",fontFamily:"monospace"},children:M?"--":Sf(parseFloat(D))}),!u&&E.jsx("span",{style:{flex:1,textAlign:"right",color:"var(--color-text-secondary)",position:"relative",fontFamily:"monospace"},children:M?"--":rl(V)})]},`bid-${j}`)})})}),E.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid var(--color-border)",flexShrink:0},children:[E.jsxs("div",{style:{display:"flex",height:"8px",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:[E.jsx("div",{style:{backgroundColor:"var(--color-green)",width:`${m}%`,transition:"width 0.3s ease"}}),E.jsx("div",{style:{backgroundColor:"var(--color-red)",width:`${y}%`,transition:"width 0.3s ease"}})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px"},children:[E.jsxs("span",{style:{color:"var(--color-green)"},children:[" ",m.toFixed(1),"%"]}),E.jsxs("span",{style:{color:"var(--color-red)"},children:[" ",y.toFixed(1),"%"]})]})]}),!u&&E.jsxs("div",{style:{padding:"16px",borderTop:"1px solid var(--color-border)",flexShrink:0},children:[E.jsx("div",{style:{fontSize:"13px",fontWeight:500,marginBottom:"12px",color:"var(--color-text-primary)"},children:"24"}),E.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"12px"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),E.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.high24h?parseFloat(l.high24h).toFixed(2):"--"})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),E.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.low24h?parseFloat(l.low24h).toFixed(2):"--"})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),E.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.volume24h?Sf(parseFloat(l.volume24h)):"--"})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),E.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.quoteVolume24h?rl(parseFloat(l.quoteVolume24h)):"--"})]})]})]})]})}function kM(){const r=_E(60);return E.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"var(--color-bg-secondary)"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 16px",fontSize:"12px",color:"var(--color-text-secondary)",borderBottom:"1px solid var(--color-border)",flexShrink:0},children:[E.jsx("span",{style:{flex:1},children:""}),E.jsx("span",{style:{flex:1,textAlign:"right"},children:""}),E.jsx("span",{style:{flex:1,textAlign:"right"},children:""})]}),E.jsx("div",{style:{flexShrink:0},children:r.length===0?E.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)",fontSize:"13px"},children:""}):r.map(t=>E.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"2px 16px",fontSize:"12px"},children:[E.jsx("span",{style:{flex:1,fontFamily:"monospace",color:t.taker_side===2?"var(--color-red)":"var(--color-green)"},children:parseFloat(t.price).toFixed(2)}),E.jsx("span",{style:{flex:1,textAlign:"right",fontFamily:"monospace"},children:parseFloat(t.qty).toFixed(4)}),E.jsx("span",{style:{flex:1,textAlign:"right",color:"var(--color-text-secondary)",fontFamily:"monospace"},children:new Date(t.created_at).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]},t.id))})]})}function C0(){const r=Wt(B=>B.symbol),t=Wt(B=>B.isLoggedIn),e=Wt(B=>B.assets),n=Wt(B=>B.ticker),[a,l]=k.useState("buy"),[u,h]=k.useState("limit"),[f,d]=k.useState(""),[v,m]=k.useState(""),[y,x]=k.useState(""),[b,S]=k.useState(!1),[_,C]=r.split("_"),A=e.find(B=>B.asset===_),T=e.find(B=>B.asset===C),D=parseFloat(a==="buy"?T?.available||"0":A?.available||"0"),M=u==="limit"&&f&&v?(parseFloat(f)*parseFloat(v)).toFixed(2):"",j=u==="market"&&a==="buy"&&y&&n?.lastPrice?(parseFloat(y)/parseFloat(n.lastPrice)).toFixed(8):"",N=B=>{if(t)if(a==="buy"){const W=parseFloat(T?.available||"0")*B;if(u==="market")x(W.toFixed(2));else{const Z=parseFloat(f||n?.lastPrice||"0");Z>0&&m((W/Z).toFixed(8))}}else{const I=parseFloat(A?.available||"0");m((I*B).toFixed(8))}},V=async()=>{if(!t){alert("");return}if(u==="limit"&&!f){alert("");return}if(u==="market"&&a==="buy"){if(!y){alert("");return}}else if(!v){alert("");return}S(!0);try{const B=crypto.randomUUID();let I;u==="limit"?I={symbol:r,side:a,type:"limit",price:f,qty:v,client_order_id:B}:a==="buy"?I={symbol:r,side:a,type:"market_buy",quote_qty:y,client_order_id:B}:I={symbol:r,side:a,type:"market_sell",qty:v,client_order_id:B},await _e.placeOrder(I),d(""),m(""),x(""),Ws.success("")}catch(B){const I=B;Ws.error(": "+(I.response?.data?.message||""))}finally{S(!1)}};return E.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"var(--color-bg-secondary)",padding:"16px",overflowY:"auto"},children:[E.jsxs("div",{style:{display:"flex",marginBottom:"16px"},children:[E.jsx("button",{onClick:()=>l("buy"),style:{flex:1,padding:"10px 0",fontSize:"13px",fontWeight:500,borderRadius:"4px 0 0 4px",border:"none",cursor:"pointer",transition:"all 0.2s",backgroundColor:a==="buy"?"var(--color-green)":"var(--color-bg-tertiary)",color:a==="buy"?"white":"var(--color-text-secondary)"},children:""}),E.jsx("button",{onClick:()=>l("sell"),style:{flex:1,padding:"10px 0",fontSize:"13px",fontWeight:500,borderRadius:"0 4px 4px 0",border:"none",cursor:"pointer",transition:"all 0.2s",backgroundColor:a==="sell"?"var(--color-red)":"var(--color-bg-tertiary)",color:a==="sell"?"white":"var(--color-text-secondary)"},children:""})]}),E.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"16px"},children:[E.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[E.jsx("input",{type:"radio",name:"orderType",checked:u==="limit",onChange:()=>h("limit"),style:{accentColor:"var(--color-yellow)"}}),E.jsx("span",{style:{fontSize:"13px"},children:""})]}),E.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[E.jsx("input",{type:"radio",name:"orderType",checked:u==="market",onChange:()=>h("market"),style:{accentColor:"var(--color-yellow)"}}),E.jsx("span",{style:{fontSize:"13px"},children:""})]})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"12px"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)"},children:""}),E.jsxs("span",{style:{fontFamily:"monospace"},children:[D.toFixed(a==="buy"?2:8)," ",a==="buy"?C:_]})]}),u==="limit"&&E.jsxs("div",{style:{marginBottom:"12px"},children:[E.jsx("label",{style:{fontSize:"12px",color:"var(--color-text-secondary)",display:"block",marginBottom:"6px"},children:""}),E.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"6px",overflow:"hidden",transition:"border-color 0.2s"},onFocus:B=>B.currentTarget.style.borderColor="var(--color-yellow)",onBlur:B=>B.currentTarget.style.borderColor="var(--color-border)",children:[E.jsx("input",{type:"number",value:f,onChange:B=>d(B.target.value),placeholder:"0.00",style:{flex:1,padding:"12px 14px",backgroundColor:"transparent",border:"none",outline:"none",fontSize:"14px",fontFamily:"monospace",color:"var(--color-text-primary)"}}),E.jsx("span",{style:{padding:"0 14px",fontSize:"13px",color:"var(--color-text-secondary)",fontWeight:500},children:C})]})]}),u==="market"&&a==="buy"?E.jsxs("div",{style:{marginBottom:"12px"},children:[E.jsx("label",{style:{fontSize:"12px",color:"var(--color-text-secondary)",display:"block",marginBottom:"6px"},children:""}),E.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"6px",overflow:"hidden",transition:"border-color 0.2s"},onFocus:B=>B.currentTarget.style.borderColor="var(--color-yellow)",onBlur:B=>B.currentTarget.style.borderColor="var(--color-border)",children:[E.jsx("input",{type:"number",value:y,onChange:B=>x(B.target.value),placeholder:"0.00",style:{flex:1,padding:"12px 14px",backgroundColor:"transparent",border:"none",outline:"none",fontSize:"14px",fontFamily:"monospace",color:"var(--color-text-primary)"}}),E.jsx("span",{style:{padding:"0 14px",fontSize:"13px",color:"var(--color-text-secondary)",fontWeight:500},children:C})]}),j&&E.jsxs("div",{style:{fontSize:"11px",color:"var(--color-text-tertiary)",marginTop:"6px",textAlign:"right"},children:[" ",j," ",_]})]}):E.jsxs("div",{style:{marginBottom:"12px"},children:[E.jsx("label",{style:{fontSize:"12px",color:"var(--color-text-secondary)",display:"block",marginBottom:"6px"},children:""}),E.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"6px",overflow:"hidden",transition:"border-color 0.2s"},onFocus:B=>B.currentTarget.style.borderColor="var(--color-yellow)",onBlur:B=>B.currentTarget.style.borderColor="var(--color-border)",children:[E.jsx("input",{type:"number",value:v,onChange:B=>m(B.target.value),placeholder:"0.00",style:{flex:1,padding:"12px 14px",backgroundColor:"transparent",border:"none",outline:"none",fontSize:"14px",fontFamily:"monospace",color:"var(--color-text-primary)"}}),E.jsx("span",{style:{padding:"0 14px",fontSize:"13px",color:"var(--color-text-secondary)",fontWeight:500},children:_})]})]}),E.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[.25,.5,.75,1].map(B=>E.jsxs("button",{onClick:()=>N(B),style:{flex:1,padding:"8px 0",fontSize:"12px",backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",cursor:"pointer",transition:"all 0.2s"},children:[B*100,"%"]},B))}),u==="limit"&&E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"16px"},children:[E.jsx("span",{style:{color:"var(--color-text-secondary)"},children:""}),E.jsxs("span",{style:{fontFamily:"monospace"},children:[M||"0.00"," ",C]})]}),E.jsx("button",{onClick:V,disabled:b||!t,style:{width:"100%",padding:"12px 0",fontSize:"13px",fontWeight:500,borderRadius:"4px",border:"none",cursor:b||!t?"not-allowed":"pointer",transition:"all 0.2s",backgroundColor:a==="buy"?"var(--color-green)":"var(--color-red)",color:"white",opacity:b||!t?.5:1},children:t?b?"...":a==="buy"?` ${_}`:` ${_}`:""})]})}function oe(r){var t=r.width,e=r.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function jr(r,t){return r.width===t.width&&r.height===t.height}var zM=(function(){function r(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return r.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(r.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),r.prototype.subscribe=function(t){var e=this,n={next:t};return this._observers.push(n),{unsubscribe:function(){e._observers=e._observers.filter(function(a){return a!==n})}}},r.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},r.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},r.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},r.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},r})();function jM(r){return new zM(r)}var LM=(function(){function r(t,e,n){var a;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=oe({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(l){return l}),this._allowResizeObserver=(a=n?.allowResizeObserver)!==null&&a!==void 0?a:!0,this._chooseAndInitObserver()}return r.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(r.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bitmapSize",{get:function(){return oe({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),r.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=oe(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},r.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},r.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(r.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),r.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},r.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},r.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},r.prototype._resizeBitmap=function(t){var e=this.bitmapSize;jr(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},r.prototype._emitBitmapSizeChanged=function(t,e){var n=this;this._bitmapSizeChangedListeners.forEach(function(a){return a.call(n,t,e)})},r.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,n=oe(this._transformBitmapSize(t,this._canvasElementClientSize)),a=jr(this.bitmapSize,n)?null:n;e===null&&a===null||e!==null&&a!==null&&jr(e,a)||(this._suggestedBitmapSize=a,this._emitSuggestedBitmapSizeChanged(e,a))},r.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(a){return a.call(n,t,e)})},r.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}FM().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},r.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=M0(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=jM(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},r.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var n=M0(this._canvasElement);if(n!==null){var a=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:n.devicePixelRatio,l=this._canvasElement.getClientRects(),u=l[0]!==void 0?PM(l[0],a):oe({width:this._canvasElementClientSize.width*a,height:this._canvasElementClientSize.height*a});this._suggestNewBitmapSize(u)}}},r.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var n=e.find(function(u){return u.target===t._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var a=n.devicePixelContentBoxSize[0],l=oe({width:a.inlineSize,height:a.blockSize});t._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},r})();function BM(r,t){return new LM(r,t.transform,t.options)}function M0(r){return r.ownerDocument.defaultView}function FM(){return new Promise(function(r){var t=new ResizeObserver(function(e){r(e.every(function(n){return"devicePixelContentBoxSize"in n})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function PM(r,t){return oe({width:Math.round(r.left*t+r.width*t)-Math.round(r.left*t),height:Math.round(r.top*t+r.height*t)-Math.round(r.top*t)})}var IM=(function(){function r(t,e,n){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=t}return r.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},r.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(r.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),r})();function Pr(r,t){var e=r.canvasElementClientSize;if(e.width===0||e.height===0)return null;var n=r.bitmapSize;if(n.width===0||n.height===0)return null;var a=r.canvasElement.getContext("2d",t);return a===null?null:new IM(a,e,n)}const ax={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var T0,A0;function ur(r,t){const e={0:[],1:[r.lineWidth,r.lineWidth],2:[2*r.lineWidth,2*r.lineWidth],3:[6*r.lineWidth,6*r.lineWidth],4:[r.lineWidth,4*r.lineWidth]}[t];r.setLineDash(e)}function lx(r,t,e,n){r.beginPath();const a=r.lineWidth%2?.5:0;r.moveTo(e,t+a),r.lineTo(n,t+a),r.stroke()}function Ve(r,t){if(!r)throw new Error("Assertion failed"+(t?": "+t:""))}function ci(r){if(r===void 0)throw new Error("Value is undefined");return r}function mt(r){if(r===null)throw new Error("Value is null");return r}function sr(r){return mt(ci(r))}(function(r){r[r.Simple=0]="Simple",r[r.WithSteps=1]="WithSteps",r[r.Curved=2]="Curved"})(T0||(T0={})),(function(r){r[r.Solid=0]="Solid",r[r.Dotted=1]="Dotted",r[r.Dashed=2]="Dashed",r[r.LargeDashed=3]="LargeDashed",r[r.SparseDotted=4]="SparseDotted"})(A0||(A0={}));class we{constructor(){this.t=[]}i(t,e,n){const a={h:t,l:e,o:n===!0};this.t.push(a)}_(t){const e=this.t.findIndex((n=>t===n.h));e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter((e=>e.l!==t))}p(t,e,n){const a=[...this.t];this.t=this.t.filter((l=>!l.o)),a.forEach((l=>l.h(t,e,n)))}v(){return this.t.length>0}m(){this.t=[]}}function bi(r,...t){for(const e of t)for(const n in e)e[n]!==void 0&&Object.prototype.hasOwnProperty.call(e,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof e[n]!="object"||r[n]===void 0||Array.isArray(e[n])?r[n]=e[n]:bi(r[n],e[n]));return r}function Ir(r){return typeof r=="number"&&isFinite(r)}function ul(r){return typeof r=="number"&&r%1==0}function Sl(r){return typeof r=="string"}function Vo(r){return typeof r=="boolean"}function wn(r){const t=r;if(!t||typeof t!="object")return t;let e,n,a;for(n in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(n)&&(a=t[n],e[n]=a&&typeof a=="object"?wn(a):a);return e}function R0(r){return r!==null}function cl(r){return r===null?void 0:r}const ox="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function hl(r,t,e){return t===void 0&&(t=ox),`${e=e!==void 0?`${e} `:""}${r}px ${t}`}class VM{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=t}N(){const t=this.M,e=this.F(),n=this.W();return t.k===e&&t.T===n||(t.k=e,t.T=n,t.P=hl(e,n),t.A=2.5/12*e,t.I=t.A,t.V=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function _f(r){return r<0?0:r>255?255:Math.round(r)||0}function D0(r){return .199*r[0]+.687*r[1]+.114*r[2]}class UM{constructor(t,e){this.q=new Map,this.j=t,e&&(this.q=e)}Y(t,e){if(t==="transparent")return t;const n=this.K(t),a=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${e*a})`}Z(t){const e=this.K(t);return{G:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,X:D0(e)>160?"black":"white"}}J(t){return D0(this.K(t))}tt(t,e,n){const[a,l,u,h]=this.K(t),[f,d,v,m]=this.K(e),y=[_f(a+n*(f-a)),_f(l+n*(d-l)),_f(u+n*(v-u)),(x=h+n*(m-h),x<=0||x>1?Math.min(Math.max(x,0),1):Math.round(1e4*x)/1e4)];var x;return`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${y[3]})`}K(t){const e=this.q.get(t);if(e)return e;const n=(function(u){const h=document.createElement("div");h.style.display="none",document.body.appendChild(h),h.style.color=u;const f=window.getComputedStyle(h).color;return document.body.removeChild(h),f})(t),a=n.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!a){if(this.j.length)for(const u of this.j){const h=u(t);if(h)return this.q.set(t,h),h}throw new Error(`Failed to parse color: ${t}`)}const l=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),a[4]?parseFloat(a[4]):1];return this.q.set(t,l),l}}class ux{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,n){this.it.forEach((a=>{a.nt(t,e,n)}))}}class Dn{nt(t,e,n){t.useBitmapCoordinateSpace((a=>this.et(a,e,n)))}}class HM extends Dn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.rt===null||this.rt.lt===null)return;const a=this.rt.lt,l=this.rt,u=Math.max(1,Math.floor(e))%2/2,h=f=>{t.beginPath();for(let d=a.to-1;d>=a.from;--d){const v=l.ot[d],m=Math.round(v._t*e)+u,y=v.ut*n,x=f*n+u;t.moveTo(m,y),t.arc(m,y,x,0,2*Math.PI)}t.fill()};l.ct>0&&(t.fillStyle=l.dt,h(l.ft+l.ct)),t.fillStyle=l.vt,h(l.ft)}}function YM(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const WM={from:0,to:1};class qM{constructor(t,e,n){this.Mt=new ux,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.yt=n,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map(YM),this.bt=this.St.map((e=>{const n=new HM;return n.ht(e),n})),this.Mt.st(this.bt))}Rt(){const t=this.Ct.N().mode===2||!this.Ct.It(),e=this.yt.Vt(),n=this.Ct.Bt(),a=this.O.Et();this.Pt(),e.forEach(((l,u)=>{const h=this.St[u],f=l.At(n),d=l.Lt();!t&&f!==null&&l.It()&&d!==null?(h.vt=f.zt,h.ft=f.ft,h.ct=f.Ot,h.ot[0].gt=f.gt,h.ot[0].ut=l.Ft().Nt(f.gt,d.Wt),h.dt=f.Ht??this.O.Ut(h.ot[0].ut/l.Ft().$t()),h.ot[0].wt=n,h.ot[0]._t=a.qt(n),h.lt=WM):h.lt=null}))}}class XM extends Dn{constructor(t){super(),this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.jt===null)return;const l=this.jt.Yt.It,u=this.jt.Kt.It;if(!l&&!u)return;const h=Math.round(this.jt._t*n),f=Math.round(this.jt.ut*a);t.lineCap="butt",l&&h>=0&&(t.lineWidth=Math.floor(this.jt.Yt.ct*n),t.strokeStyle=this.jt.Yt.R,t.fillStyle=this.jt.Yt.R,ur(t,this.jt.Yt.Zt),(function(d,v,m,y){d.beginPath();const x=d.lineWidth%2?.5:0;d.moveTo(v+x,m),d.lineTo(v+x,y),d.stroke()})(t,h,0,e.height)),u&&f>=0&&(t.lineWidth=Math.floor(this.jt.Kt.ct*a),t.strokeStyle=this.jt.Kt.R,t.fillStyle=this.jt.Kt.R,ur(t,this.jt.Kt.Zt),lx(t,f,0,e.width))}}class GM{constructor(t,e){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new XM(this.Gt),this.Jt=t,this.yt=e}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const t=this.Jt.It(),e=this.yt.Qt().N().crosshair,n=this.Gt;if(e.mode===2)return n.Kt.It=!1,void(n.Yt.It=!1);n.Kt.It=t&&this.Jt.ti(this.yt),n.Yt.It=t&&this.Jt.ii(),n.Kt.ct=e.horzLine.width,n.Kt.Zt=e.horzLine.style,n.Kt.R=e.horzLine.color,n.Yt.ct=e.vertLine.width,n.Yt.Zt=e.vertLine.style,n.Yt.R=e.vertLine.color,n._t=this.Jt.si(),n.ut=this.Jt.ni()}}function KM(r,t,e,n,a,l){r.fillRect(t+l,e,n-2*l,l),r.fillRect(t+l,e+a-l,n-2*l,l),r.fillRect(t,e,l,a),r.fillRect(t+n-l,e,l,a)}function Fu(r,t,e,n,a,l){r.save(),r.globalCompositeOperation="copy",r.fillStyle=l,r.fillRect(t,e,n,a),r.restore()}function N0(r,t,e,n,a,l){r.beginPath(),r.roundRect?r.roundRect(t,e,n,a,l):(r.lineTo(t+n-l[1],e),l[1]!==0&&r.arcTo(t+n,e,t+n,e+l[1],l[1]),r.lineTo(t+n,e+a-l[2]),l[2]!==0&&r.arcTo(t+n,e+a,t+n-l[2],e+a,l[2]),r.lineTo(t+l[3],e+a),l[3]!==0&&r.arcTo(t,e+a,t,e+a-l[3],l[3]),r.lineTo(t,e+l[0]),l[0]!==0&&r.arcTo(t,e,t+l[0],e,l[0]))}function O0(r,t,e,n,a,l,u=0,h=[0,0,0,0],f=""){if(r.save(),!u||!f||f===l)return N0(r,t,e,n,a,h),r.fillStyle=l,r.fill(),void r.restore();const d=u/2;var v;N0(r,t+d,e+d,n-u,a-u,(v=-d,h.map((m=>m===0?m:m+v)))),l!=="transparent"&&(r.fillStyle=l,r.fill()),f!=="transparent"&&(r.lineWidth=u,r.strokeStyle=f,r.closePath(),r.stroke()),r.restore()}function cx(r,t,e,n,a,l,u){r.save(),r.globalCompositeOperation="copy";const h=r.createLinearGradient(0,0,0,a);h.addColorStop(0,l),h.addColorStop(1,u),r.fillStyle=h,r.fillRect(t,e,n,a),r.restore()}class k0{constructor(t,e){this.ht(t,e)}ht(t,e){this.jt=t,this.ei=e}$t(t,e){return this.jt.It?t.k+t.A+t.I:0}nt(t,e,n,a){if(!this.jt.It||this.jt.ri.length===0)return;const l=this.jt.R,u=this.ei.G,h=t.useBitmapCoordinateSpace((f=>{const d=f.context;d.font=e.P;const v=this.hi(f,e,n,a),m=v.ai;return v.li?O0(d,m.oi,m._i,m.ui,m.ci,u,m.di,[m.ft,0,0,m.ft],u):O0(d,m.fi,m._i,m.ui,m.ci,u,m.di,[0,m.ft,m.ft,0],u),this.jt.pi&&(d.fillStyle=l,d.fillRect(m.fi,m.mi,m.wi-m.fi,m.gi)),this.jt.Mi&&(d.fillStyle=e.D,d.fillRect(v.li?m.bi-m.di:0,m._i,m.di,m.Si-m._i)),v}));t.useMediaCoordinateSpace((({context:f})=>{const d=h.xi;f.font=e.P,f.textAlign=h.li?"right":"left",f.textBaseline="middle",f.fillStyle=l,f.fillText(this.jt.ri,d.Ci,(d._i+d.Si)/2+d.yi)}))}hi(t,e,n,a){const{context:l,bitmapSize:u,mediaSize:h,horizontalPixelRatio:f,verticalPixelRatio:d}=t,v=this.jt.pi||!this.jt.ki?e.C:0,m=this.jt.Pi?e.S:0,y=e.A+this.ei.Ti,x=e.I+this.ei.Ri,b=e.V,S=e.B,_=this.jt.ri,C=e.k,A=n.Di(l,_),T=Math.ceil(n.Ii(l,_)),D=C+y+x,M=e.S+b+S+T+v,j=Math.max(1,Math.floor(d));let N=Math.round(D*d);N%2!=j%2&&(N+=1);const V=m>0?Math.max(1,Math.floor(m*f)):0,B=Math.round(M*f),I=Math.round(v*f),W=this.ei.Vi??this.ei.Bi??this.ei.Ei,Z=Math.round(W*d)-Math.floor(.5*d),it=Math.floor(Z+j/2-N/2),X=it+N,ot=a==="right",z=ot?h.width-m:m,U=ot?u.width-V:V;let st,ft,rt;return ot?(st=U-B,ft=U-I,rt=z-v-b-m):(st=U+B,ft=U+I,rt=z+v+b),{li:ot,ai:{_i:it,mi:Z,Si:X,ui:B,ci:N,ft:2*f,di:V,oi:st,fi:U,wi:ft,gi:j,bi:u.width},xi:{_i:it/d,Si:X/d,Ci:rt,yi:A}}}}class Pu{constructor(t){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(t||k0)(this.Li,this.Ai),this.Ni=new(t||k0)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Oi.$t(t,e),this.Ni.$t(t,e))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(t){this.Ai.Bi=t??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(t){return this.Fi(),this.Li.pi=this.Li.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class QM extends Pu{constructor(t,e,n){super(),this.Jt=t,this.Ki=e,this.Zi=n}Yi(t,e,n){if(t.It=!1,this.Jt.N().mode===2)return;const a=this.Jt.N().horzLine;if(!a.labelVisible)return;const l=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||l===null)return;const u=this.Ki.Xi().Z(a.labelBackgroundColor);n.G=u.G,t.R=u.X;const h=2/12*this.Ki.k();n.Ti=h,n.Ri=h;const f=this.Zi(this.Ki);n.Ei=f.Ei,t.ri=this.Ki.Ji(f.gt,l),t.It=!0}}const $M=/[1-9]/g;class hx{constructor(){this.jt=null}ht(t){this.jt=t}nt(t,e){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const n=t.useMediaCoordinateSpace((({context:y})=>(y.font=e.P,Math.round(e.Qi.Ii(y,mt(this.jt).ri,$M)))));if(n<=0)return;const a=e.ts,l=n+2*a,u=l/2,h=this.jt.ss;let f=this.jt.Ei,d=Math.floor(f-u)+.5;d<0?(f+=Math.abs(0-d),d=Math.floor(f-u)+.5):d+l>h&&(f-=Math.abs(h-(d+l)),d=Math.floor(f-u)+.5);const v=d+l,m=Math.ceil(0+e.S+e.C+e.A+e.k+e.I);t.useBitmapCoordinateSpace((({context:y,horizontalPixelRatio:x,verticalPixelRatio:b})=>{const S=mt(this.jt);y.fillStyle=S.G;const _=Math.round(d*x),C=Math.round(0*b),A=Math.round(v*x),T=Math.round(m*b),D=Math.round(2*x);if(y.beginPath(),y.moveTo(_,C),y.lineTo(_,T-D),y.arcTo(_,T,_+D,T,D),y.lineTo(A-D,T),y.arcTo(A,T,A,T-D,D),y.lineTo(A,C),y.fill(),S.pi){const M=Math.round(S.Ei*x),j=C,N=Math.round((j+e.C)*b);y.fillStyle=S.R;const V=Math.max(1,Math.floor(x)),B=Math.floor(.5*x);y.fillRect(M-B,j,V,N-j)}})),t.useMediaCoordinateSpace((({context:y})=>{const x=mt(this.jt),b=0+e.S+e.C+e.A+e.k/2;y.font=e.P,y.textAlign="left",y.textBaseline="middle",y.fillStyle=x.R;const S=e.Qi.Di(y,"Apr0");y.translate(d+a,b+S),y.fillText(x.ri,0,0)}))}}class ZM{constructor(t,e,n){this.xt=!0,this.Xt=new hx,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=t,this.ns=e,this.Zi=n}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const t=this.Gt;if(t.It=!1,this.Ct.N().mode===2)return;const e=this.Ct.N().vertLine;if(!e.labelVisible)return;const n=this.ns.Et();if(n.Gi())return;t.ss=n.ss();const a=this.Zi();if(a===null)return;t.Ei=a.Ei;const l=n.es(this.Ct.Bt());t.ri=n.rs(mt(l)),t.It=!0;const u=this.ns.Xi().Z(e.labelBackgroundColor);t.G=u.G,t.R=u.X,t.pi=n.N().ticksVisible}}class fx{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(t){this.ls=t}Ft(){return this.hs}cs(t){this.hs=t}ds(t){return[]}fs(){return[]}It(){return!0}}var z0;(function(r){r[r.Normal=0]="Normal",r[r.Magnet=1]="Magnet",r[r.Hidden=2]="Hidden",r[r.MagnetOHLC=3]="MagnetOHLC"})(z0||(z0={}));class JM extends fx{constructor(t,e){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=t,this.Ps=e,this.Ts=((a,l)=>u=>{const h=l(),f=a();if(u===mt(this.yt).Rs())return{gt:f,Ei:h};{const d=mt(u.Lt());return{gt:u.Ds(h,d),Ei:h}}})((()=>this.ps),(()=>this.Cs));const n=((a,l)=>()=>{const u=this.ns.Et().Is(a()),h=l();return u&&Number.isFinite(h)?{wt:u,Ei:h}:null})((()=>this.vs),(()=>this.si()));this.Vs=new ZM(this,t,n)}N(){return this.Ps}Bs(t,e){this.ys=t,this.ks=e}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(t,e,n){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(t,e,n)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(t){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return t;const e=this.ns,n=e.Et();let a=null,l=null;for(const d of e.Us()){const v=d.qs().$s(t,-1);if(v){if(v.js===t)return t;(a===null||v.js>a)&&(a=v.js)}const m=d.qs().$s(t,1);if(m){if(m.js===t)return t;(l===null||m.js<l)&&(l=m.js)}}const u=[a,l].filter(R0);if(u.length===0)return t;const h=n.qt(t),f=u.map((d=>Math.abs(h-n.qt(d))));return u[f.indexOf(Math.min(...f))]}Ys(t){let e=this.bs.get(t);e||(e=new GM(this,t),this.bs.set(t,e));let n=this.Ss.get(t);return n||(n=new qM(this.ns,this,t),this.Ss.set(t,n)),[e,n]}ti(t){return t===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(t,e){this.ws&&this.yt===t||this.gs.clear();const n=[];return this.yt===t&&n.push(this.Zs(this.gs,e,this.Ts)),n}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach((t=>{this.bs.get(t)?.kt(),this.Ss.get(t)?.kt()})),this.gs.forEach((t=>t.kt())),this.Vs.kt()}Js(t){return t&&!t.Rs().Gi()?t.Rs():null}Os(t,e,n){this.Qs(t,e,n)&&this.Ws()}Qs(t,e,n){const a=this.xs,l=this.Cs,u=this.ps,h=this.vs,f=this.yt,d=this.Js(n);this.vs=t,this.xs=isNaN(t)?NaN:this.ns.Et().qt(t),this.yt=n;const v=d!==null?d.Lt():null;return d!==null&&v!==null?(this.ps=e,this.Cs=d.Nt(e,v)):(this.ps=NaN,this.Cs=NaN),a!==this.xs||l!==this.Cs||h!==this.vs||u!==this.ps||f!==this.yt}Fs(){const t=this.ns.tn().map((n=>n.qs().sn())).filter(R0),e=t.length===0?null:Math.max(...t);this.vs=e!==null?e:NaN}Zs(t,e,n){let a=t.get(e);return a===void 0&&(a=new QM(this,e,n),t.set(e,a)),a}}function Iu(r){return r==="left"||r==="right"}class Ie{constructor(t){this.nn=new Map,this.en=[],this.rn=t}hn(t,e){const n=(function(a,l){return a===void 0?l:{an:Math.max(a.an,l.an),ln:a.ln||l.ln}})(this.nn.get(t),e);this.nn.set(t,n)}_n(){return this.rn}un(t){const e=this.nn.get(t);return e===void 0?{an:this.rn}:{an:Math.max(this.rn,e.an),ln:e.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(t){this.dn(),this.en=[{fn:1,Wt:t}]}vn(t){this.mn(),this.en.push({fn:5,Wt:t})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(t){this.dn(),this.en.push({fn:2,Wt:t})}Mn(t){this.dn(),this.en.push({fn:3,Wt:t})}bn(){return this.en}Sn(t){for(const e of t.en)this.xn(e);this.rn=Math.max(this.rn,t.rn),t.nn.forEach(((e,n)=>{this.hn(n,e)}))}static Cn(){return new Ie(2)}static yn(){return new Ie(3)}xn(t){switch(t.fn){case 0:this.cn();break;case 1:this.pn(t.Wt);break;case 2:this.gn(t.Wt);break;case 3:this.Mn(t.Wt);break;case 4:this.wn();break;case 5:this.vn(t.Wt);break;case 6:this.mn()}}mn(){const t=this.en.findIndex((e=>e.fn===5));t!==-1&&this.en.splice(t,1)}}class dx{formatTickmarks(t){return t.map((e=>this.format(e)))}}const j0=".";function En(r,t){if(!Ir(r))return"n/a";if(!ul(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?r.toString():("0000000000000000"+r.toString()).slice(-t)}class Vu extends dx{constructor(t,e){if(super(),e||(e=1),Ir(t)&&ul(t)||(t=100),t<0)throw new TypeError("invalid base");this.Ki=t,this.kn=e,this.Pn()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.Tn(t)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let t=this.Ki;for(;t>1;)t/=10,this.Rn++}}Tn(t){const e=this.Ki/this.kn;let n=Math.floor(t),a="";const l=this.Rn!==void 0?this.Rn:NaN;if(e>1){let u=+(Math.round(t*e)-n*e).toFixed(this.Rn);u>=e&&(u-=e,n+=1),a=j0+En(+u.toFixed(this.Rn)*this.kn,l)}else n=Math.round(n*e)/e,l>0&&(a=j0+En(0,l));return n.toFixed(0)+a}}class vx extends Vu{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class t2 extends dx{constructor(t){super(),this.Dn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.In(t):t<999995?e+this.In(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.In(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.In(t/1e9)+"B")}In(t){let e;const n=Math.pow(10,this.Dn);return e=(t=Math.round(t*n)/n)>=1e-15&&t<1?t.toFixed(this.Dn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((a,l)=>l))}}const e2=/[2-9]/g;class fl{constructor(t=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=t}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(t,e,n){return this.Nn(t,e,n).width}Di(t,e,n){const a=this.Nn(t,e,n);return((a.actualBoundingBoxAscent||0)-(a.actualBoundingBoxDescent||0))/2}Nn(t,e,n){const a=n||e2,l=String(e).replace(a,"0");if(this.Ln.has(l))return ci(this.Ln.get(l)).Fn;if(this.Vn===this.zn){const h=this.An[this.En];delete this.An[this.En],this.Ln.delete(h),this.En++,this.Vn--}t.save(),t.textBaseline="middle";const u=t.measureText(l);return t.restore(),u.width===0&&e.length||(this.Ln.set(l,{Fn:u,Wn:this.Bn}),this.An[this.Bn]=l,this.Vn++,this.Bn++),u}}class i2{constructor(t){this.Hn=null,this.M=null,this.Un="right",this.$n=t}qn(t,e,n){this.Hn=t,this.M=e,this.Un=n}nt(t){this.M!==null&&this.Hn!==null&&this.Hn.nt(t,this.M,this.$n,this.Un)}}class px{constructor(t,e,n){this.jn=t,this.$n=new fl(50),this.Yn=e,this.O=n,this.F=-1,this.Xt=new i2(this.$n)}Tt(){const t=this.O.Kn(this.Yn);if(t===null)return null;const e=t.Zn(this.Yn)?t.Gn():this.Yn.Ft();if(e===null)return null;const n=t.Xn(e);if(n==="overlay")return null;const a=this.O.Jn();return a.k!==this.F&&(this.F=a.k,this.$n.On()),this.Xt.qn(this.jn.ji(),a,n),this.Xt}}class n2 extends Dn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}Qn(t,e){if(!this.jt?.It)return null;const{ut:n,ct:a,te:l}=this.jt;return e>=n-a-7&&e<=n+a+7?{ie:this.jt,te:l}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.jt===null||this.jt.It===!1)return;const l=Math.round(this.jt.ut*a);l<0||l>e.height||(t.lineCap="butt",t.strokeStyle=this.jt.R,t.lineWidth=Math.floor(this.jt.ct*n),ur(t,this.jt.Zt),lx(t,l,0,e.width))}}class wd{constructor(t){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new n2,this.xt=!0,this.ee=t,this.re=t.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class r2 extends wd{constructor(t){super(t)}he(){this.se.It=!1;const t=this.ee.Ft(),e=t.ae().ae;if(e!==2&&e!==3)return;const n=this.ee.N();if(!n.baseLineVisible||!this.ee.It())return;const a=this.ee.Lt();a!==null&&(this.se.It=!0,this.se.ut=t.Nt(a.Wt,a.Wt),this.se.R=n.baseLineColor,this.se.ct=n.baseLineWidth,this.se.Zt=n.baseLineStyle)}}class s2 extends Dn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}le(){return this.jt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){const a=this.jt;if(a===null)return;const l=Math.max(1,Math.floor(e)),u=l%2/2,h=Math.round(a.oe.x*e)+u,f=a.oe.y*n;t.fillStyle=a._e,t.beginPath();const d=Math.max(2,1.5*a.ue)*e;t.arc(h,f,d,0,2*Math.PI,!1),t.fill(),t.fillStyle=a.ce,t.beginPath(),t.arc(h,f,a.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=l,t.strokeStyle=a.de,t.beginPath(),t.arc(h,f,a.ft*e+l/2,0,2*Math.PI,!1),t.stroke()}}const a2=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class l2{constructor(t){this.Xt=new s2,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=t}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const t=performance.now(),e=this.Ce-t;if(e>0)return void(e<650&&(this.Ce+=2600));this.xe=t,this.Ce=t+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const t=this.ye.Qt().Et(),e=t.Ie(),n=this.ye.Lt();if(e===null||n===null)return;const a=this.ye.Ve(!0);if(a.Be||!e.Ee(a.js))return;const l={x:t.qt(a.js),y:this.ye.Ft().Nt(a.gt,n.Wt)},u=a.R,h=this.ye.N().lineWidth,f=this.Ae(this.Le(),u);this.Xt.ht({_e:u,ue:h,ce:f.ce,de:f.de,ft:f.ft,oe:l})}De(){const t=this.Xt.le();if(t!==null){const e=this.Ae(this.Le(),t._e);t.ce=e.ce,t.de=e.de,t.ft=e.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(t,e,n,a){const l=n+(a-n)*e;return this.ye.Qt().Xi().Y(t,l)}Ae(t,e){const n=t%2600/2600;let a;for(const d of a2)if(n>=d.fe&&n<=d.pe){a=d;break}Ve(a!==void 0,"Last price animation internal logic error");const l=(n-a.fe)/(a.pe-a.fe);return{ce:this.ze(e,l,a.we,a.ge),de:this.ze(e,l,a.Me,a.be),ft:(u=l,h=a.ve,f=a.me,h+(f-h)*u)};var u,h,f}}class o2 extends wd{constructor(t){super(t)}he(){const t=this.se;t.It=!1;const e=this.ee.N();if(!e.priceLineVisible||!this.ee.It())return;const n=this.ee.Ve(e.priceLineSource===0);n.Be||(t.It=!0,t.ut=n.Ei,t.R=this.ee.Oe(n.R),t.ct=e.priceLineWidth,t.Zt=e.priceLineStyle)}}class u2 extends Pu{constructor(t){super(),this.Jt=t}Yi(t,e,n){t.It=!1,e.It=!1;const a=this.Jt;if(!a.It())return;const l=a.N(),u=l.lastValueVisible,h=a.Ne()!=="",f=l.seriesLastValueMode===0,d=a.Ve(!1);if(d.Be)return;u&&(t.ri=this.Fe(d,u,f),t.It=t.ri.length!==0),(h||f)&&(e.ri=this.We(d,u,h,f),e.It=e.ri.length>0);const v=a.Oe(d.R),m=this.Jt.Qt().Xi().Z(v);n.G=m.G,n.Ei=d.Ei,e.Ht=a.Qt().Ut(d.Ei/a.Ft().$t()),t.Ht=v,t.R=m.X,e.R=m.X}We(t,e,n,a){let l="";const u=this.Jt.Ne();return n&&u.length!==0&&(l+=`${u} `),e&&a&&(l+=this.Jt.Ft().He()?t.Ue:t.$e),l.trim()}Fe(t,e,n){return e?n?this.Jt.Ft().He()?t.$e:t.Ue:t.ri:""}}function L0(r,t,e,n){const a=Number.isFinite(t),l=Number.isFinite(e);return a&&l?r(t,e):a||l?a?t:e:n}class $e{constructor(t,e){this.qe=t,this.je=e}Ye(t){return t!==null&&this.qe===t.qe&&this.je===t.je}Ke(){return new $e(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(t){return t===null?this:new $e(L0(Math.min,this.Ze(),t.Ze(),-1/0),L0(Math.max,this.Ge(),t.Ge(),1/0))}Je(t){if(!Ir(t)||this.je-this.qe===0)return;const e=.5*(this.je+this.qe);let n=this.je-e,a=this.qe-e;n*=t,a*=t,this.je=e+n,this.qe=e+a}Qe(t){Ir(t)&&(this.je+=t,this.qe+=t)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(t){return t===null?null:new $e(t.minValue,t.maxValue)}}class du{constructor(t,e){this.sr=t,this.nr=e||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(t){return t===null?null:new du($e.ir(t.priceRange),t.margins)}}const c2=[2,4,8,16,32,64,128,256,512],h2="Custom series with conflation reducer must have a priceValueBuilder method";class f2 extends wd{constructor(t,e){super(t),this.hr=e}he(){const t=this.se;t.It=!1;const e=this.hr.N();if(!this.ee.It()||!e.lineVisible)return;const n=this.hr.ar();n!==null&&(t.It=!0,t.ut=n,t.R=e.color,t.ct=e.lineWidth,t.Zt=e.lineStyle,t.te=this.hr.N().id)}}class d2 extends Pu{constructor(t,e){super(),this.ye=t,this.hr=e}Yi(t,e,n){t.It=!1,e.It=!1;const a=this.hr.N(),l=a.axisLabelVisible,u=a.title!=="",h=this.ye;if(!l||!h.It())return;const f=this.hr.ar();if(f===null)return;u&&(e.ri=a.title,e.It=!0),e.Ht=h.Qt().Ut(f/h.Ft().$t()),t.ri=this.lr(a.price),t.It=!0;const d=this.ye.Qt().Xi().Z(a.axisLabelColor||a.color);n.G=d.G;const v=a.axisLabelTextColor||d.X;t.R=v,e.R=v,n.Ei=f}lr(t){const e=this.ye.Lt();return e===null?"":this.ye.Ft().Ji(t,e.Wt)}}class v2{constructor(t,e){this.ye=t,this.Ps=e,this._r=new f2(t,this),this.jn=new d2(t,this),this.ur=new px(this.jn,t,t.Qt())}cr(t){bi(this.Ps,t),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const t=this.ye,e=t.Ft();if(t.Qt().Et().Gi()||e.Gi())return null;const n=t.Lt();return n===null?null:e.Nt(this.Ps.price,n.Wt)}}class p2{constructor(){this.wr=new WeakMap}gr(t,e,n){const a=1/e*n;if(t>=a)return 1;const l=a/t,u=Math.pow(2,Math.floor(Math.log2(l)));return Math.min(u,512)}Mr(t,e,n,a=!1,l){if(t.length===0||e<=1)return t;const u=this.br(e);if(u<=1)return t;const h=this.Sr(t);let f=h.Cr.get(u);return f!==void 0||(f=this.yr(t,u,n,a,l,h.Cr),h.Cr.set(u,f)),f}kr(t,e,n,a,l=!1,u){if(n<1||t.length===0)return t;const h=this.Sr(t),f=h.Cr.get(n);if(!f)return this.Mr(t,n,a,l,u);const d=this.Pr(t,e,n,f,l,a,u);return h.Cr.set(n,d),d}br(t){if(t<=2)return 2;for(const e of c2)if(t<=e)return e;return 512}Tr(t){if(t.length===0)return 0;const e=t[0],n=t[t.length-1];return 31*t.length+17*e.js+13*n.js}yr(t,e,n,a=!1,l,u=new Map){if(e===2)return this.Rr(t,2,n,a,l);const h=e/2;let f=u.get(h);return f||(f=this.yr(t,h,n,a,l,u),u.set(h,f)),this.Dr(f,n,a,l)}Rr(t,e,n,a=!1,l){const u=this.Ir(t,e,n,a,l);return this.Vr(u,a)}Dr(t,e,n=!1,a){const l=this.Ir(t,2,e,n,a);return this.Vr(l,n)}Ir(t,e,n,a=!1,l){const u=[];for(let h=0;h<t.length;h+=e)if(t.length-h>=e){const f=this.Br(t[h],t[h+1],n,a,l);f.Er=!1,u.push(f)}else if(u.length===0)u.push(this.Ar(t[h],!0));else{const f=u[u.length-1];u[u.length-1]=this.Lr(f,t[h],n,a,l)}return u}zr(t,e){return(t??1)+(e??1)}Br(t,e,n,a=!1,l){if(!a||!n||!l){const d=t.Wt[1]>e.Wt[1]?t.Wt[1]:e.Wt[1],v=t.Wt[2]<e.Wt[2]?t.Wt[2]:e.Wt[2];return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:d,$r:v,qr:e.Wt[3],jr:this.zr(t.jr,e.jr),Yr:void 0,Er:!1}}const u=n(this.Kr(t,l),this.Kr(e,l)),h=l(u),f=h.length?h[h.length-1]:0;return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:Math.max(t.Wt[1],f),$r:Math.min(t.Wt[2],f),qr:f,jr:this.zr(t.jr,e.jr),Yr:u,Er:!1}}Lr(t,e,n,a=!1,l){if(!a||!n||!l)return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:t.Ur>e.Wt[1]?t.Ur:e.Wt[1],$r:t.$r<e.Wt[2]?t.$r:e.Wt[2],qr:e.Wt[3],jr:t.jr+(e.jr??1),Yr:t.Yr,Er:!1};const u=t.Yr,h=this.Kr(e,l),f=u?{data:u,index:t.Or,originalTime:t.Fr,time:t.Fr,priceValues:l(u)}:null,d=f?n(f,h):h.data,v=f?l(d):h.priceValues,m=v.length?v[v.length-1]:0;return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:Math.max(t.Ur,m),$r:Math.min(t.$r,m),qr:m,jr:t.jr+(e.jr??1),Yr:d,Er:!1}}Zr(t,e,n,a,l,u,h=!1,f){const d=e===a?l:t[e];if(n-e==1)return this.Ar(d,!0);const v=e+1===a?l:t[e+1];let m=this.Br(d,v,u,h,f);for(let y=e+2;y<n;y++){const x=y===a?l:t[y];m=this.Lr(m,x,u,h,f)}return m}Kr(t,e){const n=t.le??{};return{data:t.le,index:t.js,originalTime:t.Gr,time:t.wt,priceValues:e(n)}}Xr(t,e=!1){const n=e===!0,a=!!t.Yr;return{js:t.Or,wt:t.Fr,Gr:t.Fr,Wt:[n?t.qr:t.Hr,t.Ur,t.$r,t.qr],jr:t.jr,le:n?a?t.Yr:{wt:t.Fr}:void 0}}Vr(t,e=!1){return t.map((n=>this.Xr(n,e)))}Pr(t,e,n,a,l=!1,u,h){if(a.length===0)return a;const f=t.length-1,d=Math.floor(f/n)*n;if(Math.min(d+n,t.length)-d<n&&t.length>n){const v=t.slice();return v[v.length-1]=e,this.Mr(v,n,u,l,h)}if(Math.floor((f-1)/n)===Math.floor(f/n)||a.length===1){const v=Math.min(d+n,t.length),m=v-d;if(m<=0)return a;const y=m===1?this.Ar(d===f?e:t[d],!0):this.Zr(t,d,v,f,e,u,l,h);return a[a.length-1]=this.Xr(y,l),a}{const v=t.slice();return v[v.length-1]=e,this.Mr(v,n,u,l,h)}}Ar(t,e=!1){return{Or:t.js,Nr:t.js,Fr:t.wt,Wr:t.wt,Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3],jr:t.jr??1,Yr:t.le,Er:e}}Sr(t){const e=this.Jr(t),n=this.Tr(t);return e.Qr!==n&&(e.Cr.clear(),e.Qr=n),e}Jr(t){let e=this.wr.get(t);return e===void 0&&(e={Qr:this.Tr(t),Cr:new Map},this.wr.set(t,e)),e}}class m2 extends fx{constructor(t){super(),this.ns=t}Qt(){return this.ns}}const g2={Bar:(r,t,e,n)=>{const a=t.upColor,l=t.downColor,u=mt(r(e,n)),h=sr(u.Wt[0])<=sr(u.Wt[3]);return{th:u.R??(h?a:l)}},Candlestick:(r,t,e,n)=>{const a=t.upColor,l=t.downColor,u=t.borderUpColor,h=t.borderDownColor,f=t.wickUpColor,d=t.wickDownColor,v=mt(r(e,n)),m=sr(v.Wt[0])<=sr(v.Wt[3]);return{th:v.R??(m?a:l),ih:v.Ht??(m?u:h),sh:v.nh??(m?f:d)}},Custom:(r,t,e,n)=>({th:mt(r(e,n)).R??t.color}),Area:(r,t,e,n)=>{const a=mt(r(e,n));return{th:a.vt??t.lineColor,vt:a.vt??t.lineColor,eh:a.eh??t.topColor,rh:a.rh??t.bottomColor}},Baseline:(r,t,e,n)=>{const a=mt(r(e,n));return{th:a.Wt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,hh:a.hh??t.topLineColor,ah:a.ah??t.bottomLineColor,oh:a.oh??t.topFillColor1,_h:a._h??t.topFillColor2,uh:a.uh??t.bottomFillColor1,dh:a.dh??t.bottomFillColor2}},Line:(r,t,e,n)=>{const a=mt(r(e,n));return{th:a.R??t.color,vt:a.R??t.color}},Histogram:(r,t,e,n)=>({th:mt(r(e,n)).R??t.color})};class y2{constructor(t){this.fh=(e,n)=>n!==void 0?n.Wt:this.ye.qs().ph(e),this.ye=t,this.mh=g2[t.wh()]}gh(t,e){return this.mh(this.fh,this.ye.N(),t,e)}}function mx(r,t,e,n,a=0,l=t.length){let u=l-a;for(;0<u;){const h=u>>1,f=a+h;n(t[f],e)===r?(a=f+1,u-=h+1):u=h}return a}const qs=mx.bind(null,!0),gx=mx.bind(null,!1);var B0;(function(r){r[r.NearestLeft=-1]="NearestLeft",r[r.None=0]="None",r[r.NearestRight=1]="NearestRight"})(B0||(B0={}));const er=30;class b2{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(t){return this.Th(t,0)!==null}ph(t){return this.$s(t)}$s(t,e=0){const n=this.Th(t,e);return n===null?null:{...this.Rh(n),js:this.Ph(n)}}Dh(){return this.Mh}Ih(t,e,n){if(this.Gi())return null;let a=null;for(const l of n)a=Uo(a,this.Vh(t,e,l));return a}ht(t){this.Sh.clear(),this.bh.clear(),this.Mh=t,this.xh=t.map((e=>e.js))}Bh(){return this.xh}Ph(t){return this.Mh[t].js}Rh(t){return this.Mh[t]}Th(t,e){const n=this.Eh(t);if(n===null&&e!==0)switch(e){case-1:return this.Ah(t);case 1:return this.Lh(t);default:throw new TypeError("Unknown search mode")}return n}Ah(t){let e=this.zh(t);return e>0&&(e-=1),e!==this.Mh.length&&this.Ph(e)<t?e:null}Lh(t){const e=this.Oh(t);return e!==this.Mh.length&&t<this.Ph(e)?e:null}Eh(t){const e=this.zh(t);return e===this.Mh.length||t<this.Mh[e].js?null:e}zh(t){return qs(this.Mh,t,((e,n)=>e.js<n))}Oh(t){return gx(this.Mh,t,((e,n)=>e.js>n))}Nh(t,e,n){let a=null;for(let l=t;l<e;l++){const u=this.Mh[l].Wt[n];Number.isNaN(u)||(a===null?a={Fh:u,Wh:u}:(u<a.Fh&&(a.Fh=u),u>a.Wh&&(a.Wh=u)))}return a}Vh(t,e,n){if(this.Gi())return null;let a=null;const l=mt(this.kh()),u=mt(this.sn()),h=Math.max(t,l),f=Math.min(e,u),d=Math.ceil(h/er)*er,v=Math.max(d,Math.floor(f/er)*er);{const y=this.zh(h),x=this.Oh(Math.min(f,d,e));a=Uo(a,this.Nh(y,x,n))}let m=this.bh.get(n);m===void 0&&(m=new Map,this.bh.set(n,m));for(let y=Math.max(d+1,h);y<v;y+=er){const x=Math.floor(y/er);let b=m.get(x);if(b===void 0){const S=this.zh(x*er),_=this.Oh((x+1)*er-1);b=this.Nh(S,_,n),m.set(x,b)}a=Uo(a,b)}{const y=this.zh(v),x=this.Oh(f);a=Uo(a,this.Nh(y,x,n))}return a}}function Uo(r,t){return r===null?t:t===null?r:{Fh:Math.min(r.Fh,t.Fh),Wh:Math.max(r.Wh,t.Wh)}}function wf(){return new b2}const vu={setLineStyle:ur};class x2{constructor(t){this.Hh=t}nt(t,e,n){this.Hh.draw(t,vu)}Uh(t,e,n){this.Hh.drawBackground?.(t,vu)}}class S2{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new x2(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}class yx{constructor(t){this.Kh=null,this.Zh=t}Gh(){return this.Zh}Ws(){this.Zh.updateAllViews?.()}Ys(){const t=this.Zh.paneViews?.()??[];if(this.Kh?.qh===t)return this.Kh.jh;const e=t.map((n=>new S2(n)));return this.Kh={qh:t,jh:e},e}Qn(t,e){return this.Zh.hitTest?.(t,e)??null}}let _2=class extends yx{ds(){return[]}};class w2{constructor(t){this.Hh=t}nt(t,e,n){this.Hh.draw(t,vu)}Uh(t,e,n){this.Hh.drawBackground?.(t,vu)}}class F0{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new w2(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}function bx(r){return{ri:r.text(),Ei:r.coordinate(),Vi:r.fixedCoordinate?.(),R:r.textColor(),G:r.backColor(),It:r.visible?.()??!0,pi:r.tickVisible?.()??!0}}class E2{constructor(t,e){this.Xt=new hx,this.Xh=t,this.Jh=e}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...bx(this.Xh)}),this.Xt}}class C2 extends Pu{constructor(t,e){super(),this.Xh=t,this.Ki=e}Yi(t,e,n){const a=bx(this.Xh);n.G=a.G,t.R=a.R;const l=2/12*this.Ki.k();n.Ti=l,n.Ri=l,n.Ei=a.Ei,n.Vi=a.Vi,t.ri=a.ri,t.It=a.It,t.pi=a.pi}}class M2 extends yx{constructor(t,e){super(t),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=e}fs(){const t=this.Zh.timeAxisViews?.()??[];if(this.Qh?.qh===t)return this.Qh.jh;const e=this.ye.Qt().Et(),n=t.map((a=>new E2(a,e)));return this.Qh={qh:t,jh:n},n}Ks(){const t=this.Zh.priceAxisViews?.()??[];if(this.ta?.qh===t)return this.ta.jh;const e=this.ye.Ft(),n=t.map((a=>new C2(a,e)));return this.ta={qh:t,jh:n},n}na(){const t=this.Zh.priceAxisPaneViews?.()??[];if(this.ia?.qh===t)return this.ia.jh;const e=t.map((n=>new F0(n)));return this.ia={qh:t,jh:e},e}ea(){const t=this.Zh.timeAxisPaneViews?.()??[];if(this.sa?.qh===t)return this.sa.jh;const e=t.map((n=>new F0(n)));return this.sa={qh:t,jh:e},e}ra(t,e){return this.Zh.autoscaleInfo?.(t,e)??null}}function Ef(r,t,e,n){r.forEach((a=>{t(a).forEach((l=>{l.Yh()===e&&n.push(l)}))}))}function Cf(r){return r.Ys()}function T2(r){return r.na()}function A2(r){return r.ea()}const R2=["Area","Line","Baseline"];class Uu extends m2{constructor(t,e,n,a,l){super(t),this.jt=wf(),this._r=new o2(this),this.ha=[],this.aa=new r2(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new p2,this.da=new Map,this.fa=null,this.Ps=n,this.pa=e;const u=new u2(this);if(this.gs=[u],this.ur=new px(u,this,t),R2.includes(this.pa)&&(this.la=new l2(this)),this.va(),this.$h=a(this,this.Qt(),l),this.pa==="Custom"){const h=this.$h;h.ma&&this.wa(h.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(t){return this.Ps.priceLineColor||t}Ve(t){const e={Be:!0},n=this.Ft();if(this.Qt().Et().Gi()||n.Gi()||this.jt.Gi())return e;const a=this.Qt().Et().Ie(),l=this.Lt();if(a===null||l===null)return e;let u,h;if(t){const m=this.jt.Ch();if(m===null)return e;u=m,h=m.js}else{const m=this.jt.$s(a.bi(),-1);if(m===null||(u=this.jt.ph(m.js),u===null))return e;h=m.js}const f=u.Wt[3],d=this.ga().gh(h,{Wt:u}),v=n.Nt(f,l.Wt);return{Be:!1,gt:f,ri:n.Ji(f,l.Wt),Ue:n.Ma(f),$e:n.ba(f,l.Wt),R:d.th,Ei:v,js:h}}ga(){return this.oa!==null||(this.oa=new y2(this)),this.oa}N(){return this.Ps}cr(t){const e=this.Qt(),{priceScaleId:n,visible:a,priceFormat:l}=t;n!==void 0&&n!==this.Ps.priceScaleId&&e.Sa(this,n),a!==void 0&&a!==this.Ps.visible&&e.xa();const u=t.conflationThresholdFactor!==void 0;bi(this.Ps,t),u&&(this.da.clear(),this.Qt().dr()),l!==void 0&&(this.va(),e.Ca()),e.ya(this),e.ka(),this.$h.kt("options")}ht(t,e){this.jt.ht(t),this.da.clear();const n=this.Qt().Et().N();n.enableConflation&&n.precomputeConflationOnInit&&this.Pa(n.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(e&&e.Ta?this.la.Pe():t.length===0&&this.la.ke());const a=this.Qt().Kn(this);this.Qt().Ra(a),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(t){const e=new v2(this,t);return this.ha.push(e),this.Qt().ya(this),e}Ia(t){const e=this.ha.indexOf(t);e!==-1&&this.ha.splice(e,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const t=this.Ba();return t===null?null:{Wt:t.Wt[3],Ea:t.wt}}Ba(){const t=this.Qt().Et().Ie();if(t===null)return null;const e=t.Aa();return this.jt.$s(e,1)}qs(){return this.jt}wa(t){this.fa=t,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(t){if(!this.La())return;const e=this.za();if(!this.da.has(e))return;const n=this.pa==="Custom",a=n&&this.fa||void 0,l=n&&this.$h.Oa?f=>{const d=f,v=this.$h.Oa(d);return Array.isArray(v)?v:[typeof v=="number"?v:0]}:void 0,u=this.ca.kr(this.jt.Dh(),t,e,a,n,l),h=wf();h.ht(u),this.da.set(e,h)}Na(){const t=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!t)return this.jt;const e=this.za(),n=this.da.get(e);return n||(this.Fa(e),this.da.get(e)??this.jt)}Wa(t){const e=this.jt.ph(t);return e===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3]}:e.Wt[3]}Ha(t){const e=[];Ef(this.ua,Cf,"top",e);const n=this.la;return n!==null&&n.It()&&(this._a===null&&n.Re()&&(this._a=setTimeout((()=>{this._a=null,this.Qt().Ua()}),0)),n.Te(),e.unshift(n)),e}Ys(){const t=[];this.$a()||t.push(this.aa),t.push(this.$h,this._r);const e=this.ha.map((n=>n.pr()));return t.push(...e),Ef(this.ua,Cf,"normal",t),t}qa(){return this.ja(Cf,"bottom")}Ya(t){return this.ja(T2,t)}Ka(t){return this.ja(A2,t)}Za(t,e){return this.ua.map((n=>n.Qn(t,e))).filter((n=>n!==null))}ds(){return[this.ur,...this.ha.map((t=>t.vr()))]}Ks(t,e){if(e!==this.hs&&!this.$a())return[];const n=[...this.gs];for(const a of this.ha)n.push(a.mr());return this.ua.forEach((a=>{n.push(...a.Ks())})),n}fs(){const t=[];return this.ua.forEach((e=>{t.push(...e.fs())})),t}ra(t,e){if(this.Ps.autoscaleInfoProvider!==void 0){const n=this.Ps.autoscaleInfoProvider((()=>{const a=this.Ga(t,e);return a===null?null:a.tr()}));return du.ir(n)}return this.Ga(t,e)}qh(){const t=this.Ps.priceFormat;return t.base??1/t.minMove}Xa(){return this.Ja}Ws(){this.$h.kt();for(const t of this.gs)t.kt();for(const t of this.ha)t.kt();this._r.kt(),this.aa.kt(),this.la?.kt(),this.ua.forEach((t=>t.Ws()))}Ft(){return mt(super.Ft())}At(t){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const e=this.jt.ph(t);return e===null?null:{gt:e.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(t)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(t){this.ua.push(new M2(t,this))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t))}rl(){if(this.pa==="Custom")return t=>this.$h.Oa(t)}hl(){if(this.pa==="Custom")return t=>this.$h.al(t)}ll(){return this.jt.Bh()}$a(){return!Iu(this.Ft().ol())}Ga(t,e){if(!ul(t)||!ul(e)||this.jt.Gi())return null;const n=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],a=this.jt.Ih(t,e,n);let l=a!==null?new $e(a.Fh,a.Wh):null,u=null;if(this.wh()==="Histogram"){const h=this.Ps.base,f=new $e(h,h);l=l!==null?l.Sn(f):f}return this.ua.forEach((h=>{const f=h.ra(t,e);if(f?.priceRange){const d=new $e(f.priceRange.minValue,f.priceRange.maxValue);l=l!==null?l.Sn(d):d}f?.margins&&(u=f.margins)})),new du(l,u)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(t){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.ga().gh(t).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const t=this.Ps.priceFormat.formatter;this.Ja={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.Ja=new t2(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new vx(this.Ps.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new Vu(t,this.Ps.priceFormat.minMove*t)}}this.hs!==null&&this.hs._l()}ja(t,e){const n=[];return Ef(this.ua,t,e,n),n}za(){const{ul:t,cl:e,dl:n}=this.fl();return this.ca.gr(t,e,n)}fl(){const t=this.Qt().Et(),e=t.ul(),n=window.devicePixelRatio||1,a=t.N().conflationThresholdFactor;return{ul:e,cl:n,dl:this.Ps.conflationThresholdFactor??a??1}}pl(t){const e=this.jt.Dh();let n;if(this.pa==="Custom"&&this.fa!==null){const l=this.rl();if(!l)throw new Error(h2);n=this.ca.Mr(e,t,this.fa,!0,(u=>l(u)))}else n=this.ca.Mr(e,t);const a=wf();return a.ht(n),a}Fa(t){const e=this.pl(t);this.da.set(t,e)}Pa(t){if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const e=this.Qt().Et().vl();for(const n of e){const a=()=>{this.ml(n)},l=typeof window=="object"&&window||typeof self=="object"&&self;l?.gl?.wl?l.gl.wl((()=>{a()}),{Ml:t}):Promise.resolve().then((()=>a()))}}ml(t){if(this.da.has(t)||this.jt.Dh().length===0)return;const e=this.pl(t);this.da.set(t,e)}}const D2=[3],N2=[0,1,2,3];class O2{constructor(t){this.Ps=t}bl(t,e,n){let a=t;if(this.Ps.mode===0)return a;const l=n.Rs(),u=l.Lt();if(u===null)return a;const h=l.Nt(t,u),f=n.Sl().filter((v=>v instanceof Uu)).reduce(((v,m)=>{if(n.Zn(m)||!m.It())return v;const y=m.Ft(),x=m.qs();if(y.Gi()||!x.Ee(e))return v;const b=x.ph(e);if(b===null)return v;const S=sr(m.Lt()),_=this.Ps.mode===3?N2:D2;return v.concat(_.map((C=>y.Nt(b.Wt[C],S.Wt))))}),[]);if(f.length===0)return a;f.sort(((v,m)=>Math.abs(v-h)-Math.abs(m-h)));const d=f[0];return a=l.Ds(d,u),a}}function Vs(r,t,e){return Math.min(Math.max(r,t),e)}function Ho(r,t,e){return t-r<=e}function Ed(r){const t=Math.ceil(r);return t%2==0?t-1:t}class k2 extends Dn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.jt===null)return;const l=Math.max(1,Math.floor(n));t.lineWidth=l,(function(u,h){u.save(),u.lineWidth%2&&u.translate(.5,.5),h(),u.restore()})(t,(()=>{const u=mt(this.jt);if(u.xl){t.strokeStyle=u.Cl,ur(t,u.yl),t.beginPath();for(const h of u.kl){const f=Math.round(h.Pl*n);t.moveTo(f,-l),t.lineTo(f,e.height+l)}t.stroke()}if(u.Tl){t.strokeStyle=u.Rl,ur(t,u.Dl),t.beginPath();for(const h of u.Il){const f=Math.round(h.Pl*a);t.moveTo(-l,f),t.lineTo(e.width+l,f)}t.stroke()}}))}}class z2{constructor(t){this.Xt=new k2,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){const t=this.yt.Qt().N().grid,e={Tl:t.horzLines.visible,xl:t.vertLines.visible,Rl:t.horzLines.color,Cl:t.vertLines.color,Dl:t.horzLines.style,yl:t.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map((n=>({Pl:n.coord})))};this.Xt.ht(e),this.xt=!1}return this.Xt}}class j2{constructor(t){this.$h=new z2(t)}pr(){return this.$h}}const Mf={Bl:4,El:1e-4};function Ps(r,t){const e=100*(r-t)/t;return t<0?-e:e}function L2(r,t){const e=Ps(r.Ze(),t),n=Ps(r.Ge(),t);return new $e(e,n)}function sl(r,t){const e=100*(r-t)/t+100;return t<0?-e:e}function B2(r,t){const e=sl(r.Ze(),t),n=sl(r.Ge(),t);return new $e(e,n)}function pu(r,t){const e=Math.abs(r);if(e<1e-15)return 0;const n=Math.log10(e+t.El)+t.Bl;return r<0?-n:n}function al(r,t){const e=Math.abs(r);if(e<1e-15)return 0;const n=Math.pow(10,e-t.Bl)-t.El;return r<0?-n:n}function qa(r,t){if(r===null)return null;const e=pu(r.Ze(),t),n=pu(r.Ge(),t);return new $e(e,n)}function Is(r,t){if(r===null)return null;const e=al(r.Ze(),t),n=al(r.Ge(),t);return new $e(e,n)}function Tf(r){if(r===null)return Mf;const t=Math.abs(r.Ge()-r.Ze());if(t>=1||t<1e-15)return Mf;const e=Math.ceil(Math.abs(Math.log10(t))),n=Mf.Bl+e;return{Bl:n,El:1/Math.pow(10,n)}}class Af{constructor(t,e){if(this.Al=t,this.Ll=e,(function(n){if(n<0)return!1;if(n>1e18)return!0;for(let a=n;a>1;a/=10)if(a%10!=0)return!1;return!0})(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let n=this.Al;n!==1;){if(n%2==0)this.zl.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),n/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(t,e,n){const a=this.Al===0?0:1/this.Al;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),u=0,h=this.Ll[0];for(;;){const m=Ho(l,a,1e-14)&&l>a+1e-14,y=Ho(l,n*h,1e-14),x=Ho(l,1,1e-14);if(!(m&&y&&x))break;l/=h,h=this.Ll[++u%this.Ll.length]}if(l<=a+1e-14&&(l=a),l=Math.max(1,l),this.zl.length>0&&(f=l,d=1,v=1e-14,Math.abs(f-d)<v))for(u=0,h=this.zl[0];Ho(l,n*h,1e-14)&&l>a+1e-14;)l/=h,h=this.zl[++u%this.zl.length];var f,d,v;return l}}class P0{constructor(t,e,n,a){this.Nl=[],this.Ki=t,this.Al=e,this.Fl=n,this.Wl=a}Ol(t,e){if(t<e)throw new Error("high < low");const n=this.Ki.$t(),a=(t-e)*this.Hl()/n,l=new Af(this.Al,[2,2.5,2]),u=new Af(this.Al,[2,2,2.5]),h=new Af(this.Al,[2.5,2,2]),f=[];return f.push(l.Ol(t,e,a),u.Ol(t,e,a),h.Ol(t,e,a)),(function(d){if(d.length<1)throw Error("array is empty");let v=d[0];for(let m=1;m<d.length;++m)d[m]<v&&(v=d[m]);return v})(f)}Ul(){const t=this.Ki,e=t.Lt();if(e===null)return void(this.Nl=[]);const n=t.$t(),a=this.Fl(n-1,e),l=this.Fl(0,e),u=this.Ki.N().entireTextOnly?this.$l()/2:0,h=u,f=n-1-u,d=Math.max(a,l),v=Math.min(a,l);if(d===v)return void(this.Nl=[]);const m=this.Ol(d,v);if(this.ql(e,m,d,v,h,f),t.jl()&&this.Yl(m,v,d)){const b=this.Ki.Kl();this.Zl(e,m,h,f,b,2*b)}const y=this.Nl.map((b=>b.Gl)),x=this.Ki.Xl(y);for(let b=0;b<this.Nl.length;b++)this.Nl[b].Jl=x[b]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(t,e,n,a,l,u){const h=this.Nl,f=this.Ki;let d=n%e;d+=d<0?e:0;const v=n>=a?1:-1;let m=null,y=0;for(let x=n-d;x>a;x-=e){const b=this.Wl(x,t,!0);m!==null&&Math.abs(b-m)<this.Hl()||b<l||b>u||(y<h.length?(h[y].Pl=b,h[y].Jl=f.Ql(x),h[y].Gl=x):h.push({Pl:b,Jl:f.Ql(x),Gl:x}),y++,m=b,f.io()&&(e=this.Ol(x*v,a)))}h.length=y}Zl(t,e,n,a,l,u){const h=this.Nl,f=this.so(t,n,l,u),d=this.so(t,a,-u,-l),v=this.Wl(0,t,!0)-this.Wl(e,t,!0);h.length>0&&h[0].Pl-f.Pl<v/2&&h.shift(),h.length>0&&d.Pl-h[h.length-1].Pl<v/2&&h.pop(),h.unshift(f),h.push(d)}so(t,e,n,a){const l=(n+a)/2,u=this.Fl(e+n,t),h=this.Fl(e+a,t),f=Math.min(u,h),d=Math.max(u,h),v=Math.max(.1,this.Ol(d,f)),m=this.Fl(e+l,t),y=m-m%v,x=this.Wl(y,t,!0);return{Jl:this.Ki.Ql(y),Pl:x,Gl:y}}Yl(t,e,n){let a=sr(this.Ki.er());return this.Ki.io()&&(a=Is(a,this.Ki.no())),a.Ze()-e<t&&n-a.Ge()<t}}function xx(r){return r.slice().sort(((t,e)=>mt(t._s())-mt(e._s())))}var I0;(function(r){r[r.Normal=0]="Normal",r[r.Logarithmic=1]="Logarithmic",r[r.Percentage=2]="Percentage",r[r.IndexedTo100=3]="IndexedTo100"})(I0||(I0={}));const V0=new vx,U0=new Vu(100,1);class F2{constructor(t,e,n,a,l){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new we,this.fo=new we,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=U0,this.So=Tf(null),this.xo=t,this.Ps=e,this.Co=n,this.yo=a,this.ko=l,this.Po=new P0(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(t){if(bi(this.Ps,t),this._l(),t.mode!==void 0&&this.Do({ae:t.mode}),t.scaleMargins!==void 0){const e=ci(t.scaleMargins.top),n=ci(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(e+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+n}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(t){const e=this.ae();let n=null;t.ln!==void 0&&(this.Ps.autoScale=t.ln),t.ae!==void 0&&(this.Ps.mode=t.ae,t.ae!==2&&t.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),e.ae===1&&t.ae!==e.ae&&((function(l,u){if(l===null)return!1;const h=al(l.Ze(),u),f=al(l.Ge(),u);return isFinite(h)&&isFinite(f)})(this.sr,this.So)?(n=Is(this.sr,this.So),n!==null&&this.Lo(n)):this.Ps.autoScale=!0),t.ae===1&&t.ae!==e.ae&&(n=qa(this.sr,this.So),n!==null&&this.Lo(n));const a=e.ae!==this.Ps.mode;a&&(e.ae===2||this.He())&&this._l(),a&&(e.ae===3||this.Eo())&&this._l(),t.Ao!==void 0&&e.Ao!==t.Ao&&(this.Ps.invertScale=t.Ao,this.zo()),this.fo.p(e,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(t){this.eo!==t&&(this.eo=t,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const t=this.$t()-this.Wo()-this.Ho();return this.ro=t,t}er(){return this.Uo(),this.sr}Lo(t,e){const n=this.sr;(e||n===null&&t!==null||n!==null&&!n.Ye(t))&&(this.wo=null,this.sr=t)}$o(t){this.Lo(t),this.qo(t!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(t){return this.Ao()?t:this.$t()-1-t}Nt(t,e){return this.He()?t=Ps(t,e):this.Eo()&&(t=sl(t,e)),this.Ro(t,e)}Yo(t,e,n){this.Uo();const a=this.Ho(),l=mt(this.er()),u=l.Ze(),h=l.Ge(),f=this.Fo()-1,d=this.Ao(),v=f/(h-u),m=n===void 0?0:n.from,y=n===void 0?t.length:n.to,x=this.Ko();for(let b=m;b<y;b++){const S=t[b],_=S.gt;if(isNaN(_))continue;let C=_;x!==null&&(C=x(S.gt,e));const A=a+v*(C-u),T=d?A:this.eo-1-A;S.ut=T}}Zo(t,e,n){this.Uo();const a=this.Ho(),l=mt(this.er()),u=l.Ze(),h=l.Ge(),f=this.Fo()-1,d=this.Ao(),v=f/(h-u),m=n===void 0?0:n.from,y=n===void 0?t.length:n.to,x=this.Ko();for(let b=m;b<y;b++){const S=t[b];let _=S.Hr,C=S.Ur,A=S.$r,T=S.qr;x!==null&&(_=x(S.Hr,e),C=x(S.Ur,e),A=x(S.$r,e),T=x(S.qr,e));let D=a+v*(_-u),M=d?D:this.eo-1-D;S.Go=M,D=a+v*(C-u),M=d?D:this.eo-1-D,S.Xo=M,D=a+v*(A-u),M=d?D:this.eo-1-D,S.Jo=M,D=a+v*(T-u),M=d?D:this.eo-1-D,S.Qo=M}}Ds(t,e){const n=this.To(t,e);return this.t_(n,e)}t_(t,e){let n=t;return this.He()?n=(function(a,l){return l<0&&(a=-a),a/100*l+l})(n,e):this.Eo()&&(n=(function(a,l){return a-=100,l<0&&(a=-a),a/100*l+l})(n,e)),n}Sl(){return this.po}Dt(){return this.mo||(this.mo=xx(this.po)),this.mo}i_(t){this.po.indexOf(t)===-1&&(this.po.push(t),this._l(),this.s_())}n_(t){const e=this.po.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.po.splice(e,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let t=null;for(const e of this.po){const n=e.Lt();n!==null&&(t===null||n.Ea<t.Ea)&&(t=n)}return t===null?null:t.Wt}Ao(){return this.Ps.invertScale}Vl(){const t=this.Lt()===null;if(this.wo!==null&&(t||this.wo.e_===t))return this.wo.Vl;this.Po.Ul();const e=this.Po.Vl();return this.wo={Vl:e,e_:t},this.do.p(),e}r_(){return this.do}h_(t){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-t,this.ho=mt(this.er()).Ke()))}a_(t){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(t=this.eo-t)<0&&(t=0);let e=(this.Mo+.2*(this.eo-1))/(t+.2*(this.eo-1));const n=mt(this.ho).Ke();e=Math.max(e,.1),n.Je(e),this.Lo(n)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(t){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=t,this.ho=mt(this.er()).Ke()))}__(t){if(this.Vo()||this.bo===null)return;const e=mt(this.er()).Xe()/(this.Fo()-1);let n=t-this.bo;this.Ao()&&(n*=-1);const a=n*e,l=mt(this.ho).Ke();l.Qe(a),this.Lo(l,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(t,e){switch(this.Ps.mode){case 2:return this.c_(Ps(t,e));case 3:return this.Xa().format(sl(t,e));default:return this.lr(t)}}Ql(t){switch(this.Ps.mode){case 2:return this.c_(t);case 3:return this.Xa().format(t);default:return this.lr(t)}}Xl(t){switch(this.Ps.mode){case 2:return this.d_(t);case 3:return this.Xa().formatTickmarks(t);default:return this.f_(t)}}Ma(t){return this.lr(t,mt(this.vo).Xa())}ba(t,e){return t=Ps(t,e),this.c_(t,V0)}p_(){return this.po}v_(t){this.ao={oo:t,lo:!1}}Ws(){this.po.forEach((t=>t.Ws()))}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let t=1/0;this.vo=null;for(const n of this.po)n._s()<t&&(t=n._s(),this.vo=n);let e=100;this.vo!==null&&(e=Math.round(this.vo.qh())),this.Ja=U0,this.He()?(this.Ja=V0,e=100):this.Eo()?(this.Ja=new Vu(100,1),e=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new P0(this,e,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(t){this._o=t}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(t,e){if(this.Uo(),this.Gi())return 0;t=this.io()&&t?pu(t,this.So):t;const n=mt(this.er()),a=this.Ho()+(this.Fo()-1)*(t-n.Ze())/n.Xe();return this.jo(a)}To(t,e){if(this.Uo(),this.Gi())return 0;const n=this.jo(t),a=mt(this.er()),l=a.Ze()+a.Xe()*((n-this.Ho())/(this.Fo()-1));return this.io()?al(l,this.So):l}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const t=this.ao.oo;if(t===null)return;let e=null;const n=this.p_();let a=0,l=0;for(const f of n){if(!f.It())continue;const d=f.Lt();if(d===null)continue;const v=f.ra(t.Aa(),t.bi());let m=v&&v.er();if(m!==null){switch(this.Ps.mode){case 1:m=qa(m,this.So);break;case 2:m=L2(m,d.Wt);break;case 3:m=B2(m,d.Wt)}if(e=e===null?m:e.Sn(mt(m)),v!==null){const y=v.rr();y!==null&&(a=Math.max(a,y.above),l=Math.max(l,y.below))}}}if(this.jl()&&(a=Math.max(a,this.Kl()),l=Math.max(l,this.Kl())),a===this.uo&&l===this.co||(this.uo=a,this.co=l,this.wo=null,this.Io()),e!==null){if(e.Ze()===e.Ge()){const f=5*this.m_();this.io()&&(e=Is(e,this.So)),e=new $e(e.Ze()-f,e.Ge()+f),this.io()&&(e=qa(e,this.So))}if(this.io()){const f=Is(e,this.So),d=Tf(f);if(u=d,h=this.So,u.Bl!==h.Bl||u.El!==h.El){const v=this.ho!==null?Is(this.ho,this.So):null;this.So=d,e=qa(f,d),v!==null&&(this.ho=qa(v,d))}}this.Lo(e)}else this.sr===null&&(this.Lo(new $e(-.5,.5)),this.So=Tf(null));var u,h}Ko(){return this.He()?Ps:this.Eo()?sl:this.io()?t=>pu(t,this.So):null}g_(t,e,n){return e===void 0?(n===void 0&&(n=this.Xa()),n.format(t)):e(t)}M_(t,e,n){return e===void 0?(n===void 0&&(n=this.Xa()),n.formatTickmarks(t)):e(t)}lr(t,e){return this.g_(t,this.yo.priceFormatter,e)}f_(t,e){const n=this.yo.priceFormatter;return this.M_(t,this.yo.tickmarksPriceFormatter??(n?a=>a.map(n):void 0),e)}c_(t,e){return this.g_(t,this.yo.percentageFormatter,e)}d_(t,e){const n=this.yo.percentageFormatter;return this.M_(t,this.yo.tickmarksPercentageFormatter??(n?a=>a.map(n):void 0),e)}}function H0(r){return r instanceof Uu}class Y0{constructor(t,e){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new we,this.ua=[],this.Jh=t,this.ns=e,this.k_=new j2(this);const n=e.N();this.P_=this.T_("left",n.leftPriceScale),this.R_=this.T_("right",n.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(n)}I_(t){if(t.leftPriceScale&&this.P_.cr(t.leftPriceScale),t.rightPriceScale&&this.R_.cr(t.rightPriceScale),t.localization&&(this.P_._l(),this.R_._l()),t.overlayPriceScales){const e=Array.from(this.b_.values());for(const n of e){const a=mt(n[0].Ft());a.cr(t.overlayPriceScales),t.localization&&a._l()}}}V_(t){switch(t){case"left":return this.P_;case"right":return this.R_}return this.b_.has(t)?ci(this.b_.get(t))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach((t=>{t.m&&t.m()})),this.ua=this.ua.filter((t=>{const e=t.Gh();return e.detached&&e.detached(),!1})),this.y_.p()}E_(){return this.x_}A_(t){this.x_=t}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(t){this.S_=t,this.z_()}No(t){this.eo=t,this.P_.No(t),this.R_.No(t),this.po.forEach((e=>{if(this.Zn(e)){const n=e.Ft();n!==null&&n.No(t)}})),this.z_()}O_(t){this.C_=t}N_(){return this.C_}F_(){return this.po.filter(H0)}Sl(){return this.po}Zn(t){const e=t.Ft();return e===null||this.P_!==e&&this.R_!==e}i_(t,e,n){this.W_(t,e,n?t._s():this.po.length)}n_(t,e){const n=this.po.indexOf(t);Ve(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1),e||this.po.forEach(((u,h)=>u.us(h)));const a=mt(t.Ft()).ol();if(this.b_.has(a)){const u=ci(this.b_.get(a)),h=u.indexOf(t);h!==-1&&(u.splice(h,1),u.length===0&&this.b_.delete(a))}const l=t.Ft();l&&l.Sl().indexOf(t)>=0&&(l.n_(t),this.H_(l)),this.mo=null}Xn(t){return t===this.P_?"left":t===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(t,e){t.h_(e)}Y_(t,e){t.a_(e),this.z_()}K_(t){t.l_()}Z_(t,e){t.o_(e)}G_(t,e){t.__(e),this.z_()}X_(t){t.u_()}z_(){this.po.forEach((t=>{t.Ws()}))}Rs(){let t=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?t=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?t=this.P_:this.po.length!==0&&(t=this.po[0].Ft()),t===null&&(t=this.R_),t}Gn(){let t=null;return this.ns.N().rightPriceScale.visible?t=this.R_:this.ns.N().leftPriceScale.visible&&(t=this.P_),t}H_(t){t!==null&&t.Vo()&&this.J_(t)}Q_(t){const e=this.Jh.Ie();t.Do({ln:!0}),e!==null&&t.v_(e),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach((t=>{this.Zn(t)&&this.H_(t.Ft())})),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=xx(this.po)),this.mo}su(t,e){e=Vs(e,0,this.po.length-1);const n=this.po.indexOf(t);Ve(n!==-1,"setSeriesOrder: invalid data source"),this.po.splice(n,1),this.po.splice(e,0,t),this.po.forEach(((a,l)=>a.us(l))),this.mo=null;for(const a of[this.P_,this.R_])a.s_(),a._l();this.ns.dr()}Vt(){return this.Dt().filter(H0)}nu(){return this.y_}eu(){return this.k_}nl(t){this.ua.push(new _2(t))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t)),t.detached&&t.detached(),this.ns.dr()}ru(){return this.ua}Za(t,e){return this.ua.map((n=>n.Qn(t,e))).filter((n=>n!==null))}J_(t){const e=t.p_();if(e&&e.length>0&&!this.Jh.Gi()){const n=this.Jh.Ie();n!==null&&t.v_(n)}t.Ws()}W_(t,e,n){let a=this.V_(e);if(a===null&&(a=this.T_(e,this.ns.N().overlayPriceScales)),this.po.splice(n,0,t),!Iu(e)){const l=this.b_.get(e)||[];l.push(t),this.b_.set(e,l)}t.us(n),a.i_(t),t.cs(a),this.H_(a),this.mo=null}D_(t,e,n){e.ae!==n.ae&&this.J_(t)}T_(t,e){const n={visible:!0,autoScale:!0,...wn(e)},a=new F2(t,n,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return a.No(this.$t()),a}}function Yo(r){return{hu:r.hu,au:{te:r.lu.externalId},ou:r.lu.cursorStyle}}function P2(r,t,e,n){for(const a of r){const l=a.Tt(n);if(l!==null&&l.Qn){const u=l.Qn(t,e);if(u!==null)return{_u:a,au:u}}}return null}function I2(r){return r.Ys!==void 0}function Sx(r,t,e){const n=[r,...r.Dt()],a=(function(l,u,h){let f,d;for(const y of l){const x=y.Za?.(u,h)??[];for(const b of x)v=b.zOrder,m=f?.zOrder,(!m||v==="top"&&m!=="top"||v==="normal"&&m==="bottom")&&(f=b,d=y)}var v,m;return f&&d?{lu:f,hu:d}:null})(n,t,e);if(a?.lu.zOrder==="top")return Yo(a);for(const l of n){if(a&&a.hu===l&&a.lu.zOrder!=="bottom"&&!a.lu.isBackground)return Yo(a);if(I2(l)){const u=P2(l.Ys(r),t,e,r);if(u!==null)return{hu:l,_u:u._u,au:u.au}}if(a&&a.hu===l&&a.lu.zOrder!=="bottom"&&a.lu.isBackground)return Yo(a)}return a?.lu?Yo(a):null}class V2{constructor(t,e,n=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=t,this.cu=e,this.zn=n}du(t){const e=t.time,n=this.cu.cacheKey(e),a=this.Ln.get(n);if(a!==void 0)return a.fu;if(this.Vn===this.zn){const u=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(ci(u)),this.En++,this.Vn--}const l=this.uu(t);return this.Ln.set(n,{fu:l,Wn:this.Bn}),this.An.set(this.Bn,n),this.Vn++,this.Bn++,l}}class Us{constructor(t,e){Ve(t<=e,"right should be >= left"),this.pu=t,this.vu=e}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(t){return this.pu<=t&&t<=this.vu}Ye(t){return this.pu===t.Aa()&&this.vu===t.bi()}}function W0(r,t){return r===null||t===null?r===t:r.Ye(t)}class U2{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(t){this.gu=t,this.Ln=null}bu(t,e){this.Su(e),this.Ln=null;for(let n=e;n<t.length;++n){const a=t[n];let l=this.wu.get(a.timeWeight);l===void 0&&(l=[],this.wu.set(a.timeWeight,l)),l.push({index:n,time:a.time,weight:a.timeWeight,originalTime:a.originalTime})}}xu(t,e,n,a,l){const u=Math.ceil(e/t);return this.Ln!==null&&this.Ln.Cu===u&&l===this.Ln.yu&&n===this.Ln.ku||(this.Ln={yu:l,ku:n,Vl:this.Pu(u,n,a),Cu:u}),this.Ln.Vl}Su(t){if(t===0)return void this.wu.clear();const e=[];this.wu.forEach(((n,a)=>{t<=n[0].index?e.push(a):n.splice(qs(n,t,(l=>l.index<t)),1/0)}));for(const n of e)this.wu.delete(n)}Pu(t,e,n){let a=[];const l=u=>!e||n.has(u.index);for(const u of Array.from(this.wu.keys()).sort(((h,f)=>f-h))){if(!this.wu.get(u))continue;const h=a;a=[];const f=h.length;let d=0;const v=ci(this.wu.get(u)),m=v.length;let y=1/0,x=-1/0;for(let b=0;b<m;b++){const S=v[b],_=S.index;for(;d<f;){const C=h[d],A=C.index;if(!(A<_&&l(C))){y=A;break}d++,a.push(C),x=A,y=1/0}if(y-_>=t&&_-x>=t&&l(S))a.push(S),x=_;else if(this.gu)return h}for(;d<f;d++)l(h[d])&&a.push(h[d])}return a}}class Hs{constructor(t){this.Tu=t}Ru(){return this.Tu===null?null:new Us(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new Hs(null)}}function H2(r,t){return r.weight>t.weight?r:t}class Y2{constructor(t,e,n,a){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new U2,this.Au=new Map,this.Lu=Hs.Iu(),this.zu=!0,this.Ou=new we,this.Nu=new we,this.Fu=new we,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=e,this.yo=n,this.Yu=e.rightOffset,this.Ku=e.barSpacing,this.ns=t,this.Zu(e),this.cu=a,this.Gu(),this.Eu.Mu(e.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(t){bi(this.yo,t),this.tc(),this.Gu()}cr(t,e){bi(this.Ps,t),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),t.barSpacing!==void 0&&this.ns.gn(t.barSpacing),t.rightOffset!==void 0&&this.ns.Mn(t.rightOffset),this.Zu(t),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ns.gn(t.barSpacing??this.Ku),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),t.enableConflation===void 0&&t.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(t){return this.Bu[t]?.time??null}es(t){return this.Bu[t]??null}ec(t,e){if(this.Bu.length<1)return null;if(this.cu.key(t)>this.cu.key(this.Bu[this.Bu.length-1].time))return e?this.Bu.length-1:null;const n=qs(this.Bu,this.cu.key(t),((a,l)=>this.cu.key(a.time)<l));return this.cu.key(t)<this.cu.key(this.Bu[n].time)?e?n:null:n}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const t=this.Ie();if(t===null)return null;const e={from:t.Aa(),to:t.bi()};return this.oc(e)}oc(t){const e=Math.round(t.from),n=Math.round(t.to),a=mt(this._c()),l=mt(this.uc());return{from:mt(this.es(Math.max(a,e))),to:mt(this.es(Math.min(l,n)))}}cc(t){return{from:mt(this.ec(t.from,!0)),to:mt(this.ec(t.to,!0))}}ss(){return this.S_}L_(t){if(!isFinite(t)||t<=0||this.S_===t)return;const e=this.ac(),n=this.S_;if(this.S_=t,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&n!==0){const a=this.Ku*t/n;this.Ku=a}if(this.Ps.fixLeftEdge&&e!==null&&e.Aa()<=0){const a=n-t;this.Yu-=Math.round(a/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(t){if(this.Gi()||!ul(t))return 0;const e=this.vc()+this.Yu-t;return this.S_-(e+.5)*this.Ku-1}mc(t,e){const n=this.vc(),a=e===void 0?0:e.from,l=e===void 0?t.length:e.to;for(let u=a;u<l;u++){const h=t[u].wt,f=n+this.Yu-h,d=this.S_-(f+.5)*this.Ku-1;t[u]._t=d}}wc(t,e){const n=Math.ceil(this.gc(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(n)?this.bc(n):n}Mn(t){this.zu=!0,this.Yu=t,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(t){const e=this.Ku;if(this.xc(t),this.Ps.rightOffsetPixels!==void 0&&e!==0){const n=this.Yu*e/this.Ku;this.Yu=n}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const t=this.Ku,e=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),n=Math.round(e/t),a=mt(this.Ie()),l=Math.max(a.Aa(),a.Aa()-n),u=Math.max(a.bi(),a.bi()-n),h=this.Eu.xu(t,e,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),f=this._c()+n,d=this.uc()-n,v=this.yc(),m=this.Ps.fixLeftEdge||v,y=this.Ps.fixRightEdge||v;let x=0;for(const b of h){if(!(l<=b.index&&b.index<=u))continue;let S;x<this.qu.length?(S=this.qu[x],S.coord=this.qt(b.index),S.label=this.kc(b),S.weight=b.weight):(S={needAlignCoordinate:!1,coord:this.qt(b.index),label:this.kc(b),weight:b.weight},this.qu.push(S)),this.Ku>e/2&&!v?S.needAlignCoordinate=!1:S.needAlignCoordinate=m&&b.index<=f||y&&b.index>=d,x++}return this.qu.length=x,this.Hu=this.qu,this.qu}Pc(){let t;this.zu=!0,this.gn(this.Ps.barSpacing),t=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(t)}Tc(t){this.zu=!0,this.Vu=t,this.fc(),this.sc()}Rc(t,e){const n=this.gc(t),a=this.ul(),l=a+e*(a/10);this.gn(l),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(n-this.gc(t)))}h_(t){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=t,this.Dc()))}a_(t){if(this.Wu===null)return;const e=Vs(this.S_-t,0,this.S_),n=Vs(this.S_-mt(this.Mo),0,this.S_);e!==0&&n!==0&&this.gn(this.Wu.ul*e/n)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(t){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=t,this.Dc()))}__(t){if(this.bo===null)return;const e=(this.bo-t)/this.ul();this.Yu=mt(this.Wu).Cc+e,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.Yu,a=performance.now();this.ns.vn({Ec:l=>(l-a)/e>=1,Ac:l=>{const u=(l-a)/e;return u>=1?t:n+(t-n)*u}})}kt(t,e){this.zu=!0,this.Bu=t,this.Eu.bu(t,e),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(t,e){const n=t.mu(),a=e&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-a)/n),this.Yu=t.bi()-this.vc(),e&&(this.Yu=a?a/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const t=this._c(),e=this.uc();if(t===null||e===null)return;const n=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new Us(t,e+n),!0)}Wc(t){const e=new Us(t.from,t.to);this.Nc(e)}rs(t){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(t.originalTime):this.cu.formatHorzItem(t.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const t=this.ns.tn();for(const e of t)for(const n of e.ll())this.Uu.set(n,!0);this.$u++}Hc(){return this.ju}vl(){const t=1/(window.devicePixelRatio||1),e=this.Ps.minBarSpacing;if(e>=t)return[1];const n=[1];let a=2;for(;a<=512;)e<t/a&&n.push(a),a*=2;return n}yc(){const t=this.ns.N().handleScroll,e=this.ns.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(t){return(this.S_-1-t)/this.Ku}gc(t){const e=this.Uc(t),n=this.vc()+this.Yu-e;return Math.round(1e6*n)/1e6}xc(t){const e=this.Ku;this.Ku=t,this.dc(),e!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(Hs.Iu());const t=this.vc(),e=this.S_/this.Ku,n=this.Yu+t,a=new Us(n-e+1,n);this.qc(new Hs(a))}dc(){const t=Vs(this.Ku,this.jc(),this.Yc());this.Ku!==t&&(this.Ku=t,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const t=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=t)return void(this.ju=1);const e=t/this.Ku,n=Math.pow(2,Math.floor(Math.log2(e)));this.ju=Math.min(n,512)}fc(){const t=this.Kc();t!==null&&this.Yu<t&&(this.Yu=t,this.zu=!0);const e=this.Zc();this.Yu>e&&(this.Yu=e,this.zu=!0)}Kc(){const t=this._c(),e=this.Vu;return t===null||e===null?null:t-e-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(t){let e=this.Au.get(t.weight);return e===void 0&&(e=new V2((n=>this.Gc(n)),this.cu),this.Au.set(t.weight,e)),e.du(t)}Gc(t){return this.cu.formatTickmark(t,this.yo)}qc(t){const e=this.Lu;this.Lu=t,W0(e.Ru(),this.Lu.Ru())||this.Ou.p(),W0(e.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const t=this._c();if(t===null)return;const e=this.Ie();if(e===null)return;const n=e.Aa()-t;if(n<0){const a=this.Yu-n-1;this.Mn(a)}this.dc()}nc(){this.fc(),this.dc()}Mc(t){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(t)||!1}bc(t){const e=(function*(a){const l=Math.round(a),u=l<a;let h=1;for(;;)u?(yield l+h,yield l-h):(yield l-h,yield l+h),h++})(t),n=this.uc();for(;n;){const a=e.next().value;if(this.Uu.get(a))return a;if(a<0||a>n)break}return t}Zu(t){if(t.rightOffsetPixels!==void 0){const e=t.rightOffsetPixels/(t.barSpacing||this.Ku);this.ns.Mn(e)}}}var q0,X0,G0,K0,Q0;(function(r){r[r.OnTouchEnd=0]="OnTouchEnd",r[r.OnNextTap=1]="OnNextTap"})(q0||(q0={}));class W2{constructor(t,e,n){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new we,this.nd=new we,this.ed=null,this.rd=t,this.Ps=e,this.cu=n,this.ko=new UM(this.Ps.layout.colorParsers),this.hd=new VM(this),this.Jh=new Y2(this,e.timeScale,this.Ps.localization,n),this.Ct=new JM(this,e.crosshair),this.ad=new O2(e.crosshair),e.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ie.yn())}dr(){this.dd(Ie.Cn())}Ua(){this.dd(new Ie(1))}ya(t){const e=this.fd(t);this.dd(e)}pd(){return this.td}vd(t){if(this.td?.hu===t?.hu&&this.td?.au?.te===t?.au?.te)return;const e=this.td;this.td=t,e!==null&&this.ya(e.hu),t!==null&&t.hu!==e?.hu&&this.ya(t.hu)}N(){return this.Ps}cr(t){bi(this.Ps,t),this.Xc.forEach((e=>e.I_(t))),t.timeScale!==void 0&&this.Jh.cr(t.timeScale),t.localization!==void 0&&this.Jh.Qu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(t,e,n=0){const a=this.Xc[n];if(a===void 0)return;if(t==="left")return bi(this.Ps,{leftPriceScale:e}),a.I_({leftPriceScale:e}),this.sd.p(),void this.Ca();if(t==="right")return bi(this.Ps,{rightPriceScale:e}),a.I_({rightPriceScale:e}),this.sd.p(),void this.Ca();const l=this.wd(t,n);l!==null&&(l.Ft.cr(e),this.sd.p())}wd(t,e){const n=this.Xc[e];if(n===void 0)return null;const a=n.V_(t);return a!==null?{Gs:n,Ft:a}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(t,e){t.No(e),this.Sc()}L_(t){this.S_=t,this.Jh.L_(this.S_),this.Xc.forEach((e=>e.L_(t))),this.Sc()}Sd(t){this.Xc.length!==1&&(Ve(t>=0&&t<this.Xc.length,"Invalid pane index"),this.Xc.splice(t,1),this.Ca())}xd(t,e){if(this.Xc.length<2)return;Ve(t>=0&&t<this.Xc.length,"Invalid pane index");const n=this.Xc[t],a=this.Xc.reduce(((m,y)=>m+y.E_()),0),l=this.Xc.reduce(((m,y)=>m+y.$t()),0),u=l-30*(this.Xc.length-1);e=Math.min(u,Math.max(30,e));const h=a/l,f=n.$t();n.A_(e*h);let d=e-f,v=this.Xc.length-1;for(const m of this.Xc)if(m!==n){const y=Math.min(u,Math.max(30,m.$t()-d/v));d-=m.$t()-y,v-=1;const x=y*h;m.A_(x)}this.Ca()}Cd(t,e){Ve(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index");const n=this.Xc[t],a=this.Xc[e];this.Xc[t]=a,this.Xc[e]=n,this.Ca()}yd(t,e){if(Ve(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index"),t===e)return;const[n]=this.Xc.splice(t,1);this.Xc.splice(e,0,n),this.Ca()}j_(t,e,n){t.j_(e,n)}Y_(t,e,n){t.Y_(e,n),this.ka(),this.dd(this.kd(t,2))}K_(t,e){t.K_(e),this.dd(this.kd(t,2))}Z_(t,e,n){e.Vo()||t.Z_(e,n)}G_(t,e,n){e.Vo()||(t.G_(e,n),this.ka(),this.dd(this.kd(t,2)))}X_(t,e){e.Vo()||(t.X_(e),this.dd(this.kd(t,2)))}Q_(t,e){t.Q_(e),this.dd(this.kd(t,2))}Pd(t){this.Jh.h_(t)}Td(t,e){const n=this.Et();if(n.Gi()||e===0)return;const a=n.ss();t=Math.max(1,Math.min(t,a)),n.Rc(t,e),this.Sc()}Rd(t){this.Dd(0),this.Id(t),this.Vd()}Bd(t){this.Jh.a_(t),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(t){this.Jh.o_(t)}Id(t){this.Jh.__(t),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter((t=>t.It()))),this.Qc}xa(){this.Qc=null}Ad(t,e,n,a,l){this.Ct.Bs(t,e);let u=NaN,h=this.Jh.wc(t,!0);const f=this.Jh.Ie();f!==null&&(h=Math.min(Math.max(f.Aa(),h),f.bi())),h=this.Ct.Hs(h);const d=a.Rs(),v=d.Lt();if(v!==null&&(u=d.Ds(e,v)),u=this.ad.bl(u,h,a),this.Ct.zs(h,u,a),this.Ua(),!l){const m=Sx(a,t,e);this.vd(m&&{hu:m.hu,au:m.au,ou:m.ou||null}),this.nd.p(this.Ct.Bt(),{x:t,y:e},n)}}Ld(t,e,n){const a=n.Rs(),l=a.Lt(),u=a.Nt(t,mt(l)),h=this.Jh.ec(e,!0),f=this.Jh.qt(mt(h));this.Ad(f,u,null,n,!0)}zd(t){this.gd().Ns(),this.Ua(),t||this.nd.p(null,null,null)}ka(){const t=this.Ct.Gs();if(t!==null){const e=this.Ct.As(),n=this.Ct.Ls();this.Ad(e,n,null,t)}this.Ct.Ws()}Od(t,e,n){const a=this.Jh.Is(0);e!==void 0&&n!==void 0&&this.Jh.kt(e,n);const l=this.Jh.Is(0),u=this.Jh.vc(),h=this.Jh.Ie();if(h!==null&&a!==null&&l!==null){const f=h.Ee(u),d=this.cu.key(a)>this.cu.key(l),v=t!==null&&t>u&&!d,m=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,y=f&&(n!==void 0||m)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(v&&!y){const x=t-u;this.Jh.Mn(this.Jh.Cc()-x)}}this.Jh.Tc(t)}Ra(t){t!==null&&t.iu()}Kn(t){if((function(n){return n instanceof Y0})(t))return t;const e=this.Xc.find((n=>n.Dt().includes(t)));return e===void 0?null:e}Sc(){this.Xc.forEach((t=>t.iu())),this.ka()}m(){this.Xc.forEach((t=>t.m())),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(t,e){const n=this.ld(e);this.Wd(t,n),this.Jc.push(t),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(t){const e=this.Kn(t),n=this.Jc.indexOf(t);Ve(n!==-1,"Series not found");const a=mt(e);this.Jc.splice(n,1),a.n_(t),t.m&&t.m(),this.xa(),this.Jh.Ju(),this.Ud(a)}Sa(t,e){const n=mt(this.Kn(t));n.n_(t,!0),n.i_(t,e,!0)}Fc(){const t=Ie.Cn();t.cn(),this.dd(t)}$d(t){const e=Ie.Cn();e.pn(t),this.dd(e)}wn(){const t=Ie.Cn();t.wn(),this.dd(t)}gn(t){const e=Ie.Cn();e.gn(t),this.dd(e)}Mn(t){const e=Ie.Cn();e.Mn(t),this.dd(e)}vn(t){const e=Ie.Cn();e.vn(t),this.dd(e)}dn(){const t=Ie.Cn();t.dn(),this.dd(t)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(t,e){if(Ve(e>=0,"Index should be greater or equal to 0"),e===this.Yd(t))return;const n=mt(this.Kn(t));n.n_(t);const a=this.ld(e);this.Wd(t,a),n.Sl().length===0&&this.Ud(n),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(t){const e=this.ud,n=this.od;if(e===n)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.ed===null||this.ed.eh!==n||this.ed.rh!==e)this.ed={eh:n,rh:e,Zd:new Map};else{const l=this.ed.Zd.get(t);if(l!==void 0)return l}const a=this.ko.tt(n,e,t/100);return this.ed.Zd.set(t,a),a}Gd(t){return this.Xc.indexOf(t)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(t){const e=new Y0(this.Jh,this);this.Xc.push(e);const n=t??this.Xc.length-1,a=Ie.yn();return a.hn(n,{an:0,ln:!0}),this.dd(a),e}ld(t){return Ve(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.Xc.length,t))<this.Xc.length?this.Xc[t]:this.Jd(t)}Yd(t){return this.Xc.findIndex((e=>e.F_().includes(t)))}kd(t,e){const n=new Ie(e);if(t!==null){const a=this.Xc.indexOf(t);n.hn(a,{an:e})}return n}fd(t,e){return e===void 0&&(e=2),this.kd(this.Kn(t),e)}dd(t){this.rd&&this.rd(t),this.Xc.forEach((e=>e.eu().pr().kt()))}Wd(t,e){const n=t.N().priceScaleId,a=n!==void 0?n:this.qd();e.i_(t,a),Iu(a)||t.cr(t.N())}_d(t){const e=this.Ps.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}Ud(t){!t.N_()&&t.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(t),1)}}function _x(r){if(r>=1)return 0;let t=0;for(;t<8;t++){const e=Math.round(r);if(Math.abs(e-r)<1e-8)return t;r*=10}return t}function td(r){return!Ir(r)&&!Sl(r)}function wx(r){return Ir(r)}(function(r){r[r.Disabled=0]="Disabled",r[r.Continuous=1]="Continuous",r[r.OnDataUpdate=2]="OnDataUpdate"})(X0||(X0={})),(function(r){r[r.LastBar=0]="LastBar",r[r.LastVisible=1]="LastVisible"})(G0||(G0={})),(function(r){r.Solid="solid",r.VerticalGradient="gradient"})(K0||(K0={})),(function(r){r[r.Year=0]="Year",r[r.Month=1]="Month",r[r.DayOfMonth=2]="DayOfMonth",r[r.Time=3]="Time",r[r.TimeWithSeconds=4]="TimeWithSeconds"})(Q0||(Q0={}));const $0=r=>r.getUTCFullYear();function q2(r,t,e){return t.replace(/yyyy/g,(n=>En($0(n),4))(r)).replace(/yy/g,(n=>En($0(n)%100,2))(r)).replace(/MMMM/g,((n,a)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(a,{month:"long"}))(r,e)).replace(/MMM/g,((n,a)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(a,{month:"short"}))(r,e)).replace(/MM/g,(n=>En((a=>a.getUTCMonth()+1)(n),2))(r)).replace(/dd/g,(n=>En((a=>a.getUTCDate())(n),2))(r))}class Ex{constructor(t="yyyy-MM-dd",e="default"){this.Qd=t,this.tf=e}du(t){return q2(t,this.Qd,this.tf)}}class X2{constructor(t){this.if=t||"%h:%m:%s"}du(t){return this.if.replace("%h",En(t.getUTCHours(),2)).replace("%m",En(t.getUTCMinutes(),2)).replace("%s",En(t.getUTCSeconds(),2))}}const G2={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class K2{constructor(t={}){const e={...G2,...t};this.hf=new Ex(e.sf,e.rf),this.af=new X2(e.nf),this.lf=e.ef}du(t){return`${this.hf.du(t)}${this.lf}${this.af.du(t)}`}}function Wo(r){return 60*r*60*1e3}function Rf(r){return 60*r*1e3}const qo=[{_f:(Z0=1,1e3*Z0),uf:10},{_f:Rf(1),uf:20},{_f:Rf(5),uf:21},{_f:Rf(30),uf:22},{_f:Wo(1),uf:30},{_f:Wo(3),uf:31},{_f:Wo(6),uf:32},{_f:Wo(12),uf:33}];var Z0;function J0(r,t){if(r.getUTCFullYear()!==t.getUTCFullYear())return 70;if(r.getUTCMonth()!==t.getUTCMonth())return 60;if(r.getUTCDate()!==t.getUTCDate())return 50;for(let e=qo.length-1;e>=0;--e)if(Math.floor(t.getTime()/qo[e]._f)!==Math.floor(r.getTime()/qo[e]._f))return qo[e].uf;return 0}function Df(r){let t=r;if(Sl(r)&&(t=Cd(r)),!td(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{cf:Math.round(e.getTime()/1e3),df:t}}function ty(r){if(!wx(r))throw new Error("time must be of type isUTCTimestamp");return{cf:r}}function Cd(r){const t=new Date(r);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${r}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function ey(r){Sl(r.time)&&(r.time=Cd(r.time))}class iy{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(ey)})(t):ey(t)}createConverterToInternalObj(t){return mt((function(e){return e.length===0?null:td(e[0].time)||Sl(e[0].time)?Df:ty})(t))}key(t){return typeof t=="object"&&"cf"in t?t.cf:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.df===void 0?new Date(1e3*e.cf).getTime():new Date(Date.UTC(e.df.year,e.df.month-1,e.df.day)).getTime()}convertHorzItemToInternal(t){return wx(e=t)?ty(e):td(e)?Df(e):Df(Cd(e));var e}updateFormatter(t){if(!this.Ps)return;const e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new K2({sf:e,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:t.locale}):this.ff=new Ex(e,t.locale)}formatHorzItem(t){const e=t;return this.ff.du(new Date(1e3*e.cf))}formatTickmark(t,e){const n=(function(l,u,h){switch(l){case 0:case 10:return u?h?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return u?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),a=this.Ps.timeScale;if(a.tickMarkFormatter!==void 0){const l=a.tickMarkFormatter(t.originalTime,n,e.locale);if(l!==null)return l}return(function(l,u,h){const f={};switch(u){case 0:f.year="numeric";break;case 1:f.month="short";break;case 2:f.day="numeric";break;case 3:f.hour12=!1,f.hour="2-digit",f.minute="2-digit";break;case 4:f.hour12=!1,f.hour="2-digit",f.minute="2-digit",f.second="2-digit"}const d=l.df===void 0?new Date(1e3*l.cf):new Date(Date.UTC(l.df.year,l.df.month-1,l.df.day));return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()).toLocaleString(h,f)})(t.time,n,e.locale)}maxTickMarkWeight(t){let e=t.reduce(H2,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(n,a=0){if(n.length===0)return;let l=a===0?null:n[a-1].time.cf,u=l!==null?new Date(1e3*l):null,h=0;for(let f=a;f<n.length;++f){const d=n[f],v=new Date(1e3*d.time.cf);u!==null&&(d.timeWeight=J0(v,u)),h+=d.time.cf-(l||d.time.cf),l=d.time.cf,u=v}if(a===0&&n.length>1){const f=Math.ceil(h/(n.length-1)),d=new Date(1e3*(n[0].time.cf-f));n[0].timeWeight=J0(new Date(1e3*n[0].time.cf),d)}})(t,e)}static pf(t){return bi({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Xs=typeof window<"u";function ny(){return!!Xs&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Nf(){return!!Xs&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ed(r){return r+r%2}function Q2(r){Xs&&window.chrome!==void 0&&r.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Hu{constructor(t,e,n){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!Nf(),this.Uf=a=>{this.$f(a)},this.qf=a=>{if(this.jf(a)){const l=this.Yf(a);if(++this.gf,this.Mf&&this.gf>1){const{Kf:u}=this.Zf(Gi(a),this.bf);u<30&&!this.Tf&&this.Gf(l,this.Jf.Xf),this.Qf()}}else{const l=this.Yf(a);if(++this.vf,this.mf&&this.vf>1){const{Kf:u}=this.Zf(Gi(a),this.wf);u<5&&!this.Pf&&this.tp(l,this.Jf.ip),this.sp()}}},this.np=t,this.Jf=e,this.Ps=n,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(t){this.Vf&&this.Vf();const e=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",e)},this.np.addEventListener("mousemove",e),this.jf(t))return;const n=this.Yf(t);this.tp(n,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(t){if(this.Nf||this.yf!==null||this.jf(t))return;const e=this.Yf(t);this.tp(e,this.Jf.op),this.Hf=!0}_p(t){const e=Of(t.changedTouches,mt(this.Wf));if(e===null||(this.Ff=Xo(t),this.Af!==null)||this.Of)return;this.zf=!0;const n=this.Zf(Gi(e),mt(this.yf)),{up:a,cp:l,Kf:u}=n;if(this.kf||!(u<5)){if(!this.kf){const h=.5*a,f=l>=h&&!this.Ps.dp(),d=h>l&&!this.Ps.fp();f||d||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const h=this.Yf(t,e);this.Gf(h,this.Jf.pp),Os(t)}}}vp(t){if(t.button!==0)return;const e=this.Zf(Gi(t),mt(this.Cf)),{Kf:n}=e;if(n>=5&&(this.Pf=!0,this.sp()),this.Pf){const a=this.Yf(t);this.tp(a,this.Jf.mp)}}Zf(t,e){const n=Math.abs(e._t-t._t),a=Math.abs(e.ut-t.ut);return{up:n,cp:a,Kf:n+a}}wp(t){let e=Of(t.changedTouches,mt(this.Wf));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Wf=null,this.Ff=Xo(t),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const n=this.Yf(t,e);if(this.Gf(n,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:a}=this.Zf(Gi(e),this.bf);a<30&&!this.Tf&&this.Gf(n,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(n,this.Jf.Mp),this.Jf.Mp&&Os(t));this.gf===0&&Os(t),t.touches.length===0&&this.xf&&(this.xf=!1,Os(t))}$f(t){if(t.button!==0)return;const e=this.Yf(t);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),ny()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(t))if(this.tp(e,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:n}=this.Zf(Gi(t),this.wf);n<5&&!this.Pf&&this.tp(e,this.Jf.ip),this.sp()}else this.Pf||this.tp(e,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(t){if(this.Wf!==null)return;const e=t.changedTouches[0];this.Wf=e.identifier,this.Ff=Xo(t);const n=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=Gi(e),this.Ef&&(this.Ef(),this.Ef=null);{const l=this._p.bind(this),u=this.wp.bind(this);this.Ef=()=>{n.removeEventListener("touchmove",l),n.removeEventListener("touchend",u)},n.addEventListener("touchmove",l,{passive:!1}),n.addEventListener("touchend",u,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,t),240)}const a=this.Yf(t,e);this.Gf(a,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=Gi(e))}kp(t){if(t.button!==0)return;const e=this.np.ownerDocument.documentElement;ny()&&e.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=Gi(t),this.Bf&&(this.Bf(),this.Bf=null);{const a=this.vp.bind(this),l=this.$f.bind(this);this.Bf=()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseup",l)},e.addEventListener("mousemove",a),e.addEventListener("mouseup",l)}if(this.Nf=!0,this.jf(t))return;const n=this.Yf(t);this.tp(n,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=Gi(t))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const t=this.np.ownerDocument,e=n=>{this.Jf.Tp&&(n.composed&&this.np.contains(n.composedPath()[0])||n.target&&this.np.contains(n.target)||this.Jf.Tp())};this.Df=()=>{t.removeEventListener("touchstart",e)},this.Rf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Nf()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),Q2(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",(()=>{}),{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",(t=>this.Ep(t.touches)),{passive:!0}),this.np.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const e=ry(t.touches[0],t.touches[1])/this.Lf;this.Jf.Vp(this.Af,e),Os(t)}}),{passive:!1}),this.np.addEventListener("touchend",(t=>{this.Ep(t.touches)})))}Ep(t){t.length===1&&(this.zf=!1),t.length!==2||this.zf||this.xf?this.Ap():this.Lp(t)}Lp(t){const e=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Lf=ry(t[0],t[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(t){if(this.Vf&&this.Vf(),this.jf(t)||!this.Hf)return;const e=this.Yf(t);this.tp(e,this.Jf.zp),this.Hf=!Nf()}Cp(t){const e=Of(t.touches,mt(this.Wf));if(e===null)return;const n=this.Yf(t,e);this.Gf(n,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:Xo(t)<this.Ff+500}Gf(t,e){e&&e.call(this.Jf,t)}tp(t,e){e&&e.call(this.Jf,t)}Yf(t,e){const n=e||t,a=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-a.left,localY:n.clientY-a.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Np:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Fp:t.type,Wp:n.target,_u:t.view,Hp:()=>{t.type!=="touchstart"&&Os(t)}}}}function ry(r,t){const e=r.clientX-t.clientX,n=r.clientY-t.clientY;return Math.sqrt(e*e+n*n)}function Os(r){r.cancelable&&r.preventDefault()}function Gi(r){return{_t:r.pageX,ut:r.pageY}}function Xo(r){return r.timeStamp||performance.now()}function Of(r,t){for(let e=0;e<r.length;++e)if(r[e].identifier===t)return r[e];return null}class $2{constructor(t,e,n){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=t,this.Kp=t.Zp()[e],this.Gp=t.Zp()[n],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return oe({width:this.Kp.sv().width,height:1})}nv(){return oe({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(t,e,n){const a=this.nv();t.fillStyle=this.Yp.N().layout.panes.separatorColor,t.fillRect(e,n,a.width,a.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Jp.appendChild(t);const n=document.createElement("div"),a=n.style;a.position="absolute",a.zIndex="50",a.top="-4px",a.height="9px",a.width="100%",a.backgroundColor="",a.cursor="row-resize",this.Jp.appendChild(n);const l={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new Hu(n,l,{dp:()=>!1,fp:()=>!0}),this.Up={hv:n,rv:t}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(t){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(t){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(t){if(this.Up===null)return;const e=this.Kp.cv().E_()+this.Gp.cv().E_(),n=e/(this.Kp.sv().height+this.Gp.sv().height),a=30*n;e<=2*a||(this.jp={dv:t.pageY,fv:this.Kp.cv().E_(),pv:e-a,vv:e,mv:n,wv:a},this.Up.rv.style.display="block")}_v(t){const e=this.jp;if(e===null)return;const n=(t.pageY-e.dv)*e.mv,a=Vs(e.fv+n,e.wv,e.pv);this.Kp.cv().A_(a),this.Gp.cv().A_(e.vv-a),this.Yp.Qt().Ca()}uv(t){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function kf(r,t){return r.gv-t.gv}function zf(r,t,e){const n=(r.gv-t.gv)/(r.wt-t.wt);return Math.sign(n)*Math.min(Math.abs(n),e)}class Z2{constructor(t,e,n,a){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=t,this.Tv=e,this.Rv=n,this.kn=a}Dv(t,e){if(this.Mv!==null){if(this.Mv.wt===e)return void(this.Mv.gv=t);if(Math.abs(this.Mv.gv-t)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:e,gv:t}}fe(t,e){if(this.Mv===null||this.bv===null||e-this.Mv.wt>50)return;let n=0;const a=zf(this.Mv,this.bv,this.Tv),l=kf(this.Mv,this.bv),u=[a],h=[l];if(n+=l,this.Sv!==null){const d=zf(this.bv,this.Sv,this.Tv);if(Math.sign(d)===Math.sign(a)){const v=kf(this.bv,this.Sv);if(u.push(d),h.push(v),n+=v,this.xv!==null){const m=zf(this.Sv,this.xv,this.Tv);if(Math.sign(m)===Math.sign(a)){const y=kf(this.Sv,this.xv);u.push(m),h.push(y),n+=y}}}}let f=0;for(let d=0;d<u.length;++d)f+=h[d]/n*u[d];Math.abs(f)<this.Pv||(this.Cv={gv:t,wt:e},this.kv=f,this.yv=(function(d,v){const m=Math.log(v);return Math.log(1*m/-d)/m})(Math.abs(f),this.Rv))}Ac(t){const e=mt(this.Cv),n=t-e.wt;return e.gv+this.kv*(Math.pow(this.Rv,n)-1)/Math.log(this.Rv)}Ec(t){return this.Cv===null||this.Iv(t)===this.yv}Iv(t){const e=t-mt(this.Cv).wt;return Math.min(e,this.yv)}}class J2{constructor(t,e){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=t,this.Lv=e,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Vr(r,t){const e=mt(r.ownerDocument).createElement("canvas");r.appendChild(e);const n=BM(e,{options:{allowResizeObserver:!0},transform:(a,l)=>({width:Math.max(a.width,l.width),height:Math.max(a.height,l.height)})});return n.resizeCanvasElement(t),n}function Ur(r){r.width=1,r.height=1,r.getContext("2d")?.clearRect(0,0,1,1)}function id(r,t,e,n){r.Uh&&r.Uh(t,e,n)}function nu(r,t,e,n){r.nt(t,e,n)}function nd(r,t,e,n){const a=r(e,n);for(const l of a){const u=l.Tt(n);u!==null&&t(u)}}function jf(r,t){return e=>(function(n){return n.Ft!==void 0})(e)?(e.Ft()?.ol()??"")!==t?[]:e.Ya?.(r)??[]:[]}function sy(r,t,e,n){if(!r.length)return;let a=0;const l=r[0].$t(n,!0);let u=t===1?e/2-(r[0].Hi()-l/2):r[0].Hi()-l/2-e/2;u=Math.max(0,u);for(let h=1;h<r.length;h++){const f=r[h],d=r[h-1],v=d.$t(n,!1),m=f.Hi(),y=d.Hi();if(t===1?m>y-v:m<y+v){const x=y-v*t;f.Ui(x);const b=x-t*v/2;if((t===1?b<0:b>e)&&u>0){const S=t===1?-1-b:b-e,_=Math.min(S,u);for(let C=a;C<r.length;C++)r[C].Ui(r[C].Hi()+t*_);u-=_}}else a=h,u=t===1?y-v-m:m-(y+v)}}class ay{constructor(t,e,n,a){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new fl(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=t,this.Ps=e,this.Co=e.layout,this.hd=n,this.Jv=a==="left",this.Qv=jf("normal",a),this.tm=jf("top",a),this.im=jf("bottom",a),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Vr(this.Jp,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const l=this.sm.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.nm=Vr(this.Jp,oe({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const u=this.nm.canvasElement;u.style.position="absolute",u.style.zIndex="2",u.style.left="0",u.style.top="0";const h={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new Hu(this.nm.canvasElement,h,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ur(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const t=this.hd.N();return this.jv!==t.P&&(this.qv.On(),this.jv=t.P),t}om(){if(this.Ki===null)return 0;let t=0;const e=this.lm(),n=mt(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));n.save();const a=this.Ki.Vl();n.font=this._m(),a.length>0&&(t=Math.max(this.qv.Ii(n,a[0].Jl),this.qv.Ii(n,a[a.length-1].Jl)));const l=this.um();for(let d=l.length;d--;){const v=this.qv.Ii(n,l[d].ri());v>t&&(t=v)}const u=this.Ki.Lt();if(u!==null&&this.Uv!==null&&(h=this.Ps.crosshair).mode!==2&&h.horzLine.visible&&h.horzLine.labelVisible){const d=this.Ki.Ds(1,u),v=this.Ki.Ds(this.Uv.height-2,u);t=Math.max(t,this.qv.Ii(n,this.Ki.Ji(Math.floor(Math.min(d,v))+.11111111111111,u)),this.qv.Ii(n,this.Ki.Ji(Math.ceil(Math.max(d,v))-.11111111111111,u)))}var h;n.restore();const f=t||34;return ed(Math.ceil(e.S+e.C+e.V+e.B+5+f))}dm(t){this.Uv!==null&&jr(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`)}fm(){return mt(this.Uv).width}cs(t){this.Ki!==t&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=t,t.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const t=this.yt.cv();this.yt.Gv().Qt().Q_(t,mt(this.Ft()))}pm(t){if(this.Uv===null)return;const e={colorSpace:this.yt.Gv().N().layout.colorSpace};if(t!==1){this.vm(),this.sm.applySuggestedBitmapSize();const a=Pr(this.sm,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this.wm(l),this.gm(l)})),this.yt.Mm(a,this.im),this.bm(a),this.yt.Mm(a,this.Qv),this.Sm(a))}this.nm.applySuggestedBitmapSize();const n=Pr(this.nm,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this.xm(n),this.yt.Mm(n,this.tm))}nv(){return this.sm.bitmapSize}ev(t,e,n,a){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,n),a)){const u=this.nm.canvasElement;t.drawImage(u,e,n)}}kt(){this.Ki?.Vl()}ov(t){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv();this.$v=!0,e.j_(n,this.Ki,t.localY)}_v(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv(),a=this.Ki;e.Y_(n,a,t.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),e=this.yt.cv(),n=this.Ki;this.$v&&(this.$v=!1,t.K_(e,n))}uv(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv();this.$v=!1,e.K_(n,this.Ki)}hm(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(t){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(t){this.Cm(0)}um(){const t=[],e=this.Ki===null?void 0:this.Ki;return(n=>{for(let a=0;a<n.length;++a){const l=n[a].Ks(this.yt.cv(),e);for(let u=0;u<l.length;u++)t.push(l[u])}})(this.yt.cv().Dt()),t}wm({context:t,bitmapSize:e}){const{width:n,height:a}=e,l=this.yt.cv().Qt(),u=l.$(),h=l.Kd();u===h?Fu(t,0,0,n,a,u):cx(t,0,0,n,a,u,h)}gm({context:t,bitmapSize:e,horizontalPixelRatio:n}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;t.fillStyle=this.Ki.N().borderColor;const a=Math.max(1,Math.floor(this.lm().S*n));let l;l=this.Jv?e.width-a:0,t.fillRect(l,0,a,e.height)}bm(t){if(this.Uv===null||this.Ki===null)return;const e=this.Ki.Vl(),n=this.Ki.N(),a=this.lm(),l=this.Jv?this.Uv.width-a.C:0;n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace((({context:u,horizontalPixelRatio:h,verticalPixelRatio:f})=>{u.fillStyle=n.borderColor;const d=Math.max(1,Math.floor(f)),v=Math.floor(.5*f),m=Math.round(a.C*h);u.beginPath();for(const y of e)u.rect(Math.floor(l*h),Math.round(y.Pl*f)-v,m,d);u.fill()})),t.useMediaCoordinateSpace((({context:u})=>{u.font=this._m(),u.fillStyle=n.textColor??this.Co.textColor,u.textAlign=this.Jv?"right":"left",u.textBaseline="middle";const h=this.Jv?Math.round(l-a.V):Math.round(l+a.C+a.V),f=e.map((d=>this.qv.Di(u,d.Jl)));for(let d=e.length;d--;){const v=e[d];u.fillText(v.Jl,h,v.Pl+f[d])}}))}vm(){if(this.Uv===null||this.Ki===null)return;let t=this.Uv.height/2;const e=[],n=this.Ki.Dt().slice(),a=this.yt.cv(),l=this.lm();this.Ki===a.Gn()&&this.yt.cv().Dt().forEach((f=>{a.Zn(f)&&n.push(f)}));const u=this.Ki.Sl()[0],h=this.Ki;n.forEach((f=>{const d=f.Ks(a,h);d.forEach((v=>{v.$i()&&v.Wi()===null&&(v.Ui(null),e.push(v))})),u===f&&d.length>0&&(t=d[0].Ei())})),this.Ki.N().alignLabels&&this.ym(e,l,t)}ym(t,e,n){if(this.Uv===null)return;const a=t.filter((u=>u.Ei()<=n)),l=t.filter((u=>u.Ei()>n));a.sort(((u,h)=>h.Ei()-u.Ei())),a.length&&l.length&&l.push(a[0]),l.sort(((u,h)=>u.Ei()-h.Ei()));for(const u of t){const h=Math.floor(u.$t(e)/2),f=u.Ei();f>-h&&f<h&&u.Ui(h),f>this.Uv.height-h&&f<this.Uv.height+h&&u.Ui(this.Uv.height-h)}sy(a,1,this.Uv.height,e),sy(l,-1,this.Uv.height,e)}Sm(t){if(this.Uv===null)return;const e=this.um(),n=this.lm(),a=this.Jv?"right":"left";e.forEach((l=>{l.qi()&&l.Tt(mt(this.Ki)).nt(t,n,this.qv,a)}))}xm(t){if(this.Uv===null||this.Ki===null)return;const e=this.yt.Gv().Qt(),n=[],a=this.yt.cv(),l=e.gd().Ks(a,this.Ki);l.length&&n.push(l);const u=this.lm(),h=this.Jv?"right":"left";n.forEach((f=>{f.forEach((d=>{d.Tt(mt(this.Ki)).nt(t,u,this.qv,h)}))}))}Cm(t){this.Jp.style.cursor=t===1?"ns-resize":"default"}do(){const t=this.om();this.Yv<t&&this.yt.Gv().Qt().Ca(),this.Yv=t}_m(){return hl(this.Co.fontSize,this.Co.fontFamily)}}function tT(r,t){return r.qa?.(t)??[]}function ly(r,t){return r.Ys?.(t)??[]}function oy(r,t){return r.ds?.(t)??[]}function eT(r,t){return r.Ha?.(t)??[]}class Md{constructor(t,e){this.Uv=oe({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new we,this.Vm=new we,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=t,this.Nm=e,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(n),this.sm=Vr(n,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const a=this.sm.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.nm=Vr(n,oe({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const l=this.nm.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new Hu(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ur(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return mt(this.Nm)}qm(t){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=t,this.Nm!==null&&this.Nm.nu().i(Md.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new J2(this.Wm,this.Lv),this.Tm.kt()):(this.Tm?.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const t=this.Nm.U_();this.km.cs(mt(t))}if(this.Pm!==null){const t=this.Nm.q_();this.Pm.cs(mt(t))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(t){this.Nm&&this.Nm.A_(t)}lp(t){if(!this.Nm)return;this.Km();const e=t.localX,n=t.localY;this.Zm(e,n,t)}Pp(t){this.Km(),this.Gm(),this.Zm(t.localX,t.localY,t)}op(t){if(!this.Nm)return;this.Km();const e=t.localX,n=t.localY;this.Zm(e,n,t)}Sp(t){this.Nm!==null&&(this.Km(),this.Xm(t))}ip(t){this.Nm!==null&&this.Jm(this.Vm,t)}Xf(t){this.ip(t)}mp(t){this.Km(),this.Qm(t),this.Zm(t.localX,t.localY,t)}bp(t){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(t))}Mp(t){this.Nm!==null&&this.Xm(t)}Op(t){if(this.Em=!0,this.Am===null){const e={x:t.localX,y:t.localY};this.iw(e,e,t)}}zp(t){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(t,e){if(!this.Lv.N().handleScale.pinch)return;const n=5*(e-this.Bm);this.Bm=e,this.ns().Td(t._t,n)}yp(t){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const e=this.ns().gd();this.Am!==null&&e.It()&&(this.zm={x:e.si(),y:e.ni()},this.Am={x:t.localX,y:t.localY})}pp(t){if(this.Nm===null)return;const e=t.localX,n=t.localY;if(this.Am===null)this.Qm(t);else{this.Lm=!1;const a=mt(this.zm),l=a.x+(e-this.Am.x),u=a.y+(n-this.Am.y);this.Zm(l,u,t)}}gp(t){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(t)}Qn(t,e){const n=this.Nm;return n===null?null:Sx(n,t,e)}hw(t,e){mt(e==="left"?this.km:this.Pm).dm(oe({width:t,height:this.Uv.height}))}sv(){return this.Uv}dm(t){jr(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Wm.style.width=t.width+"px",this.Wm.style.height=t.height+"px")}aw(){const t=mt(this.Nm);t.H_(t.U_()),t.H_(t.q_());for(const e of t.Sl())if(t.Zn(e)){const n=e.Ft();n!==null&&t.H_(n),e.Ws()}for(const e of t.ru())e.Ws()}nv(){return this.sm.bitmapSize}ev(t,e,n,a){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,n),a)){const u=this.nm.canvasElement;t!==null&&t.drawImage(u,e,n)}}pm(t){if(t===0||this.Nm===null)return;t>1&&this.aw(),this.km!==null&&this.km.pm(t),this.Pm!==null&&this.Pm.pm(t);const e={colorSpace:this.Lv.N().layout.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const a=Pr(this.sm,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this.wm(l)})),this.Nm&&(this.lw(a,tT),this.ow(a),this.lw(a,ly),this.lw(a,oy)))}this.nm.applySuggestedBitmapSize();const n=Pr(this.nm,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this._w(n),this.lw(n,eT),this.lw(n,oy))}uw(){return this.km}cw(){return this.Pm}Mm(t,e){this.lw(t,e)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(t){this.Jm(this.Im,t)}Jm(t,e){const n=e.localX,a=e.localY;t.v()&&t.p(this.ns().Et().wc(n),{x:n,y:a},e)}wm({context:t,bitmapSize:e}){const{width:n,height:a}=e,l=this.ns(),u=l.$(),h=l.Kd();u===h?Fu(t,0,0,n,a,h):cx(t,0,0,n,a,u,h)}ow(t){const e=mt(this.Nm),n=e.eu().pr().Tt(e);n!==null&&n.nt(t,!1)}_w(t){this.dw(t,ly,nu,this.ns().gd())}lw(t,e){const n=mt(this.Nm),a=n.Dt(),l=n.ru();for(const u of l)this.dw(t,e,id,u);for(const u of a)this.dw(t,e,id,u);for(const u of l)this.dw(t,e,nu,u);for(const u of a)this.dw(t,e,nu,u)}dw(t,e,n,a){const l=mt(this.Nm),u=l.Qt().pd(),h=u!==null&&u.hu===a,f=u!==null&&h&&u.au!==void 0?u.au.ie:void 0;nd(e,(d=>n(d,t,h,f)),a,l)}jm(){if(this.Nm===null)return;const t=this.Lv,e=this.Nm.U_().N().visible,n=this.Nm.q_().N().visible;e||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),n||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const a=t.Qt().Nd();e&&this.km===null&&(this.km=new ay(this,t.N(),a,"left"),this.Hm.appendChild(this.km.iv())),n&&this.Pm===null&&(this.Pm=new ay(this,t.N(),a,"right"),this.Um.appendChild(this.Pm.iv()))}fw(t){return t.Np&&this.Em||this.Am!==null}Zm(t,e,n){t=Math.max(0,Math.min(t,this.Uv.width-1)),e=Math.max(0,Math.min(e,this.Uv.height-1)),this.ns().Ad(t,e,n,mt(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(t,e,n){this.Am=t,this.Lm=!1,this.Zm(e.x,e.y,n);const a=this.ns().gd();this.zm={x:a.si(),y:a.ni()}}ns(){return this.Lv.Qt()}tw(t){if(!this.Dm)return;const e=this.ns(),n=this.cv();if(e.X_(n,n.Rs()),this.Rm=null,this.Dm=!1,e.Vd(),this.Om!==null){const a=performance.now(),l=e.Et();this.Om.fe(l.Cc(),a),this.Om.Ec(a)||e.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)mt(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(t){if(this.Nm===null)return;const e=this.ns(),n=e.Et();if(n.Gi())return;const a=this.Lv.N(),l=a.handleScroll,u=a.kineticScroll;if((!l.pressedMouseMove||t.Np)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!t.Np))return;const h=this.Nm.Rs(),f=performance.now();if(this.Rm!==null||this.fw(t)||(this.Rm={x:t.clientX,y:t.clientY,cf:f,pw:t.localX,mw:t.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==t.clientX||this.Rm.y!==t.clientY)){if(t.Np&&u.touch||!t.Np&&u.mouse){const d=n.ul();this.Om=new Z2(.2/d,7/d,.997,15/d),this.Om.Dv(n.Cc(),this.Rm.cf)}else this.Om=null;h.Gi()||e.Z_(this.Nm,h,t.localY),e.Dd(t.localX),this.Dm=!0}this.Dm&&(h.Gi()||e.G_(this.Nm,h,t.localY),e.Id(t.localX),this.Om!==null&&this.Om.Dv(n.Cc(),f))}}class uy{constructor(t,e,n,a,l){this.xt=!0,this.Uv=oe({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=t==="left",this.hd=n.Nd,this.Ps=e,this.ww=a,this.gw=l,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Vr(this.Jp,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(t){jr(this.Uv,t)||(this.Uv=t,this.sm.resizeCanvasElement(t),this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xt=!0)}pm(t){if(t<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const e=Pr(this.sm,{colorSpace:this.Ps.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace((n=>{this.wm(n),this.gm(n)}))}nv(){return this.sm.bitmapSize}ev(t,e,n){const a=this.nv();a.width>0&&a.height>0&&t.drawImage(this.sm.canvasElement,e,n)}gm({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(!this.ww())return;t.fillStyle=this.Ps.timeScale.borderColor;const l=Math.floor(this.hd.N().S*n),u=Math.floor(this.hd.N().S*a),h=this.Jv?e.width-l:0;t.fillRect(h,0,l,u)}wm({context:t,bitmapSize:e}){Fu(t,0,0,e.width,e.height,this.gw())}}function Td(r){return t=>t.Ka?.(r)??[]}const iT=Td("normal"),nT=Td("top"),rT=Td("bottom");class sT{constructor(t,e){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=oe({width:0,height:0}),this.xw=new we,this.qv=new fl(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=t,this.cu=e,this.Ps=t.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Vr(this.kw,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const n=this.sm.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.nm=Vr(this.kw,oe({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const a=this.nm.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new Hu(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ur(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(t){if(this.Sw)return;this.Sw=!0;const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Pd(t.localX)}yp(t){this.Pp(t)}Tp(){const t=this.Lv.Qt();!t.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Ed())}mp(t){const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Bd(t.localX)}pp(t){this.mp(t)}bp(){this.Sw=!1;const t=this.Lv.Qt();t.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||t.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(t,e,n){jr(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xw.p(t)),this.Mw!==null&&this.Mw.dm(oe({width:e,height:t.height})),this.bw!==null&&this.bw.dm(oe({width:n,height:t.height}))}Vw(){const t=this.Bw();return Math.ceil(t.S+t.C+t.k+t.A+t.I+t.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(t,e,n,a){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,n),a)){const u=this.nm.canvasElement;t.drawImage(u,e,n)}}pm(t){if(t===0)return;const e={colorSpace:this.Ps.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const a=Pr(this.sm,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this.wm(l),this.gm(l),this.Aw(a,rT)})),this.bm(a),this.Aw(a,iT)),this.Mw!==null&&this.Mw.pm(t),this.bw!==null&&this.bw.pm(t)}this.nm.applySuggestedBitmapSize();const n=Pr(this.nm,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],n),this.Aw(n,nT))}Aw(t,e){const n=this.Lv.Qt().tn();for(const a of n)nd(e,(l=>id(l,t,!1,void 0)),a,void 0);for(const a of n)nd(e,(l=>nu(l,t,!1,void 0)),a,void 0)}wm({context:t,bitmapSize:e}){Fu(t,0,0,e.width,e.height,this.Lv.Qt().Kd())}gm({context:t,bitmapSize:e,verticalPixelRatio:n}){if(this.Lv.N().timeScale.borderVisible){t.fillStyle=this.zw();const a=Math.max(1,Math.floor(this.Bw().S*n));t.fillRect(0,0,e.width,a)}}bm(t){const e=this.Lv.Qt().Et(),n=e.Vl();if(!n||n.length===0)return;const a=this.cu.maxTickMarkWeight(n),l=this.Bw(),u=e.N();u.borderVisible&&u.ticksVisible&&t.useBitmapCoordinateSpace((({context:h,horizontalPixelRatio:f,verticalPixelRatio:d})=>{h.strokeStyle=this.zw(),h.fillStyle=this.zw();const v=Math.max(1,Math.floor(f)),m=Math.floor(.5*f);h.beginPath();const y=Math.round(l.C*d);for(let x=n.length;x--;){const b=Math.round(n[x].coord*f);h.rect(b-m,0,v,y)}h.fill()})),t.useMediaCoordinateSpace((({context:h})=>{const f=l.S+l.C+l.A+l.k/2;h.textAlign="center",h.textBaseline="middle",h.fillStyle=this.H(),h.font=this._m();for(const d of n)if(d.weight<a){const v=d.needAlignCoordinate?this.Ow(h,d.coord,d.label):d.coord;h.fillText(d.label,v,f)}this.Lv.N().timeScale.allowBoldLabels&&(h.font=this.Nw());for(const d of n)if(d.weight>=a){const v=d.needAlignCoordinate?this.Ow(h,d.coord,d.label):d.coord;h.fillText(d.label,v,f)}}))}Ow(t,e,n){const a=this.qv.Ii(t,n),l=a/2,u=Math.floor(e-l)+.5;return u<0?e+=Math.abs(0-u):u+a>this.Uv.width&&(e-=Math.abs(this.Uv.width-(u+a))),e}Lw(t,e){const n=this.Bw();for(const a of t)for(const l of a.fs())l.Tt().nt(e,n)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return hl(this.F(),this.Ps.fontFamily)}Nw(){return hl(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new fl,Ew:0});const t=this.M,e=this._m();if(t.P!==e){const n=this.F();t.k=n,t.P=e,t.A=3*n/12,t.I=3*n/12,t.ts=9*n/12,t.L=0,t.Ew=4*n/12,t.Qi.On()}return this.M}Cm(t){this.Jp.style.cursor=t===1?"ew-resize":"default"}Pw(){const t=this.Lv.Qt(),e=t.N();e.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),e.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const n={Nd:this.Lv.Qt().Nd()},a=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,l=()=>t.Kd();e.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new uy("left",e,n,a,l),this.Cw.appendChild(this.Mw.iv())),e.rightPriceScale.visible&&this.bw===null&&(this.bw=new uy("right",e,n,a,l),this.yw.appendChild(this.bw.iv()))}}const aT=!!Xs&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((r=>r.brand.includes("Chromium")))&&!!Xs&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class lT{constructor(t,e,n){var a;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new we,this.Vm=new we,this.nd=new we,this.Yw=null,this.Kw=null,this.Av=t,this.Ps=e,this.cu=n,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(a=this.Vv).style.userSelect="none",a.style.webkitUserSelect="none",a.style.msUserSelect="none",a.style.MozUserSelect="none",a.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Lf(this.Ps)&&this.Jw(!0),this.ns=new W2(this.rd.bind(this),this.Ps,n),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new sT(this,this.cu),this.Zw.appendChild(this.tg.iv());const l=e.autoSize&&this.ig();let u=this.Ps.width,h=this.Ps.height;if(l||u===0||h===0){const f=t.getBoundingClientRect();u=u||f.width,h=h||f.height}this.sg(u,h),this.ng(),t.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const t of this.Fw)this.Zw.removeChild(t.iv()),t.nw().u(this),t.ew().u(this),t.m();this.Fw=[];for(const t of this.Ww)this.hg(t);this.Ww=[],mt(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(t,e,n=!1){if(this.eo===e&&this.S_===t)return;const a=(function(h){const f=Math.floor(h.width),d=Math.floor(h.height);return oe({width:f-f%2,height:d-d%2})})(oe({width:t,height:e}));this.eo=a.height,this.S_=a.width;const l=this.eo+"px",u=this.S_+"px";mt(this.Vv).style.height=l,mt(this.Vv).style.width=u,this.Zw.style.height=l,this.Zw.style.width=u,n?this.lg(Ie.yn(),performance.now()):this.ns.Ca()}pm(t){t===void 0&&(t=Ie.yn());for(let e=0;e<this.Fw.length;e++)this.Fw[e].pm(t.un(e).an);this.Ps.timeScale.visible&&this.tg.pm(t._n())}cr(t){const e=Lf(this.Ps);this.ns.cr(t);const n=Lf(this.Ps);n!==e&&this.Jw(n),t.layout?.panes&&this.og(),this.eg(),this._g(t)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(t=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const e=this.cg(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const a=mt(n.getContext("2d"));return this.cg(a,t),n}dg(t){return t==="left"&&!this.fg()||t==="right"&&!this.pg()||this.Fw.length===0?0:mt(t==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(t){this.Kw=t,this.Kw?this.hv().style.setProperty("cursor",t):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(t){return ci(this.Fw[t]).sv()}og(){this.Ww.forEach((t=>{t.kt()}))}_g(t){(t.autoSize!==void 0||!this.Yw||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Yw&&this.ig(),t.autoSize===!1&&this.Yw!==null&&this.ag(),t.autoSize||t.width===void 0&&t.height===void 0||this.sg(t.width||this.S_,t.height||this.eo))}cg(t,e){let n=0,a=0;const l=this.Fw[0],u=(f,d)=>{let v=0;for(let m=0;m<this.Fw.length;m++){const y=this.Fw[m],x=mt(f==="left"?y.uw():y.cw()),b=x.nv();if(t!==null&&x.ev(t,d,v,e),v+=b.height,m<this.Fw.length-1){const S=this.Ww[m],_=S.nv();t!==null&&S.ev(t,d,v),v+=_.height}}};this.fg()&&(u("left",0),n+=mt(l.uw()).nv().width);for(let f=0;f<this.Fw.length;f++){const d=this.Fw[f],v=d.nv();if(t!==null&&d.ev(t,n,a,e),a+=v.height,f<this.Fw.length-1){const m=this.Ww[f],y=m.nv();t!==null&&m.ev(t,n,a),a+=y.height}}n+=l.nv().width,this.pg()&&(u("right",n),n+=mt(l.cw()).nv().width);const h=(f,d,v)=>{mt(f==="left"?this.tg.Tw():this.tg.Rw()).ev(mt(t),d,v)};if(this.Ps.timeScale.visible){const f=this.tg.nv();if(t!==null){let d=0;this.fg()&&(h("left",d,a),d=mt(l.uw()).nv().width),this.tg.ev(t,d,a,e),d+=f.width,this.pg()&&h("right",d,a)}a+=f.height}return oe({width:n,height:a})}Mg(){let t=0,e=0,n=0;for(const _ of this.Fw)this.fg()&&(e=Math.max(e,mt(_.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(n=Math.max(n,mt(_.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),t+=_.E_();e=ed(e),n=ed(n);const a=this.S_,l=this.eo,u=Math.max(a-e-n,0),h=1*this.Ww.length,f=this.Ps.timeScale.visible;let d=f?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var v;d=(v=d)+v%2;const m=h+d,y=l<m?0:l-m,x=y/t;let b=0;const S=window.devicePixelRatio||1;for(let _=0;_<this.Fw.length;++_){const C=this.Fw[_];C.qm(this.ns.Xs()[_]);let A=0,T=0;T=_===this.Fw.length-1?Math.ceil((y-b)*S)/S:Math.round(C.E_()*x*S)/S,A=Math.max(T,2),b+=A,C.dm(oe({width:u,height:A})),this.fg()&&C.hw(e,"left"),this.pg()&&C.hw(n,"right"),C.cv()&&this.ns.bd(C.cv(),A)}this.tg.Iw(oe({width:f?u:0,height:d}),f?e:0,f?n:0),this.ns.L_(u),this.Uw!==e&&(this.Uw=e),this.$w!==n&&(this.$w=n)}Jw(t){t?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return aT?1/window.devicePixelRatio:1}Xw(t){if(!(t.deltaX!==0&&this.Ps.handleScroll.mouseWheel||t.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const e=this.bg(t),n=e*t.deltaX/100,a=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),a!==0&&this.Ps.handleScale.mouseWheel){const l=Math.sign(a)*Math.min(1,Math.abs(a)),u=t.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(u,l)}n!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*n)}lg(t,e){const n=t._n();n===3&&this.Sg(),n!==3&&n!==2||(this.xg(t),this.Cg(t,e),this.tg.kt(),this.Fw.forEach((a=>{a.Ym()})),this.qw?._n()===3&&(this.qw.Sn(t),this.Sg(),this.xg(this.qw),this.Cg(this.qw,e),t=this.qw,this.qw=null)),this.pm(t)}Cg(t,e){for(const n of t.bn())this.xn(n,e)}xg(t){const e=this.ns.Xs();for(let n=0;n<e.length;n++)t.un(n).ln&&e[n].tu()}xn(t,e){const n=this.ns.Et();switch(t.fn){case 0:n.Fc();break;case 1:n.Wc(t.Wt);break;case 2:n.gn(t.Wt);break;case 3:n.Mn(t.Wt);break;case 4:n.Pc();break;case 5:t.Wt.Ec(e)||n.Mn(t.Wt.Ac(e))}}rd(t){this.qw!==null?this.qw.Sn(t):this.qw=t,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame((e=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const n=this.qw;this.qw=null,this.lg(n,e);for(const a of n.bn())if(a.fn===5&&!a.Wt.Ec(e)){this.Qt().vn(a.Wt);break}}})))}Sg(){this.ng()}hg(t){this.Zw.removeChild(t.iv()),t.m()}ng(){const t=this.ns.Xs(),e=t.length,n=this.Fw.length;for(let a=e;a<n;a++){const l=ci(this.Fw.pop());this.Zw.removeChild(l.iv()),l.nw().u(this),l.ew().u(this),l.m();const u=this.Ww.pop();u!==void 0&&this.hg(u)}for(let a=n;a<e;a++){const l=new Md(this,t[a]);if(l.nw().i(this.yg.bind(this,l),this),l.ew().i(this.kg.bind(this,l),this),this.Fw.push(l),a>0){const u=new $2(this,a-1,a);this.Ww.push(u),this.Zw.insertBefore(u.iv(),this.tg.iv())}this.Zw.insertBefore(l.iv(),this.tg.iv())}for(let a=0;a<e;a++){const l=t[a],u=this.Fw[a];u.cv()!==l?u.qm(l):u.$m()}this.eg(),this.Mg()}Pg(t,e,n,a){const l=new Map;t!==null&&this.ns.tn().forEach((m=>{const y=m.qs().$s(t);y!==null&&l.set(m,y)}));let u;if(t!==null){const m=this.ns.Et().es(t)?.originalTime;m!==void 0&&(u=m)}const h=this.Qt().pd(),f=h!==null&&h.hu instanceof Uu?h.hu:void 0,d=h!==null&&h.au!==void 0?h.au.te:void 0,v=this.Tg(a);return{Gr:u,js:t??void 0,Rg:e??void 0,Dg:v!==-1?v:void 0,Ig:f,Vg:l,Bg:d,Eg:n??void 0}}Tg(t){let e=-1;if(t)e=this.Fw.indexOf(t);else{const n=this.Qt().gd().Gs();n!==null&&(e=this.Qt().Xs().indexOf(n))}return e}yg(t,e,n,a){this.Im.p((()=>this.Pg(e,n,a,t)))}kg(t,e,n,a){this.Vm.p((()=>this.Pg(e,n,a,t)))}Qw(t,e,n){this.mg(this.Qt().pd()?.ou??null),this.nd.p((()=>this.Pg(t,e,n)))}eg(){const t=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=t}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver((t=>{const e=t[t.length-1];e&&this.sg(e.contentRect.width,e.contentRect.height)})),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Lf(r){return!!(r.handleScroll.mouseWheel||r.handleScale.mouseWheel)}function oT(r){return r.open===void 0&&r.value===void 0}function uT(r){return(function(t){return t.open!==void 0})(r)||(function(t){return t.value!==void 0})(r)}function cy(r,t,e,n){const a=e.value,l={js:t,wt:r,Wt:[a,a,a,a],Gr:n};return e.color!==void 0&&(l.R=e.color),l}function cT(r,t,e,n){const a=e.value,l={js:t,wt:r,Wt:[a,a,a,a],Gr:n};return e.lineColor!==void 0&&(l.vt=e.lineColor),e.topColor!==void 0&&(l.eh=e.topColor),e.bottomColor!==void 0&&(l.rh=e.bottomColor),l}function hT(r,t,e,n){const a=e.value,l={js:t,wt:r,Wt:[a,a,a,a],Gr:n};return e.topLineColor!==void 0&&(l.hh=e.topLineColor),e.bottomLineColor!==void 0&&(l.ah=e.bottomLineColor),e.topFillColor1!==void 0&&(l.oh=e.topFillColor1),e.topFillColor2!==void 0&&(l._h=e.topFillColor2),e.bottomFillColor1!==void 0&&(l.uh=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(l.dh=e.bottomFillColor2),l}function fT(r,t,e,n){const a={js:t,wt:r,Wt:[e.open,e.high,e.low,e.close],Gr:n};return e.color!==void 0&&(a.R=e.color),a}function dT(r,t,e,n){const a={js:t,wt:r,Wt:[e.open,e.high,e.low,e.close],Gr:n};return e.color!==void 0&&(a.R=e.color),e.borderColor!==void 0&&(a.Ht=e.borderColor),e.wickColor!==void 0&&(a.nh=e.wickColor),a}function vT(r,t,e,n,a){const l=ci(a)(e),u=Math.max(...l),h=Math.min(...l),f=l[l.length-1],d=[f,u,h,f],{time:v,color:m,...y}=e;return{js:t,wt:r,Wt:d,Gr:n,le:y,R:m}}function ks(r){return r.Wt!==void 0}function hy(r,t){return t.customValues!==void 0&&(r.Ag=t.customValues),r}function Ar(r){return(t,e,n,a,l,u)=>(function(h,f){return f?f(h):oT(h)})(n,u)?hy({wt:t,js:e,Gr:a},n):hy(r(t,e,n,a,l),n)}function fy(r){return{Candlestick:Ar(dT),Bar:Ar(fT),Area:Ar(cT),Baseline:Ar(hT),Histogram:Ar(cy),Line:Ar(cy),Custom:Ar(vT)}[r]}function dy(r){return{js:0,Lg:new Map,Ea:r}}function vy(r,t){if(r!==void 0&&r.length!==0)return{zg:t.key(r[0].wt),Og:t.key(r[r.length-1].wt)}}function py(r){let t;return r.forEach((e=>{t===void 0&&(t=e.Gr)})),ci(t)}class pT{constructor(t){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=t}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(t,e){let n=this.Ng.size!==0,a=!1;const l=this.Fg.get(t);if(l!==void 0)if(this.Fg.size===1)n=!1,a=!0,this.Ng.clear();else for(const f of this.Hg)f.pointData.Lg.delete(t)&&(a=!0);let u=[];if(e.length!==0){const f=e.map((x=>x.time)),d=this.cu.createConverterToInternalObj(e),v=fy(t.wh()),m=t.rl(),y=t.hl();u=e.map(((x,b)=>{const S=d(x.time),_=this.cu.key(S);let C=this.Ng.get(_);C===void 0&&(C=dy(S),this.Ng.set(_,C),a=!0);const A=v(S,C.js,x,f[b],m,y);return C.Lg.set(t,A),A}))}n&&this.$g(),this.qg(t,u);let h=-1;if(a){const f=[];this.Ng.forEach((d=>{f.push({timeWeight:0,time:d.Ea,pointData:d,originalTime:py(d.Lg)})})),f.sort(((d,v)=>this.cu.key(d.time)-this.cu.key(v.time))),h=this.jg(f)}return this.Yg(t,h,(function(f,d,v){const m=vy(f,v),y=vy(d,v);if(m!==void 0&&y!==void 0)return{Kg:!1,Ta:m.Og>=y.Og&&m.zg>=y.zg}})(this.Fg.get(t),l,this.cu))}Hd(t){return this.Ug(t,[])}Zg(t,e,n){if(n&&t.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const a=e;(function(C){C.Gr===void 0&&(C.Gr=C.time)})(a),this.cu.preprocessData(e);const l=this.cu.createConverterToInternalObj([e])(e.time),u=this.Wg.get(t);if(!n&&u!==void 0&&this.cu.key(l)<this.cu.key(u))throw new Error(`Cannot update oldest data, last time=${u}, new time=${l}`);let h=this.Ng.get(this.cu.key(l));if(n&&h===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const f=h===void 0;h===void 0&&(h=dy(l),this.Ng.set(this.cu.key(l),h));const d=fy(t.wh()),v=t.rl(),m=t.hl(),y=d(l,h.js,e,a.Gr,v,m),x=!n&&!f&&u!==void 0&&this.cu.key(l)===this.cu.key(u);h.Lg.set(t,y),n?this.Gg(t,y,h.js):x&&t.La()&&ks(y)?(t.kr(y),this.Xg(t,y)):this.Xg(t,y);const b={Ta:ks(y),Kg:n};if(!f)return this.Yg(t,-1,b);const S={timeWeight:0,time:h.Ea,pointData:h,originalTime:py(h.Lg)},_=qs(this.Hg,this.cu.key(S.time),((C,A)=>this.cu.key(C.time)<A));this.Hg.splice(_,0,S);for(let C=_;C<this.Hg.length;++C)Go(this.Hg[C].pointData,C);return this.cu.fillWeightsForPoints(this.Hg,_),this.Yg(t,_,b)}Jg(t,e){const n=this.Fg.get(t);if(n===void 0||e<=0)return[[],this.Qg()];e=Math.min(e,n.length);const a=n.splice(-e).reverse();n.length===0?this.Wg.delete(t):this.Wg.set(t,n[n.length-1].wt);for(const l of a){const u=this.Ng.get(this.cu.key(l.wt));if(u&&(u.Lg.delete(t),u.Lg.size===0)){this.Ng.delete(this.cu.key(u.Ea)),this.Hg.splice(u.js,1);for(let h=u.js;h<this.Hg.length;++h)Go(this.Hg[h].pointData,h)}}return[a,this.Yg(t,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(t,e){let n=this.Fg.get(t);n===void 0&&(n=[],this.Fg.set(t,n));const a=n.length!==0?n[n.length-1]:null;a===null||this.cu.key(e.wt)>this.cu.key(a.wt)?ks(e)&&n.push(e):ks(e)?n[n.length-1]=e:n.splice(-1,1),this.Wg.set(t,e.wt)}Gg(t,e,n){const a=this.Fg.get(t);if(a===void 0)return;const l=qs(a,n,((u,h)=>u.js<h));ks(e)?a[l]=e:a.splice(l,1)}qg(t,e){e.length!==0?(this.Fg.set(t,e.filter(ks)),this.Wg.set(t,e[e.length-1].wt)):(this.Fg.delete(t),this.Wg.delete(t))}$g(){for(const t of this.Hg)t.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(t.time))}jg(t){let e=-1;for(let n=0;n<this.Hg.length&&n<t.length;++n){const a=this.Hg[n],l=t[n];if(this.cu.key(a.time)!==this.cu.key(l.time)){e=n;break}l.timeWeight=a.timeWeight,Go(l.pointData,n)}if(e===-1&&this.Hg.length!==t.length&&(e=Math.min(this.Hg.length,t.length)),e===-1)return-1;for(let n=e;n<t.length;++n)Go(t[n].pointData,n);return this.cu.fillWeightsForPoints(t,e),this.Hg=t,e}tM(){if(this.Fg.size===0)return null;let t=0;return this.Fg.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].js))})),t}Yg(t,e,n){const a=this.Qg();if(e!==-1)this.Fg.forEach(((l,u)=>{a.F_.set(u,{le:l,iM:u===t?n:void 0})})),this.Fg.has(t)||a.F_.set(t,{le:[],iM:n}),a.Et.sM=this.Hg,a.Et.nM=e;else{const l=this.Fg.get(t);a.F_.set(t,{le:l||[],iM:n})}return a}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function Go(r,t){r.js=t,r.Lg.forEach((e=>{e.js=t}))}function mT(r,t){return r.wt<t}function gT(r,t){return t<r.wt}function Cx(r,t,e){const n=t.Aa(),a=t.bi(),l=qs(r,n,mT),u=gx(r,a,gT);if(!e)return{from:l,to:u};let h=l,f=u;return l>0&&l<r.length&&r[l].wt>=n&&(h=l-1),u>0&&u<r.length&&r[u-1].wt<=a&&(f=u+1),{from:h,to:f}}class Ad{constructor(t,e,n){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=t,this.re=e,this._M=n}kt(t){this.eM=!0,t==="data"&&(this.rM=!0),t==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map((t=>({...t,...this.ee.ga().gh(t.wt)})))}fM(){this.lM=null}uM(){const t=this.re.Et(),e=t.N().enableConflation?t.Hc():0;e!==this.oM&&(this.rM=!0,this.oM=e),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const t=this.ee.Ft(),e=this.re.Et();if(this.fM(),e.Gi()||t.Gi())return;const n=e.Ie();if(n===null||this.ee.qs().yh()===0)return;const a=this.ee.Lt();a!==null&&(this.lM=Cx(this.aM,n,this._M),this.mM(t,e,a.Wt),this.wM())}}class yT{constructor(t,e){this.gM=t,this.Ki=e}nt(t,e,n){this.gM.draw(t,this.Ki,e,n)}}class bT extends Ad{constructor(t,e,n){super(t,e,!1),this.$h=n,this.cM=new yT(this.$h.renderer(),(a=>{const l=t.Lt();return l===null?null:t.Ft().Nt(a,l.Wt)}))}get ma(){return this.$h.conflationReducer}Oa(t){return this.$h.priceValueBuilder(t)}al(t){return this.$h.isWhitespace(t)}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>({wt:e.js,_t:NaN,...t.gh(e.js),MM:e.le})))}mM(t,e){e.mc(this.aM,cl(this.lM))}wM(){this.$h.update({bars:this.aM.map(xT),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function xT(r){return{x:r._t,time:r.wt,originalData:r.MM,barColor:r.th}}const ST={color:"#2196f3"},_T=(r,t,e)=>{const n=sr(e);return new bT(r,t,n)};function Rd(r){const t={value:r.Wt[3],time:r.Gr};return r.Ag!==void 0&&(t.customValues=r.Ag),t}function my(r){const t=Rd(r);return r.R!==void 0&&(t.color=r.R),t}function wT(r){const t=Rd(r);return r.vt!==void 0&&(t.lineColor=r.vt),r.eh!==void 0&&(t.topColor=r.eh),r.rh!==void 0&&(t.bottomColor=r.rh),t}function ET(r){const t=Rd(r);return r.hh!==void 0&&(t.topLineColor=r.hh),r.ah!==void 0&&(t.bottomLineColor=r.ah),r.oh!==void 0&&(t.topFillColor1=r.oh),r._h!==void 0&&(t.topFillColor2=r._h),r.uh!==void 0&&(t.bottomFillColor1=r.uh),r.dh!==void 0&&(t.bottomFillColor2=r.dh),t}function Mx(r){const t={open:r.Wt[0],high:r.Wt[1],low:r.Wt[2],close:r.Wt[3],time:r.Gr};return r.Ag!==void 0&&(t.customValues=r.Ag),t}function CT(r){const t=Mx(r);return r.R!==void 0&&(t.color=r.R),t}function MT(r){const t=Mx(r),{R:e,Ht:n,nh:a}=r;return e!==void 0&&(t.color=e),n!==void 0&&(t.borderColor=n),a!==void 0&&(t.wickColor=a),t}function ru(r){return{Area:wT,Line:my,Baseline:ET,Histogram:my,Bar:CT,Candlestick:MT,Custom:TT}[r]}function TT(r){const t=r.Gr;return{...r.le,time:t}}const AT={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},RT={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},DT={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:ox,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Bf={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},NT={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function gy(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:DT,crosshair:AT,grid:RT,overlayPriceScales:{...Bf},leftPriceScale:{...Bf,visible:!1},rightPriceScale:{...Bf,visible:!0},timeScale:NT,localization:{locale:Xs?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Tx{constructor(t,e,n){this.Yp=t,this.bM=e,this.SM=n??0}applyOptions(t){this.Yp.Qt().md(this.bM,t,this.SM)}options(){return this.Ki().N()}width(){return Iu(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(t){this.setAutoScale(!1),this.Ki().$o(new $e(t.from,t.to))}getVisibleRange(){let t,e,n=this.Ki().er();if(n===null)return null;if(this.Ki().io()){const a=this.Ki().m_(),l=_x(a);n=Is(n,this.Ki().no()),t=Number((Math.round(n.Ze()/a)*a).toFixed(l)),e=Number((Math.round(n.Ge()/a)*a).toFixed(l))}else t=n.Ze(),e=n.Ge();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Ki(){return mt(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class OT{constructor(t,e,n,a){this.Yp=t,this.yt=n,this.xM=e,this.CM=a}getHeight(){return this.yt.$t()}setHeight(t){const e=this.Yp.Qt(),n=e.Gd(this.yt);e.xd(n,t)}getStretchFactor(){return this.yt.E_()}setStretchFactor(t){this.yt.A_(t),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(t){const e=this.paneIndex();e!==t&&(Ve(t>=0&&t<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(e,t))}getSeries(){return this.yt.F_().map((t=>this.xM(t)))??[]}getHTMLElement(){const t=this.Yp.Zp();return t&&t.length!==0&&t[this.paneIndex()]?t[this.paneIndex()].iv():null}attachPrimitive(t){this.yt.nl(t),t.attached&&t.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(t){this.yt.el(t)}priceScale(t){if(this.yt.V_(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new Tx(this.Yp,t,this.paneIndex())}setPreserveEmptyPane(t){this.yt.O_(t)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(t,e={},n=0){return this.CM.addCustomSeries(t,e,n)}addSeries(t,e={}){return this.CM.addSeries(t,e,this.paneIndex())}}const kT={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class yy{constructor(t){this.hr=t}applyOptions(t){this.hr.cr(t)}options(){return this.hr.N()}yM(){return this.hr}}class zT{constructor(t,e,n,a,l,u){this.kM=new we,this.ee=t,this.PM=e,this.TM=n,this.cu=l,this.CM=a,this.RM=u}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Nt(t,e.Wt)}coordinateToPrice(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Ds(t,e.Wt)}barsInLogicalRange(t){if(t===null)return null;const e=new Hs(new Us(t.from,t.to)).Ru(),n=this.ee.qs();if(n.Gi())return null;const a=n.$s(e.Aa(),1),l=n.$s(e.bi(),-1),u=mt(n.kh()),h=mt(n.sn());if(a!==null&&l!==null&&a.js>l.js)return{barsBefore:t.from-u,barsAfter:h-t.to};const f={barsBefore:a===null||a.js===u?t.from-u:a.js-u,barsAfter:l===null||l.js===h?h-t.to:h-l.js};return a!==null&&l!==null&&(f.from=a.Gr,f.to=l.Gr),f}setData(t){this.cu,this.ee.wh(),this.PM.DM(this.ee,t),this.IM("full")}update(t,e=!1){this.ee.wh(),this.PM.VM(this.ee,t,e),this.IM("update")}pop(t=1){const e=this.PM.BM(this.ee,t);e.length!==0&&this.IM("update");const n=ru(this.seriesType());return e.map((a=>n(a)))}dataByIndex(t,e){const n=this.ee.qs().$s(t,e);return n===null?null:ru(this.seriesType())(n)}data(){const t=ru(this.seriesType());return this.ee.qs().Dh().map((e=>t(e)))}subscribeDataChanged(t){this.kM.i(t)}unsubscribeDataChanged(t){this.kM._(t)}applyOptions(t){this.ee.cr(t)}options(){return wn(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(t){const e=bi(wn(kT),t),n=this.ee.Da(e);return new yy(n)}removePriceLine(t){this.ee.Ia(t.yM())}priceLines(){return this.ee.Va().map((t=>new yy(t)))}seriesType(){return this.ee.wh()}lastValueData(t){const e=this.ee.Ve(t);return e.Be?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.ee.nl(t),t.attached&&t.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(t){this.ee.el(t),t.detached&&t.detached(),this.ee.Qt().Ca()}getPane(){const t=this.ee,e=mt(this.ee.Qt().Kn(t));return this.RM(e)}moveToPane(t){this.ee.Qt().jd(this.ee,t)}seriesOrder(){const t=this.ee.Qt().Kn(this.ee);return t===null?-1:t.F_().indexOf(this.ee)}setSeriesOrder(t){const e=this.ee.Qt().Kn(this.ee);e!==null&&e.su(this.ee,t)}IM(t){this.kM.v()&&this.kM.p(t)}}class jT{constructor(t,e,n){this.EM=new we,this.Nu=new we,this.xw=new we,this.ns=t,this.Jh=t.Et(),this.tg=e,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=n}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(t,e){e?this.Jh.Bc(t,1e3):this.ns.Mn(t)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const t=this.Jh.lc();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.cu.convertHorzItemToInternal(t.from),to:this.cu.convertHorzItemToInternal(t.to)},n=this.Jh.cc(e);this.ns.$d(n)}getVisibleLogicalRange(){const t=this.Jh.ac();return t===null?null:{from:t.Aa(),to:t.bi()}}setVisibleLogicalRange(t){Ve(t.from<=t.to,"The from index cannot be after the to index."),this.ns.$d(t)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(t){const e=this.ns.Et();return e.Gi()?null:e.qt(t)}coordinateToLogical(t){return this.Jh.Gi()?null:this.Jh.wc(t)}timeToIndex(t,e){const n=this.cu.convertHorzItemToInternal(t);return this.Jh.ec(n,e)}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return e===null?null:this.Jh.qt(e)}coordinateToTime(t){const e=this.ns.Et(),n=e.wc(t),a=e.es(n);return a===null?null:a.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(t){this.EM.i(t)}unsubscribeVisibleTimeRangeChange(t){this.EM._(t)}subscribeVisibleLogicalRangeChange(t){this.Nu.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.Nu._(t)}subscribeSizeChange(t){this.xw.i(t)}unsubscribeSizeChange(t){this.xw._(t)}applyOptions(t){this.Jh.cr(t)}options(){return{...wn(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(t){this.xw.p(t.width,t.height)}}function by(r){return(function(t){if(Vo(t.handleScale)){const n=t.handleScale;t.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:a}=t.handleScale;Vo(n)&&(t.handleScale.axisPressedMouseMove={time:n,price:n}),Vo(a)&&(t.handleScale.axisDoubleClickReset={time:a,price:a})}const e=t.handleScroll;Vo(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(r),r}class LT{constructor(t,e,n){this.OM=new Map,this.NM=new Map,this.FM=new we,this.WM=new we,this.HM=new we,this.Xc=new WeakMap,this.UM=new pT(e);const a=n===void 0?wn(gy()):bi(wn(gy()),by(n));this.$M=e,this.Yp=new lT(t,a,e),this.Yp.nw().i((u=>{this.FM.v()&&this.FM.p(this.qM(u()))}),this),this.Yp.ew().i((u=>{this.WM.v()&&this.WM.p(this.qM(u()))}),this),this.Yp.Md().i((u=>{this.HM.v()&&this.HM.p(this.qM(u()))}),this);const l=this.Yp.Qt();this.jM=new jT(l,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(t,e,n){this.autoSizeActive()||this.Yp.sg(t,e,n)}addCustomSeries(t,e={},n=0){const a=(l=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...ST,...l.defaultOptions()},YM:_T,KM:l}))(sr(t));return this.ZM(a,e,n)}addSeries(t,e={},n=0){return this.ZM(t,e,n)}removeSeries(t){const e=ci(this.OM.get(t)),n=this.UM.Hd(e);this.Yp.Qt().Hd(e),this.GM(n),this.OM.delete(t),this.NM.delete(e)}DM(t,e){this.GM(this.UM.Ug(t,e))}VM(t,e,n){this.GM(this.UM.Zg(t,e,n))}BM(t,e){const[n,a]=this.UM.Jg(t,e);return n.length!==0&&this.GM(a),n}subscribeClick(t){this.FM.i(t)}unsubscribeClick(t){this.FM._(t)}subscribeCrosshairMove(t){this.HM.i(t)}unsubscribeCrosshairMove(t){this.HM._(t)}subscribeDblClick(t){this.WM.i(t)}unsubscribeDblClick(t){this.WM._(t)}priceScale(t,e=0){return new Tx(this.Yp,t,e)}timeScale(){return this.jM}applyOptions(t){this.Yp.cr(by(t))}options(){return this.Yp.N()}takeScreenshot(t=!1,e=!1){let n,a;try{e||(n=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),a=this.Yp.ug(t)}finally{e||n===void 0||this.Yp.Qt().cr({crosshair:{mode:n}})}return a}addPane(t=!1){const e=this.Yp.Qt().Xd();return e.O_(t),this.XM(e)}removePane(t){this.Yp.Qt().Sd(t)}swapPanes(t,e){this.Yp.Qt().Cd(t,e)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map((t=>this.XM(t)))}paneSize(t=0){const e=this.Yp.gg(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,n){const a=this.OM.get(n);if(a===void 0)return;const l=this.Yp.Qt().Kn(a);l!==null&&this.Yp.Qt().Ld(t,e,l)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(t,e={},n=0){Ve(t.YM!==void 0),(function(f){if(f===void 0||f.type==="custom")return;const d=f;d.minMove!==void 0&&d.precision===void 0&&(d.precision=_x(d.minMove))})(e.priceFormat),t.type==="Candlestick"&&(function(f){f.borderColor!==void 0&&(f.borderUpColor=f.borderColor,f.borderDownColor=f.borderColor),f.wickColor!==void 0&&(f.wickUpColor=f.wickColor,f.wickDownColor=f.wickColor)})(e);const a=bi(wn(ax),wn(t.defaultOptions),e),l=t.YM,u=new Uu(this.Yp.Qt(),t.type,a,l,t.KM);this.Yp.Qt().Fd(u,n);const h=new zT(u,this,this,this,this.$M,(f=>this.XM(f)));return this.OM.set(h,u),this.NM.set(u,h),h}GM(t){const e=this.Yp.Qt();e.Od(t.Et.vc,t.Et.sM,t.Et.nM),t.F_.forEach(((n,a)=>a.ht(n.le,n.iM))),e.Et().Ju(),e.Sc()}JM(t){return ci(this.NM.get(t))}qM(t){const e=new Map;t.Vg.forEach(((a,l)=>{const u=l.wh(),h=ru(u)(a);if(u!=="Custom")Ve(uT(h));else{const f=l.hl();Ve(!f||f(h)===!1)}e.set(this.JM(l),h)}));const n=t.Ig!==void 0&&this.NM.has(t.Ig)?this.JM(t.Ig):void 0;return{time:t.Gr,logical:t.js,point:t.Rg,paneIndex:t.Dg,hoveredSeries:n,hoveredObjectId:t.Bg,seriesData:e,sourceEvent:t.Eg}}XM(t){let e=this.Xc.get(t);return e||(e=new OT(this.Yp,(n=>this.JM(n)),t,this),this.Xc.set(t,e)),e}}function BT(r){if(Sl(r)){const t=document.getElementById(r);return Ve(t!==null,`Cannot find element in DOM with id=${r}`),t}return r}function FT(r,t,e){const n=BT(r),a=new LT(n,t,e);return t.setOptions(a.options()),a}function Ax(r,t){return FT(r,new iy,iy.pf(t))}class Dd extends Ad{constructor(t,e){super(t,e,!0)}mM(t,e,n){e.mc(this.aM,cl(this.lM)),t.Yo(this.aM,n,cl(this.lM))}QM(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>{let n;if((e.jr??1)>1){const a=e.Wt[1],l=e.Wt[2],u=e.Wt[3];n=Math.abs(a-u)>Math.abs(l-u)?a:l}else n=e.Wt[3];return this.tb(e.js,n,t)}))}}function Rx(r,t,e,n,a,l,u){if(t.length===0||n.from>=t.length||n.to<=0)return;const{context:h,horizontalPixelRatio:f,verticalPixelRatio:d}=r,v=t[n.from];let m=l(r,v),y=v;if(n.to-n.from<2){const x=a/2;h.beginPath();const b={_t:v._t-x,ut:v.ut},S={_t:v._t+x,ut:v.ut};h.moveTo(b._t*f,b.ut*d),h.lineTo(S._t*f,S.ut*d),u(r,m,b,S)}else{const x=(S,_)=>{u(r,m,y,_),h.beginPath(),m=S,y=_};let b=y;h.beginPath(),h.moveTo(v._t*f,v.ut*d);for(let S=n.from+1;S<n.to;++S){b=t[S];const _=l(r,b);switch(e){case 0:h.lineTo(b._t*f,b.ut*d);break;case 1:h.lineTo(b._t*f,t[S-1].ut*d),_!==m&&(x(_,b),h.lineTo(b._t*f,t[S-1].ut*d)),h.lineTo(b._t*f,b.ut*d);break;case 2:{const[C,A]=PT(t,S-1,S);h.bezierCurveTo(C._t*f,C.ut*d,A._t*f,A.ut*d,b._t*f,b.ut*d);break}}e!==1&&_!==m&&(x(_,b),h.moveTo(b._t*f,b.ut*d))}(y!==b||y===b&&e===1)&&u(r,m,y,b)}}const xy=6;function Ff(r,t){return{_t:r._t-t._t,ut:r.ut-t.ut}}function Sy(r,t){return{_t:r._t/t,ut:r.ut/t}}function PT(r,t,e){const n=Math.max(0,t-1),a=Math.min(r.length-1,e+1);var l,u;return[(l=r[t],u=Sy(Ff(r[e],r[n]),xy),{_t:l._t+u._t,ut:l.ut+u.ut}),Ff(r[e],Sy(Ff(r[a],r[t]),xy))]}function IT(r,t){const e=r.context;e.strokeStyle=t,e.stroke()}class VT extends Dn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:n,ib:a,sb:l,ct:u,Zt:h,nb:f}=this.rt;if(n===null)return;const d=t.context;d.lineCap="butt",d.lineWidth=u*t.verticalPixelRatio,ur(d,h),d.lineJoin="round";const v=this.eb.bind(this);l!==void 0&&Rx(t,e,l,n,a,v,IT),f&&(function(m,y,x,b,S){if(b.to-b.from<=0)return;const{horizontalPixelRatio:_,verticalPixelRatio:C,context:A}=m;let T=null;const D=Math.max(1,Math.floor(_))%2/2,M=x*C+D;for(let j=b.to-1;j>=b.from;--j){const N=y[j];if(N){const V=S(m,N);V!==T&&(A.beginPath(),T!==null&&A.fill(),A.fillStyle=V,T=V);const B=Math.round(N._t*_)+D,I=N.ut*C;A.moveTo(B,I),A.arc(B,I,M,0,2*Math.PI)}}A.fill()})(t,e,f,n,v)}}class Dx extends VT{eb(t,e){return e.vt}}class UT extends Dd{constructor(){super(...arguments),this.cM=new Dx}tb(t,e,n){return{...this.QM(t,e),...n.gh(t)}}wM(){const t=this.ee.N(),e={ot:this.aM,Zt:t.lineStyle,sb:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(e)}}const mu={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(r,t)=>new UT(r,t)};function HT(r,t,e,n,a){const{context:l,horizontalPixelRatio:u,verticalPixelRatio:h}=t;l.lineTo(a._t*u,r*h),l.lineTo(n._t*u,r*h),l.closePath(),l.fillStyle=e,l.fill()}class YT extends Dn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:n,ib:a,ct:l,Zt:u,sb:h}=this.rt,f=this.rt.ub??(this.rt.cb?0:t.mediaSize.height);if(n===null)return;const d=t.context;d.lineCap="butt",d.lineJoin="round",d.lineWidth=l,ur(d,u),d.lineWidth=1,Rx(t,e,h,n,a,this.fb.bind(this),HT.bind(null,f))}}class WT{pb(t,e){const n=this.mb,{wb:a,gb:l,Mb:u,bb:h,ub:f,Sb:d,xb:v}=e;if(this.Cb===void 0||n===void 0||n.wb!==a||n.gb!==l||n.Mb!==u||n.bb!==h||n.ub!==f||n.Sb!==d||n.xb!==v){const{verticalPixelRatio:m}=t,y=f||d>0?m:1,x=d*y,b=v===t.bitmapSize.height?v:v*y,S=(f??0)*y,_=t.context.createLinearGradient(0,x,0,b);if(_.addColorStop(0,a),f!=null){const C=Vs((S-x)/(b-x),0,1);_.addColorStop(C,l),_.addColorStop(C,u)}_.addColorStop(1,h),this.Cb=_,this.mb=e}return this.Cb}}class qT extends YT{constructor(){super(...arguments),this.yb=new WT}fb(t,e){return this.yb.pb(t,{wb:e.eh,gb:"",Mb:"",bb:e.rh,Sb:this.rt?.Sb??0,xb:t.bitmapSize.height})}}class XT extends Dd{constructor(t,e){super(t,e),this.cM=new ux,this.Rb=new qT,this.Db=new Dx,this.cM.st([this.Rb,this.Db])}tb(t,e,n){return{...this.QM(t,e),...n.gh(t)}}wM(){const t=this.ee.N();if(this.lM===null||this.aM.length===0)return;let e;if(t.relativeGradient){e=this.aM[this.lM.from].ut;for(let n=this.lM.from;n<this.lM.to;n++){const a=this.aM[n];a.ut<e&&(e=a.ut)}}this.Rb.ht({sb:t.lineType,ot:this.aM,Zt:t.lineStyle,ct:t.lineWidth,ub:null,Sb:e,cb:t.invertFilledArea,lt:this.lM,ib:this.re.Et().ul()}),this.Db.ht({sb:t.lineVisible?t.lineType:void 0,ot:this.aM,Zt:t.lineStyle,ct:t.lineWidth,lt:this.lM,ib:this.re.Et().ul(),nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}const Nx={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(r,t)=>new XT(r,t)};class GT extends Ad{constructor(t,e){super(t,e,!1)}mM(t,e,n){e.mc(this.aM,cl(this.lM)),t.Zo(this.aM,n,cl(this.lM))}Lb(t,e,n){return{wt:t,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>this.tb(e.js,e,t)))}}class KT extends Dn{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(t){this.jt=t}et(t){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:e}=t;this.Ib=(function(l,u){if(l>=2.5&&l<=4)return Math.floor(3*u);const h=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),f=Math.floor(l*h*u),d=Math.floor(l*u),v=Math.min(f,d);return Math.max(Math.floor(u),v)})(this.jt.ul,e),this.Ib>=2&&Math.floor(e)%2!=this.Ib%2&&this.Ib--;const n=this.jt.qs;this.jt.zb&&this.Ob(t,n,this.jt.lt),this.jt.Mi&&this.gm(t,n,this.jt.lt);const a=this.Nb(e);(!this.jt.Mi||this.Ib>2*a)&&this.Fb(t,n,this.jt.lt)}Ob(t,e,n){if(this.jt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let h="",f=Math.min(Math.floor(l),Math.floor(this.jt.ul*l));f=Math.max(Math.floor(l),Math.min(f,this.Ib));const d=Math.floor(.5*f);let v=null;for(let m=n.from;m<n.to;m++){const y=e[m];y.sh!==h&&(a.fillStyle=y.sh,h=y.sh);const x=Math.round(Math.min(y.Go,y.Qo)*u),b=Math.round(Math.max(y.Go,y.Qo)*u),S=Math.round(y.Xo*u),_=Math.round(y.Jo*u);let C=Math.round(l*y._t)-d;const A=C+f-1;v!==null&&(C=Math.max(v+1,C),C=Math.min(C,A));const T=A-C+1;a.fillRect(C,S,T,x-S),a.fillRect(C,b+1,T,_-b),v=A}}Nb(t){let e=Math.floor(1*t);this.Ib<=2*e&&(e=Math.floor(.5*(this.Ib-1)));const n=Math.max(Math.floor(t),e);return this.Ib<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n}gm(t,e,n){if(this.jt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let h="";const f=this.Nb(l);let d=null;for(let v=n.from;v<n.to;v++){const m=e[v];m.ih!==h&&(a.fillStyle=m.ih,h=m.ih);let y=Math.round(m._t*l)-Math.floor(.5*this.Ib);const x=y+this.Ib-1,b=Math.round(Math.min(m.Go,m.Qo)*u),S=Math.round(Math.max(m.Go,m.Qo)*u);if(d!==null&&(y=Math.max(d+1,y),y=Math.min(y,x)),this.jt.ul*l>2*f)KM(a,y,b,x-y+1,S-b+1,f);else{const _=x-y+1;a.fillRect(y,b,_,S-b+1)}d=x}}Fb(t,e,n){if(this.jt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let h="";const f=this.Nb(l);for(let d=n.from;d<n.to;d++){const v=e[d];let m=Math.round(Math.min(v.Go,v.Qo)*u),y=Math.round(Math.max(v.Go,v.Qo)*u),x=Math.round(v._t*l)-Math.floor(.5*this.Ib),b=x+this.Ib-1;if(v.th!==h){const S=v.th;a.fillStyle=S,h=S}this.jt.Mi&&(x+=f,m+=f,b-=f,y-=f),m>y||a.fillRect(x,m,b-x+1,y-m+1)}}}class QT extends GT{constructor(){super(...arguments),this.cM=new KT}tb(t,e,n){return{...this.Lb(t,e,n),...n.gh(t)}}wM(){const t=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:t.wickVisible,Mi:t.borderVisible,lt:this.lM})}}const Ox={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(r,t)=>new QT(r,t)};class $T extends Dn{constructor(){super(...arguments),this.jt=null,this.Wb=[]}ht(t){this.jt=t,this.Wb=[]}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return;this.Wb.length||this.Hb(e);const a=Math.max(1,Math.floor(n)),l=Math.round(this.jt.Ub*n)-Math.floor(a/2),u=l+a;for(let h=this.jt.lt.from;h<this.jt.lt.to;h++){const f=this.jt.ot[h],d=this.Wb[h-this.jt.lt.from],v=Math.round(f.ut*n);let m,y;t.fillStyle=f.th,v<=l?(m=v,y=u):(m=l,y=v-Math.floor(a/2)+a),t.fillRect(d.Aa,m,d.bi-d.Aa+1,y-m)}}Hb(t){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return void(this.Wb=[]);const e=Math.ceil(this.jt.ul*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.jt.ul*t)-e;this.Wb=new Array(this.jt.lt.to-this.jt.lt.from);for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const u=this.jt.ot[l],h=Math.round(u._t*t);let f,d;if(n%2){const v=(n-1)/2;f=h-v,d=h+v}else{const v=n/2;f=h-v,d=h+v-1}this.Wb[l-this.jt.lt.from]={Aa:f,bi:d,$b:h,oe:u._t*t,wt:u.wt}}for(let l=this.jt.lt.from+1;l<this.jt.lt.to;l++){const u=this.Wb[l-this.jt.lt.from],h=this.Wb[l-this.jt.lt.from-1];u.wt===h.wt+1&&u.Aa-h.bi!==e+1&&(h.$b>h.oe?h.bi=u.Aa-e-1:u.Aa=h.bi+e+1)}let a=Math.ceil(this.jt.ul*t);for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const u=this.Wb[l-this.jt.lt.from];u.bi<u.Aa&&(u.bi=u.Aa);const h=u.bi-u.Aa+1;a=Math.min(h,a)}if(e>0&&a<4)for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const u=this.Wb[l-this.jt.lt.from];u.bi-u.Aa+1>a&&(u.$b>u.oe?u.bi-=1:u.Aa+=1)}}}class ZT extends Dd{constructor(){super(...arguments),this.cM=new $T}tb(t,e,n){return{...this.QM(t,e),...n.gh(t)}}wM(){const t={ot:this.aM,ul:this.re.Et().ul(),lt:this.lM,Ub:this.ee.Ft().Nt(this.ee.N().base,mt(this.ee.Lt()).Wt)};this.cM.ht(t)}}const kx={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},YM:(r,t)=>new ZT(r,t)};class JT{constructor(t,e){this.yt=t,this.qb=e,this.jb()}detach(){this.yt.detachPrimitive(this.qb)}getPane(){return this.yt}applyOptions(t){this.qb.cr?.(t)}jb(){this.yt.attachPrimitive(this.qb)}}const tA={alpha:1,padding:0};class eA{constructor(t){this.jt=t}draw(t){t.useMediaCoordinateSpace((e=>{const n=e.context,a=this.Qb(this.jt,e.mediaSize);a&&this.jt.tS&&(n.globalAlpha=this.jt.alpha??1,n.drawImage(this.jt.tS,a._t,a.ut,a.ss,a.$t))}))}Qb(t,e){const{maxHeight:n,maxWidth:a,iS:l,sS:u,padding:h}=t,f=Math.round(e.width/2),d=Math.round(e.height/2),v=h??0;let m=e.width-2*v,y=e.height-2*v;n&&(y=Math.min(y,n)),a&&(m=Math.min(m,a));const x=m/u,b=y/l,S=Math.min(x,b),_=u*S,C=l*S;return{_t:f-.5*_,ut:d-.5*C,$t:C,ss:_}}}class iA{constructor(t){this.nS=null,this.eS=0,this.rS=0,this.Ps=t,this.M=_y(this.Ps,this.nS,this.eS,this.rS)}hS(t){t.aS!==void 0&&(this.eS=t.aS),t.lS!==void 0&&(this.rS=t.lS),t.oS!==void 0&&(this.nS=t.oS),this.kt()}_S(t){this.Ps=t,this.kt()}zOrder(){return"bottom"}kt(){this.M=_y(this.Ps,this.nS,this.eS,this.rS)}renderer(){return new eA(this.M)}}function _y(r,t,e,n){return{...r,tS:t,sS:e,iS:n}}function wy(r){return{...tA,...r}}class nA{constructor(t,e){this.uS=null,this.cS=t,this.Ps=wy(e),this.Xb=[new iA(this.Ps)]}updateAllViews(){this.Xb.forEach((t=>t.kt()))}paneViews(){return this.Xb}attached(t){const{requestUpdate:e}=t;this.dS=e,this.uS=new Image,this.uS.onload=()=>{const n=this.uS?.naturalHeight??1,a=this.uS?.naturalWidth??1;this.Xb.forEach((l=>l.hS({lS:n,aS:a,oS:this.uS}))),this.dS&&this.dS()},this.uS.src=this.cS}detached(){this.dS=void 0,this.uS=null}cr(t){this.Ps=wy({...this.Ps,...t}),this.fS(),this.Jb&&this.Jb()}Jb(){this.dS&&this.dS()}fS(){this.Xb.forEach((t=>t._S(this.Ps)))}}function zx(r,t,e){return new JT(r,new nA(t,e))}class rA{constructor(t,e){this.ee=t,this.Zh=e,this.jb()}detach(){this.ee.detachPrimitive(this.Zh)}getSeries(){return this.ee}applyOptions(t){this.Zh&&this.Zh.cr&&this.Zh.cr(t)}jb(){this.ee.attachPrimitive(this.Zh)}}const sA={autoScale:!0,zOrder:"normal"};function ll(r,t){return Ed(Math.min(Math.max(r,12),30)*t)}function Gs(r,t){switch(r){case"arrowDown":case"arrowUp":return ll(t,1);case"circle":return ll(t,.8);case"square":return ll(t,.7)}}function jx(r){return(function(t){const e=Math.ceil(t);return e%2!=0?e-1:e})(ll(r,1))}function Lx(r){return Math.max(ll(r,.1),3)}function Ey(r,t,e){return t?r:e?Math.ceil(r/2):0}function Cy(r,t,e,n){const a=(Gs("arrowUp",n)-1)/2*e.pS,l=(Ed(n/2)-1)/2*e.pS;t.beginPath(),r?(t.moveTo(e._t-a,e.ut),t.lineTo(e._t,e.ut-a),t.lineTo(e._t+a,e.ut),t.lineTo(e._t+l,e.ut),t.lineTo(e._t+l,e.ut+a),t.lineTo(e._t-l,e.ut+a),t.lineTo(e._t-l,e.ut)):(t.moveTo(e._t-a,e.ut),t.lineTo(e._t,e.ut+a),t.lineTo(e._t+a,e.ut),t.lineTo(e._t+l,e.ut),t.lineTo(e._t+l,e.ut-a),t.lineTo(e._t-l,e.ut-a),t.lineTo(e._t-l,e.ut)),t.fill()}function My(r,t,e,n,a,l){const u=(Gs("arrowUp",n)-1)/2,h=(Ed(n/2)-1)/2;return a>=t-h-2&&a<=t+h+2&&l>=(r?e:e-u)-2&&l<=(r?e+u:e)+2?!0:(()=>{if(a<t-u-3||a>t+u+3||l<(r?e-u-3:e)||l>(r?e:e+u+3))return!1;const f=Math.abs(a-t);return Math.abs(l-e)+3>=f/2})()}class aA{constructor(){this.jt=null,this.$n=new fl,this.F=-1,this.W="",this.jv="",this.vS="normal"}ht(t){this.jt=t}qn(t,e,n){this.F===t&&this.W===e||(this.F=t,this.W=e,this.jv=hl(t,e),this.$n.On()),this.vS=n}Qn(t,e){if(this.jt===null||this.jt.lt===null)return null;for(let n=this.jt.lt.from;n<this.jt.lt.to;n++){const a=this.jt.ot[n];if(a&&oA(a,t,e))return{zOrder:"normal",externalId:a.te??""}}return null}draw(t){this.vS!=="aboveSeries"&&t.useBitmapCoordinateSpace((e=>{this.et(e)}))}drawBackground(t){this.vS==="aboveSeries"&&t.useBitmapCoordinateSpace((e=>{this.et(e)}))}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.jt!==null&&this.jt.lt!==null){t.textBaseline="middle",t.font=this.jv;for(let a=this.jt.lt.from;a<this.jt.lt.to;a++){const l=this.jt.ot[a];l.ri!==void 0&&(l.ri.ss=this.$n.Ii(t,l.ri.mS),l.ri.$t=this.F,l.ri._t=l._t-l.ri.ss/2),lA(l,t,e,n)}}}}function lA(r,t,e,n){t.fillStyle=r.R,r.ri!==void 0&&(function(a,l,u,h,f,d){a.save(),a.scale(f,d),a.fillText(l,u,h),a.restore()})(t,r.ri.mS,r.ri._t,r.ri.ut,e,n),(function(a,l,u){if(a.yh!==0){switch(a.wS){case"arrowDown":return void Cy(!1,l,u,a.yh);case"arrowUp":return void Cy(!0,l,u,a.yh);case"circle":return void(function(h,f,d){const v=(Gs("circle",d)-1)/2;h.beginPath(),h.arc(f._t,f.ut,v*f.pS,0,2*Math.PI,!1),h.fill()})(l,u,a.yh);case"square":return void(function(h,f,d){const v=Gs("square",d),m=(v-1)*f.pS/2,y=f._t-m,x=f.ut-m;h.fillRect(y,x,v*f.pS,v*f.pS)})(l,u,a.yh)}a.wS}})(r,t,(function(a,l,u){const h=Math.max(1,Math.floor(l))%2/2;return{_t:Math.round(a._t*l)+h,ut:a.ut*u,pS:l}})(r,e,n))}function oA(r,t,e){return!(r.ri===void 0||!(function(n,a,l,u,h,f){const d=u/2;return h>=n&&h<=n+l&&f>=a-d&&f<=a+d})(r.ri._t,r.ri.ut,r.ri.ss,r.ri.$t,t,e))||(function(n,a,l){if(n.yh===0)return!1;switch(n.wS){case"arrowDown":return My(!0,n._t,n.ut,n.yh,a,l);case"arrowUp":return My(!1,n._t,n.ut,n.yh,a,l);case"circle":return(function(u,h,f,d,v){const m=2+Gs("circle",f)/2,y=u-d,x=h-v;return Math.sqrt(y*y+x*x)<=m})(n._t,n.ut,n.yh,a,l);case"square":return(function(u,h,f,d,v){const m=Gs("square",f),y=(m-1)/2,x=u-y,b=h-y;return d>=x&&d<=x+m&&v>=b&&v<=b+m})(n._t,n.ut,n.yh,a,l)}})(r,t,e)}function Ty(r){return r==="atPriceTop"||r==="atPriceBottom"||r==="atPriceMiddle"}function uA(r,t,e,n,a,l,u,h){const f=(function(b,S,_){if(Ty(S.position)&&S.price!==void 0)return S.price;if("value"in(C=b)&&typeof C.value=="number")return b.value;var C;if((function(A){return"open"in A&&"high"in A&&"low"in A&&"close"in A})(b)){if(S.position==="inBar")return b.close;if(S.position==="aboveBar")return _?b.low:b.high;if(S.position==="belowBar")return _?b.high:b.low}})(e,t,u.priceScale().options().invertScale);if(f===void 0)return;const d=Ty(t.position),v=h.timeScale(),m=Ir(t.size)?Math.max(t.size,0):1,y=jx(v.options().barSpacing)*m,x=y/2;switch(r.yh=y,t.position){case"inBar":case"atPriceMiddle":return r.ut=mt(u.priceToCoordinate(f)),void(r.ri!==void 0&&(r.ri.ut=r.ut+x+l+.6*a));case"aboveBar":case"atPriceTop":{const b=d?0:n.gS;return r.ut=mt(u.priceToCoordinate(f))-x-b,r.ri!==void 0&&(r.ri.ut=r.ut-x-.6*a,n.gS+=1.2*a),void(d||(n.gS+=y+l))}case"belowBar":case"atPriceBottom":{const b=d?0:n.MS;return r.ut=mt(u.priceToCoordinate(f))+x+b,r.ri!==void 0&&(r.ri.ut=r.ut+x+l+.6*a,n.MS+=1.2*a),void(d||(n.MS+=y+l))}}}class cA{constructor(t,e,n){this.bS=[],this.xt=!0,this.SS=!0,this.Xt=new aA,this.ye=t,this.Lv=e,this.jt={ot:[],lt:null},this.Ps=n}renderer(){if(!this.ye.options().visible)return null;this.xt&&this.xS();const t=this.Lv.options().layout;return this.Xt.qn(t.fontSize,t.fontFamily,this.Ps.zOrder),this.Xt.ht(this.jt),this.Xt}CS(t){this.bS=t,this.kt("data")}kt(t){this.xt=!0,t==="data"&&(this.SS=!0)}yS(t){this.xt=!0,this.Ps=t}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}xS(){const t=this.Lv.timeScale(),e=this.bS;this.SS&&(this.jt.ot=e.map((d=>({wt:d.time,_t:0,ut:0,yh:0,wS:d.shape,R:d.color,te:d.id,kS:d.kS,ri:void 0}))),this.SS=!1);const n=this.Lv.options().layout;this.jt.lt=null;const a=t.getVisibleLogicalRange();if(a===null)return;const l=new Us(Math.floor(a.from),Math.ceil(a.to));if(this.ye.data()[0]===null||this.jt.ot.length===0)return;let u=NaN;const h=Lx(t.options().barSpacing),f={gS:h,MS:h};this.jt.lt=Cx(this.jt.ot,l,!0);for(let d=this.jt.lt.from;d<this.jt.lt.to;d++){const v=e[d];v.time!==u&&(f.gS=h,f.MS=h,u=v.time);const m=this.jt.ot[d];m._t=mt(t.logicalToCoordinate(v.time)),v.text!==void 0&&v.text.length>0&&(m.ri={mS:v.text,_t:0,ut:0,ss:0,$t:0});const y=this.ye.dataByIndex(v.time,0);y!==null&&uA(m,v,y,f,n.fontSize,h,this.ye,this.Lv)}this.xt=!1}}function Ay(r){return{...sA,...r}}class hA{constructor(t){this.$h=null,this.bS=[],this.PS=[],this.TS=null,this.ye=null,this.Lv=null,this.RS=!0,this.DS=null,this.IS=null,this.VS=null,this.BS=!0,this.Ps=Ay(t)}attached(t){this.ES(),this.Lv=t.chart,this.ye=t.series,this.$h=new cA(this.ye,mt(this.Lv),this.Ps),this.dS=t.requestUpdate,this.ye.subscribeDataChanged((e=>this.IM(e))),this.BS=!0,this.Jb()}Jb(){this.dS&&this.dS()}detached(){this.ye&&this.TS&&this.ye.unsubscribeDataChanged(this.TS),this.Lv=null,this.ye=null,this.$h=null,this.TS=null}CS(t){this.BS=!0,this.bS=t,this.ES(),this.RS=!0,this.IS=null,this.Jb()}AS(){return this.bS}paneViews(){return this.$h?[this.$h]:[]}updateAllViews(){this.LS()}hitTest(t,e){return this.$h?this.$h.renderer()?.Qn(t,e)??null:null}autoscaleInfo(t,e){if(this.Ps.autoScale&&this.$h){const n=this.zS();if(n)return{priceRange:null,margins:n}}return null}cr(t){this.Ps=Ay({...this.Ps,...t}),this.Jb&&this.Jb()}zS(){const t=mt(this.Lv).timeScale().options().barSpacing;if(this.RS||t!==this.VS){if(this.VS=t,this.bS.length>0){const e=Lx(t),n=1.5*jx(t)+2*e,a=this.OS();this.DS={above:Ey(n,a.aboveBar,a.inBar),below:Ey(n,a.belowBar,a.inBar)}}else this.DS=null;this.RS=!1}return this.DS}OS(){return this.IS===null&&(this.IS=this.bS.reduce(((t,e)=>(t[e.position]||(t[e.position]=!0),t)),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.IS}ES(){if(!this.BS||!this.Lv||!this.ye)return;const t=this.Lv.timeScale(),e=this.ye?.data();if(t.getVisibleLogicalRange()==null||!this.ye||e.length===0)return void(this.PS=[]);const n=t.timeToIndex(mt(e[0].time),!0);this.PS=this.bS.map(((a,l)=>{const u=t.timeToIndex(a.time,!0),h=u<n?1:-1,f=mt(this.ye).dataByIndex(u,h),d={time:t.timeToIndex(mt(f).time,!1),position:a.position,shape:a.shape,color:a.color,id:a.id,kS:l,text:a.text,size:a.size,price:a.price,Gr:a.time};if(a.position==="atPriceTop"||a.position==="atPriceBottom"||a.position==="atPriceMiddle"){if(a.price===void 0)throw new Error(`Price is required for position ${a.position}`);return{...d,position:a.position,price:a.price}}return{...d,position:a.position,price:a.price}})),this.BS=!1}LS(t){this.$h&&(this.ES(),this.$h.CS(this.PS),this.$h.yS(this.Ps),this.$h.kt(t))}IM(t){this.BS=!0,this.Jb()}}class fA extends rA{constructor(t,e,n){super(t,e),n&&this.setMarkers(n)}setMarkers(t){this.Zh.CS(t)}markers(){return this.Zh.AS()}}function Bx(r,t,e){const n=new fA(r,new hA({}));return t&&n.setMarkers(t),n}({...ax});const zs=[{period:5,color:"#FF6D00",label:"MA5"},{period:10,color:"#2196F3",label:"MA10"},{period:20,color:"#9C27B0",label:"MA20"},{period:30,color:"#00BCD4",label:"MA30"}],Ko=[{period:5,color:"#FF6D00",label:"VOL MA5"},{period:10,color:"#2196F3",label:"VOL MA10"}];function Ry({isFullscreen:r=!1}){const t=k.useRef(null),e=k.useRef(null),n=k.useRef(!1),a=k.useRef(null),l=k.useRef(null),u=k.useRef(new Map),h=k.useRef(new Map),f=Wt(rt=>rt.symbol),d=Wt(rt=>rt.interval),v=Yr(),[m,y]=k.useState(null),[x,b]=k.useState(null),[S,_]=k.useState(.2),C=k.useRef(!1),A=k.useRef(!1),T=k.useRef([]),D=k.useRef([]),M=k.useRef(null),j=k.useRef(!0),N=k.useRef(!1),V=k.useRef(null),B=k.useRef(null),I=k.useRef([]),W=d==="time",Z=W?"1m":d,it=k.useCallback(async()=>{if(n.current||!j.current||N.current||!M.current)return;N.current=!0;const rt=M.current-1;try{const O=await _e.getKlines(f,Z,500,rt);if(console.log(" API:",O?.length),!Array.isArray(O)||O.length===0){console.log(" "),j.current=!1;return}const L=[...O].reverse(),F=L.map(ut=>({time:Math.floor(ut[0]/1e3),open:parseFloat(String(ut[2])),high:parseFloat(String(ut[3])),low:parseFloat(String(ut[4])),close:parseFloat(String(ut[5]))})),q=L.map(ut=>{const dt=parseFloat(String(ut[5])),St=parseFloat(String(ut[2]));return{time:Math.floor(ut[0]/1e3),value:parseFloat(String(ut[6])),color:dt>=St?"#0ECB8166":"#F6465D66"}}),$=new Set(T.current.map(ut=>ut.time)),J=F.filter(ut=>!$.has(ut.time)),tt=q.filter(ut=>!$.has(ut.time));if(console.log(" :",F.length,", :",J.length,""),J.length===0){console.log(" "),j.current=!1;return}const vt=e.current?.timeScale().getVisibleLogicalRange(),pt=J.length;if(T.current=[...J,...T.current].sort((ut,dt)=>ut.time-dt.time).filter((ut,dt,St)=>dt===0||ut.time!==St[dt-1].time),D.current=[...tt,...D.current].sort((ut,dt)=>ut.time-dt.time).filter((ut,dt,St)=>dt===0||ut.time!==St[dt-1].time),T.current.length>0&&(M.current=T.current[0].time*1e3,console.log(" :",new Date(M.current).toLocaleString())),W){const ut=J.map(dt=>({time:dt.time,value:dt.close}));I.current=[...ut,...I.current].sort((dt,St)=>dt.time-St.time).filter((dt,St,yt)=>St===0||dt.time!==yt[St-1].time),B.current?.setData(I.current)}else a.current?.setData(T.current);l.current?.setData(D.current),vt&&pt>0&&e.current?.timeScale().setVisibleLogicalRange({from:vt.from+pt,to:vt.to+pt}),console.log(" :",F.length,":",T.current.length,"",W?"()":"")}catch(O){console.error(" :",O)}finally{N.current=!1}},[f,Z,W]),X=k.useCallback((rt,O)=>{const L=[];for(let F=0;F<rt.length;F++){if(F<O-1)continue;let q=0;for(let $=0;$<O;$++)q+=rt[F-$].close;L.push({time:rt[F].time,value:q/O})}return L},[]),ot=k.useCallback((rt,O)=>{const L=[];for(let F=0;F<rt.length;F++){if(F<O-1)continue;let q=0;for(let $=0;$<O;$++)q+=rt[F-$].value;L.push({time:rt[F].time,value:q/O})}return L},[]),z=k.useCallback(()=>{T.current.length!==0&&zs.forEach(({period:rt})=>{const O=u.current.get(rt);if(O){const L=X(T.current,rt);O.setData(L),O.applyOptions({visible:!0})}})},[X]),U=k.useCallback(()=>{D.current.length!==0&&Ko.forEach(({period:rt})=>{const O=h.current.get(rt);if(O){const L=ot(D.current,rt);O.setData(L),O.applyOptions({visible:!0})}})},[ot]),st=k.useCallback(()=>{if(n.current||!a.current||!e.current||T.current.length===0)return;if(V.current){try{V.current.detach()}catch{}V.current=null}const rt=e.current.timeScale().getVisibleRange();if(!rt)return;let O=-1/0,L=1/0,F=null,q=null;T.current.forEach(J=>{const tt=typeof J.time=="number"?J.time:J.time.timestamp||0,vt=typeof rt.from=="number"?rt.from:rt.from.timestamp||0,pt=typeof rt.to=="number"?rt.to:rt.to.timestamp||0;tt>=vt&&tt<=pt&&(J.high>O&&(O=J.high,F=J.time),J.low<L&&(L=J.low,q=J.time))});const $=[];F!==null&&O!==-1/0&&$.push({time:F,position:"aboveBar",color:"#089981",shape:"arrowDown",text:` ${O.toFixed(2)}`}),q!==null&&L!==1/0&&$.push({time:q,position:"belowBar",color:"#f23645",shape:"arrowUp",text:` ${L.toFixed(2)}`}),$.length>0&&(V.current=Bx(a.current,$))},[]);k.useEffect(()=>{const rt=t.current;if(!rt)return;n.current=!1,T.current=[],D.current=[],I.current=[],M.current=null,j.current=!0,N.current=!1,V.current=null;const O=Ax(rt,{layout:{background:{color:"#181a20"},textColor:"#d1d4dc"},grid:{vertLines:{color:"rgba(43, 49, 57, 0.5)"},horzLines:{color:"rgba(43, 49, 57, 0.5)"}},width:rt.clientWidth,height:rt.clientHeight,timeScale:{borderColor:"#2b3139",visible:!0,timeVisible:!0,secondsVisible:!1,barSpacing:16,minBarSpacing:8,rightOffset:5,fixLeftEdge:!1,fixRightEdge:!1,tickMarkMaxCharacterLength:10},localization:{timeFormatter:xt=>new Date(xt*1e3).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},rightPriceScale:{borderColor:"#2b3139",autoScale:!1,mode:0},leftPriceScale:{visible:!0,borderColor:"#2b3139",autoScale:!0},crosshair:{mode:1,vertLine:{labelBackgroundColor:"#2b3139"},horzLine:{labelBackgroundColor:"#2b3139"}},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0}});let L=null,F=null;W?(F=O.addSeries(Nx,{topColor:"rgba(33, 150, 243, 0.4)",bottomColor:"rgba(33, 150, 243, 0.0)",lineColor:"#2196F3",lineWidth:1,priceLineVisible:!0,lastValueVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}),F.priceScale().applyOptions({scaleMargins:{top:.02,bottom:S+.05}}),B.current=F):(L=O.addSeries(Ox,{upColor:"#0ECB81",downColor:"#F6465D",borderUpColor:"#0ECB81",borderDownColor:"#F6465D",wickUpColor:"#0ECB81",wickDownColor:"#F6465D",priceLineVisible:!0,lastValueVisible:!0,priceLineWidth:1,priceLineStyle:2}),L.priceScale().applyOptions({scaleMargins:{top:.02,bottom:S+.05}}));const q=O.addSeries(kx,{color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:"left"});q.priceScale().applyOptions({scaleMargins:{top:1-S+.02,bottom:0},visible:!1}),zs.forEach(({period:xt,color:Mt})=>{const zt=O.addSeries(mu,{color:Mt,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1});u.current.set(xt,zt)}),Ko.forEach(({period:xt,color:Mt})=>{const zt=O.addSeries(mu,{color:Mt,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,priceScaleId:"left"});h.current.set(xt,zt)}),e.current=O,a.current=L,l.current=q;const $=O.panes()[0];$&&zx($,"/watermark.svg",{alpha:.5,padding:v?10:20,maxWidth:v?150:300,maxHeight:v?75:150});let J=!1,tt=0,vt=null;const pt=xt=>{const Mt=t.current;if(!Mt)return;const zt=Mt.getBoundingClientRect(),gt=xt.clientX-zt.left,At=zt.width;if(gt>At-60){J=!0,tt=xt.clientY;const wt=T.current;if(wt.length>0){const Nt=wt.flatMap(Lt=>[Lt.high,Lt.low]);vt={from:Math.min(...Nt),to:Math.max(...Nt)}}xt.preventDefault()}},ut=xt=>{if(!J||!vt)return;const Mt=xt.clientY-tt,zt=t.current?.clientHeight||500,gt=vt.to-vt.from,At=Mt/zt*gt,wt=W?F:L;wt&&(wt.priceScale().applyOptions({autoScale:!1}),wt.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:vt.from+At,maxValue:vt.to+At}})}))},dt=()=>{J=!1,vt=null},St=xt=>{const Mt=t.current;if(!Mt)return;const zt=Mt.getBoundingClientRect(),gt=xt.clientX-zt.left,At=zt.width;if(gt>At-60){const wt=W?F:L;wt&&(wt.priceScale().applyOptions({autoScale:!0}),wt.applyOptions({autoscaleInfoProvider:void 0}))}};rt.addEventListener("mousedown",pt),rt.addEventListener("mousemove",ut),rt.addEventListener("mouseup",dt),rt.addEventListener("mouseleave",dt),rt.addEventListener("dblclick",St),O.subscribeCrosshairMove(xt=>{if(!xt.time||!xt.seriesData){C.current=!1;const wt=T.current;if(wt.length>0){const Nt=wt[wt.length-1],Lt=D.current[D.current.length-1],ae=X(wt,5),Qt=X(wt,10),me=X(wt,20),Xe=X(wt,30),ce=ot(D.current,5),ge=ot(D.current,10);y({time:new Date(Nt.time*1e3).toLocaleString(),open:Nt.open,high:Nt.high,low:Nt.low,close:Nt.close,volume:Lt?.value||0,change:Nt.close-Nt.open,changePercent:(Nt.close-Nt.open)/Nt.open*100,ma5:ae[ae.length-1]?.value,ma10:Qt[Qt.length-1]?.value,ma20:me[me.length-1]?.value,ma30:Xe[Xe.length-1]?.value,volMa5:ce[ce.length-1]?.value,volMa10:ge[ge.length-1]?.value}),b({volume:Lt?.value||0,volMa5:ce[ce.length-1]?.value,volMa10:ge[ge.length-1]?.value})}return}C.current=!0;const Mt=xt.seriesData.get(q);if(!(W?F:L))return;const gt=xt.time,At=T.current.find(wt=>wt.time===gt);if(At){const wt=u.current.get(5),Nt=u.current.get(10),Lt=u.current.get(20),ae=u.current.get(30),Qt=wt?xt.seriesData.get(wt):void 0,me=Nt?xt.seriesData.get(Nt):void 0,Xe=Lt?xt.seriesData.get(Lt):void 0,ce=ae?xt.seriesData.get(ae):void 0,ge=h.current.get(5),He=h.current.get(10),Ge=ge?xt.seriesData.get(ge):void 0,tn=He?xt.seriesData.get(He):void 0;y({time:new Date(gt*1e3).toLocaleString(),open:At.open,high:At.high,low:At.low,close:At.close,volume:Mt?.value||0,change:At.close-At.open,changePercent:(At.close-At.open)/At.open*100,ma5:Qt?.value,ma10:me?.value,ma20:Xe?.value,ma30:ce?.value,volMa5:Ge?.value,volMa10:tn?.value}),b({volume:Mt?.value||0,volMa5:Ge?.value,volMa10:tn?.value})}}),O.timeScale().subscribeVisibleTimeRangeChange(()=>{n.current||st()});const yt=()=>{t.current&&e.current&&e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight})},_t=new ResizeObserver(yt);if(_t.observe(rt),window.addEventListener("resize",yt),setTimeout(yt,100),T.current.length>0){W?F?.setData(I.current):L?.setData(T.current),q.setData(D.current),z(),U(),T.current.length>50?O.timeScale().fitContent():O.timeScale().scrollToRealTime();const xt=T.current[T.current.length-1],Mt=D.current[D.current.length-1],zt=X(T.current,5),gt=X(T.current,10),At=X(T.current,20),wt=X(T.current,30),Nt=ot(D.current,5),Lt=ot(D.current,10);y({time:new Date(xt.time*1e3).toLocaleString(),open:xt.open,high:xt.high,low:xt.low,close:xt.close,volume:Mt?.value||0,change:xt.close-xt.open,changePercent:(xt.close-xt.open)/xt.open*100,ma5:zt[zt.length-1]?.value,ma10:gt[gt.length-1]?.value,ma20:At[At.length-1]?.value,ma30:wt[wt.length-1]?.value,volMa5:Nt[Nt.length-1]?.value,volMa10:Lt[Lt.length-1]?.value}),b({volume:Mt?.value||0,volMa5:Nt[Nt.length-1]?.value,volMa10:Lt[Lt.length-1]?.value})}return()=>{if(n.current=!0,_t.disconnect(),window.removeEventListener("resize",yt),rt&&(rt.removeEventListener("mousedown",pt),rt.removeEventListener("mousemove",ut),rt.removeEventListener("mouseup",dt),rt.removeEventListener("mouseleave",dt),rt.removeEventListener("dblclick",St)),V.current){try{V.current.detach()}catch{}V.current=null}B.current=null,a.current=null,l.current=null,u.current.clear(),h.current.clear(),O.remove()}},[S,v,W]),k.useEffect(()=>{l.current&&l.current.priceScale().applyOptions({scaleMargins:{top:1-S+.02,bottom:0}}),a.current&&a.current.priceScale().applyOptions({scaleMargins:{top:.02,bottom:S+.05}})},[S]),k.useEffect(()=>{!e.current||!t.current||setTimeout(()=>{t.current&&e.current&&(e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight}),e.current.timeScale().scrollToRealTime())},100)},[r]),k.useEffect(()=>{if(!e.current)return;const rt=O=>{O&&O.from<10&&j.current&&!N.current&&it()};return e.current.timeScale().subscribeVisibleLogicalRangeChange(rt),()=>{e.current?.timeScale().unsubscribeVisibleLogicalRangeChange(rt)}},[it]),k.useEffect(()=>{if(j.current=!0,N.current=!1,T.current=[],D.current=[],I.current=[],M.current=null,W){if(!B.current||!l.current)return}else if(!a.current||!l.current)return;(async()=>{if(!n.current)try{const O=await _e.getKlines(f,Z,500);if(console.log(" K:",f,Z,":",O?.length,W?"()":""),!Array.isArray(O)||O.length===0){console.warn(" K");return}const L=[...O].reverse(),F=L.map(tt=>({time:Math.floor(tt[0]/1e3),open:parseFloat(String(tt[2])),high:parseFloat(String(tt[3])),low:parseFloat(String(tt[4])),close:parseFloat(String(tt[5]))}));if(T.current=F.filter((tt,vt,pt)=>vt===0||tt.time!==pt[vt-1].time),W){const tt=T.current.map(vt=>({time:vt.time,value:vt.close}));I.current=tt,B.current?.setData(I.current),z()}else a.current?.setData(T.current),z(),st();const q=L.map(tt=>{const vt=parseFloat(String(tt[5])),pt=parseFloat(String(tt[2])),ut=parseFloat(String(tt[6]));return{time:Math.floor(tt[0]/1e3),value:isNaN(ut)||!isFinite(ut)?0:ut,color:vt>=pt?"#0ECB8166":"#F6465D66"}});if(D.current=q.filter((tt,vt,pt)=>vt===0||tt.time!==pt[vt-1].time),D.current.length>0&&(M.current=D.current[0].time*1e3),l.current?.setData(D.current),U(),T.current.length>0){const tt=T.current[T.current.length-1],vt=D.current[D.current.length-1],pt=X(T.current,5),ut=X(T.current,10),dt=X(T.current,20),St=X(T.current,30),yt=ot(D.current,5),_t=ot(D.current,10);y({time:new Date(tt.time*1e3).toLocaleString(),open:tt.open,high:tt.high,low:tt.low,close:tt.close,volume:vt?.value||0,change:tt.close-tt.open,changePercent:(tt.close-tt.open)/tt.open*100,ma5:pt[pt.length-1]?.value,ma10:ut[ut.length-1]?.value,ma20:dt[dt.length-1]?.value,ma30:St[St.length-1]?.value,volMa5:yt[yt.length-1]?.value,volMa10:_t[_t.length-1]?.value}),b({volume:vt?.value||0,volMa5:yt[yt.length-1]?.value,volMa10:_t[_t.length-1]?.value})}const $=W?B.current:a.current,J=T.current.length;if(J>50){e.current?.timeScale().fitContent();try{const tt=$?.priceScale();tt&&(tt.applyOptions({autoScale:!0}),setTimeout(()=>{tt.applyOptions({autoScale:!1})},100))}catch{}}else{e.current?.timeScale().scrollToRealTime();try{const tt=$?.priceScale();tt&&(tt.applyOptions({autoScale:!0}),setTimeout(()=>{tt.applyOptions({autoScale:!1})},100))}catch{}}console.log(" :",J,"",W?"()":"(K)")}catch(O){console.error(" :",O)}})()},[f,d,W]),k.useEffect(()=>{z(),U()},[z,U]),k.useEffect(()=>{const rt=`kline@${f},${Z}`;return console.log(" K:",rt,W?"()":""),se.connect().then(()=>{se.subscribe(rt,(O,L)=>{if(n.current)return;const F=L,q=Math.floor(F.ot/1e3),$=parseFloat(F.c),J=parseFloat(F.o),tt=parseFloat(F.v),vt={time:q,value:isNaN(tt)||!isFinite(tt)?0:tt,color:$>=J?"#0ECB8166":"#F6465D66"};l.current?.update(vt);const pt=D.current.findIndex(ut=>ut.time===q);if(pt>=0?D.current[pt]=vt:D.current.push(vt),W){const ut={time:q,open:J,high:parseFloat(F.h),low:parseFloat(F.l),close:$},dt=T.current.findIndex(_t=>_t.time===q);dt>=0?T.current[dt]=ut:T.current.push(ut);const St={time:q,value:$};B.current?.update(St);const yt=I.current.findIndex(_t=>_t.time===q);if(yt>=0?I.current[yt]=St:I.current.push(St),z(),U(),!C.current){const _t=T.current,xt=X(_t,5),Mt=X(_t,10),zt=X(_t,20),gt=X(_t,30),At=ot(D.current,5),wt=ot(D.current,10);y({time:new Date(F.ot).toLocaleString(),open:ut.open,high:ut.high,low:ut.low,close:ut.close,volume:vt.value,change:ut.close-ut.open,changePercent:(ut.close-ut.open)/ut.open*100,ma5:xt[xt.length-1]?.value,ma10:Mt[Mt.length-1]?.value,ma20:zt[zt.length-1]?.value,ma30:gt[gt.length-1]?.value,volMa5:At[At.length-1]?.value,volMa10:wt[wt.length-1]?.value}),b({volume:vt.value,volMa5:At[At.length-1]?.value,volMa10:wt[wt.length-1]?.value})}}else{const ut={time:q,open:J,high:parseFloat(F.h),low:parseFloat(F.l),close:$};a.current?.update(ut);const dt=T.current.findIndex(St=>St.time===ut.time);if(dt>=0?T.current[dt]=ut:T.current.push(ut),z(),U(),!C.current){const St=T.current,yt=X(St,5),_t=X(St,10),xt=X(St,20),Mt=X(St,30),zt=ot(D.current,5),gt=ot(D.current,10);y({time:new Date(F.ot).toLocaleString(),open:ut.open,high:ut.high,low:ut.low,close:ut.close,volume:vt.value,change:ut.close-ut.open,changePercent:(ut.close-ut.open)/ut.open*100,ma5:yt[yt.length-1]?.value,ma10:_t[_t.length-1]?.value,ma20:xt[xt.length-1]?.value,ma30:Mt[Mt.length-1]?.value,volMa5:zt[zt.length-1]?.value,volMa10:gt[gt.length-1]?.value}),b({volume:vt.value,volMa5:zt[zt.length-1]?.value,volMa10:gt[gt.length-1]?.value})}}})}).catch(()=>{}),()=>{console.log(" K:",rt),se.unsubscribeAll(rt)}},[f,Z,W,X,ot,z,U]);const ft=m?m.change>=0:!0;return E.jsxs("div",{className:"flex flex-col h-full bg-[#181a20]",children:[!r&&E.jsx("div",{className:"flex items-center justify-end border-b border-[#2b3139] flex-shrink-0",style:{padding:v?"4px 8px":"8px 16px"},children:E.jsx("div",{className:"flex items-center gap-2 flex-shrink-0"})}),!r&&!v&&m&&E.jsx("div",{className:"px-3 py-1.5 text-xs flex-shrink-0 border-b border-[#2b3139]",style:{fontSize:"11px"},children:E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"flex items-center gap-3 mb-0.5",children:[E.jsx("span",{className:"text-[#848e9c]",children:m.time}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.open.toFixed(2)})]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.high.toFixed(2)})]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.low.toFixed(2)})]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.close.toFixed(2)})]}),E.jsxs("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:[ft?"+":"",m.change.toFixed(2)," (",ft?"+":"",m.changePercent.toFixed(2),"%)"]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:"text-white",children:m.volume.toFixed(4)})]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("span",{style:{color:zs[0].color},children:["MA(5,",m.ma5?.toFixed(2)??"--",")"]}),E.jsxs("span",{style:{color:zs[1].color},children:["MA(10,",m.ma10?.toFixed(2)??"--",")"]}),E.jsxs("span",{style:{color:zs[2].color},children:["MA(20,",m.ma20?.toFixed(2)??"--",")"]}),E.jsxs("span",{style:{color:zs[3].color},children:["MA(30,",m.ma30?.toFixed(2)??"--",")"]})]})]})}),E.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[E.jsx("div",{ref:t,className:"absolute inset-0"}),!r&&!v&&x&&E.jsx("div",{className:"absolute left-0 px-3 py-1 text-xs pointer-events-none z-10",style:{fontSize:"11px",top:`calc(${(1-S)*100}% + 4px)`},children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-[#848e9c] font-semibold",children:"VOL"}),E.jsx("span",{className:"text-white",children:x.volume.toFixed(4)}),E.jsxs("span",{style:{color:Ko[0].color},children:["MA(5): ",x.volMa5?.toFixed(4)??"--"]}),E.jsxs("span",{style:{color:Ko[1].color},children:["MA(10): ",x.volMa10?.toFixed(4)??"--"]})]})}),E.jsxs("div",{style:{position:"absolute",left:0,right:0,top:`${(1-S)*100}%`,height:"4px",cursor:"ns-resize",transform:"translateY(-2px)",pointerEvents:"auto"},onMouseDown:rt=>{rt.preventDefault(),A.current=!0;const O=F=>{if(!A.current||!t.current)return;const q=t.current.getBoundingClientRect(),J=1-(F.clientY-q.top)/q.height,tt=Math.max(.2,Math.min(.5,J));_(tt)},L=()=>{A.current=!1,window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",L)};window.addEventListener("mousemove",O),window.addEventListener("mouseup",L)},children:[E.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(240, 185, 11, 0.5)",position:"absolute",top:"50%",transform:"translateY(-50%)"}}),E.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"4px",backgroundColor:"#f0b90b",borderRadius:"2px",opacity:.7}})]})]})]})}const js=[{period:5,color:"#FF6D00",label:"MA5"},{period:10,color:"#2196F3",label:"MA10"},{period:20,color:"#9C27B0",label:"MA20"},{period:30,color:"#00BCD4",label:"MA30"}],Qo=[{period:5,color:"#FF6D00",label:"VOL MA5"},{period:10,color:"#2196F3",label:"VOL MA10"}];function Dy({isFullscreen:r=!1}){const t=k.useRef(null),e=k.useRef(null),n=k.useRef(null),a=k.useRef(null),l=k.useRef(null),u=k.useRef(new Map),h=k.useRef(new Map),f=Wt(L=>L.symbol),d=Wt(L=>L.interval),v=Yr(),m=d==="time",y=m?"1m":d,[x,b]=k.useState(null),[S,_]=k.useState(null),[C,A]=k.useState(.3),T=k.useRef(!1),D=k.useRef(!1),M=k.useRef([]),j=k.useRef([]),N=k.useRef([]),V=k.useRef(null),B=k.useRef(!0),I=k.useRef(!1),W=k.useRef(null),Z=k.useRef(!1),it=k.useRef(0),X=k.useRef(0),ot=k.useCallback(async()=>{if(!B.current||I.current||!V.current||Z.current)return;const L=X.current;I.current=!0;const F=V.current-1;console.log(" , endTime:",new Date(F).toLocaleString());try{const q=await _e.getKlines(f,y,500,F);if(Z.current||X.current!==L)return;if(console.log(" API:",q?.length),!Array.isArray(q)||q.length===0){console.log(" "),B.current=!1;return}const $=[...q].reverse(),J=$.map(yt=>({time:Math.floor(yt[0]/1e3),open:parseFloat(String(yt[2])),high:parseFloat(String(yt[3])),low:parseFloat(String(yt[4])),close:parseFloat(String(yt[5]))})),tt=$.map(yt=>{const _t=parseFloat(String(yt[5])),xt=parseFloat(String(yt[2]));return{time:Math.floor(yt[0]/1e3),value:parseFloat(String(yt[6])),color:_t>=xt?"#0ECB8166":"#F6465D66"}}),vt=new Set(M.current.map(yt=>yt.time)),pt=J.filter(yt=>!vt.has(yt.time)),ut=tt.filter(yt=>!vt.has(yt.time));if(console.log(" :",J.length,", :",pt.length,""),pt.length===0){console.log(" "),B.current=!1;return}const dt=e.current?.timeScale().getVisibleLogicalRange(),St=pt.length;if(M.current=[...pt,...M.current].sort((yt,_t)=>yt.time-_t.time).filter((yt,_t,xt)=>_t===0||yt.time!==xt[_t-1].time),j.current=[...ut,...j.current].sort((yt,_t)=>yt.time-_t.time).filter((yt,_t,xt)=>_t===0||yt.time!==xt[_t-1].time),M.current.length>0&&(V.current=M.current[0].time*1e3,console.log(" :",new Date(V.current).toLocaleString())),Z.current)return;if(m){const yt=pt.map(_t=>({time:_t.time,value:_t.close}));N.current=[...yt,...N.current].sort((_t,xt)=>_t.time-xt.time).filter((_t,xt,Mt)=>xt===0||_t.time!==Mt[xt-1].time);try{a.current?.setData(N.current)}catch{}}else try{n.current?.setData(M.current)}catch{}try{l.current?.setData(j.current)}catch{}dt&&St>0&&e.current?.timeScale().setVisibleLogicalRange({from:dt.from+St,to:dt.to+St}),console.log(" :",J.length,":",M.current.length,"")}catch(q){console.error(" :",q)}finally{I.current=!1}},[f,y,m]),z=k.useCallback((L,F)=>{const q=[];for(let $=0;$<L.length;$++){if($<F-1)continue;let J=0;for(let tt=0;tt<F;tt++)J+=L[$-tt].close;q.push({time:L[$].time,value:J/F})}return q},[]),U=k.useCallback((L,F)=>{const q=[];for(let $=0;$<L.length;$++){if($<F-1)continue;let J=0;for(let tt=0;tt<F;tt++)J+=L[$-tt].value;q.push({time:L[$].time,value:J/F})}return q},[]),st=k.useCallback(()=>{if(M.current.length===0||Z.current)return;const L=[...M.current];js.forEach(({period:F})=>{const q=u.current.get(F);if(q&&!Z.current)try{const $=z(L,F);q.setData($),q.applyOptions({visible:!0})}catch{}})},[z]),ft=k.useCallback(()=>{if(j.current.length===0||Z.current)return;const L=[...j.current];Qo.forEach(({period:F})=>{const q=h.current.get(F);if(q&&!Z.current)try{const $=U(L,F);q.setData($),q.applyOptions({visible:!0})}catch{}})},[U]),rt=k.useCallback(()=>{const L=n.current,F=e.current,q=M.current;if(!L||!F||q.length===0||Z.current)return;if(W.current){try{W.current.detach()}catch{}W.current=null}if(Z.current)return;let $;try{$=F.timeScale().getVisibleRange()}catch{return}if(!$)return;let J=-1/0,tt=1/0,vt=null,pt=null;q.forEach(dt=>{const St=typeof dt.time=="number"?dt.time:dt.time.timestamp||0,yt=typeof $.from=="number"?$.from:$.from.timestamp||0,_t=typeof $.to=="number"?$.to:$.to.timestamp||0;St>=yt&&St<=_t&&(dt.high>J&&(J=dt.high,vt=dt.time),dt.low<tt&&(tt=dt.low,pt=dt.time))});const ut=[];if(vt!==null&&J!==-1/0&&ut.push({time:vt,position:"aboveBar",color:"#089981",shape:"arrowDown",text:` ${J.toFixed(2)}`}),pt!==null&&tt!==1/0&&ut.push({time:pt,position:"belowBar",color:"#f23645",shape:"arrowUp",text:` ${tt.toFixed(2)}`}),ut.length>0&&!Z.current&&n.current===L)try{W.current=Bx(L,ut)}catch{}},[]);k.useEffect(()=>{const L=t.current;if(!L)return;++X.current,Z.current=!1,W.current=null,M.current=[],j.current=[],N.current=[],V.current=null,B.current=!0,I.current=!1;const F=Ax(L,{layout:{background:{color:"#181a20"},textColor:"#d1d4dc",panes:{separatorColor:"#2b3139",separatorHoverColor:"rgba(43, 49, 57, 0.8)"}},grid:{vertLines:{color:"rgba(43, 49, 57, 0.5)"},horzLines:{color:"rgba(43, 49, 57, 0.5)"}},width:L.clientWidth,height:L.clientHeight,timeScale:{borderColor:"#2b3139",visible:!0,timeVisible:!0,secondsVisible:!1,barSpacing:16,minBarSpacing:8,rightOffset:5,fixLeftEdge:!1,fixRightEdge:!1,tickMarkMaxCharacterLength:10},localization:{timeFormatter:gt=>new Date(gt*1e3).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},rightPriceScale:{borderColor:"#2b3139",autoScale:!1,mode:0},crosshair:{mode:0,vertLine:{labelBackgroundColor:"#2b3139",labelVisible:!0},horzLine:{labelBackgroundColor:"#2b3139",labelVisible:!0}},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0}});let q=null,$=null;m?($=F.addSeries(Nx,{lineColor:"#2196F3",topColor:"rgba(33, 150, 243, 0.4)",bottomColor:"rgba(33, 150, 243, 0.05)",lineWidth:2,priceLineVisible:!0,lastValueVisible:!0,priceLineWidth:1,priceLineStyle:2,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},0),$.priceScale().applyOptions({scaleMargins:{top:.02,bottom:.02}})):(q=F.addSeries(Ox,{upColor:"#0ECB81",downColor:"#F6465D",borderUpColor:"#0ECB81",borderDownColor:"#F6465D",wickUpColor:"#0ECB81",wickDownColor:"#F6465D",priceLineVisible:!0,lastValueVisible:!0,priceLineWidth:1,priceLineStyle:2},0),q.priceScale().applyOptions({scaleMargins:{top:.02,bottom:.02}}));const J=F.addSeries(kx,{color:"#26a69a",priceFormat:{type:"custom",formatter:gt=>gt>=1e6?(gt/1e6).toFixed(2)+"M":gt>=1e3?(gt/1e3).toFixed(2)+"K":gt>=1?gt.toFixed(2):gt>=.01?gt.toFixed(4):gt.toFixed(8),minMove:1e-8},priceScaleId:"right",lastValueVisible:!0,priceLineVisible:!1},1);js.forEach(({period:gt,color:At})=>{const wt=F.addSeries(mu,{color:At,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1},0);u.current.set(gt,wt)}),Qo.forEach(({period:gt,color:At})=>{const wt=F.addSeries(mu,{color:At,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,priceScaleId:"right"},1);h.current.set(gt,wt)}),e.current=F,n.current=q,a.current=$,l.current=J;const tt=F.panes();tt.length>=2&&(tt[0].setStretchFactor(4),tt[1].setStretchFactor(1)),tt.length>0&&zx(tt[0],"/watermark.svg",{alpha:.5,padding:v?10:20,maxWidth:v?150:300,maxHeight:v?75:150}),J.priceScale().applyOptions({visible:!0,autoScale:!0,mode:0,borderColor:"#2b3139",ticksVisible:!0,scaleMargins:{top:.1,bottom:.1}});let vt=!1,pt=0,ut=null;const dt=gt=>{const At=t.current;if(!At)return;const wt=At.getBoundingClientRect(),Nt=gt.clientX-wt.left,Lt=wt.width;if(Nt>Lt-60){vt=!0,pt=gt.clientY;const ae=M.current;if(ae.length>0){const Qt=ae.flatMap(me=>[me.high,me.low]);ut={from:Math.min(...Qt),to:Math.max(...Qt)}}gt.preventDefault()}},St=gt=>{if(!vt||!ut)return;const At=gt.clientY-pt,wt=t.current?.clientHeight||500,Nt=ut.to-ut.from,Lt=At/wt*Nt,ae=m?$:q;ae?.priceScale().applyOptions({autoScale:!1}),ae?.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:ut.from+Lt,maxValue:ut.to+Lt}})})},yt=()=>{vt=!1,ut=null},_t=gt=>{const At=t.current;if(!At)return;const wt=At.getBoundingClientRect(),Nt=gt.clientX-wt.left,Lt=wt.width;if(Nt>Lt-60){const ae=m?$:q;ae?.priceScale().applyOptions({autoScale:!0}),ae?.applyOptions({autoscaleInfoProvider:void 0})}};L.addEventListener("mousedown",dt),L.addEventListener("mousemove",St),L.addEventListener("mouseup",yt),L.addEventListener("mouseleave",yt),L.addEventListener("dblclick",_t),F.subscribeCrosshairMove(gt=>{if(!gt.time||!gt.seriesData){T.current=!1;const Nt=M.current;if(Nt.length>0){const Lt=Nt[Nt.length-1],ae=j.current[j.current.length-1],Qt=z(Nt,5),me=z(Nt,10),Xe=z(Nt,20),ce=z(Nt,30),ge=U(j.current,5),He=U(j.current,10);b({time:new Date(Lt.time*1e3).toLocaleString(),open:Lt.open,high:Lt.high,low:Lt.low,close:Lt.close,volume:ae?.value||0,change:Lt.close-Lt.open,changePercent:(Lt.close-Lt.open)/Lt.open*100,ma5:Qt[Qt.length-1]?.value,ma10:me[me.length-1]?.value,ma20:Xe[Xe.length-1]?.value,ma30:ce[ce.length-1]?.value,volMa5:ge[ge.length-1]?.value,volMa10:He[He.length-1]?.value}),_({volume:ae?.value||0,volMa5:ge[ge.length-1]?.value,volMa10:He[He.length-1]?.value})}return}T.current=!0;const At=gt.seriesData.get(J),wt=M.current.find(Nt=>Nt.time===gt.time);if(wt){const Nt=u.current.get(5),Lt=u.current.get(10),ae=u.current.get(20),Qt=u.current.get(30),me=gt.seriesData.get(Nt),Xe=gt.seriesData.get(Lt),ce=gt.seriesData.get(ae),ge=gt.seriesData.get(Qt),He=h.current.get(5),Ge=h.current.get(10),tn=gt.seriesData.get(He),qr=gt.seriesData.get(Ge);b({time:new Date(gt.time*1e3).toLocaleString(),open:wt.open,high:wt.high,low:wt.low,close:wt.close,volume:At?.value||0,change:wt.close-wt.open,changePercent:(wt.close-wt.open)/wt.open*100,ma5:me?.value,ma10:Xe?.value,ma20:ce?.value,ma30:ge?.value,volMa5:tn?.value,volMa10:qr?.value}),_({volume:At?.value||0,volMa5:tn?.value,volMa10:qr?.value})}});const xt=X.current;F.timeScale().subscribeVisibleTimeRangeChange(()=>{Z.current||X.current!==xt||m||setTimeout(()=>{Z.current||X.current!==xt||rt()},0)});const Mt=()=>{t.current&&e.current&&e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight})},zt=new ResizeObserver(Mt);if(zt.observe(L),window.addEventListener("resize",Mt),setTimeout(Mt,100),M.current.length>0){m?$?.setData(N.current):q?.setData(M.current),J.setData(j.current),st(),ft(),M.current.length>50?F.timeScale().fitContent():F.timeScale().scrollToRealTime();const gt=M.current[M.current.length-1],At=j.current[j.current.length-1],wt=z(M.current,5),Nt=z(M.current,10),Lt=z(M.current,20),ae=z(M.current,30),Qt=U(j.current,5),me=U(j.current,10);b({time:new Date(gt.time*1e3).toLocaleString(),open:gt.open,high:gt.high,low:gt.low,close:gt.close,volume:At?.value||0,change:gt.close-gt.open,changePercent:(gt.close-gt.open)/gt.open*100,ma5:wt[wt.length-1]?.value,ma10:Nt[Nt.length-1]?.value,ma20:Lt[Lt.length-1]?.value,ma30:ae[ae.length-1]?.value,volMa5:Qt[Qt.length-1]?.value,volMa10:me[me.length-1]?.value}),_({volume:At?.value||0,volMa5:Qt[Qt.length-1]?.value,volMa10:me[me.length-1]?.value})}return()=>{if(Z.current=!0,zt.disconnect(),window.removeEventListener("resize",Mt),L&&(L.removeEventListener("mousedown",dt),L.removeEventListener("mousemove",St),L.removeEventListener("mouseup",yt),L.removeEventListener("mouseleave",yt),L.removeEventListener("dblclick",_t)),W.current){try{W.current.detach()}catch{}W.current=null}a.current=null,n.current=null,l.current=null,u.current.clear(),h.current.clear(),F.remove()}},[C,v,m]),k.useEffect(()=>{!e.current||!t.current||setTimeout(()=>{t.current&&e.current&&(e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight}),e.current.timeScale().scrollToRealTime())},100)},[r]),k.useEffect(()=>{if(!e.current)return;const L=F=>{F&&F.from<10&&B.current&&!I.current&&ot()};return e.current.timeScale().subscribeVisibleLogicalRangeChange(L),()=>{e.current?.timeScale().unsubscribeVisibleLogicalRangeChange(L)}},[ot]),k.useEffect(()=>{const L=++it.current,F=X.current;if(B.current=!0,I.current=!1,M.current=[],j.current=[],N.current=[],V.current=null,W.current){try{W.current.detach()}catch{}W.current=null}if(m){if(!a.current||!l.current)return}else if(!n.current||!l.current)return;(async()=>{try{const $=await _e.getKlines(f,y,500);if(L!==it.current||F!==X.current){console.log(" ");return}if(Z.current){console.log(" ");return}if(console.log(" K:",f,y,":",$?.length,m?"()":""),!Array.isArray($)||$.length===0){console.warn(" K");return}const J=[...$].reverse(),tt=J.map(dt=>({time:Math.floor(dt[0]/1e3),open:parseFloat(String(dt[2])),high:parseFloat(String(dt[3])),low:parseFloat(String(dt[4])),close:parseFloat(String(dt[5]))})),vt=J.map(dt=>{const St=parseFloat(String(dt[5])),yt=parseFloat(String(dt[2])),_t=parseFloat(String(dt[6]));return{time:Math.floor(dt[0]/1e3),value:isNaN(_t)||!isFinite(_t)?0:_t,color:St>=yt?"#0ECB8166":"#F6465D66"}});if(M.current=tt.filter((dt,St,yt)=>St===0||dt.time!==yt[St-1].time),j.current=vt.filter((dt,St,yt)=>St===0||dt.time!==yt[St-1].time),m&&(N.current=M.current.map(dt=>({time:dt.time,value:dt.close}))),M.current.length>0&&(V.current=M.current[0].time*1e3),L!==it.current||F!==X.current||Z.current)return;if(!(m?a.current:n.current)||!l.current){console.log(" Series refs ");return}try{if(W.current){try{W.current.detach()}catch{}W.current=null}m?a.current?.setData(N.current):n.current?.setData(M.current),l.current?.setData(j.current),st(),ft(),!m&&L===it.current&&F===X.current&&!Z.current&&n.current&&rt()}catch(dt){L===it.current&&F===X.current&&!Z.current&&console.error(":",dt);return}if(M.current.length>0){const dt=M.current[M.current.length-1],St=j.current[j.current.length-1],yt=z(M.current,5),_t=z(M.current,10),xt=z(M.current,20),Mt=z(M.current,30),zt=U(j.current,5),gt=U(j.current,10);b({time:new Date(dt.time*1e3).toLocaleString(),open:dt.open,high:dt.high,low:dt.low,close:dt.close,volume:St?.value||0,change:dt.close-dt.open,changePercent:(dt.close-dt.open)/dt.open*100,ma5:yt[yt.length-1]?.value,ma10:_t[_t.length-1]?.value,ma20:xt[xt.length-1]?.value,ma30:Mt[Mt.length-1]?.value,volMa5:zt[zt.length-1]?.value,volMa10:gt[gt.length-1]?.value}),_({volume:St?.value||0,volMa5:zt[zt.length-1]?.value,volMa10:gt[gt.length-1]?.value})}if(L!==it.current||F!==X.current||Z.current)return;const ut=m?a.current:n.current;M.current.length>50?(e.current?.timeScale().fitContent(),ut?.priceScale().applyOptions({autoScale:!0}),setTimeout(()=>{L===it.current&&F===X.current&&!Z.current&&ut?.priceScale().applyOptions({autoScale:!1})},100)):(e.current?.timeScale().scrollToRealTime(),ut?.priceScale().applyOptions({autoScale:!0}),setTimeout(()=>{L===it.current&&F===X.current&&!Z.current&&ut?.priceScale().applyOptions({autoScale:!1})},100)),console.log(" K:",M.current.length,"",m?"()":"")}catch($){L===it.current&&F===X.current&&!Z.current&&console.error(" K:",$)}})()},[f,d,m]),k.useEffect(()=>{st(),ft()},[st,ft]),k.useEffect(()=>{const L=`kline@${f},${y}`;return console.log(" K:",L,m?"()":""),se.connect().then(()=>{se.subscribe(L,(F,q)=>{if(Z.current)return;const $=q,J={time:Math.floor($.ot/1e3),open:parseFloat($.o),high:parseFloat($.h),low:parseFloat($.l),close:parseFloat($.c)},tt=parseFloat($.v),vt={time:Math.floor($.ot/1e3),value:isNaN(tt)||!isFinite(tt)?0:tt,color:parseFloat($.c)>=parseFloat($.o)?"#0ECB8166":"#F6465D66"};try{if(m){const ut={time:J.time,value:J.close};a.current?.update(ut)}else n.current?.update(J);l.current?.update(vt)}catch{return}const pt=M.current.findIndex(ut=>ut.time===J.time);if(pt>=0?(M.current[pt]=J,j.current[pt]=vt,m&&(N.current[pt]={time:J.time,value:J.close})):(M.current.push(J),j.current.push(vt),m&&N.current.push({time:J.time,value:J.close})),st(),ft(),!T.current){const ut=M.current,dt=z(ut,5),St=z(ut,10),yt=z(ut,20),_t=z(ut,30),xt=U(j.current,5),Mt=U(j.current,10);b({time:new Date($.ot).toLocaleString(),open:J.open,high:J.high,low:J.low,close:J.close,volume:vt.value,change:J.close-J.open,changePercent:(J.close-J.open)/J.open*100,ma5:dt[dt.length-1]?.value,ma10:St[St.length-1]?.value,ma20:yt[yt.length-1]?.value,ma30:_t[_t.length-1]?.value,volMa5:xt[xt.length-1]?.value,volMa10:Mt[Mt.length-1]?.value}),_({volume:vt.value,volMa5:xt[xt.length-1]?.value,volMa10:Mt[Mt.length-1]?.value})}})}).catch(()=>{}),()=>{console.log(" K:",L),se.unsubscribeAll(L)}},[f,y,m,z,U,st,ft]);const O=x?x.change>=0:!0;return E.jsxs("div",{className:"flex flex-col h-full bg-[#181a20]",children:[!r&&E.jsx("div",{className:"flex items-center justify-end border-b border-[#2b3139] flex-shrink-0",style:{padding:v?"4px 8px":"8px 16px"},children:E.jsx("div",{className:"flex items-center gap-2 flex-shrink-0"})}),!r&&!v&&x&&E.jsxs("div",{className:"px-3 py-1.5 text-xs flex-shrink-0 border-b border-[#2b3139]",style:{fontSize:"11px"},children:[E.jsxs("div",{className:"flex items-center gap-3 mb-0.5",children:[E.jsx("span",{className:"text-[#848e9c]",children:x.time}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:O?"text-[#0ECB81]":"text-[#F6465D]",children:x.open.toFixed(2)})]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:O?"text-[#0ECB81]":"text-[#F6465D]",children:x.high.toFixed(2)})]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:O?"text-[#0ECB81]":"text-[#F6465D]",children:x.low.toFixed(2)})]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:O?"text-[#0ECB81]":"text-[#F6465D]",children:x.close.toFixed(2)})]}),E.jsxs("span",{className:O?"text-[#0ECB81]":"text-[#F6465D]",children:[O?"+":"",x.change.toFixed(2)," (",O?"+":"",x.changePercent.toFixed(2),"%)"]}),E.jsxs("span",{className:"text-[#848e9c]",children:[": ",E.jsx("span",{className:"text-white",children:x.volume.toFixed(4)})]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("span",{style:{color:js[0].color},children:["MA(5,",x.ma5?.toFixed(2)??"--",")"]}),E.jsxs("span",{style:{color:js[1].color},children:["MA(10,",x.ma10?.toFixed(2)??"--",")"]}),E.jsxs("span",{style:{color:js[2].color},children:["MA(20,",x.ma20?.toFixed(2)??"--",")"]}),E.jsxs("span",{style:{color:js[3].color},children:["MA(30,",x.ma30?.toFixed(2)??"--",")"]})]})]}),E.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[E.jsx("div",{ref:t,className:"absolute inset-0"}),!r&&!v&&S&&E.jsx("div",{className:"absolute left-0 px-3 py-1 text-xs pointer-events-none z-10",style:{fontSize:"11px",top:`calc(${(1-C)*100}% + 4px)`},children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-[#848e9c] font-semibold",children:"VOL"}),E.jsx("span",{className:"text-white",children:S.volume.toFixed(4)}),E.jsxs("span",{style:{color:Qo[0].color},children:["MA(5): ",S.volMa5?.toFixed(4)??"--"]}),E.jsxs("span",{style:{color:Qo[1].color},children:["MA(10): ",S.volMa10?.toFixed(4)??"--"]})]})}),E.jsxs("div",{style:{position:"absolute",left:0,right:0,top:`${(1-C)*100}%`,height:"4px",cursor:"ns-resize",transform:"translateY(-2px)",pointerEvents:"auto"},onMouseDown:L=>{L.preventDefault(),D.current=!0;const F=$=>{if(!D.current||!t.current)return;const J=t.current.getBoundingClientRect(),vt=1-($.clientY-J.top)/J.height,pt=Math.max(.2,Math.min(.5,vt));A(pt)},q=()=>{D.current=!1,window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",q)};window.addEventListener("mousemove",F),window.addEventListener("mouseup",q)},children:[E.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(240, 185, 11, 0.5)",position:"absolute",top:"50%",transform:"translateY(-50%)"}}),E.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"4px",backgroundColor:"#f0b90b",borderRadius:"2px",opacity:.7}})]})]})]})}function Re(r,t){if(!(!Qi(r)&&!Qi(t))){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=r[e],a=t[e];Qi(a)&&Qi(n)?Re(n,a):r[e]=dl(a)}}}function dl(r){if(!Qi(r))return r;var t=null;Cn(r)?t=[]:t={};for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=r[e];Qi(n)?t[e]=dl(n):t[e]=n}return t}function Cn(r){return Object.prototype.toString.call(r)==="[object Array]"}function xi(r){return typeof r=="function"}function Qi(r){return typeof r=="object"&&at(r)}function Dt(r){return typeof r=="number"&&Number.isFinite(r)}function at(r){return r!=null}function gu(r){return typeof r=="boolean"}function Kt(r){return typeof r=="string"}var dA=/\\(\\)?/g,vA=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function ze(r,t,e){if(at(r)){var n=[];t.replace(vA,function(h){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];var v=h;return at(f[1])?v=f[2].replace(dA,"$1"):at(f[0])&&(v=f[0].trim()),n.push(v),""});for(var a=r,l=0,u=n.length;at(a)&&l<u;)a=a?.[n[l++]];return at(a)?a:e??"--"}return e??"--"}function pA(r,t){var e={};return r.formatToParts(new Date(t)).forEach(function(n){var a=n.type,l=n.value;switch(a){case"year":{e.YYYY=l;break}case"month":{e.MM=l;break}case"day":{e.DD=l;break}case"hour":{e.HH=l==="24"?"00":l;break}case"minute":{e.mm=l;break}case"second":{e.ss=l;break}}}),e}function mA(r,t,e){var n=pA(r,t);return e.replace(/YYYY|MM|DD|HH|mm|ss/g,function(a){return n[a]})}function We(r,t){var e=+r;return Dt(e)?e.toFixed(t??2):"".concat(r)}function gA(r){var t=+r;if(Dt(t)){if(t>1e9)return"".concat(+(t/1e9).toFixed(3),"B");if(t>1e6)return"".concat(+(t/1e6).toFixed(3),"M");if(t>1e3)return"".concat(+(t/1e3).toFixed(3),"K")}return"".concat(r)}function yA(r,t){var e="".concat(r);if(t.length===0)return e;if(e.includes(".")){var n=e.split(".");return"".concat(n[0].replace(/(\d)(?=(\d{3})+$)/g,function(a){return"".concat(a).concat(t)}),".").concat(n[1])}return e.replace(/(\d)(?=(\d{3})+$)/g,function(a){return"".concat(a).concat(t)})}function bA(r,t){var e="".concat(r),n=new RegExp("\\.0{"+t+",}[1-9][0-9]*$");if(n.test(e)){var a=e.split("."),l=a.length-1,u=a[l],h=/0*/.exec(u);if(at(h)){var f=h[0].length;return a[l]=u.replace(/0*/,"0{".concat(f,"}")),a.join(".")}}return e}function Ny(r,t){return r.replace(/\{(\w+)\}/g,function(e,n){var a=t[n];return at(a)?a:"{".concat(n,"}")})}var Xa=null;function lr(r){var t,e;return(e=(t=r.ownerDocument.defaultView)===null||t===void 0?void 0:t.devicePixelRatio)!==null&&e!==void 0?e:1}function Hr(r,t,e){return"".concat(t??"normal"," ").concat(r??12,"px ").concat(e??"Helvetica Neue")}function $i(r,t,e,n){if(!at(Xa)){var a=document.createElement("canvas"),l=lr(a);Xa=a.getContext("2d"),Xa.scale(l,l)}return Xa.font=Hr(t,e,n),Math.round(Xa.measureText(r).width)}var rd=function(r,t){return rd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},rd(r,t)};function Pt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");rd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var bt=function(){return bt=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l])}return t},bt.apply(this,arguments)};function yu(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e}function Nd(r,t,e,n){function a(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function h(v){try{d(n.next(v))}catch(m){u(m)}}function f(v){try{d(n.throw(v))}catch(m){u(m)}}function d(v){v.done?l(v.value):a(v.value).then(h,f)}d((n=n.apply(r,[])).next())})}function Od(r,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=h(0),u.throw=h(1),u.return=h(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(v){return f([d,v])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(e=0)),e;)try{if(n=1,a&&(l=d[0]&2?a.return:d[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,d[1])).done)return l;switch(a=0,l&&(d=[d[0]&2,l.value]),d[0]){case 0:case 1:l=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!l||d[1]>l[0]&&d[1]<l[3])){e.label=d[1];break}if(d[0]===6&&e.label<l[1]){e.label=l[1],l=d;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(d);break}l[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(r,e)}catch(v){d=[6,v],a=0}finally{n=l=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Vi(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _l(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),a,l=[],u;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)l.push(a.value)}catch(h){u={error:h}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return l}function Yu(r,t,e){if(arguments.length===2)for(var n=0,a=t.length,l;n<a;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return r.concat(l||Array.prototype.slice.call(t))}function bu(r){var t={width:0,height:0,left:0,right:0,top:0,bottom:0};return at(r)&&Re(t,r),t}var Pf=-1;function xu(r){return xi(window.requestAnimationFrame)?window.requestAnimationFrame(r):window.setTimeout(r,20)}function Oy(r){xi(window.cancelAnimationFrame)?window.cancelAnimationFrame(r):window.clearTimeout(r)}var sd=(function(){function r(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Re(this._options,t)}return r.prototype._loop=function(){var t=this;this._running=!0;var e=function(){var n;if(t._running){var a=new Date().getTime()-t._time;a<t._options.duration?((n=t._doFrameCallback)===null||n===void 0||n.call(t,a),xu(e)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};xu(e)},r.prototype.doFrame=function(t){return this._doFrameCallback=t,this},r.prototype.setDuration=function(t){return this._options.duration=t,this},r.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},r.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},r.prototype.stop=function(){var t;this._running&&((t=this._doFrameCallback)===null||t===void 0||t.call(this,this._options.duration)),this._running=!1},r})(),If=1,ky=new Date().getTime();function su(r){var t=new Date().getTime();return t===ky?++If:If=1,ky=t,"".concat(r??"").concat(t,"_").concat(If)}function An(r,t){var e,n=document.createElement(r),a=t??{};for(var l in a)n.style[l]=(e=a[l])!==null&&e!==void 0?e:"";return n}function ad(r,t,e){var n=0,a=0;for(a=r.length-1;n!==a;){var l=Math.floor((a+n)/2),u=a-n,h=r[l][t];if(e===r[n][t])return n;if(e===r[a][t])return a;if(e===h)return l;if(e>h?n=l:a=l,u<=2)break}return n}function xA(r){var t=Math.floor(Sn(r)),e=Nr(t),n=r/e,a=0;return n<1.5?a=1:n<2.5?a=2:n<3.5?a=3:n<4.5?a=4:n<5.5?a=5:n<6.5?a=6:a=8,r=a*e,+r.toFixed(Math.abs(t))}function zy(r,t){t=Math.max(0,t??0);var e=Math.pow(10,t);return Math.round(r*e)/e}function SA(r){var t=r.toString(),e=t.indexOf("e");if(e>0){var n=+t.slice(e+1);return n<0?-n:0}var a=t.indexOf(".");return a<0?0:t.length-1-a}function Fx(r,t,e){for(var n,a,l=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],u=r.length,h=0;h<u;){var f=r[h];l[0]=Math.max((n=f[t])!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,l[0]),l[1]=Math.min((a=f[e])!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER,l[1]),++h}return l}function Sn(r){return r===0?0:Math.log10(r)}function Nr(r){return Math.pow(10,r)}function jy(){return{from:0,to:0,realFrom:0,realTo:0}}var _A=(function(){function r(t){this._holdingTasks=null,this._running=!1,this._callback=t}return r.prototype.add=function(t){this._running?at(this._holdingTasks)?this._holdingTasks=bt(bt({},this._holdingTasks),t):this._holdingTasks=t:this._runTask(t)},r.prototype._runTask=function(t){return Nd(this,void 0,void 0,function(){var e,n;return Od(this,function(a){switch(a.label){case 0:this._running=!0,a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.all(Object.values(t))];case 2:return a.sent(),[3,4];case 3:return this._running=!1,(n=this._callback)===null||n===void 0||n.call(this),at(this._holdingTasks)&&(e=this._holdingTasks,this._runTask(e),this._holdingTasks=null),[7];case 4:return[2]}})})},r.prototype.clear=function(){this._holdingTasks=null},r})(),Ue={PRICE:2,VOLUME:0},wA=(function(){function r(){this._callbacks=[]}return r.prototype.subscribe=function(t){var e=this._callbacks.indexOf(t);e<0&&this._callbacks.push(t)},r.prototype.unsubscribe=function(t){if(xi(t)){var e=this._callbacks.indexOf(t);e>-1&&this._callbacks.splice(e,1)}else this._callbacks=[]},r.prototype.execute=function(t){this._callbacks.forEach(function(e){e(t)})},r.prototype.isEmpty=function(){return this._callbacks.length===0},r})();function Ks(r){return r==="transparent"||r==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(r)||/^[hH][Ss][Ll][Aa]\(([\s]*(3603[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(r)}function or(r,t){var e=r.replace(/^#/,""),n=parseInt(e,16),a=n>>16&255,l=n>>8&255,u=n&255;return"rgba(".concat(a,", ").concat(l,", ").concat(u,", ").concat(t??1,")")}var Rt={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function EA(){return{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]}}}function CA(){var r={show:!0,color:Rt.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:"candle_solid",bar:{compareRule:"current_open",upColor:Rt.GREEN,downColor:Rt.RED,noChangeColor:Rt.GREY,upBorderColor:Rt.GREEN,downBorderColor:Rt.RED,noChangeBorderColor:Rt.GREY,upWickColor:Rt.GREEN,downWickColor:Rt.RED,noChangeWickColor:Rt.GREY},area:{lineSize:2,lineColor:Rt.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:or(Rt.BLUE,.01)},{offset:1,color:or(Rt.BLUE,.2)}],point:{show:!0,color:Rt.BLUE,radius:4,rippleColor:or(Rt.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:bt({},r),low:bt({},r),last:{show:!0,compareRule:"current_open",upColor:Rt.GREEN,downColor:Rt.RED,noChangeColor:Rt.GREY,line:{show:!0,style:"dashed",dashedValue:[4,4],size:1},text:{show:!0,style:"fill",size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:"solid",borderSize:0,borderDashedValue:[2,2],color:Rt.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2},extendTexts:[]}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",rect:{position:"fixed",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},title:{show:!0,size:14,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,template:"{ticker}  {period}"},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a",template:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]},features:[]}}}function MA(){var r=or(Rt.GREEN,.7),t=or(Rt.RED,.7);return{ohlc:{compareRule:"current_open",upColor:r,downColor:t,noChangeColor:Rt.GREY},bars:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:r,downColor:t,noChangeColor:Rt.GREY}],lines:["#FF9600","#935EBD",Rt.BLUE,"#E11D74","#01C5C4"].map(function(e){return{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:e}}),circles:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:r,downColor:t,noChangeColor:Rt.GREY}],lastValueMark:{show:!1,text:{show:!1,style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",title:{show:!0,showName:!0,showParams:!0,size:12,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a"},features:[]}}}function Ly(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:Rt.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function TA(){return{show:!0,horizontal:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:Rt.GREY},text:{show:!0,style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:Rt.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Rt.GREY},features:[]},vertical:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:Rt.GREY},text:{show:!0,style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:Rt.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Rt.GREY}}}}function AA(){var r=or(Rt.BLUE,.35),t=or(Rt.BLUE,.25);function e(){return{style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:Rt.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Rt.BLUE}}return{point:{color:Rt.BLUE,borderColor:r,borderSize:1,radius:5,activeColor:Rt.BLUE,activeBorderColor:r,activeBorderSize:3,activeRadius:5},line:{style:"solid",smooth:!1,color:Rt.BLUE,size:1,dashedValue:[2,2]},rect:{style:"fill",color:t,borderColor:Rt.BLUE,borderSize:1,borderRadius:0,borderStyle:"solid",borderDashedValue:[2,2]},polygon:{style:"fill",color:Rt.BLUE,borderColor:Rt.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},circle:{style:"fill",color:t,borderColor:Rt.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},arc:{style:"solid",color:Rt.BLUE,size:1,dashedValue:[2,2]},text:e()}}function RA(){return{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:or(Rt.BLUE,.08)}}function DA(){return{grid:EA(),candle:CA(),indicator:MA(),xAxis:Ly(),yAxis:Ly(),separator:RA(),crosshair:TA(),overlay:AA()}}function kd(r,t,e,n){var a=r.result,l=r.figures,u=r.styles,h=ze(u,"circles",e.circles),f=h.length,d=ze(u,"bars",e.bars),v=d.length,m=ze(u,"lines",e.lines),y=m.length,x=0,b=0,S=0,_,C=0;l.forEach(function(A){var T;switch(A.type){case"circle":{C=x;var D=h[x%f];_=bt(bt({},D),{color:D.noChangeColor}),x++;break}case"bar":{C=b;var M=d[b%v];_=bt(bt({},M),{color:M.noChangeColor}),b++;break}case"line":{C=S,_=m[S%y],S++;break}}if(at(A.type)){var j=(T=A.styles)===null||T===void 0?void 0:T.call(A,{data:{prev:a[t-1],current:a[t],next:a[t+1]},indicator:r,defaultStyles:e});n(A,bt(bt({},_),j),C)}})}var NA=(function(){function r(t){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series="normal",this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(e,n){var a=JSON.stringify(e.calcParams)!==JSON.stringify(n.calcParams)||e.figures!==n.figures||e.calc!==n.calc,l=a||e.shortName!==n.shortName||e.series!==n.series||e.minValue!==n.minValue||e.maxValue!==n.maxValue||e.precision!==n.precision||e.shouldOhlc!==n.shouldOhlc||e.shouldFormatBigNumber!==n.shouldFormatBigNumber||e.visible!==n.visible||e.zLevel!==n.zLevel||e.extendData!==n.extendData||e.regenerateFigures!==n.regenerateFigures||e.createTooltipDataSource!==n.createTooltipDataSource||e.draw!==n.draw;return{calc:a,draw:l}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.result=[],this._lockSeriesPrecision=!1,this.override(t),this._lockSeriesPrecision=!1}return r.prototype.override=function(t){var e,n,a=this,l=a.result,u=yu(a,["result"]);this._prevIndicator=bt(bt({},dl(u)),{result:l});var h=t.id,f=t.name,d=t.shortName,v=t.precision,m=t.styles,y=t.figures,x=t.calcParams,b=yu(t,["id","name","shortName","precision","styles","figures","calcParams"]);!Kt(this.id)&&Kt(h)&&(this.id=h),Kt(this.name)||(this.name=f??""),this.shortName=(e=d??this.shortName)!==null&&e!==void 0?e:this.name,Dt(v)&&(this.precision=v,this._lockSeriesPrecision=!0),at(m)&&((n=this.styles)!==null&&n!==void 0||(this.styles={}),Re(this.styles,m)),Re(this,b),at(x)&&(this.calcParams=x,xi(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=y??this.figures},r.prototype.setSeriesPrecision=function(t){this._lockSeriesPrecision||(this.precision=t)},r.prototype.shouldUpdateImp=function(){var t=this._prevIndicator.zLevel!==this.zLevel,e=this.shouldUpdate(this._prevIndicator,this);return gu(e)?{calc:e,draw:e,sort:t}:bt(bt({},e),{sort:t})},r.prototype.calcImp=function(t){return Nd(this,void 0,void 0,function(){var e;return Od(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return e=n.sent(),this.result=e,[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})},r.extend=function(t){var e=(function(n){Pt(a,n);function a(){return n.call(this,t)||this}return a})(r);return e},r})(),OA={name:"AVP",shortName:"AVP",series:"price",precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(r){var t=0,e=0;return r.map(function(n){var a,l,u={},h=(a=n.turnover)!==null&&a!==void 0?a:0,f=(l=n.volume)!==null&&l!==void 0?l:0;return t+=h,e+=f,e!==0&&(u.avp=t/e),u})}},kA={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(r){var t,e,n=r.data,a=r.indicator,l=r.defaultStyles,u=n.prev,h=n.current,f=(t=u?.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,d=(e=h?.ao)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,v="";d>f?v=ze(a.styles,"bars[0].upColor",l.bars[0].upColor):v=ze(a.styles,"bars[0].downColor",l.bars[0].downColor);var m=d>f?"stroke":"fill";return{color:v,style:m,borderColor:v}}}],calc:function(r,t){var e=t.calcParams,n=Math.max(e[0],e[1]),a=0,l=0,u=0,h=0;return r.map(function(f,d){var v={},m=(f.low+f.high)/2;if(a+=m,l+=m,d>=e[0]-1){u=a/e[0];var y=r[d-(e[0]-1)];a-=(y.low+y.high)/2}if(d>=e[1]-1){h=l/e[1];var y=r[d-(e[1]-1)];l-=(y.low+y.high)/2}return d>=n-1&&(v.ao=u-h),v})}},zA={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"bias".concat(e+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[];return r.map(function(l,u){var h={},f=l.close;return e.forEach(function(d,v){var m;if(a[v]=((m=a[v])!==null&&m!==void 0?m:0)+f,u>=d-1){var y=a[v]/e[v];h[n[v].key]=(f-y)/y*100,a[v]-=r[u-(d-1)].close}}),h})}};function jA(r,t){var e=r.length,n=0;return r.forEach(function(a){var l=a.close-t;n+=l*l}),n=Math.abs(n),Math.sqrt(n/e)}var LA={name:"BOLL",shortName:"BOLL",series:"price",calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=e[0]-1,a=0;return r.map(function(l,u){var h=l.close,f={};if(a+=h,u>=n){f.mid=a/e[0];var d=jA(r.slice(u-n,u+1),f.mid);f.up=f.mid+e[1]*d,f.dn=f.mid-e[1]*d,a-=r[u-n].close}return f})}},BA={name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0;return r.map(function(h,f){var d,v,m={},y=h.high,x=h.low,b=h.open,S=((d=r[f-1])!==null&&d!==void 0?d:h).close;if(l+=y-b,u+=b-x,n+=y-S,a+=S-x,f>=e[0]-1){u!==0?m.ar=l/u*100:m.ar=0,a!==0?m.br=n/a*100:m.br=0;var _=r[f-(e[0]-1)],C=_.high,A=_.low,T=_.open,D=((v=r[f-e[0]])!==null&&v!==void 0?v:r[f-(e[0]-1)]).close;n-=C-D,a-=D-A,l-=C-T,u-=T-A}return m})}},FA={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=Math.max.apply(Math,Yu([],_l(e),!1)),a=[],l=[];return r.map(function(u,h){var f={},d=u.close;if(e.forEach(function(m,y){var x;a[y]=((x=a[y])!==null&&x!==void 0?x:0)+d,h>=m-1&&(l[y]=a[y]/m,a[y]-=r[h-(m-1)].close)}),h>=n-1){var v=0;l.forEach(function(m){v+=m}),f.bbi=v/4}return f})}},PA={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=e[0]-1,a=0,l=[];return r.map(function(u,h){var f={},d=(u.high+u.low+u.close)/3;if(a+=d,l.push(d),h>=n){var v=a/e[0],m=l.slice(h-n,h+1),y=0;m.forEach(function(S){y+=Math.abs(S-v)});var x=y/e[0];f.cci=x!==0?(d-v)/x/.015:0;var b=(r[h-n].high+r[h-n].low+r[h-n].close)/3;a-=b}return f})}},IA={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=Math.ceil(e[1]/2.5+1),a=Math.ceil(e[2]/2.5+1),l=Math.ceil(e[3]/2.5+1),u=Math.ceil(e[4]/2.5+1),h=0,f=[],d=0,v=[],m=0,y=[],x=0,b=[],S=[];return r.forEach(function(_,C){var A,T,D,M,j,N={},V=(A=r[C-1])!==null&&A!==void 0?A:_,B=(V.high+V.close+V.low+V.open)/4,I=Math.max(0,_.high-B),W=Math.max(0,B-_.low);C>=e[0]-1&&(W!==0?N.cr=I/W*100:N.cr=0,h+=N.cr,d+=N.cr,m+=N.cr,x+=N.cr,C>=e[0]+e[1]-2&&(f.push(h/e[1]),C>=e[0]+e[1]+n-3&&(N.ma1=f[f.length-1-n]),h-=(T=S[C-(e[1]-1)].cr)!==null&&T!==void 0?T:0),C>=e[0]+e[2]-2&&(v.push(d/e[2]),C>=e[0]+e[2]+a-3&&(N.ma2=v[v.length-1-a]),d-=(D=S[C-(e[2]-1)].cr)!==null&&D!==void 0?D:0),C>=e[0]+e[3]-2&&(y.push(m/e[3]),C>=e[0]+e[3]+l-3&&(N.ma3=y[y.length-1-l]),m-=(M=S[C-(e[3]-1)].cr)!==null&&M!==void 0?M:0),C>=e[0]+e[4]-2&&(b.push(x/e[4]),C>=e[0]+e[4]+u-3&&(N.ma4=b[b.length-1-u]),x-=(j=S[C-(e[4]-1)].cr)!==null&&j!==void 0?j:0)),S.push(N)}),S}},VA={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=Math.max(e[0],e[1]),a=0,l=0,u=0,h=[];return r.forEach(function(f,d){var v,m={},y=f.close;a+=y,l+=y;var x=0,b=0;if(d>=e[0]-1&&(x=a/e[0],a-=r[d-(e[0]-1)].close),d>=e[1]-1&&(b=l/e[1],l-=r[d-(e[1]-1)].close),d>=n-1){var S=x-b;m.dma=S,u+=S,d>=n+e[2]-2&&(m.ama=u/e[2],u-=(v=h[d-(e[2]-1)].dma)!==null&&v!==void 0?v:0)}h.push(m)}),h}},UA={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,h=0,f=0,d=0,v=0,m=[];return r.forEach(function(y,x){var b,S,_={},C=(b=r[x-1])!==null&&b!==void 0?b:y,A=C.close,T=y.high,D=y.low,M=T-D,j=Math.abs(T-A),N=Math.abs(A-D),V=T-C.high,B=C.low-D,I=Math.max(Math.max(M,j),N),W=V>0&&V>B?V:0,Z=B>0&&B>V?B:0;if(n+=I,a+=W,l+=Z,x>=e[0]-1){x>e[0]-1?(u=u-u/e[0]+I,h=h-h/e[0]+W,f=f-f/e[0]+Z):(u=n,h=a,f=l);var it=0,X=0;u!==0&&(it=h*100/u,X=f*100/u),_.pdi=it,_.mdi=X;var ot=0;X+it!==0&&(ot=Math.abs(X-it)/(X+it)*100),d+=ot,x>=e[0]*2-2&&(x>e[0]*2-2?v=(v*(e[0]-1)+ot)/e[0]:v=d/e[0],_.adx=v,x>=e[0]*2+e[1]-3&&(_.adxr=(((S=m[x-(e[1]-1)].adx)!==null&&S!==void 0?S:0)+v)/2))}m.push(_)}),m}},HA={name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=[];return r.map(function(l,u){var h,f={};if(u>0){var d=r[u-1],v=l.high,m=l.low,y=(h=l.volume)!==null&&h!==void 0?h:0,x=(v+m)/2-(d.high+d.low)/2;if(y===0||v-m===0)f.emv=0;else{var b=y/1e8/(v-m);f.emv=x/b}n+=f.emv,a.push(f.emv),u>=e[0]&&(f.maEmv=n/e[0],n-=a[u-e[0]])}return f})}},YA={name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"ema".concat(e+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=0,l=[];return r.map(function(u,h){var f={},d=u.close;return a+=d,e.forEach(function(v,m){h>=v-1&&(h>v-1?l[m]=(2*d+(v-1)*l[m])/(v+1):l[m]=a/v,f[n[m].key]=l[m])}),f})}},WA={name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=[];return r.forEach(function(l,u){var h,f={};if(u>=e[0]){var d=l.close,v=r[u-e[0]].close;f.mtm=d-v,n+=f.mtm,u>=e[0]+e[1]-1&&(f.maMtm=n/e[1],n-=(h=a[u-(e[1]-1)].mtm)!==null&&h!==void 0?h:0)}a.push(f)}),a}},qA={name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"ma".concat(e+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[];return r.map(function(l,u){var h={},f=l.close;return e.forEach(function(d,v){var m;a[v]=((m=a[v])!==null&&m!==void 0?m:0)+f,u>=d-1&&(h[n[v].key]=a[v]/d,a[v]-=r[u-(d-1)].close)}),h})}},XA={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(r){var t,e,n=r.data,a=r.indicator,l=r.defaultStyles,u=n.prev,h=n.current,f=(t=u?.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,d=(e=h?.macd)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,v="";d>0?v=ze(a.styles,"bars[0].upColor",l.bars[0].upColor):d<0?v=ze(a.styles,"bars[0].downColor",l.bars[0].downColor):v=ze(a.styles,"bars[0].noChangeColor",l.bars[0].noChangeColor);var m=f<d?"stroke":"fill";return{style:m,color:v,borderColor:v}}}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,h=0,f=0,d=Math.max(e[0],e[1]);return r.map(function(v,m){var y={},x=v.close;return n+=x,m>=e[0]-1&&(m>e[0]-1?a=(2*x+(e[0]-1)*a)/(e[0]+1):a=n/e[0]),m>=e[1]-1&&(m>e[1]-1?l=(2*x+(e[1]-1)*l)/(e[1]+1):l=n/e[1]),m>=d-1&&(u=a-l,y.dif=u,h+=u,m>=d+e[2]-2&&(m>d+e[2]-2?f=(u*2+f*(e[2]-1))/(e[2]+1):f=h/e[2],y.macd=(u-f)*2,y.dea=f)),y})}},GA={name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=[];return r.forEach(function(u,h){var f,d,v,m,y=(f=r[h-1])!==null&&f!==void 0?f:u;u.close<y.close?a-=(d=u.volume)!==null&&d!==void 0?d:0:u.close>y.close&&(a+=(v=u.volume)!==null&&v!==void 0?v:0);var x={obv:a};n+=a,h>=e[0]-1&&(x.maObv=n/e[0],n-=(m=l[h-(e[0]-1)].obv)!==null&&m!==void 0?m:0),l.push(x)}),l}},KA={name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(r){var t=0;return r.map(function(e,n){var a,l,u={},h=e.close,f=(a=e.volume)!==null&&a!==void 0?a:1,d=((l=r[n-1])!==null&&l!==void 0?l:e).close,v=0,m=d*f;return m!==0&&(v=(h-d)/m),t+=v,u.pvt=t,u})}},QA={name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=[],u=[];return r.forEach(function(h,f){var d,v,m={},y=((d=r[f-1])!==null&&d!==void 0?d:h).close,x=h.close-y>0?1:0;l.push(x),n+=x,f>=e[0]-1&&(m.psy=n/e[0]*100,a+=m.psy,f>=e[0]+e[1]-2&&(m.maPsy=a/e[1],a-=(v=u[f-(e[1]-1)].psy)!==null&&v!==void 0?v:0),n-=l[f-(e[0]-1)]),u.push(m)}),u}},$A={name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=[],a=0;return r.forEach(function(l,u){var h,f,d={};if(u>=e[0]-1){var v=l.close,m=((h=r[u-e[0]])!==null&&h!==void 0?h:r[u-(e[0]-1)]).close;m!==0?d.roc=(v-m)/m*100:d.roc=0,a+=d.roc,u>=e[0]-1+e[1]-1&&(d.maRoc=a/e[1],a-=(f=n[u-(e[1]-1)].roc)!==null&&f!==void 0?f:0)}n.push(d)}),n}},ZA={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){var n=e+1;return{key:"rsi".concat(n),title:"RSI".concat(n,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[],l=[];return r.map(function(u,h){var f,d={},v=((f=r[h-1])!==null&&f!==void 0?f:u).close,m=u.close-v;return e.forEach(function(y,x){var b,S,_;if(m>0?a[x]=((b=a[x])!==null&&b!==void 0?b:0)+m:l[x]=((S=l[x])!==null&&S!==void 0?S:0)+Math.abs(m),h>=y-1){l[x]!==0?d[n[x].key]=100-100/(1+a[x]/l[x]):d[n[x].key]=0;var C=r[h-(y-1)],A=(_=r[h-y])!==null&&_!==void 0?_:C,T=C.close-A.close;T>0?a[x]-=T:l[x]-=Math.abs(T)}}),d})}},JA={name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(r,t){var e=t.calcParams,n=0,a=0;return r.map(function(l,u){var h={},f=l.close;return n+=f,u>=e[0]-1&&(u>e[0]-1?a=(f*e[1]+a*(e[0]-e[1]+1))/(e[0]+1):a=n/e[0],h.sma=a),h})}},tR={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=[];return r.forEach(function(a,l){var u,h,f,d,v={},m=a.close;if(l>=e[0]-1){var y=Fx(r.slice(l-(e[0]-1),l+1),"high","low"),x=y[0],b=y[1],S=x-b,_=(m-b)/(S===0?1:S)*100;v.k=((e[1]-1)*((h=(u=n[l-1])===null||u===void 0?void 0:u.k)!==null&&h!==void 0?h:50)+_)/e[1],v.d=((e[2]-1)*((d=(f=n[l-1])===null||f===void 0?void 0:f.d)!==null&&d!==void 0?d:50)+v.k)/e[2],v.j=3*v.k-2*v.d}n.push(v)}),n}},eR={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(r){var t,e,n,a=r.data,l=r.indicator,u=r.defaultStyles,h=a.current,f=(t=h?.sar)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,d=(((e=h?.high)!==null&&e!==void 0?e:0)+((n=h?.low)!==null&&n!==void 0?n:0))/2,v=f<d?ze(l.styles,"circles[0].upColor",u.circles[0].upColor):ze(l.styles,"circles[0].downColor",u.circles[0].downColor);return{color:v}}}],calc:function(r,t){var e=t.calcParams,n=e[0]/100,a=e[1]/100,l=e[2]/100,u=n,h=-100,f=!1,d=0;return r.map(function(v,m){var y=d,x=v.high,b=v.low;if(f){(h===-100||h<x)&&(h=x,u=Math.min(u+a,l)),d=y+u*(h-y);var S=Math.min(r[Math.max(1,m)-1].low,b);d>v.low?(d=h,u=n,h=-100,f=!f):d>S&&(d=S)}else{(h===-100||h>b)&&(h=b,u=Math.min(u+a,l)),d=y+u*(h-y);var _=Math.max(r[Math.max(1,m)-1].high,x);d<v.high?(d=h,u=0,h=-100,f=!f):d<_&&(d=_)}return{high:x,low:b,sar:d}})}},iR={name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,h=0,f=0,d=0,v=[];return r.forEach(function(m,y){var x,b={},S=m.close;if(n+=S,y>=e[0]-1&&(y>e[0]-1?a=(2*S+(e[0]-1)*a)/(e[0]+1):a=n/e[0],h+=a,y>=e[0]*2-2&&(y>e[0]*2-2?l=(2*a+(e[0]-1)*l)/(e[0]+1):l=h/e[0],f+=l,y>=e[0]*3-3))){var _=0,C=0;y>e[0]*3-3?(_=(2*l+(e[0]-1)*u)/(e[0]+1),C=(_-u)/u*100):_=f/e[0],u=_,b.trix=C,d+=C,y>=e[0]*3+e[1]-4&&(b.maTrix=d/e[1],d-=(x=v[y-(e[1]-1)].trix)!==null&&x!==void 0?x:0)}v.push(b)}),v}};function By(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(r){var t=r.data,e=r.indicator,n=r.defaultStyles,a=t.current,l=ze(e.styles,"bars[0].noChangeColor",n.bars[0].noChangeColor);return at(a)&&(a.close>a.open?l=ze(e.styles,"bars[0].upColor",n.bars[0].upColor):a.close<a.open&&(l=ze(e.styles,"bars[0].downColor",n.bars[0].downColor))),{color:l}}}}var nR={name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},By()],regenerateFigures:function(r){var t=r.map(function(e,n){return{key:"ma".concat(n+1),title:"MA".concat(e,": "),type:"line"}});return t.push(By()),t},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[];return r.map(function(l,u){var h,f=(h=l.volume)!==null&&h!==void 0?h:0,d={volume:f,open:l.open,close:l.close};return e.forEach(function(v,m){var y,x;a[m]=((y=a[m])!==null&&y!==void 0?y:0)+f,u>=v-1&&(d[n[m].key]=a[m]/v,a[m]-=(x=r[u-(v-1)].volume)!==null&&x!==void 0?x:0)}),d})}},rR={name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,h=[];return r.forEach(function(f,d){var v,m,y,x,b,S={},_=f.close,C=((v=r[d-1])!==null&&v!==void 0?v:f).close,A=(m=f.volume)!==null&&m!==void 0?m:0;if(_>C?n+=A:_<C?a+=A:l+=A,d>=e[0]-1){var T=l/2;a+T===0?S.vr=0:S.vr=(n+T)/(a+T)*100,u+=S.vr,d>=e[0]+e[1]-2&&(S.maVr=u/e[1],u-=(y=h[d-(e[1]-1)].vr)!==null&&y!==void 0?y:0);var D=r[d-(e[0]-1)],M=(x=r[d-e[0]])!==null&&x!==void 0?x:D,j=D.close,N=(b=D.volume)!==null&&b!==void 0?b:0;j>M.close?n-=N:j<M.close?a-=N:l-=N}h.push(S)}),h}},sR={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"wr".concat(e+1),title:"WR".concat(e+1,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures;return r.map(function(a,l){var u={},h=a.close;return e.forEach(function(f,d){var v=f-1;if(l>=v){var m=Fx(r.slice(l-v,l+1),"high","low"),y=m[0],x=m[1],b=y-x;u[n[d].key]=b===0?0:(h-y)/b*100}}),u})}},Px={},aR=[OA,kA,zA,LA,BA,FA,PA,IA,VA,UA,HA,YA,WA,qA,XA,GA,KA,QA,$A,ZA,JA,tR,eR,iR,nR,rR,sR];aR.forEach(function(r){Px[r.name]=NA.extend(r)});function Ix(r){var t;return(t=Px[r])!==null&&t!==void 0?t:null}function Pi(r,t){var e,n=(e=t?.ignoreEvent)!==null&&e!==void 0?e:!1;return gu(n)?!n:!n.includes(r)}var Fy=1,Ga=-1,lR="overlay_",Ls="overlay_figure_",oR=(function(){function r(t){this.groupId="",this.totalStep=1,this.currentStep=Fy,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode="normal",this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseMove=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(t)}return r.prototype.override=function(t){var e,n;this._prevOverlay=dl(bt(bt({},this),{_prevOverlay:null}));var a=t.id,l=t.name;t.currentStep;var u=t.points,h=t.styles,f=yu(t,["id","name","currentStep","points","styles"]);if(Re(this,f),Kt(this.name)||(this.name=l??""),!Kt(this.id)&&Kt(a)&&(this.id=a),at(h)&&((e=this.styles)!==null&&e!==void 0||(this.styles={}),Re(this.styles,h)),Cn(u)&&u.length>0){var d=0;if(this.points=Yu([],_l(u),!1),u.length>=this.totalStep-1?(this.currentStep=Ga,d=this.totalStep-1):(this.currentStep=u.length+1,d=u.length),xi(this.performEventMoveForDrawing))for(var v=0;v<d;v++)this.performEventMoveForDrawing({currentStep:v+2,mode:this.mode,points:this.points,performPointIndex:v,performPoint:this.points[v]});this.currentStep===Ga&&((n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},r.prototype.getPrevZLevel=function(){return this._prevZLevel},r.prototype.setPrevZLevel=function(t){this._prevZLevel=t},r.prototype.shouldUpdate=function(){var t=this._prevOverlay.zLevel!==this.zLevel,e=t||JSON.stringify(this._prevOverlay.points)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles;return{sort:t,draw:e}},r.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=Ga:this.currentStep++},r.prototype.forceComplete=function(){this.currentStep=Ga},r.prototype.isDrawing=function(){return this.currentStep!==Ga},r.prototype.isStart=function(){return this.currentStep===Fy},r.prototype.eventMoveForDrawing=function(t){var e,n=this.currentStep-1,a={};Dt(t.timestamp)&&(a.timestamp=t.timestamp),Dt(t.dataIndex)&&(a.dataIndex=t.dataIndex),Dt(t.value)&&(a.value=t.value),this.points[n]=a,(e=this.performEventMoveForDrawing)===null||e===void 0||e.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:n,performPoint:a})},r.prototype.eventPressedPointMove=function(t,e){var n;this.points[e].timestamp=t.timestamp,Dt(t.value)&&(this.points[e].value=t.value),(n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:e,performPoint:this.points[e]})},r.prototype.startPressedMove=function(t){this._prevPressedPoint=bt({},t),this._prevPressedPoints=dl(this.points)},r.prototype.eventPressedOtherMove=function(t,e){if(this._prevPressedPoint!==null){var n=null;Dt(t.dataIndex)&&Dt(this._prevPressedPoint.dataIndex)&&(n=t.dataIndex-this._prevPressedPoint.dataIndex);var a=null;Dt(t.value)&&Dt(this._prevPressedPoint.value)&&(a=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(l){var u;Dt(l.timestamp)&&(l.dataIndex=e.timestampToDataIndex(l.timestamp));var h=bt({},l);return Dt(n)&&Dt(l.dataIndex)&&(h.dataIndex=l.dataIndex+n,h.timestamp=(u=e.dataIndexToTimestamp(h.dataIndex))!==null&&u!==void 0?u:void 0),Dt(a)&&Dt(l.value)&&(h.value=l.value+a),h})}},r.extend=function(t){var e=(function(n){Pt(a,n);function a(){return n.call(this,t)||this}return a})(r);return e},r})(),uR={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t,e,n,a=r.chart,l=r.coordinates,u=r.bounding,h=r.overlay,f=r.yAxis,d=h.points;if(l.length>0){var v=0;if(!((t=f?.isInCandle())!==null&&t!==void 0)||t)v=(n=(e=a.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE;else{var m=a.getIndicators({paneId:h.paneId});m.forEach(function(T){v=Math.max(v,T.precision)})}var y=[],x=[],b=0,S=u.width;if(l.length>1&&Dt(d[0].value)&&Dt(d[1].value)){var _=[1,.786,.618,.5,.382,.236,0],C=l[0].y-l[1].y,A=d[0].value-d[1].value;_.forEach(function(T){var D,M=l[1].y+C*T,j=a.getDecimalFold().format(a.getThousandsSeparator().format((((D=d[1].value)!==null&&D!==void 0?D:0)+A*T).toFixed(v)));y.push({coordinates:[{x:b,y:M},{x:S,y:M}]}),x.push({x:b,y:M,text:"".concat(j," (").concat((T*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:y},{type:"text",isCheckEvent:!1,attrs:x}]}return[]}},cR={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding,n={x:0,y:t[0].y};return at(t[1])&&t[0].x<t[1].x&&(n.x=e.width),[{type:"line",attrs:{coordinates:[t[0],n]}}]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].value=e.value,t[1].value=e.value},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].value=n.value)}},hR={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=[];return t.length===2&&e.push({coordinates:t}),[{type:"line",attrs:e}]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].value=e.value,t[1].value=e.value},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].value=n.value)}},fR={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]}}]}},zd=(function(){function r(){this._children=[],this._callbacks=new Map}return r.prototype.registerEvent=function(t,e){return this._callbacks.set(t,e),this},r.prototype.onEvent=function(t,e){var n=this._callbacks.get(t);return at(n)&&this.checkEventOn(e)?n(e):!1},r.prototype.dispatchEventToChildren=function(t,e){var n=this._children.length-1;if(n>-1){for(var a=n;a>-1;a--)if(this._children[a].dispatchEvent(t,e))return!0}return!1},r.prototype.dispatchEvent=function(t,e){return this.dispatchEventToChildren(t,e)?!0:this.onEvent(t,e)},r.prototype.addChild=function(t){return this._children.push(t),this},r.prototype.clear=function(){this._children=[]},r})(),ke=2,dR=(function(r){Pt(t,r);function t(e){var n=r.call(this)||this;return n.attrs=e.attrs,n.styles=e.styles,n}return t.prototype.checkEventOn=function(e){return this.checkEventOnImp(e,this.attrs,this.styles)},t.prototype.setAttrs=function(e){return this.attrs=e,this},t.prototype.setStyles=function(e){return this.styles=e,this},t.prototype.draw=function(e){this.drawImp(e,this.attrs,this.styles)},t.extend=function(e){var n=(function(a){Pt(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype.checkEventOnImp=function(u,h,f){return e.checkEventOn(u,h,f)},l.prototype.drawImp=function(u,h,f){e.draw(u,h,f)},l})(t);return n},t})(zd);function vR(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var h=u.value,f=h.coordinates;if(f.length>1)for(var d=1;d<f.length;d++){var v=f[d-1],m=f[d];if(v.x===m.x){if(Math.abs(v.y-r.y)+Math.abs(m.y-r.y)-Math.abs(v.y-m.y)<ke+ke&&Math.abs(r.x-v.x)<ke)return!0}else{var y=jd(v,m),x=Vx(y,r),b=Math.abs(x-r.y);if(Math.abs(v.x-r.x)+Math.abs(m.x-r.x)-Math.abs(v.x-m.x)<ke+ke&&b*b/(y[0]*y[0]+1)<ke*ke)return!0}}}}catch(S){e={error:S}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function Vx(r,t){return r!==null?t.x*r[0]+r[1]:t.y}function Su(r,t,e){var n=jd(r,t);return Vx(n,e)}function jd(r,t){var e=r.x-t.x;if(e!==0){var n=(r.y-t.y)/e,a=r.y-n*r.x;return[n,a]}return null}function Ux(r,t,e){var n=t.length,a=Dt(e)?e>0&&e<1?e:0:e?.5:0;if(a>0&&n>2){for(var l=t[0].x,u=t[0].y,h=1;h<n-1;h++){var f=t[h-1],d=t[h],v=t[h+1],m=d.x-f.x,y=d.y-f.y,x=v.x-d.x,b=v.y-d.y,S=v.x-f.x,_=v.y-f.y,C=Math.sqrt(m*m+y*y),A=Math.sqrt(x*x+b*b),T=A/(A+C),D=d.x+S*a*T,M=d.y+_*a*T;D=Math.min(D,Math.max(v.x,d.x)),M=Math.min(M,Math.max(v.y,d.y)),D=Math.max(D,Math.min(v.x,d.x)),M=Math.max(M,Math.min(v.y,d.y)),S=D-d.x,_=M-d.y;var j=d.x-S*C/A,N=d.y-_*C/A;j=Math.min(j,Math.max(f.x,d.x)),N=Math.min(N,Math.max(f.y,d.y)),j=Math.max(j,Math.min(f.x,d.x)),N=Math.max(N,Math.min(f.y,d.y)),S=d.x-j,_=d.y-N,D=d.x+S*A/C,M=d.y+_*A/C,r.bezierCurveTo(l,u,j,N,d.x,d.y),l=D,u=M}var V=t[n-1];r.bezierCurveTo(l,u,V.x,V.y,V.x,V.y)}else for(var h=1;h<n;h++)r.lineTo(t[h].x,t[h].y)}function pR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"solid":a,u=e.smooth,h=u===void 0?!1:u,f=e.size,d=f===void 0?1:f,v=e.color,m=v===void 0?"currentColor":v,y=e.dashedValue,x=y===void 0?[2,2]:y;r.lineWidth=d,r.strokeStyle=m,l==="dashed"?r.setLineDash(x):r.setLineDash([]);var b=d%2===1?.5:0;n.forEach(function(S){var _=S.coordinates;_.length>1&&(_.length===2&&(_[0].x===_[1].x||_[0].y===_[1].y)?(r.beginPath(),_[0].x===_[1].x?(r.moveTo(_[0].x+b,_[0].y),r.lineTo(_[1].x+b,_[1].y)):(r.moveTo(_[0].x,_[0].y+b),r.lineTo(_[1].x,_[1].y+b)),r.stroke(),r.closePath()):(r.save(),d%2===1&&r.translate(.5,.5),r.beginPath(),r.moveTo(_[0].x,_[0].y),Ux(r,_,h),r.stroke(),r.closePath(),r.restore()))})}var mR={name:"line",checkEventOn:vR,draw:function(r,t,e){pR(r,t,e)}};function Hx(r,t,e){var n=e??0,a=[];if(r.length>1)if(r[0].x===r[1].x){var l=0,u=t.height;if(a.push({coordinates:[{x:r[0].x,y:l},{x:r[0].x,y:u}]}),r.length>2){a.push({coordinates:[{x:r[2].x,y:l},{x:r[2].x,y:u}]});for(var h=r[0].x-r[2].x,f=0;f<n;f++){var d=h*(f+1);a.push({coordinates:[{x:r[0].x+d,y:l},{x:r[0].x+d,y:u}]})}}}else{var v=0,m=t.width,y=jd(r[0],r[1]),x=y[0],b=y[1];if(a.push({coordinates:[{x:v,y:v*x+b},{x:m,y:m*x+b}]}),r.length>2){var S=r[2].y-x*r[2].x;a.push({coordinates:[{x:v,y:v*x+S},{x:m,y:m*x+S}]});for(var h=b-S,f=0;f<n;f++){var _=b+h*(f+1);a.push({coordinates:[{x:v,y:v*x+_},{x:m,y:m*x+_}]})}}}return a}var gR={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:Hx(t,e)}]}},yR={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:Hx(t,e,1)}]}},bR={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t,e,n,a=r.chart,l=r.coordinates,u=r.bounding,h=r.overlay,f=r.yAxis,d=0;if(!((t=f?.isInCandle())!==null&&t!==void 0)||t)d=(n=(e=a.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE;else{var v=a.getIndicators({paneId:h.paneId});v.forEach(function(x){d=Math.max(d,x.precision)})}var m=h.points[0].value,y=m===void 0?0:m;return[{type:"line",attrs:{coordinates:[l[0],{x:u.width,y:l[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:l[0].x,y:l[0].y,text:a.getDecimalFold().format(a.getThousandsSeparator().format(y.toFixed(d))),baseline:"bottom"}}]}};function xR(r,t){if(r.length>1){var e={x:0,y:0};return r[0].x===r[1].x&&r[0].y!==r[1].y?r[0].y<r[1].y?e={x:r[0].x,y:t.height}:e={x:r[0].x,y:0}:r[0].x>r[1].x?e={x:0,y:Su(r[0],r[1],{x:0,y:r[0].y})}:e={x:t.width,y:Su(r[0],r[1],{x:t.width,y:r[0].y})},{coordinates:[r[0],e]}}return[]}var SR={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:xR(t,e)}]}},_R={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]}},wR={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return t.length===2?t[0].x===t[1].x?[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:e.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Su(t[0],t[1],{x:0,y:t[0].y})},{x:e.width,y:Su(t[0],t[1],{x:e.width,y:t[0].y})}]}}]:[]}},ER={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;if(t.length===2){var n={x:t[0].x,y:0};return t[0].y<t[1].y&&(n.y=e.height),[{type:"line",attrs:{coordinates:[t[0],n]}}]}return[]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].timestamp=e.timestamp,t[0].dataIndex=e.dataIndex,t[1].timestamp=e.timestamp,t[1].dataIndex=e.dataIndex},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].timestamp=n.timestamp,e[0].dataIndex=n.dataIndex)}},CR={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].timestamp=e.timestamp,t[0].dataIndex=e.dataIndex,t[1].timestamp=e.timestamp,t[1].dataIndex=e.dataIndex},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].timestamp=n.timestamp,e[0].dataIndex=n.dataIndex)}},MR={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:e.height}]}}]}},TR={name:"simpleAnnotation",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(r){var t,e=r.overlay,n=r.coordinates,a="";at(e.extendData)&&(xi(e.extendData)?a=e.extendData(e):a=(t=e.extendData)!==null&&t!==void 0?t:"");var l=n[0].x,u=n[0].y-6,h=u-50,f=h-5;return[{type:"line",attrs:{coordinates:[{x:l,y:u},{x:l,y:h}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:l,y:h},{x:l-4,y:f},{x:l+4,y:f}]},ignoreEvent:!0},{type:"text",attrs:{x:l,y:f,text:a,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},AR={name:"simpleTag",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(r){var t=r.bounding,e=r.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(r){var t,e,n,a,l=r.chart,u=r.overlay,h=r.coordinates,f=r.bounding,d=r.yAxis,v=(t=d?.isFromZero())!==null&&t!==void 0?t:!1,m="left",y=0;v?(m="left",y=0):(m="right",y=f.width);var x="";return at(u.extendData)&&(xi(u.extendData)?x=u.extendData(u):x=(e=u.extendData)!==null&&e!==void 0?e:""),!at(x)&&Dt(u.points[0].value)&&(x=We(u.points[0].value,(a=(n=l.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&a!==void 0?a:Ue.PRICE)),{type:"text",attrs:{x:y,y:h[0].y,text:x,align:m,baseline:"middle"}}}},Yx={},RR=[uR,cR,hR,fR,gR,yR,bR,SR,_R,wR,ER,CR,MR,TR,AR];RR.forEach(function(r){Yx[r.name]=oR.extend(r)});function DR(r){var t;return(t=Yx[r])!==null&&t!==void 0?t:null}var NR={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},title:{color:"#76808F"},legend:{color:"#76808F"}}},indicator:{tooltip:{title:{color:"#76808F"},legend:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},OR={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},title:{color:"#929AA5"},legend:{color:"#929AA5"}}},indicator:{tooltip:{title:{color:"#929AA5"},legend:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},kR={light:NR,dark:OR};function zR(r){var t;return(t=kR[r])!==null&&t!==void 0?t:null}var au=30,Wx=100,Vt={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},Py={MIN:1,MAX:50},jR=10,LR=80,BR=.2,ld=10,FR=(function(){function r(t,e){var n=this;this._styles=DA(),this._formatter={formatDate:function(y){var x=y.dateTimeFormat,b=y.timestamp,S=y.template;return mA(x,b,S)},formatBigNumber:gA,formatExtendText:function(y){return""}},this._innerFormatter={formatDate:function(y,x,b){return n._formatter.formatDate({dateTimeFormat:n._dateTimeFormat,timestamp:y,template:x,type:b})},formatBigNumber:function(y){return n._formatter.formatBigNumber(y)},formatExtendText:function(y){return n._formatter.formatExtendText(y)}},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(y){return yA(y,n._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(y){return bA(y,n._decimalFold.threshold)}},this._symbol=null,this._period=null,this._dataList=[],this._dataLoader=null,this._loading=!1,this._dataLoadMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._zoomAnchor={main:"cursor",xAxis:"cursor"},this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=jR,this._offsetRightDistance=LR,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole="bar_count",this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=jy(),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._actions=new Map,this._indicators=new Map,this._overlays=new Map,this._progressOverlayInfo=null,this._lastPriceMarkExtendTextUpdateTimers=[],this._pressedOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._chart=t,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var a=e??{},l=a.styles,u=a.locale,h=a.timezone,f=a.formatter,d=a.thousandsSeparator,v=a.decimalFold,m=a.zoomAnchor;at(l)&&this.setStyles(l),Kt(u)&&this.setLocale(u),this.setTimezone(h??""),at(f)&&this.setFormatter(f),at(d)&&this.setThousandsSeparator(d),at(v)&&this.setDecimalFold(v),at(m)&&this.setZoomAnchor(m),this._taskScheduler=new _A(function(){n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})})}return r.prototype.setStyles=function(t){var e=this,n,a,l,u,h,f,d=null;if(Kt(t)?d=zR(t):d=t,Re(this._styles,d),Cn((l=(a=(n=d?.candle)===null||n===void 0?void 0:n.tooltip)===null||a===void 0?void 0:a.legend)===null||l===void 0?void 0:l.template)&&(this._styles.candle.tooltip.legend.template=d.candle.tooltip.legend.template),at((f=(h=(u=d?.candle)===null||u===void 0?void 0:u.priceMark)===null||h===void 0?void 0:h.last)===null||f===void 0?void 0:f.extendTexts)){this._clearLastPriceMarkExtendTextUpdateTimer();var v=[];this._styles.candle.priceMark.last.extendTexts.forEach(function(m){var y=m.updateInterval;if(m.show&&y>0&&!v.includes(y)){v.push(y);var x=setInterval(function(){e._chart.updatePane(0,Vt.CANDLE)},y);e._lastPriceMarkExtendTextUpdateTimers.push(x)}})}},r.prototype.getStyles=function(){return this._styles},r.prototype.setFormatter=function(t){Re(this._formatter,t)},r.prototype.getFormatter=function(){return this._formatter},r.prototype.getInnerFormatter=function(){return this._innerFormatter},r.prototype.setLocale=function(t){this._locale=t},r.prototype.getLocale=function(){return this._locale},r.prototype.setTimezone=function(t){if(!at(this._dateTimeFormat)||this.getTimezone()!==t){var e={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};t.length>0&&(e.timeZone=t);var n=null;try{n=new Intl.DateTimeFormat("en",e)}catch{}n!==null&&(this._dateTimeFormat=n)}},r.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},r.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},r.prototype.setThousandsSeparator=function(t){Re(this._thousandsSeparator,t)},r.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},r.prototype.setDecimalFold=function(t){Re(this._decimalFold,t)},r.prototype.getDecimalFold=function(){return this._decimalFold},r.prototype.setSymbol=function(t){var e=this;this.resetData(function(){e._symbol=bt(bt({pricePrecision:Ue.PRICE,volumePrecision:Ue.VOLUME},e._symbol),t),e._synchronizeIndicatorSeriesPrecision()})},r.prototype.getSymbol=function(){return this._symbol},r.prototype.setPeriod=function(t){var e=this;this.resetData(function(){e._period=t})},r.prototype.getPeriod=function(){return this._period},r.prototype.getDataList=function(){return this._dataList},r.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},r.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},r.prototype._addData=function(t,e,n){var a,l,u=!1,h=!1,f=0;if(Cn(t)){var d={backward:!1,forward:!1};switch(gu(n)?(d.backward=n,d.forward=n):(d.backward=(a=n?.backward)!==null&&a!==void 0?a:!1,d.forward=(l=n?.forward)!==null&&l!==void 0?l:!1),f=t.length,e){case"init":{this._clearData(),this._dataList=t,this._dataLoadMore.backward=d.backward,this._dataLoadMore.forward=d.forward,this.setOffsetRightDistance(this._offsetRightDistance),h=!0;break}case"backward":{this._dataList=this._dataList.concat(t),this._dataLoadMore.backward=d.backward,this._lastBarRightSideDiffBarCount-=f,h=f>0;break}case"forward":{this._dataList=t.concat(this._dataList),this._dataLoadMore.forward=d.forward,h=f>0;break}}u=!0}else{var v=this._dataList.length,m=t.timestamp,y=ze(this._dataList[v-1],"timestamp",0);if(m>y){this._dataList.push(t);var x=this.getLastBarRightSideDiffBarCount();x<0&&this.setLastBarRightSideDiffBarCount(--x),f=1,u=!0,h=!0}else m===y&&(this._dataList[v-1]=t,u=!0,h=!0)}if(u&&h){this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0});var b=this.getIndicatorsByFilter({});b.length>0?this._calcIndicator(b):this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:e!=="init"})}},r.prototype.setDataLoader=function(t){var e=this;this.resetData(function(){e._dataLoader=t})},r.prototype._calcOptimalBarSpace=function(){var t=4,e=1-BR*Math.atan(Math.max(t,this._barSpace)-t)/(Math.PI*.5),n=Math.min(Math.floor(this._barSpace*e),Math.floor(this._barSpace));n%2===0&&n+2>=this._barSpace&&--n,this._gapBarSpace=Math.max(1,n)},r.prototype._adjustVisibleRange=function(){var t,e,n=this._dataList.length,a=this._totalBarSpace/this._barSpace,l=0,u=0;this._scrollLimitRole==="distance"?(l=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,u=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(l=this._minVisibleBarCount.left,u=this._minVisibleBarCount.right),l=Math.max(0,l),u=Math.max(0,u);var h=a-Math.min(l,n);this._lastBarRightSideDiffBarCount>h&&(this._lastBarRightSideDiffBarCount=h);var f=-n+Math.min(u,n);this._lastBarRightSideDiffBarCount<f&&(this._lastBarRightSideDiffBarCount=f);var d=Math.round(this._lastBarRightSideDiffBarCount+n+.5),v=d;d>n&&(d=n);var m=Math.round(d-a)-1;m<0&&(m=0);var y=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-a)-1:m;this._visibleRange={from:m,to:d,realFrom:y,realTo:v},this.executeAction("onVisibleRangeChange",this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var x=y;x<v;x++){var b=this._dataList[x],S=this.dataIndexToCoordinate(x);this._visibleRangeDataList.push({dataIndex:x,x:S,data:{prev:(t=this._dataList[x-1])!==null&&t!==void 0?t:b,current:b,next:(e=this._dataList[x+1])!==null&&e!==void 0?e:b}}),at(b)&&(this._visibleRangeHighLowPrice[0].price<b.high&&(this._visibleRangeHighLowPrice[0].price=b.high,this._visibleRangeHighLowPrice[0].x=S),this._visibleRangeHighLowPrice[1].price>b.low&&(this._visibleRangeHighLowPrice[1].price=b.low,this._visibleRangeHighLowPrice[1].x=S))}m===0?this._dataLoadMore.forward&&this._processDataLoad("forward"):d===n&&this._dataLoadMore.backward&&this._processDataLoad("backward")},r.prototype._processDataLoad=function(t){var e=this,n,a,l,u;if(!this._loading&&at(this._dataLoader)&&at(this._symbol)&&at(this._period)){this._loading=!0;var h={type:t,symbol:this._symbol,period:this._period,timestamp:null,callback:function(f,d){var v,m;e._loading=!1,e._addData(f,t,d),t==="init"&&((m=(v=e._dataLoader)===null||v===void 0?void 0:v.subscribeBar)===null||m===void 0||m.call(v,{symbol:e._symbol,period:e._period,callback:function(y){e._addData(y,"update")}}))}};switch(t){case"backward":{h.timestamp=(a=(n=this._dataList[this._dataList.length-1])===null||n===void 0?void 0:n.timestamp)!==null&&a!==void 0?a:null;break}case"forward":{h.timestamp=(u=(l=this._dataList[0])===null||l===void 0?void 0:l.timestamp)!==null&&u!==void 0?u:null;break}}this._dataLoader.getBars(h)}},r.prototype._processDataUnsubscribe=function(){var t,e;at(this._dataLoader)&&at(this._symbol)&&at(this._period)&&((e=(t=this._dataLoader).unsubscribeBar)===null||e===void 0||e.call(t,{symbol:this._symbol,period:this._period}))},r.prototype.resetData=function(t){this._processDataUnsubscribe(),t?.(),this._loading=!1,this._processDataLoad("init")},r.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},r.prototype.setBarSpace=function(t,e){t<Py.MIN||t>Py.MAX||this._barSpace===t||(this._barSpace=t,this._calcOptimalBarSpace(),e?.(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0}))},r.prototype.setTotalBarSpace=function(t){this._totalBarSpace!==t&&(this._totalBarSpace=t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},r.prototype.setOffsetRightDistance=function(t,e){return this._offsetRightDistance=this._scrollLimitRole==="distance"?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(e??!1)&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0})),this},r.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},r.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},r.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},r.prototype.setLastBarRightSideDiffBarCount=function(t){this._lastBarRightSideDiffBarCount=t},r.prototype.setMaxOffsetLeftDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.left=t},r.prototype.setMaxOffsetRightDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.right=t},r.prototype.setLeftMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.left=t},r.prototype.setRightMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.right=t},r.prototype.getVisibleRange=function(){return this._visibleRange},r.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},r.prototype.scroll=function(t){if(this._scrollEnabled){var e=t/this._barSpace,n=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0});var a=Math.round(n-this._lastBarRightSideDiffBarCount*this._barSpace);a!==0&&this.executeAction("onScroll",{distance:a})}},r.prototype.getDataByDataIndex=function(t){var e;return(e=this._dataList[t])!==null&&e!==void 0?e:null},r.prototype.coordinateToFloatIndex=function(t){var e=this._dataList.length,n=(this._totalBarSpace-t)/this._barSpace,a=e+this._lastBarRightSideDiffBarCount-n;return Math.round(a*1e6)/1e6},r.prototype.dataIndexToTimestamp=function(t){var e=this._dataList.length;if(e===0)return null;var n=this.getDataByDataIndex(t);if(at(n))return n.timestamp;if(at(this._period)){var a=e-1,l=null,u=0;if(t>a?(l=this._dataList[a].timestamp,u=t-a):t<0&&(l=this._dataList[0].timestamp,u=t),Dt(l)){var h=this._period,f=h.type,d=h.span;switch(f){case"second":return l+d*1e3*u;case"minute":return l+d*60*1e3*u;case"hour":return l+d*60*60*1e3*u;case"day":return l+d*24*60*60*1e3*u;case"week":return l+d*7*24*60*60*1e3*u;case"month":{var v=new Date(l),m=v.getDate();v.setDate(1),v.setMonth(v.getMonth()+d*u);var y=new Date(v.getFullYear(),v.getMonth()+1,0).getDate();return v.setDate(Math.min(m,y)),v.getTime()}case"year":{var v=new Date(l);return v.setFullYear(v.getFullYear()+d*u),v.getTime()}}}}return null},r.prototype.timestampToDataIndex=function(t){var e=this._dataList.length;if(e===0)return 0;if(at(this._period)){var n=null,a=0,l=e-1,u=this._dataList[l].timestamp;t>u&&(n=u,a=l);var h=this._dataList[0].timestamp;if(t<h&&(n=h,a=0),Dt(n)){var f=this._period,d=f.type,v=f.span;switch(d){case"second":return a+Math.floor((t-n)/(v*1e3));case"minute":return a+Math.floor((t-n)/(v*60*1e3));case"hour":return a+Math.floor((t-n)/(v*60*60*1e3));case"day":return a+Math.floor((t-n)/(v*24*60*60*1e3));case"week":return a+Math.floor((t-n)/(v*7*24*60*60*1e3));case"month":{var m=new Date(n),y=new Date(t),x=m.getFullYear(),b=y.getFullYear(),S=m.getMonth(),_=y.getMonth();return a+Math.floor(((b-x)*12+(_-S))/v)}case"year":{var x=new Date(n).getFullYear(),b=new Date(t).getFullYear();return a+Math.floor((b-x)/v)}}}}return ad(this._dataList,"timestamp",t)},r.prototype.dataIndexToCoordinate=function(t){var e=this._dataList.length,n=e+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(n-.5)*this._barSpace+.5)},r.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},r.prototype.zoom=function(t,e,n){var a=this,l;if(this._zoomEnabled){var u=e??{x:(l=this._crosshair.x)!==null&&l!==void 0?l:this._totalBarSpace/2};n==="xAxis"?this._zoomAnchor.xAxis==="last_bar"&&(u.x=this.dataIndexToCoordinate(this._dataList.length-1)):this._zoomAnchor.main==="last_bar"&&(u.x=this.dataIndexToCoordinate(this._dataList.length-1));var h=u.x,f=this.coordinateToFloatIndex(h),d=this._barSpace,v=this._barSpace+t*(this._barSpace/ld);this.setBarSpace(v,function(){a._lastBarRightSideDiffBarCount+=f-a.coordinateToFloatIndex(h)});var m=this._barSpace/d;m!==1&&this.executeAction("onZoom",{scale:m})}},r.prototype.setZoomEnabled=function(t){this._zoomEnabled=t},r.prototype.isZoomEnabled=function(){return this._zoomEnabled},r.prototype.setZoomAnchor=function(t){Kt(t)?(this._zoomAnchor.main=t,this._zoomAnchor.xAxis=t):(Kt(t.main)&&(this._zoomAnchor.main=t.main),Kt(t.xAxis)&&(this._zoomAnchor.xAxis=t.xAxis))},r.prototype.getZoomAnchor=function(){return bt({},this._zoomAnchor)},r.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},r.prototype.isScrollEnabled=function(){return this._scrollEnabled},r.prototype.setCrosshair=function(t,e){var n,a=e??{},l=a.notInvalidate,u=a.notExecuteAction,h=a.forceInvalidate,f=t??{},d=0,v=0;Dt(f.x)?(d=this.coordinateToDataIndex(f.x),d<0?v=0:d>this._dataList.length-1?v=this._dataList.length-1:v=d):(d=this._dataList.length-1,v=d);var m=this._dataList[v],y=this.dataIndexToCoordinate(d),x={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=bt(bt({},f),{realX:y,kLineData:m,realDataIndex:d,dataIndex:v,timestamp:(n=this.dataIndexToTimestamp(d))!==null&&n!==void 0?n:void 0}),(x.x!==f.x||x.y!==f.y||x.paneId!==f.paneId||(h??!1))&&(at(m)&&!(u??!1)&&this.hasAction("onCrosshairChange")&&Kt(this._crosshair.paneId)&&this.executeAction("onCrosshairChange",t),(l??!1)||this._chart.updatePane(1))},r.prototype.getCrosshair=function(){return this._crosshair},r.prototype.executeAction=function(t,e){var n;(n=this._actions.get(t))===null||n===void 0||n.execute(e)},r.prototype.subscribeAction=function(t,e){var n;this._actions.has(t)||this._actions.set(t,new wA),(n=this._actions.get(t))===null||n===void 0||n.subscribe(e)},r.prototype.unsubscribeAction=function(t,e){var n=this._actions.get(t);at(n)&&(n.unsubscribe(e),n.isEmpty()&&this._actions.delete(t))},r.prototype.hasAction=function(t){var e=this._actions.get(t);return at(e)&&!e.isEmpty()},r.prototype._sortIndicators=function(t){var e;Kt(t)?(e=this._indicators.get(t))===null||e===void 0||e.sort(function(n,a){return n.zLevel-a.zLevel}):this._indicators.forEach(function(n){n.sort(function(a,l){return a.zLevel-l.zLevel})})},r.prototype._calcIndicator=function(t){var e=this,n=[];if(n=n.concat(t),n.length>0){var a={};n.forEach(function(l){a[l.id]=l.calcImp(e._dataList)}),this._taskScheduler.add(a)}},r.prototype.addIndicator=function(t,e,n){var a=t.name,l=this.getIndicatorsByFilter(t);if(l.length>0)return!1;var u=this.getIndicatorsByPaneId(e),h=Ix(a),f=new h;return this._synchronizeIndicatorSeriesPrecision(f),f.paneId=e,f.override(t),n||(this.removeIndicator({paneId:e}),u=[]),u.push(f),this._indicators.set(e,u),this._sortIndicators(e),this._calcIndicator(f),!0},r.prototype.getIndicatorsByPaneId=function(t){var e;return(e=this._indicators.get(t))!==null&&e!==void 0?e:[]},r.prototype.getIndicatorsByFilter=function(t){var e=t.paneId,n=t.name,a=t.id,l=function(h){return at(a)?h.id===a:!at(n)||h.name===n},u=[];return at(e)?u=u.concat(this.getIndicatorsByPaneId(e).filter(l)):this._indicators.forEach(function(h){u=u.concat(h.filter(l))}),u},r.prototype.removeIndicator=function(t){var e=this,n=!1,a=this.getIndicatorsByFilter(t);return a.forEach(function(l){var u=e.getIndicatorsByPaneId(l.paneId),h=u.findIndex(function(f){return f.id===l.id});h>-1&&(u.splice(h,1),n=!0),u.length===0&&e._indicators.delete(l.paneId)}),n},r.prototype.hasIndicators=function(t){return this._indicators.has(t)},r.prototype._synchronizeIndicatorSeriesPrecision=function(t){if(at(this._symbol)){var e=this._symbol,n=e.pricePrecision,a=n===void 0?Ue.PRICE:n,l=e.volumePrecision,u=l===void 0?Ue.VOLUME:l,h=function(f){switch(f.series){case"price":{f.setSeriesPrecision(a);break}case"volume":{f.setSeriesPrecision(u);break}}};at(t)?h(t):this._indicators.forEach(function(f){f.forEach(function(d){h(d)})})}},r.prototype.overrideIndicator=function(t){var e=this,n=!1,a=!1,l=this.getIndicatorsByFilter(t);return l.forEach(function(u){u.override(t);var h=u.shouldUpdateImp(),f=h.calc,d=h.draw,v=h.sort;v&&(a=!0),f?e._calcIndicator(u):d&&(n=!0)}),a&&this._sortIndicators(),n?(this._chart.layout({update:!0}),!0):!1},r.prototype.getOverlaysByFilter=function(t){var e,n=t.id,a=t.groupId,l=t.paneId,u=t.name,h=function(v){return at(n)?v.id===n:at(a)?v.groupId===a&&(!at(u)||v.name===u):!at(u)||v.name===u},f=[];at(l)?f=f.concat(this.getOverlaysByPaneId(l).filter(h)):this._overlays.forEach(function(v){f=f.concat(v.filter(h))});var d=(e=this._progressOverlayInfo)===null||e===void 0?void 0:e.overlay;return at(d)&&h(d)&&f.push(d),f},r.prototype.getOverlaysByPaneId=function(t){var e;if(!Kt(t)){var n=[];return this._overlays.forEach(function(a){n=n.concat(a)}),n}return(e=this._overlays.get(t))!==null&&e!==void 0?e:[]},r.prototype._sortOverlays=function(t){var e;Kt(t)?(e=this._overlays.get(t))===null||e===void 0||e.sort(function(n,a){return n.zLevel-a.zLevel}):this._overlays.forEach(function(n){n.sort(function(a,l){return a.zLevel-l.zLevel})})},r.prototype.addOverlays=function(t,e){var n=this,a=[],l=t.map(function(u,h){var f,d,v,m,y,x,b,S;if(at(u.id)){var _=null;try{for(var C=Vi(n._overlays),A=C.next();!A.done;A=C.next()){var T=A.value,D=T[1],M=D.find(function(I){return I.id===u.id});if(at(M)){_=M;break}}}catch(I){f={error:I}}finally{try{A&&!A.done&&(d=C.return)&&d.call(C)}finally{if(f)throw f.error}}if(at(_))return u.id}var j=DR(u.name);if(at(j)){var N=(v=u.id)!==null&&v!==void 0?v:su(lR),M=new j,V=(m=u.paneId)!==null&&m!==void 0?m:Vt.CANDLE;u.id=N,(y=u.groupId)!==null&&y!==void 0||(u.groupId=N);var B=n.getOverlaysByPaneId(V).length;return(x=u.zLevel)!==null&&x!==void 0||(u.zLevel=B),M.override(u),a.includes(V)||a.push(V),M.isDrawing()?n._progressOverlayInfo={paneId:V,overlay:M,appointPaneFlag:e[h]}:(n._overlays.has(V)||n._overlays.set(V,[]),(b=n._overlays.get(V))===null||b===void 0||b.push(M)),M.isStart()&&((S=M.onDrawStart)===null||S===void 0||S.call(M,{overlay:M,chart:n._chart})),N}return null});return a.length>0&&(this._sortOverlays(),a.forEach(function(u){n._chart.updatePane(1,u)}),this._chart.updatePane(1,Vt.X_AXIS)),l},r.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},r.prototype.progressOverlayComplete=function(){var t;if(this._progressOverlayInfo!==null){var e=this._progressOverlayInfo,n=e.overlay,a=e.paneId;n.isDrawing()||(this._overlays.has(a)||this._overlays.set(a,[]),(t=this._overlays.get(a))===null||t===void 0||t.push(n),this._sortOverlays(a),this._progressOverlayInfo=null)}},r.prototype.updateProgressOverlayInfo=function(t,e){this._progressOverlayInfo!==null&&(gu(e)&&e&&(this._progressOverlayInfo.appointPaneFlag=e),this._progressOverlayInfo.paneId=t,this._progressOverlayInfo.overlay.override({paneId:t}))},r.prototype.overrideOverlay=function(t){var e=this,n=!1,a=[],l=this.getOverlaysByFilter(t);return l.forEach(function(u){u.override(t);var h=u.shouldUpdate(),f=h.sort,d=h.draw;f&&(n=!0),(f||d)&&(a.includes(u.paneId)||a.push(u.paneId))}),n&&this._sortOverlays(),a.length>0?(a.forEach(function(u){e._chart.updatePane(1,u)}),this._chart.updatePane(1,Vt.X_AXIS),!0):!1},r.prototype.removeOverlay=function(t){var e=this,n=[],a=this.getOverlaysByFilter(t);return a.forEach(function(l){var u,h=l.paneId,f=e.getOverlaysByPaneId(l.paneId);if((u=l.onRemoved)===null||u===void 0||u.call(l,{overlay:l,chart:e._chart}),n.includes(h)||n.push(h),l.isDrawing())e._progressOverlayInfo=null;else{var d=f.findIndex(function(v){return v.id===l.id});d>-1&&f.splice(d,1)}f.length===0&&e._overlays.delete(h)}),n.length>0?(n.forEach(function(l){e._chart.updatePane(1,l)}),this._chart.updatePane(1,Vt.X_AXIS),!0):!1},r.prototype.setPressedOverlayInfo=function(t){this._pressedOverlayInfo=t},r.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},r.prototype.setHoverOverlayInfo=function(t,e,n){var a=this._hoverOverlayInfo,l=a.overlay,u=a.figureType,h=a.figureIndex,f=a.figure,d=t.overlay;if((l?.id!==d?.id||u!==t.figureType||h!==t.figureIndex)&&(this._hoverOverlayInfo=t,l?.id!==d?.id)){var v=!1,m=!1;l!==null&&(l.override({zLevel:l.getPrevZLevel()}),m=!0,n(l,f)&&(v=!0)),d!==null&&(d.setPrevZLevel(d.zLevel),d.override({zLevel:Number.MAX_SAFE_INTEGER}),m=!0,e(d,t.figure)&&(v=!0)),m&&this._sortOverlays(),v||this._chart.updatePane(1)}},r.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},r.prototype.setClickOverlayInfo=function(t,e,n){var a=this._clickOverlayInfo,l=a.paneId,u=a.overlay,h=a.figureType,f=a.figure,d=a.figureIndex,v=t.overlay;(u?.id!==v?.id||h!==t.figureType||d!==t.figureIndex)&&(this._clickOverlayInfo=t,u?.id!==v?.id&&(at(u)&&n(u,f),at(v)&&e(v,t.figure),this._chart.updatePane(1,t.paneId),l!==t.paneId&&this._chart.updatePane(1,l),this._chart.updatePane(1,Vt.X_AXIS)))},r.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},r.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},r.prototype.isOverlayDrawing=function(){var t,e;return(e=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay.isDrawing())!==null&&e!==void 0?e:!1},r.prototype._clearLastPriceMarkExtendTextUpdateTimer=function(){this._lastPriceMarkExtendTextUpdateTimers.forEach(function(t){clearInterval(t)}),this._lastPriceMarkExtendTextUpdateTimers=[]},r.prototype._clearData=function(){this._dataLoadMore.backward=!1,this._dataLoadMore.forward=!1,this._loading=!1,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange=jy(),this._crosshair={}},r.prototype.getChart=function(){return this._chart},r.prototype.destroy=function(){this._clearData(),this._clearLastPriceMarkExtendTextUpdateTimer(),this._taskScheduler.clear(),this._overlays.clear(),this._indicators.clear(),this._actions.clear()},r})(),Ut={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},ol=7;function PR(){return Nd(this,void 0,void 0,function(){return Od(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(a){return"devicePixelContentBoxSize"in a})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,r.sent()]}})})}var Iy=(function(){function r(t,e){var n=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Pf,this._mediaQueryListener=function(){var a=lr(n._element);n._nextPixelWidth=Math.round(n._element.clientWidth*a),n._nextPixelHeight=Math.round(n._element.clientHeight*a),n._resetPixelRatio()},this._listener=e,this._element=An("canvas",t),this._ctx=this._element.getContext("2d"),PR().then(function(a){n._supportedDevicePixelContentBox=a,a?(n._resizeObserver=new ResizeObserver(function(l){var u=l.find(function(f){return f.target===n._element}),h=u?.devicePixelContentBoxSize[0];at(h)&&(n._nextPixelWidth=h.inlineSize,n._nextPixelHeight=h.blockSize,(n._pixelWidth!==n._nextPixelWidth||n._pixelHeight!==n._nextPixelHeight)&&n._resetPixelRatio())}),n._resizeObserver.observe(n._element,{box:"device-pixel-content-box"})):(n._mediaQueryList=window.matchMedia("(resolution: ".concat(lr(n._element),"dppx)")),n._mediaQueryList.addListener(n._mediaQueryListener))}).catch(function(a){return!1})}return r.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var e=t._element.clientWidth,n=t._element.clientHeight;t._width=e,t._height=n,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight;var a=t._nextPixelWidth/e,l=t._nextPixelHeight/n;t._ctx.scale(a,l)})},r.prototype._executeListener=function(t){var e=this;this._requestAnimationId===Pf&&(this._requestAnimationId=xu(function(){e._ctx.clearRect(0,0,e._width,e._height),t?.(),e._listener(),e._requestAnimationId=Pf}))},r.prototype.update=function(t,e){if(this._width!==t||this._height!==e){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(e,"px"),!this._supportedDevicePixelContentBox){var n=lr(this._element);this._nextPixelWidth=Math.round(t*n),this._nextPixelHeight=Math.round(e*n),this._resetPixelRatio()}}else this._executeListener()},r.prototype.getElement=function(){return this._element},r.prototype.getContext=function(){return this._ctx},r.prototype.destroy=function(){at(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),at(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},r})(),qx=(function(r){Pt(t,r);function t(e,n){var a=r.call(this)||this;return a._bounding=bu(),a._cursor="crosshair",a._forceCursor=null,a._pane=n,a._rootContainer=e,a._container=a.createContainer(),e.appendChild(a._container),a}return t.prototype.setBounding=function(e){return Re(this._bounding,e),this},t.prototype.getContainer=function(){return this._container},t.prototype.getBounding=function(){return this._bounding},t.prototype.getPane=function(){return this._pane},t.prototype.checkEventOn=function(e){return!0},t.prototype.setCursor=function(e){Kt(this._forceCursor)||e!==this._cursor&&(this._cursor=e,this._container.style.cursor=this._cursor)},t.prototype.setForceCursor=function(e){var n;e!==this._forceCursor&&(this._forceCursor=e,this._container.style.cursor=(n=this._forceCursor)!==null&&n!==void 0?n:this._cursor)},t.prototype.getForceCursor=function(){return this._forceCursor},t.prototype.update=function(e){this.updateImp(this._container,this._bounding,e??3)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t})(zd),Ld=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;a._mainCanvas=new Iy({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){a.updateMain(a._mainCanvas.getContext())}),a._overlayCanvas=new Iy({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){a.updateOverlay(a._overlayCanvas.getContext())});var l=a.getContainer();return l.appendChild(a._mainCanvas.getElement()),l.appendChild(a._overlayCanvas.getElement()),a}return t.prototype.createContainer=function(){return An("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},t.prototype.updateImp=function(e,n,a){var l=n.width,u=n.height,h=n.left;e.style.left="".concat(h,"px");var f=a,d=e.clientWidth,v=e.clientHeight;switch((l!==d||u!==v)&&(e.style.width="".concat(l,"px"),e.style.height="".concat(u,"px"),f=3),f){case 0:{this._mainCanvas.update(l,u);break}case 1:{this._overlayCanvas.update(l,u);break}case 3:case 4:{this._mainCanvas.update(l,u),this._overlayCanvas.update(l,u);break}}},t.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},t.prototype.getImage=function(e){var n=this.getBounding(),a=n.width,l=n.height,u=An("canvas",{width:"".concat(a,"px"),height:"".concat(l,"px"),boxSizing:"border-box"}),h=u.getContext("2d"),f=lr(u);return u.width=a*f,u.height=l*f,h.scale(f,f),h.drawImage(this._mainCanvas.getElement(),0,0,a,l),e&&h.drawImage(this._overlayCanvas.getElement(),0,0,a,l),u},t})(qx);function IR(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var h=u.value,f=h.x,d=h.y,v=h.r,m=r.x-f,y=r.y-d;if(!(m*m+y*y>v*v))return!0}}catch(x){e={error:x}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function VR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"fill":a,u=e.color,h=u===void 0?"currentColor":u,f=e.borderSize,d=f===void 0?1:f,v=e.borderColor,m=v===void 0?"currentColor":v,y=e.borderStyle,x=y===void 0?"solid":y,b=e.borderDashedValue,S=b===void 0?[2,2]:b,_=(l==="fill"||e.style==="stroke_fill")&&(!Kt(h)||!Ks(h));_&&(r.fillStyle=h,n.forEach(function(C){var A=C.x,T=C.y,D=C.r;r.beginPath(),r.arc(A,T,D,0,Math.PI*2),r.closePath(),r.fill()})),(l==="stroke"||e.style==="stroke_fill")&&d>0&&!Ks(m)&&(r.strokeStyle=m,r.lineWidth=d,x==="dashed"?r.setLineDash(S):r.setLineDash([]),n.forEach(function(C){var A=C.x,T=C.y,D=C.r;(!_||D>d)&&(r.beginPath(),r.arc(A,T,D,0,Math.PI*2),r.closePath(),r.stroke())}))}var UR={name:"circle",checkEventOn:IR,draw:function(r,t,e){VR(r,t,e)}};function HR(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){for(var h=u.value,f=!1,d=h.coordinates,v=0,m=d.length-1;v<d.length;m=v++)d[v].y>r.y!=d[m].y>r.y&&r.x<(d[m].x-d[v].x)*(r.y-d[v].y)/(d[m].y-d[v].y)+d[v].x&&(f=!f);if(f)return!0}}catch(y){e={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function YR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"fill":a,u=e.color,h=u===void 0?"currentColor":u,f=e.borderSize,d=f===void 0?1:f,v=e.borderColor,m=v===void 0?"currentColor":v,y=e.borderStyle,x=y===void 0?"solid":y,b=e.borderDashedValue,S=b===void 0?[2,2]:b;(l==="fill"||e.style==="stroke_fill")&&(!Kt(h)||!Ks(h))&&(r.fillStyle=h,n.forEach(function(_){var C=_.coordinates;r.beginPath(),r.moveTo(C[0].x,C[0].y);for(var A=1;A<C.length;A++)r.lineTo(C[A].x,C[A].y);r.closePath(),r.fill()})),(l==="stroke"||e.style==="stroke_fill")&&d>0&&!Ks(m)&&(r.strokeStyle=m,r.lineWidth=d,x==="dashed"?r.setLineDash(S):r.setLineDash([]),n.forEach(function(_){var C=_.coordinates;r.beginPath(),r.moveTo(C[0].x,C[0].y);for(var A=1;A<C.length;A++)r.lineTo(C[A].x,C[A].y);r.closePath(),r.stroke()}))}var WR={name:"polygon",checkEventOn:HR,draw:function(r,t,e){YR(r,t,e)}};function Xx(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var h=u.value,f=h.x,d=h.width;d<ke*2&&(f-=ke,d=ke*2);var v=h.y,m=h.height;if(m<ke*2&&(v-=ke,m=ke*2),r.x>=f&&r.x<=f+d&&r.y>=v&&r.y<=v+m)return!0}}catch(y){e={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function Gx(r,t,e){var n,a=[];a=a.concat(t);var l=e.style,u=l===void 0?"fill":l,h=e.color,f=h===void 0?"transparent":h,d=e.borderSize,v=d===void 0?1:d,m=e.borderColor,y=m===void 0?"transparent":m,x=e.borderStyle,b=x===void 0?"solid":x,S=e.borderRadius,_=S===void 0?0:S,C=e.borderDashedValue,A=C===void 0?[2,2]:C,T=(n=r.roundRect)!==null&&n!==void 0?n:r.rect,D=(u==="fill"||e.style==="stroke_fill")&&(!Kt(f)||!Ks(f));if(D&&(r.fillStyle=f,a.forEach(function(N){var V=N.x,B=N.y,I=N.width,W=N.height;r.beginPath(),T.call(r,V,B,I,W,_),r.closePath(),r.fill()})),(u==="stroke"||e.style==="stroke_fill")&&v>0&&!Ks(y)){r.strokeStyle=y,r.fillStyle=y,r.lineWidth=v,b==="dashed"?r.setLineDash(A):r.setLineDash([]);var M=v%2===1?.5:0,j=Math.round(M*2);a.forEach(function(N){var V=N.x,B=N.y,I=N.width,W=N.height;I>v*2&&W>v*2?(r.beginPath(),T.call(r,V+M,B+M,I-j,W-j,_),r.closePath(),r.stroke()):D||r.fillRect(V,B,I,W)})}}var qR={name:"rect",checkEventOn:Xx,draw:function(r,t,e){Gx(r,t,e)}};function Kx(r,t){var e=t.size,n=e===void 0?12:e,a=t.paddingLeft,l=a===void 0?0:a,u=t.paddingTop,h=u===void 0?0:u,f=t.paddingRight,d=f===void 0?0:f,v=t.paddingBottom,m=v===void 0?0:v,y=t.weight,x=y===void 0?"normal":y,b=t.family,S=r.x,_=r.y,C=r.text,A=r.align,T=A===void 0?"left":A,D=r.baseline,M=D===void 0?"top":D,j=r.width,N=r.height,V=j??l+$i(C,n,x,b)+d,B=N??h+n+m,I=0;switch(T){case"left":case"start":{I=S;break}case"right":case"end":{I=S-V;break}default:{I=S-V/2;break}}var W=0;switch(M){case"top":case"hanging":{W=_;break}case"bottom":case"ideographic":case"alphabetic":{W=_-B;break}default:{W=_-B/2;break}}return{x:I,y:W,width:V,height:B}}function XR(r,t,e){var n,a,l=[];l=l.concat(t);try{for(var u=Vi(l),h=u.next();!h.done;h=u.next()){var f=h.value,d=Kx(f,e),v=d.x,m=d.y,y=d.width,x=d.height;if(r.x>=v&&r.x<=v+y&&r.y>=m&&r.y<=m+x)return!0}}catch(b){n={error:b}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return!1}function GR(r,t,e){var n=[];n=n.concat(t);var a=e.color,l=a===void 0?"currentColor":a,u=e.size,h=u===void 0?12:u,f=e.family,d=e.weight,v=e.paddingLeft,m=v===void 0?0:v,y=e.paddingTop,x=y===void 0?0:y,b=e.paddingRight,S=b===void 0?0:b,_=n.map(function(C){return Kx(C,e)});Gx(r,_,bt(bt({},e),{color:e.backgroundColor})),r.textAlign="left",r.textBaseline="top",r.font=Hr(h,d,f),r.fillStyle=l,n.forEach(function(C,A){var T=_[A];r.fillText(C.text,T.x+m,T.y+x,T.width-m-S)})}var KR={name:"text",checkEventOn:XR,draw:function(r,t,e){GR(r,t,e)}};function QR(r,t){var e=r.x-t.x,n=r.y-t.y;return Math.sqrt(e*e+n*n)}function $R(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var h=u.value;if(Math.abs(QR(r,h)-h.r)<ke){var f=h.r,d=h.startAngle,v=h.endAngle,m=f*Math.cos(d)+h.x,y=f*Math.sin(d)+h.y,x=f*Math.cos(v)+h.x,b=f*Math.sin(v)+h.y;if(r.x<=Math.max(m,x)+ke&&r.x>=Math.min(m,x)-ke&&r.y<=Math.max(y,b)+ke&&r.y>=Math.min(y,b)-ke)return!0}}}catch(S){e={error:S}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function ZR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"solid":a,u=e.size,h=u===void 0?1:u,f=e.color,d=f===void 0?"currentColor":f,v=e.dashedValue,m=v===void 0?[2,2]:v;r.lineWidth=h,r.strokeStyle=d,l==="dashed"?r.setLineDash(m):r.setLineDash([]),n.forEach(function(y){var x=y.x,b=y.y,S=y.r,_=y.startAngle,C=y.endAngle;r.beginPath(),r.arc(x,b,S,_,C),r.stroke(),r.closePath()})}var JR={name:"arc",checkEventOn:$R,draw:function(r,t,e){ZR(r,t,e)}};function Vy(r,t,e,n,a,l,u){var h=_l(n,7),f=h[0],d=h[1],v=h[2],m=h[3],y=h[4],x=h[5],b=h[6],S=u?t+x:x+a,_=u?e+b:b+l,C=tD(t,e,f,d,v,m,y,S,_);C.forEach(function(A){r.bezierCurveTo(A[0],A[1],A[2],A[3],A[4],A[5])})}function tD(r,t,e,n,a,l,u,h,f){for(var d=eD(r,t,e,n,a,l,u,h,f),v=d.cx,m=d.cy,y=d.startAngle,x=d.deltaAngle,b=[],S=Math.ceil(Math.abs(x)/(Math.PI/2)),_=0;_<S;_++){var C=y+_*x/S,A=y+(_+1)*x/S,T=iD(v,m,e,n,a,C,A);b.push(T)}return b}function eD(r,t,e,n,a,l,u,h,f){var d=a*Math.PI/180,v=(r-h)/2,m=(t-f)/2,y=Math.cos(d)*v+Math.sin(d)*m,x=-Math.sin(d)*v+Math.cos(d)*m,b=Math.pow(y,2)/Math.pow(e,2)+Math.pow(x,2)/Math.pow(n,2);b>1&&(e*=Math.sqrt(b),n*=Math.sqrt(b));var S=l===u?-1:1,_=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(x,2)-Math.pow(n,2)*Math.pow(y,2),C=Math.pow(e,2)*Math.pow(x,2)+Math.pow(n,2)*Math.pow(y,2),A=S*Math.sqrt(Math.abs(_/C))*(e*x/n),T=S*Math.sqrt(Math.abs(_/C))*(-n*y/e),D=Math.cos(d)*A-Math.sin(d)*T+(r+h)/2,M=Math.sin(d)*A+Math.cos(d)*T+(t+f)/2,j=Math.atan2((x-T)/n,(y-A)/e),N=Math.atan2((-x-T)/n,(-y-A)/e)-j;return N<0&&u===1?N+=2*Math.PI:N>0&&u===0&&(N-=2*Math.PI),{cx:D,cy:M,startAngle:j,deltaAngle:N}}function iD(r,t,e,n,a,l,u){var h=Math.sin(u-l)*(Math.sqrt(4+3*Math.pow(Math.tan((u-l)/2),2))-1)/3,f=Math.cos(a),d=Math.sin(a),v=r+e*Math.cos(l)*f-n*Math.sin(l)*d,m=t+e*Math.cos(l)*d+n*Math.sin(l)*f,y=r+e*Math.cos(u)*f-n*Math.sin(u)*d,x=t+e*Math.cos(u)*d+n*Math.sin(u)*f,b=v+h*(-e*Math.sin(l)*f-n*Math.cos(l)*d),S=m+h*(-e*Math.sin(l)*d+n*Math.cos(l)*f),_=y-h*(-e*Math.sin(u)*f-n*Math.cos(u)*d),C=x-h*(-e*Math.sin(u)*d+n*Math.cos(u)*f);return[b,S,_,C,y,x]}function nD(r,t,e){var n=[];n=n.concat(t);var a=e.lineWidth,l=a===void 0?1:a,u=e.color,h=u===void 0?"currentColor":u;r.lineWidth=l,r.strokeStyle=h,r.setLineDash([]),n.forEach(function(f){var d=f.x,v=f.y,m=f.path,y=m.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);if(at(y)){var x=d,b=v;r.beginPath(),y.forEach(function(S){var _=0,C=0,A=0,T=0,D=S[0],M=S.slice(1).trim().split(/[\s,]+/).map(Number);switch(D){case"M":_=M[0]+x,C=M[1]+b,r.moveTo(_,C),A=_,T=C;break;case"m":_+=M[0],C+=M[1],r.moveTo(_,C),A=_,T=C;break;case"L":_=M[0]+x,C=M[1]+b,r.lineTo(_,C);break;case"l":_+=M[0],C+=M[1],r.lineTo(_,C);break;case"H":_=M[0]+x,r.lineTo(_,C);break;case"h":_+=M[0],r.lineTo(_,C);break;case"V":C=M[0]+b,r.lineTo(_,C);break;case"v":C+=M[0],r.lineTo(_,C);break;case"C":r.bezierCurveTo(M[0]+x,M[1]+b,M[2]+x,M[3]+b,M[4]+x,M[5]+b),_=M[4]+x,C=M[5]+b;break;case"c":r.bezierCurveTo(_+M[0],C+M[1],_+M[2],C+M[3],_+M[4],C+M[5]),_+=M[4],C+=M[5];break;case"S":r.bezierCurveTo(_,C,M[0]+x,M[1]+b,M[2]+x,M[3]+b),_=M[2]+x,C=M[3]+b;break;case"s":r.bezierCurveTo(_,C,_+M[0],C+M[1],_+M[2],C+M[3]),_+=M[2],C+=M[3];break;case"Q":r.quadraticCurveTo(M[0]+x,M[1]+b,M[2]+x,M[3]+b),_=M[2]+x,C=M[3]+b;break;case"q":r.quadraticCurveTo(_+M[0],C+M[1],_+M[2],C+M[3]),_+=M[2],C+=M[3];break;case"T":r.quadraticCurveTo(_,C,M[0]+x,M[1]+b),_=M[0]+x,C=M[1]+b;break;case"t":r.quadraticCurveTo(_,C,_+M[0],C+M[1]),_+=M[0],C+=M[1];break;case"A":Vy(r,_,C,M,x,b,!1),_=M[5]+x,C=M[6]+b;break;case"a":Vy(r,_,C,M,x,b,!0),_+=M[5],C+=M[6];break;case"Z":case"z":r.closePath(),_=A,C=T;break}}),e.style==="fill"?r.fill():r.stroke()}})}var rD={name:"path",checkEventOn:Xx,draw:function(r,t,e){nD(r,t,e)}},Qx={},sD=[UR,mR,WR,qR,KR,JR,rD];sD.forEach(function(r){Qx[r.name]=dR.extend(r)});function aD(r){var t;return(t=Qx[r])!==null&&t!==void 0?t:null}var zi=(function(r){Pt(t,r);function t(e){var n=r.call(this)||this;return n._widget=e,n}return t.prototype.getWidget=function(){return this._widget},t.prototype.createFigure=function(e,n){var a=aD(e.name);if(a!==null){var l=new a(e);if(at(n)){for(var u in n)n.hasOwnProperty(u)&&l.registerEvent(u,n[u]);this.addChild(l)}return l}return null},t.prototype.draw=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];this.clear(),this.drawImp(e,n)},t.prototype.checkEventOn=function(e){return!0},t})(zd),lD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a,l=this.getWidget(),u=this.getWidget().getPane(),h=u.getChart(),f=l.getBounding(),d=h.getStyles().grid,v=d.show;if(v){e.save(),e.globalCompositeOperation="destination-over";var m=d.horizontal,y=m.show;if(y){var x=u.getAxisComponent(),b=x.getTicks().map(function(A){return{coordinates:[{x:0,y:A.coord},{x:f.width,y:A.coord}]}});(n=this.createFigure({name:"line",attrs:b,styles:m}))===null||n===void 0||n.draw(e)}var S=d.vertical,_=S.show;if(_){var C=h.getXAxisPane().getAxisComponent(),b=C.getTicks().map(function(T){return{coordinates:[{x:T.coord,y:0},{x:T.coord,y:f.height}]}});(a=this.createFigure({name:"line",attrs:b,styles:S}))===null||a===void 0||a.draw(e)}e.restore()}},t})(zi),$x=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.eachChildren=function(e){for(var n=this.getWidget().getPane(),a=n.getChart().getChartStore(),l=a.getVisibleRangeDataList(),u=a.getBarSpace(),h=l.length,f=0;f<h;)e(l[f],u,f),++f},t})(zi),Zx=(function(r){Pt(t,r);function t(){var e=r.apply(this,Yu([],_l(arguments),!1))||this;return e._boundCandleBarClickEvent=function(n){return function(){return e.getWidget().getPane().getChart().getChartStore().executeAction("onCandleBarClick",n),!1}},e}return t.prototype.drawImp=function(e){var n=this,a=this.getWidget().getPane(),l=a.getId()===Vt.CANDLE,u=a.getChart().getChartStore(),h=this.getCandleBarOptions();if(h!==null){var f=h.type,d=h.styles,v=0,m=0;if(h.type==="ohlc"){var y=u.getBarSpace().gapBar;v=Math.min(Math.max(Math.round(y*.2),1),8),v>2&&v%2===1&&v--,m=Math.floor(v/2)}var x=a.getAxisComponent();this.eachChildren(function(b,S){var _,C=b.x,A=b.data,T=A.current,D=A.prev;if(at(T)){var M=T.open,j=T.high,N=T.low,V=T.close,B=d.compareRule==="current_open"?M:(_=D?.close)!==null&&_!==void 0?_:V,I=[];V>B?(I[0]=d.upColor,I[1]=d.upBorderColor,I[2]=d.upWickColor):V<B?(I[0]=d.downColor,I[1]=d.downBorderColor,I[2]=d.downWickColor):(I[0]=d.noChangeColor,I[1]=d.noChangeBorderColor,I[2]=d.noChangeWickColor);var W=x.convertToPixel(M),Z=x.convertToPixel(V),it=[W,Z,x.convertToPixel(j),x.convertToPixel(N)];it.sort(function(z,U){return z-U});var X=S.gapBar%2===0?1:0,ot=[];switch(f){case"candle_solid":{ot=n._createSolidBar(C,it,S,I,X);break}case"candle_stroke":{ot=n._createStrokeBar(C,it,S,I,X);break}case"candle_up_stroke":{V>M?ot=n._createStrokeBar(C,it,S,I,X):ot=n._createSolidBar(C,it,S,I,X);break}case"candle_down_stroke":{M>V?ot=n._createStrokeBar(C,it,S,I,X):ot=n._createSolidBar(C,it,S,I,X);break}case"ohlc":{ot=[{name:"rect",attrs:[{x:C-m,y:it[0],width:v,height:it[3]-it[0]},{x:C-S.halfGapBar,y:W+v>it[3]?it[3]-v:W,width:S.halfGapBar-m,height:v},{x:C+m,y:Z+v>it[3]?it[3]-v:Z,width:S.halfGapBar-m,height:v}],styles:{color:I[0]}}];break}}ot.forEach(function(z){var U,st=null;l&&(st={mouseClickEvent:n._boundCandleBarClickEvent(b)}),(U=n.createFigure(z,st??void 0))===null||U===void 0||U.draw(e)})}})}},t.prototype.getCandleBarOptions=function(){var e=this.getWidget().getPane().getChart().getStyles().candle;return{type:e.type,styles:e.bar}},t.prototype._createSolidBar=function(e,n,a,l,u){return[{name:"rect",attrs:{x:e,y:n[0],width:1,height:n[3]-n[0]},styles:{color:l[2]}},{name:"rect",attrs:{x:e-a.halfGapBar,y:n[1],width:a.gapBar+u,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke_fill",color:l[0],borderColor:l[1]}}]},t.prototype._createStrokeBar=function(e,n,a,l,u){return[{name:"rect",attrs:[{x:e,y:n[0],width:1,height:n[1]-n[0]},{x:e,y:n[2],width:1,height:n[3]-n[2]}],styles:{color:l[2]}},{name:"rect",attrs:{x:e-a.halfGapBar,y:n[1],width:a.gapBar+u,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke",borderColor:l[1]}}]},t})($x),oD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCandleBarOptions=function(){var e,n,a=this.getWidget().getPane(),l=a.getAxisComponent();if(!l.isInCandle()){var u=a.getChart().getChartStore(),h=u.getIndicatorsByPaneId(a.getId());try{for(var f=Vi(h),d=f.next();!d.done;d=f.next()){var v=d.value;if(v.shouldOhlc&&v.visible){var m=v.styles,y=u.getStyles().indicator,x=ze(m,"ohlc.compareRule",y.ohlc.compareRule),b=ze(m,"ohlc.upColor",y.ohlc.upColor),S=ze(m,"ohlc.downColor",y.ohlc.downColor),_=ze(m,"ohlc.noChangeColor",y.ohlc.noChangeColor);return{type:"ohlc",styles:{compareRule:x,upColor:b,downColor:S,noChangeColor:_,upBorderColor:b,downBorderColor:S,noChangeBorderColor:_,upWickColor:b,downWickColor:S,noChangeWickColor:_}}}}}catch(C){e={error:C}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}}return null},t.prototype.drawImp=function(e){var n=this;r.prototype.drawImp.call(this,e);var a=this.getWidget(),l=a.getPane(),u=l.getChart(),h=a.getBounding(),f=u.getXAxisPane().getAxisComponent(),d=l.getAxisComponent(),v=u.getChartStore(),m=v.getIndicatorsByPaneId(l.getId()),y=v.getStyles().indicator;e.save(),m.forEach(function(x){if(x.visible){x.zLevel<0?e.globalCompositeOperation="destination-over":e.globalCompositeOperation="source-over";var b=!1;if(x.draw!==null&&(e.save(),b=x.draw({ctx:e,chart:u,indicator:x,bounding:h,xAxis:f,yAxis:d}),e.restore()),!b){var S=x.result,_=[];n.eachChildren(function(C,A){var T,D,M,j=A.halfGapBar,N=C.dataIndex,V=C.x,B=f.convertToPixel(N-1),I=f.convertToPixel(N+1),W=(T=S[N-1])!==null&&T!==void 0?T:null,Z=(D=S[N])!==null&&D!==void 0?D:null,it=(M=S[N+1])!==null&&M!==void 0?M:null,X={x:B},ot={x:V},z={x:I};x.figures.forEach(function(U){var st=U.key,ft=W?.[st];Dt(ft)&&(X[st]=d.convertToPixel(ft));var rt=Z?.[st];Dt(rt)&&(ot[st]=d.convertToPixel(rt));var O=it?.[st];Dt(O)&&(z[st]=d.convertToPixel(O))}),kd(x,N,y,function(U,st,ft){var rt,O,L;if(at(Z?.[U.key])){var F=ot[U.key],q=(rt=U.attrs)===null||rt===void 0?void 0:rt.call(U,{data:{prev:W,current:Z,next:it},coordinate:{prev:X,current:ot,next:z},bounding:h,barSpace:A,xAxis:f,yAxis:d});if(!at(q))switch(U.type){case"circle":{q={x:V,y:F,r:Math.max(1,j)};break}case"rect":case"bar":{var $=(O=U.baseValue)!==null&&O!==void 0?O:d.getRange().from,J=d.convertToPixel($),tt=Math.abs(J-F);$!==Z?.[U.key]&&(tt=Math.max(1,tt));var vt=0;F>J?vt=J:vt=F,q={x:V-j,y:vt,width:Math.max(1,j*2),height:tt};break}case"line":{at(_[ft])||(_[ft]=[]),Dt(ot[U.key])&&Dt(z[U.key])&&_[ft].push({coordinates:[{x:ot.x,y:ot[U.key]},{x:z.x,y:z[U.key]}],styles:st});break}}var pt=U.type;at(q)&&pt!=="line"&&((L=n.createFigure({name:pt==="bar"?"rect":pt,attrs:q,styles:st}))===null||L===void 0||L.draw(e))}})}),_.forEach(function(C){var A,T,D,M;if(C.length>1){for(var j=[{coordinates:[C[0].coordinates[0],C[0].coordinates[1]],styles:C[0].styles}],N=1;N<C.length;N++){var V=j[j.length-1],B=C[N],I=V.coordinates[V.coordinates.length-1];I.x===B.coordinates[0].x&&I.y===B.coordinates[0].y&&V.styles.style===B.styles.style&&V.styles.color===B.styles.color&&V.styles.size===B.styles.size&&V.styles.smooth===B.styles.smooth&&((A=V.styles.dashedValue)===null||A===void 0?void 0:A[0])===((T=B.styles.dashedValue)===null||T===void 0?void 0:T[0])&&((D=V.styles.dashedValue)===null||D===void 0?void 0:D[1])===((M=B.styles.dashedValue)===null||M===void 0?void 0:M[1])?V.coordinates.push(B.coordinates[1]):j.push({coordinates:[B.coordinates[0],B.coordinates[1]],styles:B.styles})}j.forEach(function(W){var Z,it=W.coordinates,X=W.styles;(Z=n.createFigure({name:"line",attrs:{coordinates:it},styles:X}))===null||Z===void 0||Z.draw(e)})}})}}}),e.restore()},t})(Zx),uD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this.getWidget(),a=n.getPane(),l=n.getBounding(),u=n.getPane().getChart().getChartStore(),h=u.getCrosshair(),f=u.getStyles().crosshair;if(Kt(h.paneId)&&f.show){if(h.paneId===a.getId()){var d=h.y;this._drawLine(e,[{x:0,y:d},{x:l.width,y:d}],f.horizontal)}var v=h.realX;this._drawLine(e,[{x:v,y:0},{x:v,y:l.height}],f.vertical)}},t.prototype._drawLine=function(e,n,a){var l;if(a.show){var u=a.line;u.show&&((l=this.createFigure({name:"line",attrs:{coordinates:n},styles:u}))===null||l===void 0||l.draw(e))}},t})(zi),Jx=(function(r){Pt(t,r);function t(e){var n=r.call(this,e)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(a,l){return function(){var u=n.getWidget().getPane();return u.getChart().getChartStore().executeAction(a,l),!0}},n._featureMouseMoveEvent=function(a){return function(){return n._activeFeatureInfo=a,!0}},n.registerEvent("mouseMoveEvent",function(a){return n._activeFeatureInfo=null,!1}),n}return t.prototype.drawImp=function(e){var n=this.getWidget(),a=n.getPane(),l=a.getChart().getChartStore(),u=l.getCrosshair();if(at(u.kLineData)){var h=n.getBounding(),f=l.getStyles().indicator.tooltip,d=f.offsetLeft,v=f.offsetTop,m=f.offsetRight;this.drawIndicatorTooltip(e,d,v,h.width-m)}},t.prototype.drawIndicatorTooltip=function(e,n,a,l){var u=this,h=this.getWidget().getPane(),f=h.getChart().getChartStore(),d=f.getStyles().indicator,v=d.tooltip;if(this.isDrawTooltip(f.getCrosshair(),v)){var m=f.getIndicatorsByPaneId(h.getId()),y=v.title,x=v.legend;m.forEach(function(b){var S=0,_={x:n,y:a},C=u.getIndicatorTooltipData(b),A=C.name,T=C.calcParamsText,D=C.legends,M=C.features,j=A.length>0,N=D.length>0;if(j||N){var V=u.classifyTooltipFeatures(M);if(S=u.drawStandardTooltipFeatures(e,V[0],_,b,n,S,l),j){var B=A;T.length>0&&(B="".concat(B).concat(T));var I=y.color;S=u.drawStandardTooltipLegends(e,[{title:{text:"",color:I},value:{text:B,color:I}}],_,n,S,l,y)}S=u.drawStandardTooltipFeatures(e,V[1],_,b,n,S,l),N&&(S=u.drawStandardTooltipLegends(e,D,_,n,S,l,x)),S=u.drawStandardTooltipFeatures(e,V[2],_,b,n,S,l),a=_.y+S}})}return a},t.prototype.drawStandardTooltipFeatures=function(e,n,a,l,u,h,f){var d=this;if(n.length>0){var v=0,m=0;n.forEach(function(b){var S=b.marginLeft,_=S===void 0?0:S,C=b.marginTop,A=C===void 0?0:C,T=b.marginRight,D=T===void 0?0:T,M=b.marginBottom,j=M===void 0?0:M,N=b.paddingLeft,V=N===void 0?0:N,B=b.paddingTop,I=B===void 0?0:B,W=b.paddingRight,Z=W===void 0?0:W,it=b.paddingBottom,X=it===void 0?0:it,ot=b.size,z=ot===void 0?0:ot,U=b.type,st=b.content,ft=0;if(U==="icon_font"){var rt=st;e.font=Hr(z,"normal",rt.family),ft=e.measureText(rt.code).width}else ft=z;v+=_+V+ft+Z+D,m=Math.max(m,A+I+z+X+j)}),a.x+v>f?(a.x=u,a.y+=h,h=m):h=Math.max(h,m);var y=this.getWidget().getPane(),x=y.getId();n.forEach(function(b){var S,_,C,A,T,D=b.marginLeft,M=D===void 0?0:D,j=b.marginTop,N=j===void 0?0:j,V=b.marginRight,B=V===void 0?0:V,I=b.paddingLeft,W=I===void 0?0:I,Z=b.paddingTop,it=Z===void 0?0:Z,X=b.paddingRight,ot=X===void 0?0:X,z=b.paddingBottom,U=z===void 0?0:z,st=b.backgroundColor,ft=b.activeBackgroundColor,rt=b.borderRadius,O=b.size,L=O===void 0?0:O,F=b.color,q=b.activeColor,$=b.type,J=b.content,tt=F,vt=st;((S=d._activeFeatureInfo)===null||S===void 0?void 0:S.paneId)===x&&((_=d._activeFeatureInfo.indicator)===null||_===void 0?void 0:_.id)===l?.id&&d._activeFeatureInfo.feature.id===b.id&&(tt=q??F,vt=ft??st);var pt="onCandleTooltipFeatureClick",ut={paneId:x,feature:b};at(l)&&(pt="onIndicatorTooltipFeatureClick",ut.indicator=l);var dt={mouseDownEvent:d._featureClickEvent(pt,ut),mouseMoveEvent:d._featureMouseMoveEvent(ut)},St=0;if($==="icon_font"){var yt=J;(C=d.createFigure({name:"text",attrs:{text:yt.code,x:a.x+M,y:a.y+N},styles:{paddingLeft:W,paddingTop:it,paddingRight:ot,paddingBottom:U,borderRadius:rt,size:L,family:yt.family,color:tt,backgroundColor:vt}},dt))===null||C===void 0||C.draw(e),St=e.measureText(yt.code).width}else{(A=d.createFigure({name:"rect",attrs:{x:a.x+M,y:a.y+N,width:L,height:L},styles:{paddingLeft:W,paddingTop:it,paddingRight:ot,paddingBottom:U,color:vt}},dt))===null||A===void 0||A.draw(e);var _t=J;(T=d.createFigure({name:"path",attrs:{path:_t.path,x:a.x+M+W,y:a.y+N+it,width:L,height:L},styles:{style:_t.style,lineWidth:_t.lineWidth,color:tt}}))===null||T===void 0||T.draw(e),St=L}a.x+=M+W+St+ot+B})}return h},t.prototype.drawStandardTooltipLegends=function(e,n,a,l,u,h,f){var d=this;if(n.length>0){var v=f.marginLeft,m=f.marginTop,y=f.marginRight,x=f.marginBottom,b=f.size,S=f.family,_=f.weight;e.font=Hr(b,_,S),n.forEach(function(C){var A,T,D=C.title,M=C.value,j=e.measureText(D.text).width,N=e.measureText(M.text).width,V=j+N,B=m+b+x;a.x+v+V+y>h?(a.x=l,a.y+=u,u=B):u=Math.max(u,B),D.text.length>0&&((A=d.createFigure({name:"text",attrs:{x:a.x+v,y:a.y+m,text:D.text},styles:{color:D.color,size:b,family:S,weight:_}}))===null||A===void 0||A.draw(e)),(T=d.createFigure({name:"text",attrs:{x:a.x+v+j,y:a.y+m,text:M.text},styles:{color:M.color,size:b,family:S,weight:_}}))===null||T===void 0||T.draw(e),a.x+=v+V+y})}return u},t.prototype.isDrawTooltip=function(e,n){var a=n.showRule;return a==="always"||a==="follow_cross"&&Kt(e.paneId)},t.prototype.getIndicatorTooltipData=function(e){var n,a=this.getWidget().getPane().getChart().getChartStore(),l=a.getStyles().indicator,u=l.tooltip,h=u.title,f="",d="";if(h.show&&(h.showName&&(f=e.shortName),h.showParams)){var v=e.calcParams;v.length>0&&(d="(".concat(v.join(","),")"))}var m={name:f,calcParamsText:d,legends:[],features:u.features},y=a.getCrosshair().dataIndex,x=e.result,b=a.getInnerFormatter(),S=a.getDecimalFold(),_=a.getThousandsSeparator(),C=[];if(e.visible){var A=(n=x[y])!==null&&n!==void 0?n:{},T=u.legend.defaultValue;kd(e,y,l,function(X,ot){if(Kt(X.title)){var z=ot.color,U=A[X.key];Dt(U)&&(U=We(U,e.precision),e.shouldFormatBigNumber&&(U=b.formatBigNumber(U)),U=S.format(_.format(U))),C.push({title:{text:X.title,color:z},value:{text:U??T,color:z}})}}),m.legends=C}if(xi(e.createTooltipDataSource)){var D=this.getWidget(),M=D.getPane(),j=M.getChart(),N=e.createTooltipDataSource({chart:j,indicator:e,crosshair:a.getCrosshair(),bounding:D.getBounding(),xAxis:M.getChart().getXAxisPane().getAxisComponent(),yAxis:M.getAxisComponent()}),V=N.name,B=N.calcParamsText,I=N.legends,W=N.features;if(h.show&&(Kt(V)&&h.showName&&(m.name=V),Kt(B)&&h.showParams&&(m.calcParamsText=B)),at(W)&&(m.features=W),at(I)&&e.visible){var Z=[],it=l.tooltip.legend.color;I.forEach(function(X){var ot={text:"",color:it};Qi(X.title)?ot=X.title:ot.text=X.title;var z={text:"",color:it};Qi(X.value)?z=X.value:z.text=X.value,Dt(Number(z.text))&&(z.text=S.format(_.format(z.text))),Z.push({title:ot,value:z})}),m.legends=Z}}return m},t.prototype.classifyTooltipFeatures=function(e){var n=[],a=[],l=[];return e.forEach(function(u){switch(u.position){case"left":{n.push(u);break}case"middle":{a.push(u);break}case"right":{l.push(u);break}}}),[n,a,l]},t})(zi),tS=(function(r){Pt(t,r);function t(e){var n=r.call(this,e)||this;return n._initEvent(),n}return t.prototype._initEvent=function(){var e=this,n=this.getWidget(),a=n.getPane(),l=a.getId(),u=a.getChart(),h=u.getChartStore();this.registerEvent("mouseMoveEvent",function(f){var d,v=h.getProgressOverlayInfo();if(v!==null){var m=v.overlay,y=v.paneId;m.isStart()&&(h.updateProgressOverlayInfo(l),y=l);var x=m.points.length-1;return m.isDrawing()&&y===l&&(m.eventMoveForDrawing(e._coordinateToPoint(m,f)),(d=m.onDrawing)===null||d===void 0||d.call(m,bt({chart:u,overlay:m},f))),e._figureMouseMoveEvent(m,"point",x,{key:"".concat(Ls,"point_").concat(x),type:"circle",attrs:{}})(f)}return h.setHoverOverlayInfo({paneId:l,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(b,S){return e._processOverlayMouseEnterEvent(b,S,f)},function(b,S){return e._processOverlayMouseLeaveEvent(b,S,f)}),n.setForceCursor(null),!1}).registerEvent("mouseClickEvent",function(f){var d,v,m=h.getProgressOverlayInfo();if(m!==null){var y=m.overlay,x=m.paneId;y.isStart()&&(h.updateProgressOverlayInfo(l,!0),x=l);var b=y.points.length-1;return y.isDrawing()&&x===l&&(y.eventMoveForDrawing(e._coordinateToPoint(y,f)),(d=y.onDrawing)===null||d===void 0||d.call(y,bt({chart:u,overlay:y},f)),y.nextStep(),y.isDrawing()||(h.progressOverlayComplete(),(v=y.onDrawEnd)===null||v===void 0||v.call(y,bt({chart:u,overlay:y},f)))),e._figureMouseClickEvent(y,"point",b,{key:"".concat(Ls,"point_").concat(b),type:"circle",attrs:{}})(f)}return h.setClickOverlayInfo({paneId:l,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(S,_){return e._processOverlaySelectedEvent(S,_,f)},function(S,_){return e._processOverlayDeselectedEvent(S,_,f)}),!1}).registerEvent("mouseDoubleClickEvent",function(f){var d,v=h.getProgressOverlayInfo();if(v!==null){var m=v.overlay,y=v.paneId;m.isDrawing()&&y===l&&(m.forceComplete(),m.isDrawing()||(h.progressOverlayComplete(),(d=m.onDrawEnd)===null||d===void 0||d.call(m,bt({chart:u,overlay:m},f))));var x=m.points.length-1;return e._figureMouseClickEvent(m,"point",x,{key:"".concat(Ls,"point_").concat(x),type:"circle",attrs:{}})(f)}return!1}).registerEvent("mouseRightClickEvent",function(f){var d=h.getProgressOverlayInfo();if(d!==null){var v=d.overlay;if(v.isDrawing()){var m=v.points.length-1;return e._figureMouseRightClickEvent(v,"point",m,{key:"".concat(Ls,"point_").concat(m),type:"circle",attrs:{}})(f)}}return!1}).registerEvent("mouseUpEvent",function(f){var d,v=h.getPressedOverlayInfo(),m=v.overlay,y=v.figure;return m!==null&&Pi("onPressedMoveEnd",y)&&((d=m.onPressedMoveEnd)===null||d===void 0||d.call(m,bt({chart:u,overlay:m,figure:y??void 0},f))),h.setPressedOverlayInfo({paneId:l,overlay:null,figureType:"none",figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(f){var d,v=h.getPressedOverlayInfo(),m=v.overlay,y=v.figureType,x=v.figureIndex,b=v.figure;if(m!==null&&Pi("onPressedMoving",b)){if(!m.lock){var S=e._coordinateToPoint(m,f);y==="point"?m.eventPressedPointMove(S,x):m.eventPressedOtherMove(S,e.getWidget().getPane().getChart().getChartStore());var _=!1;(d=m.onPressedMoving)===null||d===void 0||d.call(m,bt(bt({chart:u,overlay:m,figure:b??void 0},f),{preventDefault:function(){_=!0}})),_?e.getWidget().setForceCursor(null):e.getWidget().setForceCursor("pointer")}return!0}return e.getWidget().setForceCursor(null),!1})},t.prototype._createFigureEvents=function(e,n,a,l){return e.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(e,n,a,l),mouseDownEvent:this._figureMouseDownEvent(e,n,a,l),mouseClickEvent:this._figureMouseClickEvent(e,n,a,l),mouseRightClickEvent:this._figureMouseRightClickEvent(e,n,a,l),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(e,n,a,l)}},t.prototype._processOverlayMouseEnterEvent=function(e,n,a){return xi(e.onMouseEnter)&&Pi("onMouseEnter",n)?(e.onMouseEnter(bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._processOverlayMouseLeaveEvent=function(e,n,a){return xi(e.onMouseLeave)&&Pi("onMouseLeave",n)?(e.onMouseLeave(bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._processOverlaySelectedEvent=function(e,n,a){var l;return Pi("onSelected",n)?((l=e.onSelected)===null||l===void 0||l.call(e,bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._processOverlayDeselectedEvent=function(e,n,a){var l;return Pi("onDeselected",n)?((l=e.onDeselected)===null||l===void 0||l.call(e,bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._figureMouseMoveEvent=function(e,n,a,l){var u=this;return function(h){var f,d=u.getWidget().getPane(),v=!e.isDrawing()&&Pi("onMouseMove",l);if(v){var m=!1;(f=e.onMouseMove)===null||f===void 0||f.call(e,bt(bt({chart:d.getChart(),overlay:e,figure:l},h),{preventDefault:function(){m=!0}})),m?u.getWidget().setForceCursor(null):u.getWidget().setForceCursor("pointer")}return d.getChart().getChartStore().setHoverOverlayInfo({paneId:d.getId(),overlay:e,figureType:n,figure:l,figureIndex:a},function(y,x){return u._processOverlayMouseEnterEvent(y,x,h)},function(y,x){return u._processOverlayMouseLeaveEvent(y,x,h)}),v}},t.prototype._figureMouseDownEvent=function(e,n,a,l){var u=this;return function(h){var f,d=u.getWidget().getPane(),v=d.getId();return e.startPressedMove(u._coordinateToPoint(e,h)),Pi("onPressedMoveStart",l)?((f=e.onPressedMoveStart)===null||f===void 0||f.call(e,bt({chart:d.getChart(),overlay:e,figure:l},h)),d.getChart().getChartStore().setPressedOverlayInfo({paneId:v,overlay:e,figureType:n,figureIndex:a,figure:l}),!e.isDrawing()):!1}},t.prototype._figureMouseClickEvent=function(e,n,a,l){var u=this;return function(h){var f,d=u.getWidget().getPane(),v=d.getId(),m=!e.isDrawing()&&Pi("onClick",l);return m&&((f=e.onClick)===null||f===void 0||f.call(e,bt({chart:u.getWidget().getPane().getChart(),overlay:e,figure:l},h))),d.getChart().getChartStore().setClickOverlayInfo({paneId:v,overlay:e,figureType:n,figureIndex:a,figure:l},function(y,x){return u._processOverlaySelectedEvent(y,x,h)},function(y,x){return u._processOverlayDeselectedEvent(y,x,h)}),m}},t.prototype._figureMouseDoubleClickEvent=function(e,n,a,l){var u=this;return function(h){var f;return Pi("onDoubleClick",l)?((f=e.onDoubleClick)===null||f===void 0||f.call(e,bt(bt({},h),{chart:u.getWidget().getPane().getChart(),figure:l,overlay:e})),!e.isDrawing()):!1}},t.prototype._figureMouseRightClickEvent=function(e,n,a,l){var u=this;return function(h){var f;if(Pi("onRightClick",l)){var d=!1;return(f=e.onRightClick)===null||f===void 0||f.call(e,bt(bt({chart:u.getWidget().getPane().getChart(),overlay:e,figure:l},h),{preventDefault:function(){d=!0}})),d||u.getWidget().getPane().getChart().getChartStore().removeOverlay(e),!e.isDrawing()}return!1}},t.prototype._coordinateToPoint=function(e,n){var a,l={},u=this.getWidget().getPane(),h=u.getChart(),f=u.getId(),d=h.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var v=h.getXAxisPane().getAxisComponent(),m=v.convertFromPixel(n.x),y=(a=d.dataIndexToTimestamp(m))!==null&&a!==void 0?a:void 0;l.timestamp=y,l.dataIndex=m}if(this.coordinateToPointValueFlag()){var x=u.getAxisComponent(),b=x.convertFromPixel(n.y);if(e.mode!=="normal"&&f===Vt.CANDLE&&Dt(l.dataIndex)){var S=d.getDataByDataIndex(l.dataIndex);if(S!==null){var _=e.modeSensitivity;if(b>S.high)if(e.mode==="weak_magnet"){var C=x.convertToPixel(S.high),A=x.convertFromPixel(C-_);b<A&&(b=S.high)}else b=S.high;else if(b<S.low)if(e.mode==="weak_magnet"){var T=x.convertToPixel(S.low),A=x.convertFromPixel(T-_);b>A&&(b=S.low)}else b=S.low;else{var D=Math.max(S.open,S.close),M=Math.min(S.open,S.close);b>D?b-D<S.high-b?b=D:b=S.high:b<M?b-S.low<M-b?b=S.low:b=M:D-b<b-M?b=D:b=M}}}l.value=b}return l},t.prototype.coordinateToPointValueFlag=function(){return!0},t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.dispatchEvent=function(e,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(e,n):r.prototype.dispatchEvent.call(this,e,n)},t.prototype.drawImp=function(e){var n=this,a=this.getCompleteOverlays();a.forEach(function(u){u.visible&&n._drawOverlay(e,u)});var l=this.getProgressOverlay();at(l)&&l.visible&&this._drawOverlay(e,l)},t.prototype._drawOverlay=function(e,n){var a=n.points,l=this.getWidget().getPane(),u=l.getChart(),h=u.getChartStore(),f=l.getAxisComponent(),d=u.getXAxisPane().getAxisComponent(),v=a.map(function(y){var x,b=null;Dt(y.timestamp)&&(b=h.timestampToDataIndex(y.timestamp));var S={x:0,y:0};return Dt(b)&&(S.x=d.convertToPixel(b)),Dt(y.value)&&(S.y=(x=f?.convertToPixel(y.value))!==null&&x!==void 0?x:0),S});if(v.length>0){var m=[].concat(this.getFigures(n,v));this.drawFigures(e,n,m)}this.drawDefaultFigures(e,n,v)},t.prototype.drawFigures=function(e,n,a){var l=this,u=this.getWidget().getPane().getChart().getStyles().overlay;a.forEach(function(h,f){var d=h.type,v=h.styles,m=h.attrs,y=[].concat(m);y.forEach(function(x){var b,S,_=l._createFigureEvents(n,"other",f,h),C=bt(bt(bt({},u[d]),(b=n.styles)===null||b===void 0?void 0:b[d]),v);(S=l.createFigure({name:d,attrs:x,styles:C},_??void 0))===null||S===void 0||S.draw(e)})})},t.prototype.getCompleteOverlays=function(){var e=this.getWidget().getPane();return e.getChart().getChartStore().getOverlaysByPaneId(e.getId())},t.prototype.getProgressOverlay=function(){var e=this.getWidget().getPane(),n=e.getChart().getChartStore().getProgressOverlayInfo();return at(n)&&n.paneId===e.getId()?n.overlay:null},t.prototype.getFigures=function(e,n){var a,l,u=this.getWidget(),h=u.getPane(),f=h.getChart(),d=h.getAxisComponent(),v=f.getXAxisPane().getAxisComponent(),m=u.getBounding();return(l=(a=e.createPointFigures)===null||a===void 0?void 0:a.call(e,{chart:f,overlay:e,coordinates:n,bounding:m,xAxis:v,yAxis:d}))!==null&&l!==void 0?l:[]},t.prototype.drawDefaultFigures=function(e,n,a){var l=this,u,h;if(n.needDefaultPointFigure){var f=this.getWidget().getPane().getChart().getChartStore(),d=f.getHoverOverlayInfo(),v=f.getClickOverlayInfo();if(((u=d.overlay)===null||u===void 0?void 0:u.id)===n.id&&d.figureType!=="none"||((h=v.overlay)===null||h===void 0?void 0:h.id)===n.id&&v.figureType!=="none"){var m=f.getStyles().overlay,y=n.styles,x=bt(bt({},m.point),y?.point);a.forEach(function(b,S){var _,C,A,T,D,M=b.x,j=b.y,N=x.radius,V=x.color,B=x.borderColor,I=x.borderSize;((_=d.overlay)===null||_===void 0?void 0:_.id)===n.id&&d.figureType==="point"&&((C=d.figure)===null||C===void 0?void 0:C.key)==="".concat(Ls,"point_").concat(S)&&(N=x.activeRadius,V=x.activeColor,B=x.activeBorderColor,I=x.activeBorderSize),(T=l.createFigure({name:"circle",attrs:{x:M,y:j,r:N+I},styles:{color:B}},(A=l._createFigureEvents(n,"point",S,{key:"".concat(Ls,"point_").concat(S),type:"circle",attrs:{x:M,y:j,r:N+I},styles:{color:B}}))!==null&&A!==void 0?A:void 0))===null||T===void 0||T.draw(e),(D=l.createFigure({name:"circle",attrs:{x:M,y:j,r:N},styles:{color:V}}))===null||D===void 0||D.draw(e)})}}},t})(zi),eS=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._gridView=new lD(a),a._indicatorView=new oD(a),a._crosshairLineView=new uD(a),a._tooltipView=a.createTooltipView(),a._overlayView=new tS(a),a.addChild(a._tooltipView),a.addChild(a._overlayView),a}return t.prototype.getName=function(){return Ut.MAIN},t.prototype.updateMain=function(e){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(e),this._indicatorView.draw(e),this._gridView.draw(e))},t.prototype.createTooltipView=function(){return new Jx(this)},t.prototype.updateMainContent=function(e){},t.prototype.updateOverlayContent=function(e){},t.prototype.updateOverlay=function(e){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(e),this._crosshairLineView.draw(e),this.updateOverlayContent(e)),this._tooltipView.draw(e)},t})(Ld),cD=(function(r){Pt(t,r);function t(){var e=r.apply(this,Yu([],_l(arguments),!1))||this;return e._ripplePoint=e.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),e._animationFrameTime=0,e._animation=new sd({iterationCount:1/0}).doFrame(function(n){e._animationFrameTime=n;var a=e.getWidget().getPane();a.getChart().updatePane(0,a.getId())}),e}return t.prototype.drawImp=function(e){var n,a,l,u=this.getWidget(),h=u.getPane(),f=h.getChart(),d=f.getDataList(),v=d.length-1,m=u.getBounding(),y=h.getAxisComponent(),x=f.getStyles().candle.area,b=[],S=Number.MAX_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER,C=null;if(this.eachChildren(function(N){var V=N.x,B=N.data.current,I=B?.[x.value];if(Dt(I)){var W=y.convertToPixel(I);_===Number.MIN_SAFE_INTEGER&&(_=V),b.push({x:V,y:W}),S=Math.min(S,W),N.dataIndex===v&&(C={x:V,y:W})}}),b.length>0){(n=this.createFigure({name:"line",attrs:{coordinates:b},styles:{color:x.lineColor,size:x.lineSize,smooth:x.smooth}}))===null||n===void 0||n.draw(e);var A=x.backgroundColor,T="";if(Cn(A)){var D=e.createLinearGradient(0,m.height,0,S);try{A.forEach(function(N){var V=N.offset,B=N.color;D.addColorStop(V,B)})}catch{}T=D}else T=A;e.fillStyle=T,e.beginPath(),e.moveTo(_,m.height),e.lineTo(b[0].x,b[0].y),Ux(e,b,x.smooth),e.lineTo(b[b.length-1].x,m.height),e.closePath(),e.fill()}var M=x.point;if(M.show&&at(C)){(a=this.createFigure({name:"circle",attrs:{x:C.x,y:C.y,r:M.radius},styles:{style:"fill",color:M.color}}))===null||a===void 0||a.draw(e);var j=M.rippleRadius;M.animation&&(j=M.radius+this._animationFrameTime/M.animationDuration*(M.rippleRadius-M.radius),this._animation.setDuration(M.animationDuration).start()),(l=this._ripplePoint)===null||l===void 0||l.setAttrs({x:C.x,y:C.y,r:j}).setStyles({style:"fill",color:M.rippleColor}).draw(e)}else this.stopAnimation()},t.prototype.stopAnimation=function(){this._animation.stop()},t})($x),hD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a,l=this.getWidget(),u=l.getPane(),h=u.getChart().getChartStore(),f=h.getStyles().candle.priceMark,d=f.high,v=f.low;if(f.show&&(d.show||v.show)){var m=h.getVisibleRangeHighLowPrice(),y=(a=(n=h.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&a!==void 0?a:Ue.PRICE,x=u.getAxisComponent(),b=m[0],S=b.price,_=b.x,C=m[1],A=C.price,T=C.x,D=x.convertToPixel(S),M=x.convertToPixel(A),j=h.getDecimalFold(),N=h.getThousandsSeparator();d.show&&S!==Number.MIN_SAFE_INTEGER&&this._drawMark(e,j.format(N.format(We(S,y))),{x:_,y:D},D<M?[-2,-5]:[2,5],d),v.show&&A!==Number.MAX_SAFE_INTEGER&&this._drawMark(e,j.format(N.format(We(A,y))),{x:T,y:M},D<M?[2,5]:[-2,-5],v)}},t.prototype._drawMark=function(e,n,a,l,u){var h,f,d,v=a.x,m=a.y+l[0];(h=this.createFigure({name:"line",attrs:{coordinates:[{x:v-2,y:m+l[0]},{x:v,y:m},{x:v+2,y:m+l[0]}]},styles:{color:u.color}}))===null||h===void 0||h.draw(e);var y=0,x=0,b="left",S=this.getWidget().getBounding().width;v>S/2?(y=v-5,x=y-u.textOffset,b="right"):(y=v+5,b="left",x=y+u.textOffset);var _=m+l[1];(f=this.createFigure({name:"line",attrs:{coordinates:[{x:v,y:m},{x:v,y:_},{x:y,y:_}]},styles:{color:u.color}}))===null||f===void 0||f.draw(e),(d=this.createFigure({name:"text",attrs:{x,y:_,text:n,align:b,baseline:"middle"},styles:{color:u.color,size:u.textSize,family:u.textFamily,weight:u.textWeight}}))===null||d===void 0||d.draw(e)},t})(zi),fD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a,l,u=this.getWidget(),h=u.getPane(),f=u.getBounding(),d=h.getChart().getChartStore(),v=d.getStyles().candle.priceMark,m=v.last,y=m.line;if(v.show&&m.show&&y.show){var x=h.getAxisComponent(),b=d.getDataList(),S=b[b.length-1];if(at(S)){var _=S.close,C=S.open,A=m.compareRule==="current_open"?C:(a=(n=b[b.length-2])===null||n===void 0?void 0:n.close)!==null&&a!==void 0?a:_,T=x.convertToNicePixel(_),D="";_>A?D=m.upColor:_<A?D=m.downColor:D=m.noChangeColor,(l=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:T},{x:f.width,y:T}]},styles:{style:y.style,color:D,size:y.size,dashedValue:y.dashedValue}}))===null||l===void 0||l.draw(e)}}},t})(zi),dD={second:"HH:mm:ss",minute:"HH:mm",hour:"MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},iS={second:"HH:mm:ss",minute:"YYYY-MM-DD HH:mm",hour:"YYYY-MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},vD={time:"",open:"",high:"",low:"",close:"",volume:"",turnover:"",change:"",second:"",minute:"",hour:"",day:"",week:"",month:"",year:""},pD={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: ",second:"S",minute:"",hour:"H",day:"D",week:"W",month:"M",year:"Y"},mD={"zh-CN":vD,"en-US":pD};function Uy(r,t){var e;return(e=mD[t][r])!==null&&e!==void 0?e:r}var gD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this.getWidget(),a=n.getPane().getChart().getChartStore(),l=a.getCrosshair();if(at(l.kLineData)){var u=n.getBounding(),h=a.getStyles(),f=h.candle,d=h.indicator;if(f.tooltip.showType==="rect"&&d.tooltip.showType==="rect"){var v=this.isDrawTooltip(l,f.tooltip),m=this.isDrawTooltip(l,d.tooltip);this._drawRectTooltip(e,v,m,f.tooltip.offsetTop)}else if(f.tooltip.showType==="standard"&&d.tooltip.showType==="standard"){var y=f.tooltip,x=y.offsetLeft,b=y.offsetTop,S=y.offsetRight,_=u.width-S,C=this._drawCandleStandardTooltip(e,x,b,_);this.drawIndicatorTooltip(e,x,C,_)}else if(f.tooltip.showType==="rect"&&d.tooltip.showType==="standard"){var A=f.tooltip,x=A.offsetLeft,b=A.offsetTop,S=A.offsetRight,_=u.width-S,T=this.drawIndicatorTooltip(e,x,b,_),v=this.isDrawTooltip(l,f.tooltip);this._drawRectTooltip(e,v,!1,T)}else{var D=f.tooltip,x=D.offsetLeft,b=D.offsetTop,S=D.offsetRight,_=u.width-S,M=this._drawCandleStandardTooltip(e,x,b,_),m=this.isDrawTooltip(l,d.tooltip);this._drawRectTooltip(e,!1,m,M)}}},t.prototype._drawCandleStandardTooltip=function(e,n,a,l){var u,h=this.getWidget().getPane().getChart().getChartStore(),f=h.getStyles().candle,d=f.tooltip,v=d.legend,m=0,y={x:n,y:a},x=h.getCrosshair();if(this.isDrawTooltip(x,d)){var b=d.title;if(b.show){var S=(u=h.getPeriod())!==null&&u!==void 0?u:{},_=S.type,C=_===void 0?"":_,A=S.span,T=A===void 0?"":A,D=Ny(b.template,bt(bt({},h.getSymbol()),{period:"".concat(T).concat(Uy(C,h.getLocale()))})),M=b.color,j=this.drawStandardTooltipLegends(e,[{title:{text:"",color:M},value:{text:D,color:M}}],{x:n,y:a},n,0,l,b);y.y=y.y+j}var N=this._getCandleTooltipLegends(),V=this.classifyTooltipFeatures(d.features);m=this.drawStandardTooltipFeatures(e,V[0],y,null,n,m,l),m=this.drawStandardTooltipFeatures(e,V[1],y,null,n,m,l),N.length>0&&(m=this.drawStandardTooltipLegends(e,N,y,n,m,l,v)),m=this.drawStandardTooltipFeatures(e,V[2],y,null,n,m,l)}return y.y+m},t.prototype._drawRectTooltip=function(e,n,a,l){var u=this,h,f,d=this.getWidget(),v=d.getPane(),m=v.getChart().getChartStore(),y=m.getStyles(),x=y.candle,b=y.indicator,S=x.tooltip,_=b.tooltip;if(n||a){var C=this._getCandleTooltipLegends(),A=S.offsetLeft,T=S.offsetTop,D=S.offsetRight,M=S.offsetBottom,j=S.legend,N=j.marginLeft,V=j.marginRight,B=j.marginTop,I=j.marginBottom,W=j.size,Z=j.weight,it=j.family,X=S.rect,ot=X.position,z=X.paddingLeft,U=X.paddingRight,st=X.paddingTop,ft=X.paddingBottom,rt=X.offsetLeft,O=X.offsetRight,L=X.offsetTop,F=X.offsetBottom,q=X.borderSize,$=X.borderRadius,J=X.borderColor,tt=X.color,vt=0,pt=0,ut=0;n&&(e.font=Hr(W,Z,it),C.forEach(function(De){var he=De.title,Je=De.value,Si="".concat(he.text).concat(Je.text),ji=e.measureText(Si).width+N+V;vt=Math.max(vt,ji)}),ut+=(I+B+W)*C.length);var dt=_.legend,St=dt.marginLeft,yt=dt.marginRight,_t=dt.marginTop,xt=dt.marginBottom,Mt=dt.size,zt=dt.weight,gt=dt.family,At=[];if(a){var wt=m.getIndicatorsByPaneId(v.getId());e.font=Hr(Mt,zt,gt),wt.forEach(function(De){var he=u.getIndicatorTooltipData(De).legends;At.push(he),he.forEach(function(Je){var Si=Je.title,ji=Je.value,en="".concat(Si.text).concat(ji.text),Xr=e.measureText(en).width+St+yt;vt=Math.max(vt,Xr),ut+=_t+xt+Mt})})}if(pt+=vt,pt!==0&&ut!==0){var Nt=m.getCrosshair(),Lt=d.getBounding(),ae=v.getYAxisWidget().getBounding();pt+=q*2+z+U,ut+=q*2+st+ft;var Qt=Lt.width/2,me=ot==="pointer"&&Nt.paneId===Vt.CANDLE,Xe=((h=Nt.realX)!==null&&h!==void 0?h:0)>Qt,ce=0;if(me){var ge=Nt.realX;Xe?ce=ge-O-pt:ce=ge+rt}else{var He=this.getWidget().getPane().getAxisComponent();Xe?(ce=rt+A,He.inside&&He.position==="left"&&(ce+=ae.width)):(ce=Lt.width-O-pt-D,He.inside&&He.position==="right"&&(ce-=ae.width))}var Ge=l+L;if(me){var tn=Nt.y;Ge=tn-ut/2,Ge+ut>Lt.height-F-M&&(Ge=Lt.height-F-ut-M),Ge<l+L&&(Ge=l+L+T)}(f=this.createFigure({name:"rect",attrs:{x:ce,y:Ge,width:pt,height:ut},styles:{style:"stroke_fill",color:tt,borderColor:J,borderSize:q,borderRadius:$}}))===null||f===void 0||f.draw(e);var qr=ce+q+z+N,Ze=Ge+q+st;if(n&&C.forEach(function(De){var he,Je;Ze+=B;var Si=De.title;(he=u.createFigure({name:"text",attrs:{x:qr,y:Ze,text:Si.text},styles:{color:Si.color,size:W,family:it,weight:Z}}))===null||he===void 0||he.draw(e);var ji=De.value;(Je=u.createFigure({name:"text",attrs:{x:ce+pt-q-V-U,y:Ze,text:ji.text,align:"right"},styles:{color:ji.color,size:W,family:it,weight:Z}}))===null||Je===void 0||Je.draw(e),Ze+=W+I}),a){var Ke=ce+q+z+St;At.forEach(function(De){De.forEach(function(he){var Je,Si;Ze+=_t;var ji=he.title,en=he.value;(Je=u.createFigure({name:"text",attrs:{x:Ke,y:Ze,text:ji.text},styles:{color:ji.color,size:Mt,family:gt,weight:zt}}))===null||Je===void 0||Je.draw(e),(Si=u.createFigure({name:"text",attrs:{x:ce+pt-q-yt-U,y:Ze,text:en.text,align:"right"},styles:{color:en.color,size:Mt,family:gt,weight:zt}}))===null||Si===void 0||Si.draw(e),Ze+=Mt+xt})})}}}},t.prototype._getCandleTooltipLegends=function(){var e,n,a,l,u,h,f,d,v=this.getWidget().getPane().getChart().getChartStore(),m=v.getStyles().candle,y=v.getDataList(),x=v.getInnerFormatter(),b=v.getDecimalFold(),S=v.getThousandsSeparator(),_=v.getLocale(),C=(e=v.getSymbol())!==null&&e!==void 0?e:{},A=C.pricePrecision,T=A===void 0?Ue.PRICE:A,D=C.volumePrecision,M=D===void 0?Ue.VOLUME:D,j=v.getPeriod(),N=(n=v.getCrosshair().dataIndex)!==null&&n!==void 0?n:0,V=m.tooltip,B=V.legend,I=B.color,W=B.defaultValue,Z=B.template,it=(a=y[N-1])!==null&&a!==void 0?a:null,X=y[N],ot=(l=it?.close)!==null&&l!==void 0?l:X.close,z=X.close-ot,U=bt(bt({},X),{time:x.formatDate(X.timestamp,iS[(u=j?.type)!==null&&u!==void 0?u:"day"],"tooltip"),open:b.format(S.format(We(X.open,T))),high:b.format(S.format(We(X.high,T))),low:b.format(S.format(We(X.low,T))),close:b.format(S.format(We(X.close,T))),volume:b.format(S.format(x.formatBigNumber(We((h=X.volume)!==null&&h!==void 0?h:W,M)))),turnover:b.format(S.format(We((f=X.turnover)!==null&&f!==void 0?f:W,T))),change:ot===0?W:"".concat(S.format(We(z/ot*100)),"%")}),st=xi(Z)?Z({prev:it,current:X,next:(d=y[N+1])!==null&&d!==void 0?d:null},m):Z;return st.map(function(ft){var rt=ft.title,O=ft.value,L={text:"",color:I};Qi(rt)?L=bt({},rt):L.text=rt,L.text=Uy(L.text,_);var F={text:W,color:I};return Qi(O)?F=bt({},O):F.text=O,at(/{change}/.exec(F.text))&&(F.color=z===0?m.priceMark.last.noChangeColor:z>0?m.priceMark.last.upColor:m.priceMark.last.downColor),F.text=Ny(F.text,U),{title:L,value:F}})},t})(Jx),yD=(function(r){Pt(t,r);function t(e){var n=r.call(this,e)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(a){return function(){var l=n.getWidget().getPane();return l.getChart().getChartStore().executeAction("onCrosshairFeatureClick",a),!0}},n._featureMouseMoveEvent=function(a){return function(){return n._activeFeatureInfo=a,n.getWidget().setForceCursor("pointer"),!0}},n.registerEvent("mouseMoveEvent",function(a){return n._activeFeatureInfo=null,n.getWidget().setForceCursor(null),!1}),n}return t.prototype.drawImp=function(e){var n=this,a,l,u=this.getWidget(),h=u.getPane(),f=u.getPane().getChart().getChartStore(),d=f.getCrosshair(),v=this.getWidget(),m=v.getPane().getAxisComponent();if(Kt(d.paneId)&&d.paneId===h.getId()&&m.isInCandle()){var y=f.getStyles().crosshair,x=y.horizontal.features;if(y.show&&y.horizontal.show&&x.length>0){var b=m.position==="right",S=v.getBounding(),_=0,C=y.horizontal.text;if(m.inside&&C.show){var A=m.convertFromPixel(d.y),T=m.getRange(),D=m.displayValueToText(m.realValueToDisplayValue(m.valueToRealValue(A,{range:T}),{range:T}),(l=(a=f.getSymbol())===null||a===void 0?void 0:a.pricePrecision)!==null&&l!==void 0?l:Ue.PRICE);D=f.getDecimalFold().format(f.getThousandsSeparator().format(D)),_=C.paddingLeft+$i(D,C.size,C.weight,C.family)+C.paddingRight}var M=_;b&&(M=S.width-_);var j=d.y;x.forEach(function(N){var V,B,I,W,Z=N.marginLeft,it=Z===void 0?0:Z,X=N.marginTop,ot=X===void 0?0:X,z=N.marginRight,U=z===void 0?0:z,st=N.paddingLeft,ft=st===void 0?0:st,rt=N.paddingTop,O=rt===void 0?0:rt,L=N.paddingRight,F=L===void 0?0:L,q=N.paddingBottom,$=q===void 0?0:q,J=N.color,tt=N.activeColor,vt=N.backgroundColor,pt=N.activeBackgroundColor,ut=N.borderRadius,dt=N.size,St=dt===void 0?0:dt,yt=N.type,_t=N.content,xt=St;if(yt==="icon_font"){var Mt=_t;xt=ft+$i(Mt.code,St,"normal",Mt.family)+F}b?M-=xt+U:M+=it;var zt=J,gt=vt;((V=n._activeFeatureInfo)===null||V===void 0?void 0:V.feature.id)===N.id&&(zt=tt??J,gt=pt??vt);var At={mouseDownEvent:n._featureClickEvent({crosshair:d,feature:N}),mouseMoveEvent:n._featureMouseMoveEvent({crosshair:d,feature:N})};if(yt==="icon_font"){var Mt=_t;(B=n.createFigure({name:"text",attrs:{text:Mt.code,x:M,y:j+ot,baseline:"middle"},styles:{paddingLeft:ft,paddingTop:O,paddingRight:F,paddingBottom:$,borderRadius:ut,size:St,family:Mt.family,color:zt,backgroundColor:gt}},At))===null||B===void 0||B.draw(e)}else{(I=n.createFigure({name:"rect",attrs:{x:M,y:j+ot-St/2,width:St,height:St},styles:{paddingLeft:ft,paddingTop:O,paddingRight:F,paddingBottom:$,color:gt}},At))===null||I===void 0||I.draw(e);var wt=_t;(W=n.createFigure({name:"path",attrs:{path:wt.path,x:M,y:j+ot+O-St/2,width:St,height:St},styles:{style:wt.style,lineWidth:wt.lineWidth,color:zt}}))===null||W===void 0||W.draw(e)}b?M-=it:M+=xt+U})}}},t})(zi),bD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._candleBarView=new Zx(a),a._candleAreaView=new cD(a),a._candleHighLowPriceView=new hD(a),a._candleLastPriceLineView=new fD(a),a._crosshairFeatureView=new yD(a),a.addChild(a._candleBarView),a.addChild(a._crosshairFeatureView),a}return t.prototype.updateMainContent=function(e){var n=this.getPane().getChart().getStyles().candle;n.type!=="area"?(this._candleBarView.draw(e),this._candleHighLowPriceView.draw(e),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(e),this._candleLastPriceLineView.draw(e)},t.prototype.updateOverlayContent=function(e){this._crosshairFeatureView.draw(e)},t.prototype.createTooltipView=function(){return new gD(this)},t})(eS),nS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e,n){var a=this,l,u,h=this.getWidget(),f=h.getPane(),d=h.getBounding(),v=f.getAxisComponent(),m=this.getAxisStyles(f.getChart().getStyles());if(m.show&&(m.axisLine.show&&((l=this.createFigure({name:"line",attrs:this.createAxisLine(d,m),styles:m.axisLine}))===null||l===void 0||l.draw(e)),!n[0])){var y=v.getTicks();if(m.tickLine.show){var x=this.createTickLines(y,d,m);x.forEach(function(S){var _;(_=a.createFigure({name:"line",attrs:S,styles:m.tickLine}))===null||_===void 0||_.draw(e)})}if(m.tickText.show){var b=this.createTickTexts(y,d,m);(u=this.createFigure({name:"text",attrs:b,styles:m.tickText}))===null||u===void 0||u.draw(e)}}},t})(zi),xD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(e){return e.yAxis},t.prototype.createAxisLine=function(e,n){var a=this.getWidget().getPane().getAxisComponent(),l=n.axisLine.size,u=0;return a.isFromZero()?u=0:u=e.width-l,{coordinates:[{x:u,y:0},{x:u,y:e.height}]}},t.prototype.createTickLines=function(e,n,a){var l=this.getWidget().getPane().getAxisComponent(),u=a.axisLine,h=a.tickLine,f=0,d=0;return l.isFromZero()?(f=0,u.show&&(f+=u.size),d=f+h.length):(f=n.width,u.show&&(f-=u.size),d=f-h.length),e.map(function(v){return{coordinates:[{x:f,y:v.coord},{x:d,y:v.coord}]}})},t.prototype.createTickTexts=function(e,n,a){var l=this.getWidget().getPane().getAxisComponent(),u=a.axisLine,h=a.tickLine,f=a.tickText,d=0;l.isFromZero()?(d=f.marginStart,u.show&&(d+=u.size),h.show&&(d+=h.length)):(d=n.width-f.marginEnd,u.show&&(d-=u.size),h.show&&(d-=h.length));var v=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return e.map(function(m){return{x:d,y:m.coord,text:m.text,align:v,baseline:"middle"}})},t})(nS),SD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this,a,l,u,h,f=this.getWidget(),d=f.getPane(),v=f.getBounding(),m=d.getChart().getChartStore(),y=m.getStyles().candle.priceMark,x=y.last,b=x.text;if(y.show&&x.show&&b.show){var S=(l=(a=m.getSymbol())===null||a===void 0?void 0:a.pricePrecision)!==null&&l!==void 0?l:Ue.PRICE,_=d.getAxisComponent(),C=m.getDataList(),A=C[C.length-1];if(at(A)){var T=A.close,D=A.open,M=x.compareRule==="current_open"?D:(h=(u=C[C.length-2])===null||u===void 0?void 0:u.close)!==null&&h!==void 0?h:T,j=_.convertToNicePixel(T),N="";T>M?N=x.upColor:T<M?N=x.downColor:N=x.noChangeColor;var V=0,B="left";_.isFromZero()?(V=0,B="left"):(V=v.width,B="right");var I=[],W=_.getRange(),Z=_.displayValueToText(_.realValueToDisplayValue(_.valueToRealValue(T,{range:W}),{range:W}),S);Z=m.getDecimalFold().format(m.getThousandsSeparator().format(Z));var it=b.paddingLeft,X=b.paddingRight,ot=b.paddingTop,z=b.paddingBottom,U=b.size,st=b.family,ft=b.weight,rt=it+$i(Z,U,ft,st)+X,O=ot+U+z;I.push({name:"text",attrs:{x:V,y:j,width:rt,height:O,text:Z,align:B,baseline:"middle"},styles:bt(bt({},b),{backgroundColor:N})});var L=m.getInnerFormatter().formatExtendText,F=U/2,q=j-F-ot,$=j+F+z;x.extendTexts.forEach(function(J,tt){var vt=L({type:"last_price",data:A,index:tt});if(vt.length>0&&J.show){var pt=J.size/2,ut=0;J.position==="above_price"?(q-=J.paddingBottom+pt,ut=q,q-=pt+J.paddingTop):($+=J.paddingTop+pt,ut=$,$+=pt+J.paddingBottom),rt=Math.max(rt,J.paddingLeft+$i(vt,J.size,J.weight,J.family)+J.paddingRight),I.push({name:"text",attrs:{x:V,y:ut,width:rt,height:J.paddingTop+J.size+J.paddingBottom,text:vt,align:B,baseline:"middle"},styles:bt(bt({},J),{backgroundColor:N})})}}),I.forEach(function(J){var tt;J.attrs.width=rt,(tt=n.createFigure(J))===null||tt===void 0||tt.draw(e)})}}},t})(zi),_D=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this,a=this.getWidget(),l=a.getPane(),u=a.getBounding(),h=l.getChart().getChartStore(),f=h.getStyles().indicator,d=f.lastValueMark,v=d.text;if(d.show){var m=l.getAxisComponent(),y=m.getRange(),x=h.getDataList(),b=x.length-1,S=h.getIndicatorsByPaneId(l.getId()),_=h.getInnerFormatter(),C=h.getDecimalFold(),A=h.getThousandsSeparator();S.forEach(function(T){var D,M=T.result,j=(D=M[b])!==null&&D!==void 0?D:{};if(at(j)&&T.visible){var N=T.precision;kd(T,b,f,function(V,B){var I,W=j[V.key];if(Dt(W)){var Z=m.convertToNicePixel(W),it=m.displayValueToText(m.realValueToDisplayValue(m.valueToRealValue(W,{range:y}),{range:y}),N);T.shouldFormatBigNumber&&(it=_.formatBigNumber(it)),it=C.format(A.format(it));var X=0,ot="left";m.isFromZero()?(X=0,ot="left"):(X=u.width,ot="right"),(I=n.createFigure({name:"text",attrs:{x:X,y:Z,text:it,align:ot,baseline:"middle"},styles:bt(bt({},v),{backgroundColor:B.color})}))===null||I===void 0||I.draw(e)}})}})}},t})(zi),rS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},t.prototype.drawDefaultFigures=function(e,n,a){this.drawFigures(e,n,this.getDefaultFigures(n,a))},t.prototype.getDefaultFigures=function(e,n){var a,l=this.getWidget(),u=l.getPane(),h=u.getChart().getChartStore(),f=h.getClickOverlayInfo(),d=[];if(e.needDefaultYAxisFigure&&e.id===((a=f.overlay)===null||a===void 0?void 0:a.id)&&f.paneId===u.getId()){var v=u.getAxisComponent(),m=l.getBounding(),y=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,b=v.isFromZero(),S="left",_=0;b?(S="left",_=0):(S="right",_=m.width);var C=h.getDecimalFold(),A=h.getThousandsSeparator();n.forEach(function(T,D){var M,j,N=e.points[D];if(Dt(N.value)){y=Math.min(y,T.y),x=Math.max(x,T.y);var V=C.format(A.format(We(N.value,(j=(M=h.getSymbol())===null||M===void 0?void 0:M.pricePrecision)!==null&&j!==void 0?j:Ue.PRICE)));d.push({type:"text",attrs:{x:_,y:T.y,text:V,align:S,baseline:"middle"},ignoreEvent:!0})}}),n.length>1&&d.unshift({type:"rect",attrs:{x:0,y,width:m.width,height:x-y},ignoreEvent:!0})}return d},t.prototype.getFigures=function(e,n){var a,l,u=this.getWidget(),h=u.getPane(),f=h.getChart(),d=h.getAxisComponent(),v=f.getXAxisPane().getAxisComponent(),m=u.getBounding();return(l=(a=e.createYAxisFigures)===null||a===void 0?void 0:a.call(e,{chart:f,overlay:e,coordinates:n,bounding:m,xAxis:v,yAxis:d}))!==null&&l!==void 0?l:[]},t})(tS),sS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a=this.getWidget(),l=a.getPane(),u=a.getPane().getChart().getChartStore(),h=u.getCrosshair();if(Kt(h.paneId)&&this.compare(h,l.getId())){var f=u.getStyles().crosshair;if(f.show){var d=this.getDirectionStyles(f),v=d.text;if(d.show&&v.show){var m=a.getBounding(),y=l.getAxisComponent(),x=this.getText(h,u,y);e.font=Hr(v.size,v.weight,v.family),(n=this.createFigure({name:"text",attrs:this.getTextAttrs(x,e.measureText(x).width,h,m,y,v),styles:v}))===null||n===void 0||n.draw(e)}}}},t.prototype.compare=function(e,n){return e.paneId===n},t.prototype.getDirectionStyles=function(e){return e.horizontal},t.prototype.getText=function(e,n,a){var l,u,h=a,f=a.convertFromPixel(e.y),d=0,v=!1;if(h.isInCandle())d=(u=(l=n.getSymbol())===null||l===void 0?void 0:l.pricePrecision)!==null&&u!==void 0?u:Ue.PRICE;else{var m=n.getIndicatorsByPaneId(e.paneId);m.forEach(function(b){d=Math.max(b.precision,d),v||(v=b.shouldFormatBigNumber)})}var y=h.getRange(),x=h.displayValueToText(h.realValueToDisplayValue(h.valueToRealValue(f,{range:y}),{range:y}),d);return v&&(x=n.getInnerFormatter().formatBigNumber(x)),n.getDecimalFold().format(n.getThousandsSeparator().format(x))},t.prototype.getTextAttrs=function(e,n,a,l,u,h){var f=u,d=0,v="left";return f.isFromZero()?(d=0,v="left"):(d=l.width,v="right"),{x:d,y:a.y,text:e,align:v,baseline:"middle"}},t})(zi),wD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._yAxisView=new xD(a),a._candleLastPriceLabelView=new SD(a),a._indicatorLastValueView=new _D(a),a._overlayYAxisView=new rS(a),a._crosshairHorizontalLabelView=new sS(a),a.setCursor("ns-resize"),a.addChild(a._overlayYAxisView),a}return t.prototype.getName=function(){return Ut.Y_AXIS},t.prototype.updateMain=function(e){var n=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(e,n),n||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(e),this._indicatorLastValueView.draw(e))},t.prototype.updateOverlay=function(e){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(e),this._crosshairHorizontalLabelView.draw(e))},t})(Ld);function Hy(){return{from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0}}var aS=(function(){function r(t){this.scrollZoomEnabled=!0,this._range=Hy(),this._prevRange=Hy(),this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return r.prototype.getParent=function(){return this._parent},r.prototype.buildTicks=function(t){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t?(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0):!1},r.prototype.getTicks=function(){return this._ticks},r.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},r.prototype.getRange=function(){return this._range},r.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},r.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},r})(),$o=8,lu=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e)||this;return a.reverse=!1,a.inside=!1,a.position="right",a.gap={top:.2,bottom:.1},a.createRange=function(l){return l.defaultRange},a.minSpan=function(l){return Nr(-l)},a.valueToRealValue=function(l){return l},a.realValueToDisplayValue=function(l){return l},a.displayValueToRealValue=function(l){return l},a.realValueToValue=function(l){return l},a.displayValueToText=function(l,u){return We(l,u)},a.override(n),a}return t.prototype.override=function(e){var n=e.name,a=e.gap,l=yu(e,["name","gap"]);Kt(this.name)||(this.name=n),Re(this.gap,a),Re(this,l)},t.prototype.createRangeImp=function(){var e,n,a=this.getParent(),l=a.getChart(),u=l.getChartStore(),h=a.getId(),f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,v=!1,m=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,x=Number.MAX_SAFE_INTEGER,b=u.getIndicatorsByPaneId(h);b.forEach(function(tt){v||(v=tt.shouldOhlc),x=Math.min(x,tt.precision),Dt(tt.minValue)&&(m=Math.min(m,tt.minValue)),Dt(tt.maxValue)&&(y=Math.max(y,tt.maxValue))});var S=4,_=this.isInCandle();if(_){var C=(n=(e=u.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE;x!==Number.MAX_SAFE_INTEGER?S=Math.min(x,C):S=C}else x!==Number.MAX_SAFE_INTEGER&&(S=x);var A=u.getVisibleRangeDataList(),T=l.getStyles().candle,D=T.type==="area",M=T.area.value,j=_&&!D||!_&&v;A.forEach(function(tt){var vt=tt.dataIndex,pt=tt.data.current;if(at(pt)&&(j&&(f=Math.min(f,pt.low),d=Math.max(d,pt.high)),_&&D)){var ut=pt[M];Dt(ut)&&(f=Math.min(f,ut),d=Math.max(d,ut))}b.forEach(function(dt){var St,yt=dt.result,_t=dt.figures,xt=(St=yt[vt])!==null&&St!==void 0?St:{};_t.forEach(function(Mt){var zt=xt[Mt.key];Dt(zt)&&(f=Math.min(f,zt),d=Math.max(d,zt))})})}),f!==Number.MAX_SAFE_INTEGER&&d!==Number.MIN_SAFE_INTEGER?(f=Math.min(m,f),d=Math.max(y,d)):(f=0,d=10);var N=d-f,V={from:f,to:d,range:N,realFrom:f,realTo:d,realRange:N,displayFrom:f,displayTo:d,displayRange:N},B=this.createRange({chart:l,paneId:h,defaultRange:V}),I=B.realFrom,W=B.realTo,Z=B.realRange,it=this.minSpan(S);if(I===W||Z<it){var X=m===I,ot=y===W,z=$o/2;I=X?I:ot?I-$o*it:I-z*it,W=ot?W:X?W+$o*it:W+z*it}var U=this.getBounding().height,st=this.gap,ft=st.top,rt=st.bottom,O=ft;O>=1&&(O=O/U);var L=rt;L>=1&&(L=L/U),Z=W-I,I=I-Z*L,W=W+Z*O;var F=this.realValueToValue(I,{range:B}),q=this.realValueToValue(W,{range:B}),$=this.realValueToDisplayValue(I,{range:B}),J=this.realValueToDisplayValue(W,{range:B});return{from:F,to:q,range:q-F,realFrom:I,realTo:W,realRange:W-I,displayFrom:$,displayTo:J,displayRange:J-$}},t.prototype.isInCandle=function(){return this.getParent().getId()===Vt.CANDLE},t.prototype.isFromZero=function(){return this.position==="left"&&this.inside||this.position==="right"&&!this.inside},t.prototype.createTicksImp=function(){var e=this,n,a,l,u,h=this.getRange(),f=h.displayFrom,d=h.displayTo,v=h.displayRange,m=[];if(v>=0){var y=xA(v/$o),x=SA(y),b=zy(Math.ceil(f/y)*y,x),S=zy(Math.floor(d/y)*y,x),_=0,C=b;if(y!==0)for(;C<=S;){var A=C.toFixed(x);m[_]={text:A,coord:0,value:A},++_,C+=y}}var T=this.getParent(),D=(a=(n=T.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&a!==void 0?a:0,M=T.getChart().getChartStore(),j=[],N=M.getIndicatorsByPaneId(T.getId()),V=M.getStyles(),B=0,I=!1;this.isInCandle()?B=(u=(l=M.getSymbol())===null||l===void 0?void 0:l.pricePrecision)!==null&&u!==void 0?u:Ue.PRICE:N.forEach(function(z){B=Math.max(B,z.precision),I||(I=z.shouldFormatBigNumber)});var W=M.getInnerFormatter(),Z=M.getThousandsSeparator(),it=M.getDecimalFold(),X=V.xAxis.tickText.size,ot=NaN;return m.forEach(function(z){var U=z.value,st=e.displayValueToText(+U,B),ft=e.convertToPixel(e.realValueToValue(e.displayValueToRealValue(+U,{range:h}),{range:h}));I&&(st=W.formatBigNumber(U)),st=it.format(Z.format(st));var rt=Dt(ot);ft>X&&ft<D-X&&(rt&&Math.abs(ot-ft)>X*2||!rt)&&(j.push({text:st,coord:ft,value:U}),ot=ft)}),xi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:j}):j},t.prototype.getAutoSize=function(){var e,n,a=this.getParent(),l=a.getChart(),u=l.getChartStore(),h=u.getStyles(),f=h.yAxis,d=f.size;if(d!=="auto")return d;var v=0;if(f.show&&(f.axisLine.show&&(v+=f.axisLine.size),f.tickLine.show&&(v+=f.tickLine.length),f.tickText.show)){var m=0;this.getTicks().forEach(function(ft){m=Math.max(m,$i(ft.text,f.tickText.size,f.tickText.weight,f.tickText.family))}),v+=f.tickText.marginStart+f.tickText.marginEnd+m}var y=h.candle.priceMark,x=y.show&&y.last.show&&y.last.text.show,b=0,S=h.crosshair,_=S.show&&S.horizontal.show&&S.horizontal.text.show,C=0;if(x||_){var A=(n=(e=u.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE,T=this.getRange().displayTo;if(x){var D=u.getDataList(),M=D[D.length-1];if(at(M)){var j=y.last.text,N=j.paddingLeft,V=j.paddingRight,B=j.size,I=j.family,W=j.weight;b=N+$i(We(M.close,A),B,W,I)+V;var Z=u.getInnerFormatter().formatExtendText;y.last.extendTexts.forEach(function(ft,rt){var O=Z({type:"last_price",data:M,index:rt});O.length>0&&ft.show&&(b=Math.max(b,ft.paddingLeft+$i(O,ft.size,ft.weight,ft.family)+ft.paddingRight))})}}if(_){var it=u.getIndicatorsByPaneId(a.getId()),X=0,ot=!1;it.forEach(function(ft){X=Math.max(ft.precision,X),ot||(ot=ft.shouldFormatBigNumber)});var z=2;if(this.isInCandle()){var U=h.indicator.lastValueMark;U.show&&U.text.show?z=Math.max(X,A):z=A}else z=X;var st=We(T,z);ot&&(st=u.getInnerFormatter().formatBigNumber(st)),st=u.getDecimalFold().format(st),C+=S.horizontal.text.paddingLeft+S.horizontal.text.paddingRight+S.horizontal.text.borderSize*2+$i(st,S.horizontal.text.size,S.horizontal.text.weight,S.horizontal.text.family)}}return Math.max(v,b,C)},t.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},t.prototype.convertFromPixel=function(e){var n=this.getBounding().height,a=this.getRange(),l=a.realFrom,u=a.realRange,h=this.reverse?e/n:1-e/n,f=h*u+l;return this.realValueToValue(f,{range:a})},t.prototype.convertToPixel=function(e){var n,a,l=this.getRange(),u=this.valueToRealValue(e,{range:l}),h=(a=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&a!==void 0?a:0,f=l.realFrom,d=l.realRange,v=(u-f)/d;return this.reverse?Math.round(v*h):Math.round((1-v)*h)},t.prototype.convertToNicePixel=function(e){var n,a,l=(a=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&a!==void 0?a:0,u=this.convertToPixel(e);return Math.round(Math.max(l*.05,Math.min(u,l*.98)))},t.extend=function(e){var n=(function(a){Pt(l,a);function l(u){return a.call(this,u,e)||this}return l})(t);return n},t})(aS),ED={name:"normal"},CD={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(r){return"".concat(We(r,2),"%")},valueToRealValue:function(r,t){var e=t.range;return(r-e.from)/e.range*e.realRange+e.realFrom},realValueToValue:function(r,t){var e=t.range;return(r-e.realFrom)/e.realRange*e.range+e.from},createRange:function(r){var t=r.chart,e=r.defaultRange,n=t.getDataList(),a=t.getVisibleRange(),l=n[a.from];if(at(l)){var u=e.from,h=e.to,f=e.range,d=(e.from-l.close)/l.close*100,v=(e.to-l.close)/l.close*100,m=v-d;return{from:u,to:h,range:f,realFrom:d,realTo:v,realRange:m,displayFrom:d,displayTo:v,displayRange:m}}return e}},MD={name:"logarithm",minSpan:function(r){return .05*Nr(-r)},valueToRealValue:function(r){return r<0?-Sn(Math.abs(r)):Sn(r)},realValueToDisplayValue:function(r){return r<0?-Nr(Math.abs(r)):Nr(r)},displayValueToRealValue:function(r){return r<0?-Sn(Math.abs(r)):Sn(r)},realValueToValue:function(r){return r<0?-Nr(Math.abs(r)):Nr(r)},createRange:function(r){var t=r.defaultRange,e=t.from,n=t.to,a=t.range,l=e<0?-Sn(Math.abs(e)):Sn(e),u=n<0?-Sn(Math.abs(n)):Sn(n);return{from:e,to:n,range:a,realFrom:l,realTo:u,realRange:u-l,displayFrom:e,displayTo:n,displayRange:a}}},Yy={normal:lu.extend(ED),percentage:lu.extend(CD),logarithm:lu.extend(MD)};function TD(r){var t;return(t=Yy[r])!==null&&t!==void 0?t:Yy.normal}var lS=(function(){function r(t,e){this._bounding=bu(),this._originalBounding=bu(),this._visible=!0,this._chart=t,this._id=e,this._container=An("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return r.prototype.getContainer=function(){return this._container},r.prototype.setVisible=function(t){this._visible!==t&&(this._container.style.display=t?"block":"none",this._visible=t)},r.prototype.getVisible=function(){return this._visible},r.prototype.getId=function(){return this._id},r.prototype.getChart=function(){return this._chart},r.prototype.getBounding=function(){return this._bounding},r.prototype.setOriginalBounding=function(t){Re(this._originalBounding,t)},r.prototype.getOriginalBounding=function(){return this._originalBounding},r.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(t??3,this._container,this._bounding)},r})(),oS=(function(r){Pt(t,r);function t(e,n,a){var l=r.call(this,e,n)||this;l._yAxisWidget=null,l._options={id:"",minHeight:au,dragEnabled:!0,order:0,height:Wx,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var u=l.getContainer();return l._mainWidget=l.createMainWidget(u),l._yAxisWidget=l.createYAxisWidget(u),l.setOptions(a),l}return t.prototype.setOptions=function(e){var n,a,l,u,h,f=this.getId();if(f===Vt.CANDLE||f===Vt.X_AXIS){var d=(n=e.axis)===null||n===void 0?void 0:n.name;(!at(this._axis)||at(d)&&this._options.axis.name!==d)&&(this._axis=this.createAxisComponent(d??"normal"))}else at(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof lu&&this._axis.setAutoCalcTickFlag(!0),Re(this._options,e),this._axis.override(bt(bt({},this._options.axis),{name:(l=(a=e.axis)===null||a===void 0?void 0:a.name)!==null&&l!==void 0?l:"normal"}));var v=null,m="default";return this.getId()===Vt.X_AXIS?(v=this.getMainWidget().getContainer(),m="ew-resize"):(v=this.getYAxisWidget().getContainer(),m="ns-resize"),!((h=(u=e.axis)===null||u===void 0?void 0:u.scrollZoomEnabled)!==null&&h!==void 0)||h?v.style.cursor=m:v.style.cursor="default",this},t.prototype.getOptions=function(){return this._options},t.prototype.getAxisComponent=function(){return this._axis},t.prototype.setBounding=function(e,n,a,l){var u,h,f,d;Re(this.getBounding(),e);var v={};at(e.height)&&(v.height=e.height),at(e.top)&&(v.top=e.top),this._mainWidget.setBounding(v);var m=at(n);if(m&&this._mainWidget.setBounding(n),at(this._yAxisWidget)){this._yAxisWidget.setBounding(v);var y=this._axis;y.position==="left"?at(a)&&this._yAxisWidget.setBounding(bt(bt({},a),{left:0})):at(l)&&(this._yAxisWidget.setBounding(l),m&&this._yAxisWidget.setBounding({left:((u=n.left)!==null&&u!==void 0?u:0)+((h=n.width)!==null&&h!==void 0?h:0)+((f=n.right)!==null&&f!==void 0?f:0)-((d=l.width)!==null&&d!==void 0?d:0)}))}return this},t.prototype.getMainWidget=function(){return this._mainWidget},t.prototype.getYAxisWidget=function(){return this._yAxisWidget},t.prototype.updateImp=function(e){var n;this._mainWidget.update(e),(n=this._yAxisWidget)===null||n===void 0||n.update(e)},t.prototype.destroy=function(){var e;this._mainWidget.destroy(),(e=this._yAxisWidget)===null||e===void 0||e.destroy()},t.prototype.getImage=function(e){var n=this.getBounding(),a=n.width,l=n.height,u=An("canvas",{width:"".concat(a,"px"),height:"".concat(l,"px"),boxSizing:"border-box"}),h=u.getContext("2d"),f=lr(u);u.width=a*f,u.height=l*f,h.scale(f,f);var d=this._mainWidget.getBounding();if(h.drawImage(this._mainWidget.getImage(e),d.left,0,d.width,d.height),this._yAxisWidget!==null){var v=this._yAxisWidget.getBounding();h.drawImage(this._yAxisWidget.getImage(e),v.left,0,v.width,v.height)}return u},t.prototype.createYAxisWidget=function(e){return null},t})(lS),uS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(e){var n=TD(e??"default");return new n(this)},t.prototype.createMainWidget=function(e){return new eS(e,this)},t.prototype.createYAxisWidget=function(e){return new wD(e,this)},t})(oS),AD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createMainWidget=function(e){return new bD(e,this)},t})(uS),RD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(e){return e.xAxis},t.prototype.createAxisLine=function(e){return{coordinates:[{x:0,y:0},{x:e.width,y:0}]}},t.prototype.createTickLines=function(e,n,a){var l=a.tickLine,u=a.axisLine.size;return e.map(function(h){return{coordinates:[{x:h.coord,y:0},{x:h.coord,y:u+l.length}]}})},t.prototype.createTickTexts=function(e,n,a){var l=a.tickText,u=a.axisLine.size,h=a.tickLine.length;return e.map(function(f){return{x:f.coord,y:u+h+l.marginStart,text:f.text,align:"center",baseline:"top"}})},t})(nS),DD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.coordinateToPointValueFlag=function(){return!1},t.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},t.prototype.getProgressOverlay=function(){var e,n;return(n=(e=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||e===void 0?void 0:e.overlay)!==null&&n!==void 0?n:null},t.prototype.getDefaultFigures=function(e,n){var a,l=[],u=this.getWidget(),h=u.getPane(),f=h.getChart().getChartStore(),d=f.getClickOverlayInfo();if(e.needDefaultXAxisFigure&&e.id===((a=d.overlay)===null||a===void 0?void 0:a.id)){var v=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;n.forEach(function(y,x){v=Math.min(v,y.x),m=Math.max(m,y.x);var b=e.points[x];if(Dt(b.timestamp)){var S=f.getInnerFormatter().formatDate(b.timestamp,"YYYY-MM-DD HH:mm","crosshair");l.push({type:"text",attrs:{x:y.x,y:0,text:S,align:"center"},ignoreEvent:!0})}}),n.length>1&&l.unshift({type:"rect",attrs:{x:v,y:0,width:m-v,height:u.getBounding().height},ignoreEvent:!0})}return l},t.prototype.getFigures=function(e,n){var a,l,u=this.getWidget(),h=u.getPane(),f=h.getChart(),d=h.getAxisComponent(),v=f.getXAxisPane().getAxisComponent(),m=u.getBounding();return(l=(a=e.createXAxisFigures)===null||a===void 0?void 0:a.call(e,{chart:f,overlay:e,coordinates:n,bounding:m,xAxis:v,yAxis:d}))!==null&&l!==void 0?l:[]},t})(rS),ND=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.compare=function(e){return at(e.timestamp)},t.prototype.getDirectionStyles=function(e){return e.vertical},t.prototype.getText=function(e,n){var a,l,u=e.timestamp;return n.getInnerFormatter().formatDate(u,iS[(l=(a=n.getPeriod())===null||a===void 0?void 0:a.type)!==null&&l!==void 0?l:"day"],"crosshair")},t.prototype.getTextAttrs=function(e,n,a,l,u,h){var f=a.realX,d=0,v="center";return f-n/2-h.paddingLeft<0?(d=0,v="left"):f+n/2+h.paddingRight>l.width?(d=l.width,v="right"):d=f,{x:d,y:0,text:e,align:v,baseline:"top"}},t})(sS),OD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._xAxisView=new RD(a),a._overlayXAxisView=new DD(a),a._crosshairVerticalLabelView=new ND(a),a.setCursor("ew-resize"),a.addChild(a._overlayXAxisView),a}return t.prototype.getName=function(){return Ut.X_AXIS},t.prototype.updateMain=function(e){this._xAxisView.draw(e)},t.prototype.updateOverlay=function(e){this._overlayXAxisView.draw(e),this._crosshairVerticalLabelView.draw(e)},t})(Ld),kD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e)||this;return a.override(n),a}return t.prototype.override=function(e){var n=e.name,a=e.scrollZoomEnabled,l=e.createTicks;Kt(this.name)||(this.name=n),this.scrollZoomEnabled=a??this.scrollZoomEnabled,this.createTicks=l??this.createTicks},t.prototype.createRangeImp=function(){var e=this.getParent().getChart().getChartStore(),n=e.getVisibleRange(),a=n.realFrom,l=n.realTo,u=a,h=l,f=l-a+1,d={from:u,to:h,range:f,realFrom:u,realTo:h,realRange:f,displayFrom:u,displayTo:h,displayRange:f};return d},t.prototype.createTicksImp=function(){var e,n=this.getRange(),a=n.realFrom,l=n.realTo,u=n.from,h=this.getParent().getChart().getChartStore(),f=h.getInnerFormatter().formatDate,d=h.getPeriod(),v=[],m=h.getBarSpace().bar,y=h.getStyles().xAxis.tickText,x=Math.max($i("YYYY-MM-DD HH:mm:ss",y.size,y.weight,y.family),this.getBounding().width/8),b=Math.ceil(x/m);b%2!==0&&(b+=1);for(var S=Math.max(0,Math.floor(a/b)*b),_=S;_<l;_+=b)if(_>=u){var C=h.dataIndexToTimestamp(_);Dt(C)&&v.push({coord:this.convertToPixel(_),value:C,text:f(C,dD[(e=d?.type)!==null&&e!==void 0?e:"day"],"xAxis")})}return xi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:v}):v},t.prototype.getAutoSize=function(){var e=this.getParent().getChart().getStyles(),n=e.xAxis,a=n.size;if(a!=="auto")return a;var l=e.crosshair,u=0;n.show&&(n.axisLine.show&&(u+=n.axisLine.size),n.tickLine.show&&(u+=n.tickLine.length),n.tickText.show&&(u+=n.tickText.marginStart+n.tickText.marginEnd+n.tickText.size));var h=0;return l.show&&l.vertical.show&&l.vertical.text.show&&(h+=l.vertical.text.paddingTop+l.vertical.text.paddingBottom+l.vertical.text.borderSize*2+l.vertical.text.size),Math.max(u,h)},t.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},t.prototype.convertTimestampFromPixel=function(e){var n=this.getParent().getChart().getChartStore(),a=n.coordinateToDataIndex(e);return n.dataIndexToTimestamp(a)},t.prototype.convertTimestampToPixel=function(e){var n=this.getParent().getChart().getChartStore(),a=n.timestampToDataIndex(e);return n.dataIndexToCoordinate(a)},t.prototype.convertFromPixel=function(e){return this.getParent().getChart().getChartStore().coordinateToDataIndex(e)},t.prototype.convertToPixel=function(e){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(e)},t.extend=function(e){var n=(function(a){Pt(l,a);function l(u){return a.call(this,u,e)||this}return l})(t);return n},t})(aS),zD={name:"normal"},Wy={normal:kD.extend(zD)};function jD(r){var t;return(t=Wy[r])!==null&&t!==void 0?t:Wy.normal}var LD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(e){var n=jD(e);return new n(this)},t.prototype.createMainWidget=function(e){return new OD(e,this)},t})(oS);function BD(r,t){var e=0;return function(){var n=Date.now();n-e>t&&(r.apply(this,arguments),e=n)}}var FD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._dragFlag=!1,a._dragStartY=0,a._topPaneHeight=0,a._bottomPaneHeight=0,a._topPane=null,a._bottomPane=null,a._pressedMouseMoveEvent=BD(a._pressedTouchMouseMoveEvent,20),a.registerEvent("touchStartEvent",a._mouseDownEvent.bind(a)).registerEvent("touchMoveEvent",a._pressedMouseMoveEvent.bind(a)).registerEvent("touchEndEvent",a._mouseUpEvent.bind(a)).registerEvent("mouseDownEvent",a._mouseDownEvent.bind(a)).registerEvent("mouseUpEvent",a._mouseUpEvent.bind(a)).registerEvent("pressedMouseMoveEvent",a._pressedMouseMoveEvent.bind(a)).registerEvent("mouseEnterEvent",a._mouseEnterEvent.bind(a)).registerEvent("mouseLeaveEvent",a._mouseLeaveEvent.bind(a)),a}return t.prototype.getName=function(){return Ut.SEPARATOR},t.prototype._mouseDownEvent=function(e){var n=this;this._dragFlag=!0,this._dragStartY=e.pageY;var a=this.getPane(),l=a.getChart();this._topPane=a.getTopPane(),this._bottomPane=a.getBottomPane();var u=l.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var h=u.findIndex(function(m){var y;return m.getId()===((y=n._topPane)===null||y===void 0?void 0:y.getId())}),f=h-1;f>-1;f--){var d=u[f];if(d.getOptions().state!=="minimize"){this._topPane=d;break}}if(this._bottomPane.getOptions().state==="minimize")for(var h=u.findIndex(function(y){var x;return y.getId()===((x=n._bottomPane)===null||x===void 0?void 0:x.getId())}),f=h+1;f<u.length;f++){var v=u[f];if(v.getOptions().state!=="minimize"){this._bottomPane=v;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},t.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},t.prototype._pressedTouchMouseMoveEvent=function(e){var n=e.pageY-this._dragStartY,a=n<0;if(at(this._topPane)&&at(this._bottomPane)){var l=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&l.state!=="minimize"&&l.dragEnabled){var u=null,h=null,f=0,d=0;a?(u=this._topPane,h=this._bottomPane,f=this._topPaneHeight,d=this._bottomPaneHeight):(u=this._bottomPane,h=this._topPane,f=this._bottomPaneHeight,d=this._topPaneHeight);var v=u.getOptions().minHeight;if(f>v){var m=Math.max(f-Math.abs(n),v),y=f-m;u.setBounding({height:m}),h.setBounding({height:d+y});var x=this.getPane(),b=x.getChart();b.getChartStore().executeAction("onPaneDrag",{paneId:x.getId()}),b.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},t.prototype._mouseEnterEvent=function(){var e=this.getPane(),n=e.getBottomPane();if(n.getOptions().dragEnabled){var a=e.getChart(),l=a.getStyles().separator;return this.getContainer().style.background=l.activeBackgroundColor,!0}return!1},t.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="transparent",!0)},t.prototype.createContainer=function(){return An("div",{width:"100%",height:"".concat(ol,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},t.prototype.updateImp=function(e,n,a){if(a===4||a===2){var l=this.getPane().getChart().getStyles().separator;e.style.top="".concat(-Math.floor((ol-l.size)/2),"px"),e.style.height="".concat(ol,"px")}},t})(qx),PD=(function(r){Pt(t,r);function t(e,n,a,l){var u=r.call(this,e,n)||this;return u.getContainer().style.overflow="",u._topPane=a,u._bottomPane=l,u._separatorWidget=new FD(u.getContainer(),u),u}return t.prototype.setBounding=function(e){return Re(this.getBounding(),e),this},t.prototype.getTopPane=function(){return this._topPane},t.prototype.setTopPane=function(e){return this._topPane=e,this},t.prototype.getBottomPane=function(){return this._bottomPane},t.prototype.setBottomPane=function(e){return this._bottomPane=e,this},t.prototype.getWidget=function(){return this._separatorWidget},t.prototype.getImage=function(e){var n=this.getBounding(),a=n.width,l=n.height,u=this.getChart().getStyles().separator,h=An("canvas",{width:"".concat(a,"px"),height:"".concat(l,"px"),boxSizing:"border-box"}),f=h.getContext("2d"),d=lr(h);return h.width=a*d,h.height=l*d,f.scale(d,d),f.fillStyle=u.color,f.fillRect(0,0,a,l),h},t.prototype.updateImp=function(e,n,a){if(e===4||e===2){var l=this.getChart().getStyles().separator;n.style.backgroundColor=l.color,n.style.height="".concat(a.height,"px"),n.style.marginLeft="".concat(a.left,"px"),n.style.width="".concat(a.width,"px"),this._separatorWidget.update(e)}},t})(lS);function qy(){return typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("firefox")}function Vf(){return typeof window>"u"?!1:/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var Zo={ResetClick:500,LongTap:500,PreventFiresTouchEvents:500},Bs={CancelClick:5,CancelTap:5,DoubleClick:5,DoubleTap:30},Ka={Left:0,Middle:1,Right:2},ID=10,VD=(function(){function r(t,e,n){var a=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Vf(),this._onFirefoxOutsideMouseUp=function(l){a._mouseUpHandler(l)},this._onMobileSafariDoubleClick=function(l){if(a._firesTouchEvents(l)){if(++a._tapCount,a._tapTimeoutId!==null&&a._tapCount>1){var u=a._mouseTouchMoveWithDownInfo(a._getCoordinate(l),a._tapCoordinate).manhattanDistance;u<Bs.DoubleTap&&!a._cancelTap&&a._processEvent(a._makeCompatEvent(l),a._handler.doubleTapEvent),a._resetTapTimeout()}}else if(++a._clickCount,a._clickTimeoutId!==null&&a._clickCount>1){var u=a._mouseTouchMoveWithDownInfo(a._getCoordinate(l),a._clickCoordinate).manhattanDistance;u<Bs.DoubleClick&&!a._cancelClick&&a._processEvent(a._makeCompatEvent(l),a._handler.mouseDoubleClickEvent),a._resetClickTimeout()}},this._target=t,this._handler=e,this._options=n,this._init()}return r.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},r.prototype._mouseEnterHandler=function(t){var e=this,n,a,l;(n=this._unsubscribeMousemove)===null||n===void 0||n.call(this),(a=this._unsubscribeMouseWheel)===null||a===void 0||a.call(this),(l=this._unsubscribeContextMenu)===null||l===void 0||l.call(this);var u=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){e._target.removeEventListener("mousemove",u)},this._target.addEventListener("mousemove",u);var h=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){e._target.removeEventListener("wheel",h)},this._target.addEventListener("wheel",h,{passive:!1});var f=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){e._target.removeEventListener("contextmenu",f)},this._target.addEventListener("contextmenu",f,{passive:!1}),!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},r.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._mouseMoveHandler=function(t){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},r.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!at(this._handler.mouseWheelHortEvent)||(this._preventDefault(t),Math.abs(t.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!at(this._handler.mouseWheelVertEvent))return;var e=-(t.deltaY/100);if(e===0)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:{e*=120;break}case t.DOM_DELTA_LINE:{e*=32;break}}if(e!==0){var n=Math.sign(e)*Math.min(1,Math.abs(e));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),n)}}},r.prototype._contextMenuHandler=function(t){this._preventDefault(t)},r.prototype._touchMoveHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(e!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._touchMoveStartCoordinate),a=n.xOffset,l=n.yOffset,u=n.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&u<Bs.CancelTap)){if(!this._touchMoveExceededManhattanDistance){var h=a*.5,f=l>=h&&!this._options.treatVertDragAsPageScroll(),d=h>l&&!this._options.treatHorzDragAsPageScroll();!f&&!d&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,e),this._handler.touchMoveEvent)}}},r.prototype._mouseMoveWithDownHandler=function(t){if(t.button===Ka.Left){var e=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),n=e.manhattanDistance;n>=Bs.CancelClick&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},r.prototype._mouseTouchMoveWithDownInfo=function(t,e){var n=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y),l=n+a;return{xOffset:n,yOffset:a,manhattanDistance:l}},r.prototype._touchEndHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._makeCompatEvent(t,e);if(this._processEvent(n,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var a=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._tapCoordinate).manhattanDistance;a<Bs.DoubleTap&&!this._cancelTap&&this._processEvent(n,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(n,this._handler.tapEvent),at(this._handler.tapEvent)&&this._preventDefault(t));this._tapCount===0&&this._preventDefault(t),t.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},r.prototype._mouseUpHandler=function(t){if(t.button===Ka.Left){var e=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),qy()){var n=this._target.ownerDocument.documentElement;n.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var a=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;a<Bs.DoubleClick&&!this._cancelClick&&this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent)}},r.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},r.prototype._touchStartHandler=function(t){if(this._activeTouchId===null){var e=t.changedTouches[0];this._activeTouchId=e.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var n=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var a=this._touchMoveHandler.bind(this),l=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){n.removeEventListener("touchmove",a),n.removeEventListener("touchend",l)},n.addEventListener("touchmove",a,{passive:!1}),n.addEventListener("touchend",l,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),Zo.LongTap)}this._processEvent(this._makeCompatEvent(t,e),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),Zo.ResetClick),this._tapCoordinate=this._getCoordinate(e))}},r.prototype._mouseDownHandler=function(t){if(t.button===Ka.Right){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===Ka.Left){var e=this._target.ownerDocument.documentElement;qy()&&e.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var n=this._mouseMoveWithDownHandler.bind(this),a=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",a)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",a)}this._mousePressed=!0,!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),Zo.ResetClick),this._clickCoordinate=this._getCoordinate(t)))}},r.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var e=this._target.ownerDocument,n=function(a){t._handler.mouseDownOutsideEvent!=null&&(a.composed&&t._target.contains(a.composedPath()[0])||a.target!==null&&t._target.contains(a.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){e.removeEventListener("touchstart",n)},this._unsubscribeOutsideMouseEvents=function(){e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Vf()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(a){if(a.button===Ka.Middle)return a.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},r.prototype._initPinch=function(){var t=this;!at(this._handler.pinchStartEvent)&&!at(this._handler.pinchEvent)&&!at(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(e){t._checkPinchState(e.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(e){if(!(e.touches.length!==2||t._startPinchMiddleCoordinate===null)&&at(t._handler.pinchEvent)){var n=t._getTouchDistance(e.touches[0],e.touches[1]),a=n/t._startPinchDistance;t._handler.pinchEvent(bt(bt({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),a),t._preventDefault(e)}},{passive:!1}),this._target.addEventListener("touchend",function(e){t._checkPinchState(e.touches)}))},r.prototype._checkPinchState=function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},r.prototype._startPinch=function(t){var e=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,y:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),at(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},r.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,at(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},r.prototype._mouseLeaveHandler=function(t){var e,n,a;(e=this._unsubscribeMousemove)===null||e===void 0||e.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(a=this._unsubscribeContextMenu)===null||a===void 0||a.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Vf())},r.prototype._longTapHandler=function(t){var e=this._touchWithId(t.touches,this._activeTouchId);e!==null&&(this._processEvent(this._makeCompatEvent(t,e),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},r.prototype._firesTouchEvents=function(t){var e;return at((e=t.sourceCapabilities)===null||e===void 0?void 0:e.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+Zo.PreventFiresTouchEvents},r.prototype._processEvent=function(t,e){e?.call(this._handler,t)},r.prototype._makeCompatEvent=function(t,e){var n=this,a=e??t,l=this._target.getBoundingClientRect();return{x:a.clientX-l.left,y:a.clientY-l.top,pageX:a.pageX,pageY:a.pageY,isTouch:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click"&&t.type!=="wheel",preventDefault:function(){t.type!=="touchstart"&&n._preventDefault(t)}}},r.prototype._getTouchDistance=function(t,e){var n=t.clientX-e.clientX,a=t.clientY-e.clientY;return Math.sqrt(n*n+a*a)},r.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},r.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},r.prototype._eventTimeStamp=function(t){var e;return(e=t.timeStamp)!==null&&e!==void 0?e:performance.now()},r.prototype._touchWithId=function(t,e){for(var n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null},r})(),UD=(function(){function r(t,e){var n=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(a){if(a.shiftKey)switch(a.code){case"Equal":{n._chart.getChartStore().zoom(.5,null,"main");break}case"Minus":{n._chart.getChartStore().zoom(-.5,null,"main");break}case"ArrowLeft":{var l=n._chart.getChartStore();l.startScroll(),l.scroll(-3*l.getBarSpace().bar);break}case"ArrowRight":{var l=n._chart.getChartStore();l.startScroll(),l.scroll(3*l.getBarSpace().bar);break}}},this._container=t,this._chart=e,this._event=new VD(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return r.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},r.prototype.pinchEvent=function(t,e){var n=this._findWidgetByEvent(t),a=n.pane,l=n.widget;if(a?.getId()!==Vt.X_AXIS&&l?.getName()===Ut.MAIN){var u=this._makeWidgetEvent(t,l),h=(e-this._pinchScale)*5;return this._pinchScale=e,this._chart.getChartStore().zoom(h,{x:u.x,y:u.y},"main"),!0}return!1},r.prototype.mouseWheelHortEvent=function(t,e){var n=this._chart.getChartStore();return n.startScroll(),n.scroll(e),!0},r.prototype.mouseWheelVertEvent=function(t,e){var n=this._findWidgetByEvent(t).widget,a=this._makeWidgetEvent(t,n),l=n?.getName();return l===Ut.MAIN?(this._chart.getChartStore().zoom(e,{x:a.x,y:a.y},"main"),!0):!1},r.prototype.mouseDownEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget;if(this._mouseDownWidget=a,a!==null){var l=this._makeWidgetEvent(t,a),u=a.getName();switch(u){case Ut.SEPARATOR:return a.dispatchEvent("mouseDownEvent",l);case Ut.MAIN:{var h=n.getAxisComponent();if(!h.getAutoCalcTickFlag()){var f=h.getRange();this._prevYAxisRange=bt({},f)}return this._startScrollCoordinate={x:l.x,y:l.y},this._chart.getChartStore().startScroll(),a.dispatchEvent("mouseDownEvent",l)}case Ut.X_AXIS:return this._processXAxisScrollStartEvent(a,l);case Ut.Y_AXIS:return this._processYAxisScaleStartEvent(a,l)}}return!1},r.prototype.mouseMoveEvent=function(t){var e,n,a,l=this._findWidgetByEvent(t),u=l.pane,h=l.widget,f=this._makeWidgetEvent(t,h);if((((e=this._mouseMoveTriggerWidgetInfo.pane)===null||e===void 0?void 0:e.getId())!==u?.getId()||((n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0?void 0:n.getName())!==h?.getName())&&(h?.dispatchEvent("mouseEnterEvent",f),(a=this._mouseMoveTriggerWidgetInfo.widget)===null||a===void 0||a.dispatchEvent("mouseLeaveEvent",f),this._mouseMoveTriggerWidgetInfo={pane:u,widget:h}),h!==null){var d=h.getName();switch(d){case Ut.MAIN:{var v=h.dispatchEvent("mouseMoveEvent",f),m={x:f.x,y:f.y,paneId:u?.getId()};return v?(h.getForceCursor()!=="pointer"&&(m=void 0),h.setCursor("pointer")):h.setCursor("crosshair"),this._chart.getChartStore().setCrosshair(m),v}case Ut.SEPARATOR:case Ut.X_AXIS:case Ut.Y_AXIS:{var v=h.dispatchEvent("mouseMoveEvent",f);return this._chart.getChartStore().setCrosshair(),v}}}return!1},r.prototype.pressedMouseMoveEvent=function(t){var e,n;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===Ut.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var a=this._findWidgetByEvent(t),l=a.pane,u=a.widget;if(u!==null&&((e=this._mouseDownWidget)===null||e===void 0?void 0:e.getPane().getId())===l?.getId()&&((n=this._mouseDownWidget)===null||n===void 0?void 0:n.getName())===u.getName()){var h=this._makeWidgetEvent(t,u),f=u.getName();switch(f){case Ut.MAIN:{var d=void 0,v=u.dispatchEvent("pressedMouseMoveEvent",h);return v||this._processMainScrollingEvent(u,h),(!v||u.getForceCursor()==="pointer")&&(d={x:h.x,y:h.y,paneId:l?.getId()}),this._chart.getChartStore().setCrosshair(d,{forceInvalidate:!0}),v}case Ut.X_AXIS:return this._processXAxisScrollingEvent(u,h);case Ut.Y_AXIS:return this._processYAxisScalingEvent(u,h)}}return!1},r.prototype.mouseUpEvent=function(t){var e=this._findWidgetByEvent(t).widget,n=!1;if(e!==null){var a=this._makeWidgetEvent(t,e),l=e.getName();switch(l){case Ut.MAIN:case Ut.SEPARATOR:case Ut.X_AXIS:case Ut.Y_AXIS:{n=e.dispatchEvent("mouseUpEvent",a);break}}n&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,n},r.prototype.mouseClickEvent=function(t){var e=this._findWidgetByEvent(t).widget;if(e!==null){var n=this._makeWidgetEvent(t,e);return e.dispatchEvent("mouseClickEvent",n)}return!1},r.prototype.mouseRightClickEvent=function(t){var e=this._findWidgetByEvent(t).widget,n=!1;if(e!==null){var a=this._makeWidgetEvent(t,e),l=e.getName();switch(l){case Ut.MAIN:case Ut.X_AXIS:case Ut.Y_AXIS:{n=e.dispatchEvent("mouseRightClickEvent",a);break}}n&&this._chart.updatePane(1)}return!1},r.prototype.mouseDoubleClickEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget;if(a!==null){var l=a.getName();switch(l){case Ut.MAIN:{var u=this._makeWidgetEvent(t,a);return a.dispatchEvent("mouseDoubleClickEvent",u)}case Ut.Y_AXIS:{var h=n.getAxisComponent();if(!h.getAutoCalcTickFlag())return h.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0;break}}}return!1},r.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},r.prototype.touchStartEvent=function(t){var e,n=this._findWidgetByEvent(t),a=n.pane,l=n.widget;if(l!==null){var u=this._makeWidgetEvent(t,l);(e=u.preventDefault)===null||e===void 0||e.call(u);var h=l.getName();switch(h){case Ut.MAIN:{var f=this._chart.getChartStore();if(l.dispatchEvent("mouseDownEvent",u))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,f.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(Oy(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var d=a.getAxisComponent();if(!d.getAutoCalcTickFlag()){var v=d.getRange();this._prevYAxisRange=bt({},v)}if(this._startScrollCoordinate={x:u.x,y:u.y},f.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var m=u.x-this._touchCoordinate.x,y=u.y-this._touchCoordinate.y,x=Math.sqrt(m*m+y*y);x<ID?(this._touchCoordinate={x:u.x,y:u.y},f.setCrosshair({x:u.x,y:u.y,paneId:a?.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,f.setCrosshair())}return!0}case Ut.X_AXIS:return this._processXAxisScrollStartEvent(l,u);case Ut.Y_AXIS:return this._processYAxisScaleStartEvent(l,u)}}return!1},r.prototype.touchMoveEvent=function(t){var e,n,a,l=this._findWidgetByEvent(t),u=l.pane,h=l.widget;if(h!==null){var f=this._makeWidgetEvent(t,h),d=h.getName(),v=this._chart.getChartStore();switch(d){case Ut.MAIN:return h.dispatchEvent("pressedMouseMoveEvent",f)?((e=f.preventDefault)===null||e===void 0||e.call(f),v.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?((n=f.preventDefault)===null||n===void 0||n.call(f),v.setCrosshair({x:f.x,y:f.y,paneId:u?.getId()})):this._processMainScrollingEvent(h,f),!0);case Ut.X_AXIS:return(a=f.preventDefault)===null||a===void 0||a.call(f),this._processXAxisScrollingEvent(h,f);case Ut.Y_AXIS:return this._processYAxisScalingEvent(h,f)}}return!1},r.prototype.touchEndEvent=function(t){var e=this,n=this._findWidgetByEvent(t).widget;if(n!==null){var a=this._makeWidgetEvent(t,n),l=n.getName();switch(l){case Ut.MAIN:{if(n.dispatchEvent("mouseUpEvent",a),this._startScrollCoordinate!==null){var u=new Date().getTime()-this._flingStartTime,h=a.x-this._startScrollCoordinate.x,f=h/(u>0?u:1)*20;if(u<200&&Math.abs(f)>0){var d=this._chart.getChartStore(),v=function(){e._flingScrollRequestId=xu(function(){d.startScroll(),d.scroll(f),f=f*(1-.025),Math.abs(f)<1?e._flingScrollRequestId!==null&&(Oy(e._flingScrollRequestId),e._flingScrollRequestId=null):v()})};v()}}return!0}case Ut.X_AXIS:case Ut.Y_AXIS:{var m=n.dispatchEvent("mouseUpEvent",a);m&&this._chart.updatePane(1)}}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},r.prototype.tapEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget,l=!1;if(a!==null){var u=this._makeWidgetEvent(t,a),h=a.dispatchEvent("mouseClickEvent",u);if(a.getName()===Ut.MAIN){var f=this._makeWidgetEvent(t,a),d=this._chart.getChartStore();h?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,d.setCrosshair(void 0,{notInvalidate:!0}),l=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:f.x,y:f.y},d.setCrosshair({x:f.x,y:f.y,paneId:n?.getId()},{notInvalidate:!0}),l=!0),this._touchCancelCrosshair=!1)}(l||h)&&this._chart.updatePane(1)}return l},r.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},r.prototype.longTapEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget;if(a!==null&&a.getName()===Ut.MAIN){var l=this._makeWidgetEvent(t,a);return this._touchCoordinate={x:l.x,y:l.y},this._chart.getChartStore().setCrosshair({x:l.x,y:l.y,paneId:n?.getId()}),!0}return!1},r.prototype._processMainScrollingEvent=function(t,e){var n;if(this._startScrollCoordinate!==null){var a=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&!a.getAutoCalcTickFlag()&&a.scrollZoomEnabled){(n=e.preventDefault)===null||n===void 0||n.call(e);var l=this._prevYAxisRange,u=l.from,h=l.to,f=l.range,d=0;a.reverse?d=this._startScrollCoordinate.y-e.y:d=e.y-this._startScrollCoordinate.y;var v=t.getBounding(),m=d/v.height,y=f*m,x=u+y,b=h+y,S=a.valueToRealValue(x,{range:this._prevYAxisRange}),_=a.valueToRealValue(b,{range:this._prevYAxisRange}),C=a.realValueToDisplayValue(S,{range:this._prevYAxisRange}),A=a.realValueToDisplayValue(_,{range:this._prevYAxisRange});a.setRange({from:x,to:b,range:b-x,realFrom:S,realTo:_,realRange:_-S,displayFrom:C,displayTo:A,displayRange:A-C})}var T=e.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(T)}},r.prototype._processXAxisScrollStartEvent=function(t,e){var n=t.dispatchEvent("mouseDownEvent",e);return n&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:e.x,y:e.y},this._xAxisStartScaleDistance=e.pageX,n},r.prototype._processXAxisScrollingEvent=function(t,e){var n=t.dispatchEvent("pressedMouseMoveEvent",e);if(n)this._chart.updatePane(1);else{var a=t.getPane().getAxisComponent();if(a.scrollZoomEnabled&&this._xAxisStartScaleDistance!==0){var l=this._xAxisStartScaleDistance/e.pageX;if(Number.isFinite(l)){var u=(l-this._xAxisScale)*10;this._xAxisScale=l,this._chart.getChartStore().zoom(u,this._xAxisStartScaleCoordinate,"xAxis")}}}return n},r.prototype._processYAxisScaleStartEvent=function(t,e){var n=t.dispatchEvent("mouseDownEvent",e);n&&this._chart.updatePane(1);var a=t.getPane().getAxisComponent().getRange();return this._prevYAxisRange=bt({},a),this._yAxisStartScaleDistance=e.pageY,n},r.prototype._processYAxisScalingEvent=function(t,e){var n,a=t.dispatchEvent("pressedMouseMoveEvent",e);if(a)this._chart.updatePane(1);else{var l=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&l.scrollZoomEnabled&&this._yAxisStartScaleDistance!==0){(n=e.preventDefault)===null||n===void 0||n.call(e);var u=this._prevYAxisRange,h=u.from,f=u.to,d=u.range,v=e.pageY/this._yAxisStartScaleDistance,m=d*v,y=(m-d)/2,x=h-y,b=f+y,S=l.valueToRealValue(x,{range:this._prevYAxisRange}),_=l.valueToRealValue(b,{range:this._prevYAxisRange}),C=l.realValueToDisplayValue(S,{range:this._prevYAxisRange}),A=l.realValueToDisplayValue(_,{range:this._prevYAxisRange});l.setRange({from:x,to:b,range:m,realFrom:S,realTo:_,realRange:_-S,displayFrom:C,displayTo:A,displayRange:A-C}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return a},r.prototype._findWidgetByEvent=function(t){var e,n,a,l,u=t.x,h=t.y,f=this._chart.getSeparatorPanes(),d=this._chart.getStyles().separator.size;try{for(var v=Vi(f),m=v.next();!m.done;m=v.next()){var y=m.value,x=y[1],b=x.getBounding(),S=b.top-Math.round((ol-d)/2);if(u>=b.left&&u<=b.left+b.width&&h>=S&&h<=S+ol)return{pane:x,widget:x.getWidget()}}}catch(I){e={error:I}}finally{try{m&&!m.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}var _=this._chart.getDrawPanes(),C=null;try{for(var A=Vi(_),T=A.next();!T.done;T=A.next()){var D=T.value,b=D.getBounding();if(u>=b.left&&u<=b.left+b.width&&h>=b.top&&h<=b.top+b.height){C=D;break}}}catch(I){a={error:I}}finally{try{T&&!T.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}var M=null;if(C!==null){if(!at(M)){var j=C.getMainWidget(),N=j.getBounding();u>=N.left&&u<=N.left+N.width&&h>=N.top&&h<=N.top+N.height&&(M=j)}if(!at(M)){var V=C.getYAxisWidget();if(V!==null){var B=V.getBounding();u>=B.left&&u<=B.left+B.width&&h>=B.top&&h<=B.top+B.height&&(M=V)}}}return{pane:C,widget:M}},r.prototype._makeWidgetEvent=function(t,e){var n,a,l,u=(n=e?.getBounding())!==null&&n!==void 0?n:null;return bt(bt({},t),{x:t.x-((a=u?.left)!==null&&a!==void 0?a:0),y:t.y-((l=u?.top)!==null&&l!==void 0?l:0)})},r.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},r})(),cS=(function(){function r(t,e){this._chartBounding=bu(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._cacheYAxisWidth={left:0,right:0},this._initContainer(t),this._chartEvent=new UD(this._chartContainer,this),this._chartStore=new FR(this,e),this._initPanes(e),this._layout()}return r.prototype._initContainer=function(t){this._container=t,this._chartContainer=An("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer),this._cacheChartBounding()},r.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},r.prototype._initPanes=function(t){var e=this,n,a=(n=t?.layout)!==null&&n!==void 0?n:[{type:"candle"}],l=function(h){var f,d;if(!at(e._candlePane)){var v=(f=h.options)!==null&&f!==void 0?f:{};Re(v,{id:Vt.CANDLE}),e._candlePane=e._createPane(AD,Vt.CANDLE,v);var m=(d=h.content)!==null&&d!==void 0?d:[];m.forEach(function(y){e.createIndicator(y,!0,v)})}},u=function(h){if(!at(e._xAxisPane)){var f=e._createPane(LD,Vt.X_AXIS,h??{});e._xAxisPane=f}};a.forEach(function(h){var f,d,v;switch(h.type){case"candle":{l(h);break}case"indicator":{var m=(f=h.content)!==null&&f!==void 0?f:[];if(m.length>0){var y=(v=(d=h.options)===null||d===void 0?void 0:d.id)!==null&&v!==void 0?v:null;at(y)&&(y=su(Vt.INDICATOR));var x=bt(bt({},h.options),{id:y});m.forEach(function(b){e.createIndicator(b,!0,x)})}break}case"xAxis":{u(h.options);break}}}),l({}),u({order:Number.MAX_SAFE_INTEGER})},r.prototype._createPane=function(t,e,n){var a=new t(this,e,n??{});return this._drawPanes.push(a),a},r.prototype._recalculatePaneHeight=function(t,e,n){if(n===0)return!1;var a=this._drawPanes.filter(function(m){var y=m.getId();return m.getOptions().state==="normal"&&y!==t.getId()&&y!==Vt.X_AXIS}),l=a.length;if(l===0)return!1;if(t.getId()!==Vt.CANDLE&&at(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var u=this._candlePane.getBounding().height;if(u>0){var h=this._candlePane.getOptions().minHeight,f=u+n;f<h&&(f=h,e-=u+n-f),this._candlePane.setBounding({height:f})}}else{var d=n,v=Math.floor(n/l);a.forEach(function(m,y){var x=m.getBounding().height,b=0;y===l-1?b=x+d:b=x+v,b<m.getOptions().minHeight&&(b=m.getOptions().minHeight),m.setBounding({height:b}),d-=b-x}),Math.abs(d)>0&&(e-=d)}return t.setBounding({height:e}),!0},r.prototype.getDrawPaneById=function(t){if(t===Vt.CANDLE)return this._candlePane;if(t===Vt.X_AXIS)return this._xAxisPane;var e=this._drawPanes.find(function(n){return n.getId()===t});return e??null},r.prototype.getContainer=function(){return this._container},r.prototype.getChartStore=function(){return this._chartStore},r.prototype.getXAxisPane=function(){return this._xAxisPane},r.prototype.getDrawPanes=function(){return this._drawPanes},r.prototype.getSeparatorPanes=function(){return this._separatorPanes},r.prototype.layout=function(t){var e=this,n,a,l,u,h,f,d;(n=t.sort)!==null&&n!==void 0&&n&&(this._layoutOptions.sort=t.sort),(a=t.measureHeight)!==null&&a!==void 0&&a&&(this._layoutOptions.measureHeight=t.measureHeight),(l=t.measureWidth)!==null&&l!==void 0&&l&&(this._layoutOptions.measureWidth=t.measureWidth),(u=t.update)!==null&&u!==void 0&&u&&(this._layoutOptions.update=t.update),(h=t.buildYAxisTick)!==null&&h!==void 0&&h&&(this._layoutOptions.buildYAxisTick=t.buildYAxisTick),(f=t.cacheYAxisWidth)!==null&&f!==void 0&&f&&(this._layoutOptions.cacheYAxisWidth=t.cacheYAxisWidth),(d=t.buildYAxisTick)!==null&&d!==void 0&&d&&(this._layoutOptions.forceBuildYAxisTick=t.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(v){e._layout(),e._layoutPending=!1}).catch(function(v){}))},r.prototype._layout=function(){var t=this,e=this._layoutOptions,n=e.sort,a=e.measureHeight,l=e.measureWidth,u=e.update,h=e.buildYAxisTick,f=e.cacheYAxisWidth,d=e.forceBuildYAxisTick;if(n){for(;at(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(z,U){return z.getOptions().order-U.getOptions().order});var v=null;this._drawPanes.forEach(function(z){if(z.getId()!==Vt.X_AXIS){if(at(v)){var U=new PD(t,"",v,z);t._chartContainer.appendChild(U.getContainer()),t._separatorPanes.set(z,U)}v=z}t._chartContainer.appendChild(z.getContainer())})}if(a){var m=this._chartBounding.height,y=this.getStyles().separator.size,x=this._xAxisPane.getAxisComponent().getAutoSize(),b=m-x;b<0&&(b=0),this._drawPanes.forEach(function(z){var U=z.getId();if(at(t._separatorPanes.get(z))&&(b-=y),U!==Vt.X_AXIS&&U!==Vt.CANDLE&&z.getVisible()){var st=z.getBounding().height;st>b?(st=b,b=0):b-=st,z.setBounding({height:st})}}),this._candlePane.setBounding({height:Math.max(b,0)}),this._xAxisPane.setBounding({height:x});var S=0;this._drawPanes.forEach(function(z){var U=t._separatorPanes.get(z);at(U)&&(U.setBounding({height:y,top:S}),S+=y),z.setBounding({top:S}),S+=z.getBounding().height})}var _=l;if((h||d)&&this._drawPanes.forEach(function(z){var U=z.getAxisComponent().buildTicks(d);_||(_=U)}),_){var C=this._chartBounding.width,A=this.getStyles(),T=0,D=!0,M=0,j=!0;this._drawPanes.forEach(function(z){if(z.getId()!==Vt.X_AXIS){var U=z.getAxisComponent(),st=U.inside,ft=U.getAutoSize();U.position==="left"?(T=Math.max(T,ft),st&&(D=!1)):(M=Math.max(M,ft),st&&(j=!1))}}),f&&(T=Math.max(this._cacheYAxisWidth.left,T),M=Math.max(this._cacheYAxisWidth.right,M)),this._cacheYAxisWidth.left=T,this._cacheYAxisWidth.right=M;var N=C,V=0,B=0;D&&(N-=T,V=T),j&&(N-=M,B=M),this._chartStore.setTotalBarSpace(N);var I={width:C},W={width:N,left:V,right:B},Z={width:T},it={width:M},X=A.separator.fill,ot={};X?ot=I:ot=W,this._drawPanes.forEach(function(z){var U;(U=t._separatorPanes.get(z))===null||U===void 0||U.setBounding(ot),z.setBounding(I,W,Z,it)})}u&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1}},r.prototype.updatePane=function(t,e){var n=this;if(at(e)){var a=this.getDrawPaneById(e);a?.update(t)}else this._drawPanes.forEach(function(l){var u;l.update(t),(u=n._separatorPanes.get(l))===null||u===void 0||u.update(t)})},r.prototype.getDom=function(t,e){var n,a;if(at(t)){var l=this.getDrawPaneById(t);if(at(l)){var u=e??"root";switch(u){case"root":return l.getContainer();case"main":return l.getMainWidget().getContainer();case"yAxis":return(a=(n=l.getYAxisWidget())===null||n===void 0?void 0:n.getContainer())!==null&&a!==void 0?a:null}}}else return this._chartContainer;return null},r.prototype.getSize=function(t,e){var n,a;if(at(t)){var l=this.getDrawPaneById(t);if(at(l)){var u=e??"root";switch(u){case"root":return l.getBounding();case"main":return l.getMainWidget().getBounding();case"yAxis":return(a=(n=l.getYAxisWidget())===null||n===void 0?void 0:n.getBounding())!==null&&a!==void 0?a:null}}}else return this._chartBounding;return null},r.prototype._resetYAxisAutoCalcTickFlag=function(){this._drawPanes.forEach(function(t){t.getAxisComponent().setAutoCalcTickFlag(!0)})},r.prototype.setSymbol=function(t){t!==this.getSymbol()&&(this._resetYAxisAutoCalcTickFlag(),this._chartStore.setSymbol(t))},r.prototype.getSymbol=function(){return this._chartStore.getSymbol()},r.prototype.setPeriod=function(t){t!==this.getPeriod()&&(this._resetYAxisAutoCalcTickFlag(),this._chartStore.setPeriod(t))},r.prototype.getPeriod=function(){return this._chartStore.getPeriod()},r.prototype.setStyles=function(t){var e=this;this._setOptions(function(){e._chartStore.setStyles(t)})},r.prototype.getStyles=function(){return this._chartStore.getStyles()},r.prototype.setFormatter=function(t){var e=this;this._setOptions(function(){e._chartStore.setFormatter(t)})},r.prototype.getFormatter=function(){return this._chartStore.getFormatter()},r.prototype.setLocale=function(t){var e=this;this._setOptions(function(){e._chartStore.setLocale(t)})},r.prototype.getLocale=function(){return this._chartStore.getLocale()},r.prototype.setTimezone=function(t){var e=this;this._setOptions(function(){e._chartStore.setTimezone(t)})},r.prototype.getTimezone=function(){return this._chartStore.getTimezone()},r.prototype.setThousandsSeparator=function(t){var e=this;this._setOptions(function(){e._chartStore.setThousandsSeparator(t)})},r.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},r.prototype.setDecimalFold=function(t){var e=this;this._setOptions(function(){e._chartStore.setDecimalFold(t)})},r.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},r.prototype._setOptions=function(t){t(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.setOffsetRightDistance=function(t){this._chartStore.setOffsetRightDistance(t,!0)},r.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},r.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.setMaxOffsetLeftDistance(t)},r.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.setMaxOffsetRightDistance(t)},r.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(t))},r.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(t))},r.prototype.setBarSpace=function(t){this._chartStore.setBarSpace(t)},r.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},r.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},r.prototype.resetData=function(){this._chartStore.resetData()},r.prototype.getDataList=function(){return this._chartStore.getDataList()},r.prototype.setDataLoader=function(t){this._resetYAxisAutoCalcTickFlag(),this._chartStore.setDataLoader(t)},r.prototype.createIndicator=function(t,e,n){var a,l=Kt(t)?{name:t}:t;if(Ix(l.name)===null)return null;var u=n??{};Kt(u.id)||(u.id=su(Vt.INDICATOR)),Kt(l.id)||(l.id=su(l.name));var h=this._chartStore.addIndicator(l,u.id,e??!1);if(h){var f=!1;return at(this.getDrawPaneById(u.id))||(this._createPane(uS,u.id,u),(a=u.height)!==null&&a!==void 0||(u.height=Wx),f=!0),this.setPaneOptions(u),this.layout({sort:f,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),l.id}return null},r.prototype.overrideIndicator=function(t){return this._chartStore.overrideIndicator(t)},r.prototype.getIndicators=function(t){return this._chartStore.getIndicatorsByFilter(t??{})},r.prototype.removeIndicator=function(t){var e=this,n=this._chartStore.removeIndicator(t??{});if(n){var a=!1,l=[];this._drawPanes.forEach(function(u){var h=u.getId();h!==Vt.CANDLE&&h!==Vt.X_AXIS&&l.push(h)}),l.forEach(function(u){if(!e._chartStore.hasIndicators(u)){var h=e._drawPanes.findIndex(function(d){return d.getId()===u}),f=e._drawPanes[h];at(f)&&(a=!0,e._recalculatePaneHeight(f,0,f.getBounding().height),e._drawPanes.splice(h,1),f.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:a,measureHeight:a,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return n},r.prototype.createOverlay=function(t){var e=this,n=[],a=[],l=function(h){!at(h.paneId)||e.getDrawPaneById(h.paneId)===null?(h.paneId=Vt.CANDLE,a.push(!1)):a.push(!0),n.push(h)};Kt(t)?l({name:t}):Cn(t)?t.forEach(function(h){var f=null;Kt(h)?f={name:h}:f=h,l(f)}):l(t);var u=this._chartStore.addOverlays(n,a);return Cn(t)?u:u[0]},r.prototype.getOverlays=function(t){return this._chartStore.getOverlaysByFilter(t??{})},r.prototype.overrideOverlay=function(t){return this._chartStore.overrideOverlay(t)},r.prototype.removeOverlay=function(t){return this._chartStore.removeOverlay(t??{})},r.prototype.setPaneOptions=function(t){var e,n,a=this,l,u=!1,h=!1,f=at(t.id),d=function(S){var _=S.getId();if(f&&t.id===_||!f){if(_!==Vt.X_AXIS){if(Dt(t.height)&&t.height>0){var C=Math.max((l=t.minHeight)!==null&&l!==void 0?l:S.getOptions().minHeight,0),A=Math.max(C,t.height);h=!0,u=!0,S.setOriginalBounding({height:A}),v._recalculatePaneHeight(S,A,-A)}if(at(t.state)&&S.getOptions().state!==t.state){u=!0,h=!0;var T=t.state;switch(T){case"maximize":{var D=v._drawPanes.find(function(B){var I=B.getId();return B.getOptions().state==="maximize"&&I!==Vt.X_AXIS});if(!at(D)){S.getOptions().state==="normal"&&S.setOriginalBounding({height:S.getBounding().height}),S.setOptions({state:T});var M=v._chartBounding.height;S.setBounding({height:M-v._xAxisPane.getBounding().height}),v._drawPanes.forEach(function(B){var I;B.getId()!==Vt.X_AXIS&&B.getId()!==_&&(B.setBounding({height:B.getOriginalBounding().height}),B.setVisible(!1),(I=a._separatorPanes.get(B))===null||I===void 0||I.setVisible(!1))})}break}case"minimize":{var A=S.getBounding().height,j=S.getOptions().state,N=A-au;j==="maximize"&&(N=S.getOriginalBounding().height-au),v._recalculatePaneHeight(S,au,N)&&(j==="normal"&&S.setOriginalBounding({height:A}),S.setOptions({state:T})),v._drawPanes.forEach(function(I){var W;I.getId()!==Vt.X_AXIS&&(I.setVisible(!0),(W=a._separatorPanes.get(I))===null||W===void 0||W.setVisible(!0))});break}default:{var A=S.getOriginalBounding().height;v._recalculatePaneHeight(S,A,S.getBounding().height-A)&&S.setOptions({state:T}),v._drawPanes.forEach(function(I){var W;I.getId()!==Vt.X_AXIS&&(I.setVisible(!0),(W=a._separatorPanes.get(I))===null||W===void 0||W.setVisible(!0))});break}}}}at(t.axis)&&(h=!0);var V=bt({},t);if(delete V.state,S.setOptions(V),_===t.id)return"break"}},v=this;try{for(var m=Vi(this._drawPanes),y=m.next();!y.done;y=m.next()){var x=y.value,b=d(x);if(b==="break")break}}catch(S){e={error:S}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(e)throw e.error}}h&&this.layout({measureHeight:u,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.getPaneOptions=function(t){var e;if(at(t)){var n=this.getDrawPaneById(t);return(e=n?.getOptions())!==null&&e!==void 0?e:null}return this._drawPanes.map(function(a){return a.getOptions()})},r.prototype.setZoomEnabled=function(t){this._chartStore.setZoomEnabled(t)},r.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},r.prototype.setZoomAnchor=function(t){this._chartStore.setZoomAnchor(t)},r.prototype.getZoomAnchor=function(){return this._chartStore.getZoomAnchor()},r.prototype.setScrollEnabled=function(t){this._chartStore.setScrollEnabled(t)},r.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},r.prototype.scrollByDistance=function(t,e){var n=this,a=Dt(e)&&e>0?e:0;if(this._chartStore.startScroll(),a>0){var l=new sd({duration:a});l.doFrame(function(u){var h=t*(u/a);n._chartStore.scroll(h)}),l.start()}else this._chartStore.scroll(t)},r.prototype.scrollToRealTime=function(t){var e=this._chartStore.getBarSpace().bar,n=this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/e,a=n*e;this.scrollByDistance(a,t)},r.prototype.scrollToDataIndex=function(t,e){var n=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*this._chartStore.getBarSpace().bar;this.scrollByDistance(n,e)},r.prototype.scrollToTimestamp=function(t,e){var n=ad(this.getDataList(),"timestamp",t);this.scrollToDataIndex(n,e)},r.prototype.zoomAtCoordinate=function(t,e,n){var a=this,l=Dt(n)&&n>0?n:0,u=this._chartStore.getBarSpace().bar,h=u*t,f=h-u;if(l>0){var d=0,v=new sd({duration:l});v.doFrame(function(m){var y=f*(m/l),x=(y-d)/a._chartStore.getBarSpace().bar*ld;a._chartStore.zoom(x,e??null,"main"),d=y}),v.start()}else this._chartStore.zoom(f/u*ld,e??null,"main")},r.prototype.zoomAtDataIndex=function(t,e,n){var a=this._chartStore.dataIndexToCoordinate(e);this.zoomAtCoordinate(t,{x:a,y:0},n)},r.prototype.zoomAtTimestamp=function(t,e,n){var a=ad(this.getDataList(),"timestamp",e);this.zoomAtDataIndex(t,a,n)},r.prototype.convertToPixel=function(t,e){var n=this,a,l=e??{},u=l.paneId,h=u===void 0?Vt.CANDLE:u,f=l.absolute,d=f===void 0?!1:f,v=[];if(h!==Vt.X_AXIS){var m=this.getDrawPaneById(h);if(m!==null){var y=m.getBounding(),x=[].concat(t),b=this._xAxisPane.getAxisComponent(),S=m.getAxisComponent();v=x.map(function(_){var C={},A=_.dataIndex;if(Dt(_.timestamp)&&(A=n._chartStore.timestampToDataIndex(_.timestamp)),Dt(A)&&(C.x=b.convertToPixel(A)),Dt(_.value)){var T=S.convertToPixel(_.value);C.y=d?y.top+T:T}return C})}}return Cn(t)?v:(a=v[0])!==null&&a!==void 0?a:{}},r.prototype.convertFromPixel=function(t,e){var n=this,a,l=e??{},u=l.paneId,h=u===void 0?Vt.CANDLE:u,f=l.absolute,d=f===void 0?!1:f,v=[];if(h!==Vt.X_AXIS){var m=this.getDrawPaneById(h);if(m!==null){var y=m.getBounding(),x=[].concat(t),b=this._xAxisPane.getAxisComponent(),S=m.getAxisComponent();v=x.map(function(_){var C,A={};if(Dt(_.x)){var T=b.convertFromPixel(_.x);A.dataIndex=T,A.timestamp=(C=n._chartStore.dataIndexToTimestamp(T))!==null&&C!==void 0?C:void 0}if(Dt(_.y)){var D=d?_.y-y.top:_.y;A.value=S.convertFromPixel(D)}return A})}}return Cn(t)?v:(a=v[0])!==null&&a!==void 0?a:{}},r.prototype.executeAction=function(t,e){var n;if(t==="onCrosshairChange"){var a=bt({},e);(n=a.paneId)!==null&&n!==void 0||(a.paneId=Vt.CANDLE),this._chartStore.setCrosshair(a,{notExecuteAction:!0})}},r.prototype.subscribeAction=function(t,e){this._chartStore.subscribeAction(t,e)},r.prototype.unsubscribeAction=function(t,e){this._chartStore.unsubscribeAction(t,e)},r.prototype.getConvertPictureUrl=function(t,e,n){var a=this,l=this._chartBounding,u=l.width,h=l.height,f=An("canvas",{width:"".concat(u,"px"),height:"".concat(h,"px"),boxSizing:"border-box"}),d=f.getContext("2d"),v=lr(f);f.width=u*v,f.height=h*v,d.scale(v,v),d.fillStyle=n??"#FFFFFF",d.fillRect(0,0,u,h);var m=t??!1;return this._drawPanes.forEach(function(y){var x=a._separatorPanes.get(y);if(at(x)){var b=x.getBounding();d.drawImage(x.getImage(m),b.left,b.top,b.width,b.height)}var S=y.getBounding();d.drawImage(y.getImage(m),0,S.top,u,S.height)}),f.toDataURL("image/".concat(e??"jpeg"))},r.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(t){t.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._chartStore.destroy(),this._container.removeChild(this._chartContainer)},r})(),_u=new Map,HD=1;function YD(r,t){var e=null;if(Kt(r)?e=document.getElementById(r):e=r,e===null)return null;var n=_u.get(e.id);if(at(n))return n;var a="k_line_chart_".concat(HD++);return n=new cS(e,t),n.id=a,e.setAttribute("k-line-chart-id",a),_u.set(a,n),n}function Xy(r){var t,e,n=null;if(r instanceof cS)n=r.id;else{var a=null;Kt(r)?a=document.getElementById(r):a=r,n=(t=a?.getAttribute("k-line-chart-id"))!==null&&t!==void 0?t:null}n!==null&&((e=_u.get(n))===null||e===void 0||e.destroy(),_u.delete(n))}function Gy({isFullscreen:r=!1}){const t=k.useRef(null),e=k.useRef(null),n=Wt(D=>D.symbol),a=Wt(D=>D.interval),l=Yr(),u=a==="time",h=k.useRef(n);h.current=n;const f=k.useRef(a);f.current=a;const d=k.useRef(null),v=k.useRef(null),m=k.useRef(!0),y=k.useRef(null),x=k.useRef(null),b=k.useRef(!0),S=k.useRef(!1),_=k.useRef(""),C=D=>({"1m":{span:1,type:"minute"},"5m":{span:5,type:"minute"},"15m":{span:15,type:"minute"},"30m":{span:30,type:"minute"},"1h":{span:1,type:"hour"},"4h":{span:4,type:"hour"},"1d":{span:1,type:"day"},time:{span:1,type:"minute"}})[D]||{span:1,type:"minute"},A=D=>[...D].reverse().map(N=>{const V=parseFloat(String(N[2])),B=parseFloat(String(N[3])),I=parseFloat(String(N[4])),W=parseFloat(String(N[5])),Z=parseFloat(String(N[6]));return{timestamp:N[0],open:V,high:B,low:I,close:W,volume:isNaN(Z)?0:Z}}).filter(N=>!isNaN(N.open)&&!isNaN(N.high)&&!isNaN(N.low)&&!isNaN(N.close)&&isFinite(N.open)&&isFinite(N.high)&&isFinite(N.low)&&isFinite(N.close)),T=k.useCallback(D=>{S.current||(S.current=!0,D.setDataLoader({getBars:async({type:M,timestamp:j,callback:N})=>{if(!e.current){N([],{backward:!1,forward:!1});return}const B=f.current,I=h.current,Z=B==="time"?"1m":B,it=I,X=`${M}-${j}`;if(y.current!==X)if(y.current=X,M==="forward"){if(!m.current){N([],{backward:!1,forward:!1}),y.current=null;return}const ot=j?j-1:void 0,z=`forward-${it}-${Z}-${ot}`;if(x.current===z){N([],{backward:!1,forward:!0}),y.current=null;return}x.current=z,y.current=null;try{const U=await _e.getKlines(it,Z,500,ot);if(!Array.isArray(U)||U.length===0){m.current=!1,N([],{backward:!1,forward:!1});return}const st=A(U),ft=ot?st.filter(rt=>rt.timestamp<=ot):st;if(ft.length===0){m.current=!1,N([],{backward:!1,forward:!1});return}N(ft,{backward:!1,forward:!0})}catch(U){console.error("[forward] :",U),N([],{backward:!1,forward:!1})}}else if(M==="init"){const ot=`${it}-${B}`;if(_.current===ot){y.current=null;return}_.current=ot,y.current=null;try{const z=await _e.getKlines(it,Z,500);if(z&&z.length>0){const U=A(z);U.length>0&&(v.current=U[0].timestamp),N(U,{backward:!1,forward:!0})}else N([],{backward:!1,forward:!1})}catch(z){console.error("[init] :",z),N([],{backward:!1,forward:!1})}}else M==="backward"&&N([],{backward:!1,forward:!1}),y.current=null},subscribeBar:({callback:M})=>{if(!e.current)return;const N=f.current,Z=`kline@${h.current},${N==="time"?"1m":N}`;se.connect().then(()=>{d.current=se.subscribe(Z,(it,X)=>{const ot=X,z=parseFloat(ot.o),U=parseFloat(ot.h),st=parseFloat(ot.l),ft=parseFloat(ot.c),rt=parseFloat(ot.v);if(isNaN(z)||!isFinite(z)||isNaN(U)||!isFinite(U)||isNaN(st)||!isFinite(st)||isNaN(ft)||!isFinite(ft)){console.warn("[WS] K:",ot);return}const O={timestamp:ot.ot,open:z,high:U,low:st,close:ft,volume:isNaN(rt)||!isFinite(rt)?0:rt};M(O)})})},unsubscribeBar:()=>{d.current&&(d.current(),d.current=null)}}))},[]);return k.useEffect(()=>{if(!t.current)return;e.current&&(d.current&&(d.current(),d.current=null),Xy(t.current),e.current=null),t.current.innerHTML="";const D=YD(t.current,{locale:"zh-CN",styles:{grid:{horizontal:{color:"#393939"},vertical:{color:"#393939"}},candle:{type:u?"area":"candle_solid",bar:{upColor:"#0ECB81",downColor:"#F6465D",upBorderColor:"#0ECB81",downBorderColor:"#F6465D",upWickColor:"#0ECB81",downWickColor:"#F6465D"},area:{lineSize:1,lineColor:"#2196F3",smooth:!0,value:"close",backgroundColor:[{offset:0,color:"rgba(33, 150, 243, 0.3)"},{offset:1,color:"rgba(33, 150, 243, 0.01)"}],point:{show:!0,color:"#2196F3",radius:4,rippleColor:"rgba(33, 150, 243, 0.3)",rippleRadius:8,animation:!0,animationDuration:1e3}}},xAxis:{axisLine:{show:!1}},yAxis:{axisLine:{show:!1}},separator:{size:1,color:"#2b3139",fill:!0,activeBackgroundColor:"rgba(43, 49, 57, 0.6)"}}});if(D){e.current=D,D.setOffsetRightDistance(50),D.setLeftMinVisibleBarCount(2),D.createIndicator("VOL",!1),D.createIndicator("MA",!1,{id:"candle_pane"});const M={ticker:n,pricePrecision:2,volumePrecision:4};D.setSymbol(M),D.setPeriod(C(a)),T(D),setTimeout(()=>{e.current&&e.current.resize()},100)}return()=>{d.current&&(d.current(),d.current=null),t.current&&Xy(t.current),e.current=null,S.current=!1,b.current=!0,y.current=null,x.current=null,v.current=null,m.current=!0,_.current=""}},[n,a]),k.useEffect(()=>{!e.current||!t.current||setTimeout(()=>{e.current&&(e.current.resize(),e.current.scrollToRealTime())},100)},[r]),E.jsx("div",{className:"flex flex-col h-full bg-[#181a20]",children:E.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[E.jsx("div",{ref:t,className:"absolute inset-0"}),E.jsx("img",{src:"/watermark.svg",alt:"",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 opacity-50 pointer-events-none select-none",style:{width:l?150:300,height:"auto"}})]})})}const Ky=[{label:"",value:"time",shortLabel:""},{label:"1",value:"1m",shortLabel:"1m"},{label:"5",value:"5m",shortLabel:"5m"},{label:"15",value:"15m",shortLabel:"15m"},{label:"30",value:"30m",shortLabel:"30m"},{label:"1",value:"1h",shortLabel:"1h"},{label:"4",value:"4h",shortLabel:"4h"},{label:"1",value:"1d",shortLabel:"1d"}];function Qy(){const[r,t]=k.useState("lightweight"),[e,n]=k.useState(!1),[a,l]=k.useState(0),u=Wt(y=>y.interval),h=Wt(y=>y.setInterval),f=Wt(y=>y.symbol),d=Ab(),v=Yr(),m=k.useRef(e);return k.useEffect(()=>{m.current&&!e&&l(y=>y+1),m.current=e},[e]),E.jsxs(E.Fragment,{children:[e&&E.jsxs("div",{className:"fixed inset-0 z-50 bg-[#1e1e1e] flex flex-col",children:[E.jsx("div",{className:"px-4 py-3.5 border-b border-[#2d2d2d] bg-[#1a1a1a] flex-shrink-0",children:E.jsxs("div",{className:"flex flex-col gap-2.5",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-gray-200 font-bold text-base",children:f}),E.jsx("span",{className:"text-gray-500 text-xs px-1.5 py-0.5 bg-[#2d2d2d] rounded",children:""})]}),d&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"flex items-end gap-3",children:[E.jsx("span",{className:`text-3xl font-bold leading-none ${parseFloat(d.priceChange24h)>=0?"text-green-500":"text-red-500"}`,children:parseFloat(d.lastPrice).toFixed(2)}),E.jsxs("div",{className:"flex items-baseline gap-2.5 pb-0.5",children:[E.jsxs("span",{className:`text-base font-medium ${parseFloat(d.priceChange24h)>=0?"text-green-500":"text-red-500"}`,children:[parseFloat(d.priceChange24h)>=0?"+":"",parseFloat(d.priceChange24h).toFixed(2)]}),E.jsxs("span",{className:`text-base font-medium ${parseFloat(d.priceChange24h)>=0?"text-green-500":"text-red-500"}`,children:[parseFloat(d.priceChange24h)>=0?"+":"",parseFloat(d.priceChangePercent).toFixed(2),"%"]})]})]}),E.jsxs("div",{className:"grid grid-cols-4 gap-3 pt-1",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),E.jsx("div",{className:"text-gray-100 text-sm font-medium",children:parseFloat(d.high24h).toFixed(2)})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),E.jsx("div",{className:"text-gray-100 text-sm font-medium",children:parseFloat(d.low24h).toFixed(2)})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),E.jsx("div",{className:"text-gray-100 text-sm font-medium",children:rl(parseFloat(d.volume24h))})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),E.jsx("div",{className:"text-gray-100 text-sm font-medium",children:rl(parseFloat(d.quoteVolume24h))})]})]})]})]})}),E.jsxs("div",{className:"flex items-center justify-between px-2 py-1 border-b border-[#2d2d2d] bg-[#1a1a1a] flex-shrink-0",children:[E.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[E.jsx("span",{className:"text-gray-400 text-xs flex-shrink-0",children:":"}),E.jsx("div",{className:"flex gap-0.5 overflow-x-auto scrollbar-hide flex-1 min-w-0",children:Ky.map(y=>E.jsx("button",{onClick:()=>h(y.value),className:`px-1.5 py-0.5 text-xs rounded transition-colors flex-shrink-0 ${u===y.value?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:v?y.shortLabel:y.label},y.value))})]}),E.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-1",children:[E.jsx("button",{onClick:()=>t("lightweight"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Light"}),E.jsx("button",{onClick:()=>t("lightweight-panes"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight-panes"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Panes"}),E.jsx("button",{onClick:()=>t("klinecharts"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="klinecharts"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:""}),E.jsx("button",{onClick:()=>n(!1),className:"px-1.5 py-0.5 text-xs rounded transition-colors text-gray-400 hover:text-white",children:E.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:E.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})})})]})]}),E.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="lightweight"&&E.jsx(Ry,{isFullscreen:!0}),r==="lightweight-panes"&&E.jsx(Dy,{isFullscreen:!0}),r==="klinecharts"&&E.jsx(Gy,{isFullscreen:!0})]})]}),E.jsxs("div",{className:"h-full flex flex-col bg-[#1e1e1e]",style:{display:e?"none":"flex"},children:[E.jsxs("div",{className:"flex items-center justify-between px-2 py-1 border-b border-[#2d2d2d] bg-[#1a1a1a] gap-1",children:[E.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[E.jsx("span",{className:"text-gray-400 text-xs flex-shrink-0",children:":"}),E.jsx("div",{className:"flex gap-0.5 overflow-x-auto scrollbar-hide flex-1 min-w-0",children:Ky.map(y=>E.jsx("button",{onClick:()=>h(y.value),className:`px-1.5 py-0.5 text-xs rounded transition-colors flex-shrink-0 ${u===y.value?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:v?y.shortLabel:y.label},y.value))})]}),E.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[E.jsx("button",{onClick:()=>t("lightweight"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Light"}),E.jsx("button",{onClick:()=>t("lightweight-panes"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight-panes"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Panes"}),E.jsx("button",{onClick:()=>t("klinecharts"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="klinecharts"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:""}),v&&E.jsx("button",{onClick:()=>n(!0),className:"px-1.5 py-0.5 text-xs rounded transition-colors text-gray-400 hover:text-white",title:"",children:E.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:E.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})]}),E.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="lightweight"&&E.jsx(Ry,{},a),r==="lightweight-panes"&&E.jsx(Dy,{},a),r==="klinecharts"&&E.jsx(Gy,{},a)]})]})]})}function WD(){const r=Wt(x=>x.openOrders),t=Wt(x=>x.isLoggedIn),e=Wt(x=>x.fetchOpenOrders),[n,a]=k.useState(null),[l,u]=k.useState(null);k.useEffect(()=>{t&&e()},[t,e]);const h=x=>{n||u(x)},f=k.useCallback(async()=>{if(!l)return;const x=l;u(null),a(x);try{await _e.cancelOrder(x),Ws.success("")}catch(b){const S=b;Ws.error(": "+(S.response?.data?.message||""))}finally{a(null)}},[l]),d=x=>{switch(x){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}},v=x=>{switch(x){case 1:return"var(--color-text-secondary)";case 2:return"#f0b90b";case 3:return"var(--color-green)";case 4:return"var(--color-text-secondary)";default:return"var(--color-text-secondary)"}},m=x=>x===1||x==="buy"?"":x===2||x==="sell"?"":"-",y=x=>x===1||x==="buy"?"var(--color-green)":x===2||x==="sell"?"var(--color-red)":"var(--color-text-primary)";return t?E.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[E.jsx("div",{className:"flex-1 overflow-auto min-h-0",children:E.jsxs("div",{style:{minWidth:"800px"},children:[E.jsxs("div",{className:"flex items-center px-4 py-2 text-xs text-[var(--color-text-secondary)] border-b border-[var(--color-border)] flex-shrink-0",children:[E.jsx("span",{className:"flex-[0_0_85px]",children:""}),E.jsx("span",{className:"flex-[1_1_100px] min-w-0",children:""}),E.jsx("span",{className:"flex-[0_0_50px]",children:""}),E.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),E.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),E.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),E.jsx("span",{className:"flex-[0_0_70px] text-right",children:""}),E.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right pr-4",children:""}),E.jsx("span",{className:"flex-[0_0_60px] pl-4",children:""}),E.jsx("span",{className:"flex-[0_0_60px] text-center",children:""})]}),E.jsx("div",{className:"min-h-[300px]",children:r.length===0?E.jsx("div",{className:"flex items-center justify-center h-full",style:{minHeight:"300px"},children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[E.jsx("circle",{cx:"12",cy:"12",r:"10"}),E.jsx("path",{d:"M12 6v6l4 2"})]}),E.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})}):r.map(x=>{const b=parseFloat(x.filledQty),S=parseFloat(x.filledQuote),_=b>0?(S/b).toFixed(2):"-";return E.jsxs("div",{className:"flex items-center px-4 py-2 text-xs hover:bg-[var(--color-bg-tertiary)] transition-colors",children:[E.jsx("span",{className:"flex-[0_0_85px] text-[var(--color-text-secondary)] font-mono truncate",children:new Date(x.createdAt).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}),E.jsx("span",{className:"flex-[1_1_100px] min-w-0 truncate",children:x.symbol}),E.jsx("span",{className:"flex-[0_0_50px] truncate",style:{color:y(x.side)},children:m(x.side)}),E.jsx("span",{className:"flex-[0_0_80px] text-right font-mono truncate",children:parseFloat(x.price)>0?parseFloat(x.price).toFixed(2):""}),E.jsx("span",{className:"flex-[0_0_80px] text-right font-mono truncate",children:parseFloat(x.qty).toFixed(4)}),E.jsx("span",{className:"flex-[0_0_80px] text-right font-mono text-[#f0b90b] truncate",children:parseFloat(x.filledQty).toFixed(4)}),E.jsx("span",{className:"flex-[0_0_70px] text-right font-mono truncate",children:_}),E.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right font-mono text-[var(--color-text-secondary)] truncate pr-4",children:x.totalFee?`${parseFloat(x.totalFee).toFixed(6)} ${x.feeAsset||""}`:"-"}),E.jsx("span",{className:"flex-[0_0_60px] truncate pl-4",style:{color:v(x.status)},children:d(x.status)}),E.jsx("span",{className:"flex-[0_0_60px] text-center",children:E.jsx("button",{onClick:()=>h(x.id),disabled:n===x.id,className:"px-2 py-1 text-xs text-[var(--color-red)] hover:bg-[var(--color-red)] hover:bg-opacity-10 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n===x.id?"":""})})]},x.id)})})]})}),E.jsx(sx,{isOpen:!!l,title:"",message:"",confirmText:"",cancelText:"",type:"danger",onConfirm:f,onCancel:()=>u(null)})]}):E.jsx("div",{className:"flex flex-col h-full",style:{minHeight:"300px"},children:E.jsx("div",{className:"flex items-center justify-center flex-1",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[E.jsx("path",{d:"M9 11l3 3L22 4"}),E.jsx("path",{d:"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"})]}),E.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})})})}function qD(){const[r,t]=k.useState([]),[e,n]=k.useState(!1),[a,l]=k.useState(1),[u,h]=k.useState(0),f=Wt(A=>A.symbol),d=Wt(A=>A.isLoggedIn),v=20,m=k.useCallback(async(A=1)=>{if(d){n(!0);try{const{orders:T,total:D}=await _e.getOrders({symbol:f,page:A,pageSize:v});t(T),h(D),l(A)}catch(T){console.error("Failed to load order history:",T)}finally{n(!1)}}},[f,d]);k.useEffect(()=>{m(1)},[m]);const y=A=>{switch(A){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}},x=A=>{switch(A){case 1:return"var(--color-text-secondary)";case 2:return"#f0b90b";case 3:return"var(--color-green)";case 4:return"var(--color-text-secondary)";default:return"var(--color-text-secondary)"}},b=A=>A===1||A==="buy"?"":A===2||A==="sell"?"":"-",S=A=>A===1||A==="buy"?"var(--color-green)":A===2||A==="sell"?"var(--color-red)":"var(--color-text-primary)",_=A=>A===1||A==="limit"?"":A===2||A==="market"?"":"-",C=Math.ceil(u/v);return d?E.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[E.jsx("div",{className:"flex-1 overflow-auto min-h-0",children:E.jsxs("div",{style:{minWidth:"800px"},children:[E.jsxs("div",{className:"flex items-center px-4 py-2 text-xs text-[var(--color-text-secondary)] border-b border-[var(--color-border)] flex-shrink-0",children:[E.jsx("span",{className:"flex-[0_0_100px]",children:""}),E.jsx("span",{className:"flex-[1_1_90px] min-w-0",children:""}),E.jsx("span",{className:"flex-[0_0_50px]",children:""}),E.jsx("span",{className:"flex-[0_0_50px]",children:""}),E.jsx("span",{className:"flex-[0_0_75px] text-right",children:""}),E.jsx("span",{className:"flex-[0_0_75px] text-right",children:""}),E.jsx("span",{className:"flex-[0_0_75px] text-right",children:""}),E.jsx("span",{className:"flex-[0_0_70px] text-right",children:""}),E.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right pr-4",children:""}),E.jsx("span",{className:"flex-[0_0_60px] pl-4",children:""})]}),E.jsx("div",{className:"min-h-[300px]",children:e?E.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"300px"},children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",className:"animate-spin",children:E.jsx("path",{d:"M21 12a9 9 0 11-6.219-8.56"})}),E.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:"..."})]})}):r.length===0?E.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"300px"},children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[E.jsx("path",{d:"M3 3h18v18H3z"}),E.jsx("path",{d:"M9 9l6 6M15 9l-6 6"})]}),E.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})}):r.map(A=>{const T=parseFloat(A.filledQty),D=parseFloat(A.filledQuote),M=T>0?(D/T).toFixed(2):"-";return E.jsxs("div",{className:"flex items-center px-4 py-2 text-xs hover:bg-[var(--color-bg-tertiary)] transition-colors",children:[E.jsx("span",{className:"flex-[0_0_100px] text-[var(--color-text-secondary)] font-mono truncate",children:new Date(A.createdAt).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),E.jsx("span",{className:"flex-[1_1_90px] min-w-0 truncate",children:A.symbol}),E.jsx("span",{className:"flex-[0_0_50px] text-[var(--color-text-secondary)] truncate",children:_(A.type)}),E.jsx("span",{className:"flex-[0_0_50px] truncate",style:{color:S(A.side)},children:b(A.side)}),E.jsx("span",{className:"flex-[0_0_75px] text-right font-mono truncate",children:parseFloat(A.price)>0?parseFloat(A.price).toFixed(2):""}),E.jsx("span",{className:"flex-[0_0_75px] text-right font-mono truncate",children:parseFloat(A.qty).toFixed(4)}),E.jsx("span",{className:"flex-[0_0_75px] text-right font-mono text-[#f0b90b] truncate",children:parseFloat(A.filledQty).toFixed(4)}),E.jsx("span",{className:"flex-[0_0_70px] text-right font-mono truncate",children:M}),E.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right font-mono text-[var(--color-text-secondary)] truncate pr-4",children:A.totalFee?`${parseFloat(A.totalFee).toFixed(6)} ${A.feeAsset||""}`:"-"}),E.jsx("span",{className:"flex-[0_0_60px] truncate pl-4",style:{color:x(A.status)},children:y(A.status)})]},A.id)})})]})}),C>1&&E.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-[var(--color-border)] text-xs",children:[E.jsxs("span",{className:"text-[var(--color-text-secondary)]",children:[" ",u,"  ",a,"/",C," "]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:()=>m(a-1),disabled:a<=1,className:"px-3 py-1 rounded bg-[var(--color-bg-tertiary)] text-[var(--color-text-primary)] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[var(--color-bg-quaternary)] transition-colors",children:""}),E.jsx("button",{onClick:()=>m(a+1),disabled:a>=C,className:"px-3 py-1 rounded bg-[var(--color-bg-tertiary)] text-[var(--color-text-primary)] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[var(--color-bg-quaternary)] transition-colors",children:""})]})]})]}):E.jsx("div",{className:"flex flex-col h-full",style:{minHeight:"300px"},children:E.jsx("div",{className:"flex items-center justify-center flex-1",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[E.jsx("path",{d:"M9 11l3 3L22 4"}),E.jsx("path",{d:"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"})]}),E.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})})})}function $y(){const[r,t]=k.useState("trades");return E.jsxs("div",{className:"flex flex-col h-full bg-[var(--color-bg-secondary)]",children:[E.jsxs("div",{className:"flex items-center border-b border-[var(--color-border)] flex-shrink-0",children:[E.jsx("button",{onClick:()=>t("trades"),className:`px-4 py-2 text-sm transition-colors ${r==="trades"?"text-[var(--color-text-primary)] border-b-2 border-[#f0b90b]":"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]"}`,children:""}),E.jsx("button",{onClick:()=>t("current"),className:`px-4 py-2 text-sm transition-colors ${r==="current"?"text-[var(--color-text-primary)] border-b-2 border-[#f0b90b]":"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]"}`,children:""}),E.jsx("button",{onClick:()=>t("history"),className:`px-4 py-2 text-sm transition-colors ${r==="history"?"text-[var(--color-text-primary)] border-b-2 border-[#f0b90b]":"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]"}`,children:""})]}),E.jsxs("div",{className:"flex-1 min-h-0 overflow-auto",children:[r==="trades"&&E.jsx(kM,{}),r==="current"&&E.jsx(WD,{}),r==="history"&&E.jsx(qD,{})]})]})}const tl=window.location.protocol,Qa=window.location.hostname,XD=tl==="https:"?"wss:":"ws:",Zy=[{key:"ORDER_SERVICE",label:"",placeholder:`${tl}//${Qa}:9002`,testPath:"/api/v1/orders"},{key:"DEPTH_SERVICE",label:"",placeholder:`${tl}//${Qa}:9003`,testPath:"/api/depth"},{key:"MARKET_SERVICE",label:"",placeholder:`${tl}//${Qa}:9005`,testPath:"/api/v1/ticker"},{key:"KLINE_SERVICE",label:"K",placeholder:`${tl}//${Qa}:9006`,testPath:"/api/v1/klines"},{key:"WS_SERVICE",label:"WebSocket ",placeholder:`${XD}//${Qa}:9004/ws`,testPath:"",isWs:!0}];function Jy({isOpen:r,onClose:t,onSave:e,isFirstTime:n=!1}){const a=uu(T=>T.config),[l,u]=k.useState(a||fd),[h,f]=k.useState({ORDER_SERVICE:"idle",DEPTH_SERVICE:"idle",WS_SERVICE:"idle",MARKET_SERVICE:"idle",KLINE_SERVICE:"idle"}),[d,v]=k.useState(!1),[m,y]=k.useState(!1),x=(T,D)=>{u(M=>({...M,[T]:D})),f(M=>({...M,[T]:"idle"})),y(!1)},b=async(T,D)=>{try{const M=new AbortController,j=setTimeout(()=>M.abort(),5e3);return await fetch(`${T}${D}`,{method:"GET",signal:M.signal,mode:"no-cors"}),clearTimeout(j),!0}catch{return!1}},S=T=>new Promise(D=>{try{const M=new WebSocket(T),j=setTimeout(()=>{M.close(),D(!1)},5e3);M.onopen=()=>{clearTimeout(j),M.close(),D(!0)},M.onerror=()=>{clearTimeout(j),D(!1)}}catch{D(!1)}}),_=k.useCallback(async()=>{v(!0),y(!1),f({ORDER_SERVICE:"testing",DEPTH_SERVICE:"testing",WS_SERVICE:"testing",MARKET_SERVICE:"testing",KLINE_SERVICE:"testing"});const D={};await Promise.all(Zy.map(async j=>{const N=l[j.key];let V;j.isWs?V=await S(N):V=await b(N,j.testPath),D[j.key]=V,f(B=>({...B,[j.key]:V?"success":"error"}))}));const M=Object.values(D).every(j=>j);y(M),v(!1)},[l]),C=()=>{m&&e(l)},A=T=>{switch(T){case"testing":return E.jsx("span",{className:"text-yellow-500 animate-pulse",children:""});case"success":return E.jsx("span",{className:"text-green-500",children:""});case"error":return E.jsx("span",{className:"text-red-500",children:""});default:return E.jsx("span",{className:"text-gray-500",children:""})}};return E.jsx(bd,{appear:!0,show:r,as:k.Fragment,children:E.jsxs(rx,{as:"div",className:"relative z-[9999]",onClose:n?()=>{}:t,children:[E.jsx(Fr,{as:k.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:E.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),E.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:E.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:E.jsx(Fr,{as:k.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:E.jsxs(Sd,{className:"w-full max-w-lg transform overflow-hidden rounded-lg bg-[#1e2329] shadow-2xl transition-all",children:[E.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#2b3139]",children:[E.jsx(_d,{className:"text-lg font-medium text-white",children:""}),!n&&E.jsx("button",{onClick:t,className:"text-[#848e9c] hover:text-white transition-colors text-xl",children:""})]}),E.jsxs("div",{className:"px-6 py-5 space-y-4",children:[n&&E.jsx("p",{className:"text-sm text-[#848e9c] mb-4",children:""}),Zy.map(T=>E.jsxs("div",{children:[E.jsxs("label",{className:"flex items-center justify-between text-sm text-[#b7bdc6] mb-2",children:[E.jsx("span",{children:T.label}),A(h[T.key])]}),E.jsx("input",{type:"text",value:l[T.key],onChange:D=>x(T.key,D.target.value),placeholder:T.placeholder,className:"w-full px-3 py-2.5 bg-[#2b3139] border border-[#3a4049] rounded text-sm text-white placeholder-[#5e6673] focus:outline-none focus:border-[#fcd535] transition-colors"})]},T.key))]}),E.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-[#2b3139]",children:[!n&&E.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-[#848e9c] hover:text-white transition-colors",children:""}),E.jsx("button",{onClick:_,disabled:d,className:"px-5 py-2 rounded text-sm font-medium bg-[#2b3139] text-white hover:bg-[#3a4049] border border-[#3a4049] transition-colors disabled:opacity-50",children:d?"...":""}),E.jsx("button",{onClick:C,disabled:!m,className:"px-5 py-2 rounded text-sm font-medium bg-[#fcd535] text-[#0c0e12] hover:bg-[#f0b90b] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})})})})]})})}function GD(){const r=dd();return r==="connected"?null:E.jsx("div",{className:"w-full px-4 py-2.5 text-center text-sm transition-all border-b",style:{backgroundColor:"#fffbe6",borderColor:"#ffe58f",color:"rgba(0, 0, 0, 0.88)"},children:r==="connecting"?E.jsxs("div",{className:"flex items-center justify-center gap-2",children:[E.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{color:"#faad14"},children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),E.jsx("span",{style:{color:"#faad14"},children:""}),E.jsx("span",{children:"..."})]}):E.jsxs("span",{children:[E.jsx("span",{style:{color:"#faad14"},children:""})," ..."]})})}function KD(){const r=Wt(u=>u.isLoggedIn),t=Wt(u=>u.updateOrder),e=Wt(u=>u.updateOpenOrders),n=Wt(u=>u.fetchAssets),a=k.useRef(!1),l=k.useRef(null);k.useEffect(()=>{if(!r)return;console.log("[PrivateChannels] Subscribing to private channels...");const u=se.subscribe("order",(f,d)=>{const v=d;console.log("[WS] Order update:",v);const m={id:v.i,clientOrderId:v.c,symbol:v.s,side:v.S,type:v.T,price:v.p,qty:v.q,quoteQty:v.Q||"0",filledQty:v.z,filledQuote:v.Z,status:v.o,totalFee:v.f,feeAsset:v.F,createdAt:v.C,updatedAt:v.u};t(m),e(m)}),h=se.subscribe("balance",(f,d)=>{console.log("[WS] Balance update:",d),a.current=!0});return l.current=setInterval(()=>{a.current&&(console.log("[PrivateChannels] Balance changed, fetching assets..."),n(),a.current=!1)},1e3),()=>{console.log("[PrivateChannels] Unsubscribing from private channels..."),u(),h(),l.current&&(clearInterval(l.current),l.current=null)}},[r,t,e,n])}function QD(){const r=Wt(y=>y.fetchAssets),t=Wt(y=>y.isLoggedIn),e=Wt(y=>y.token),n=uu(y=>y.isConfigured),a=uu(y=>y.setConfig),[l,u]=k.useState(!1),[h,f]=k.useState(!1),d=Yr();k.useEffect(()=>{n?f(!0):u(!0)},[n]);const v=k.useCallback(y=>{a(y),_e.init(),se.reinit(),u(!1),f(!0),window.location.reload()},[a]),m=k.useCallback(()=>{u(!0)},[]);return KD(),k.useEffect(()=>{h&&e&&(console.log("[App] Restoring token to api and ws"),_e.setToken(e),se.setToken(e))},[h]),k.useEffect(()=>{h&&se.connect().catch(()=>{})},[h]),k.useEffect(()=>{h&&t&&r()},[h,t,r]),k.useEffect(()=>{if(!h)return;const y=()=>{document.visibilityState==="visible"&&(console.log("[App] Page became visible, checking WebSocket connection"),se.connect().catch(()=>{}))};return document.addEventListener("visibilitychange",y),()=>{document.removeEventListener("visibilitychange",y)}},[h]),h?E.jsx("div",{className:"h-screen w-screen flex justify-center bg-[var(--color-bg-primary)]",children:E.jsxs("div",{className:"h-screen w-full max-w-[1920px] flex flex-col overflow-hidden",children:[E.jsx(GD,{}),E.jsx(NM,{}),E.jsx(Jy,{isOpen:l,onClose:()=>u(!1),onSave:v,isFirstTime:!1}),E.jsx(OM,{onOpenConfig:m}),E.jsx("div",{className:`flex-1 flex overflow-hidden ${d?"":"gap-2 p-2"}`,style:{height:d?"calc(100vh - 48px)":"calc(100vh - 64px)"},children:d?E.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[E.jsx("div",{className:"h-[220px] flex-shrink-0 border-b border-[var(--color-border)]",children:E.jsx(Qy,{})}),E.jsxs("div",{className:"h-[500px] flex-shrink-0 flex border-b border-[var(--color-border)]",children:[E.jsx("div",{className:"flex-1 min-w-0 overflow-auto",children:E.jsx(C0,{})}),E.jsx("div",{className:"w-[45%] flex-shrink-0 border-l border-[var(--color-border)] overflow-hidden",children:E.jsx(E0,{})})]}),E.jsx("div",{className:"flex-shrink-0",children:E.jsx($y,{})})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"w-[280px] flex-shrink-0 overflow-hidden",children:E.jsx(E0,{})}),E.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-2",children:[E.jsx("div",{className:"flex-[2] min-h-0 max-h-[600px]",children:E.jsx(Qy,{})}),E.jsx("div",{className:"flex-[1] min-h-0",children:E.jsx($y,{})})]}),E.jsx("div",{className:"w-[300px] flex-shrink-0 overflow-hidden",children:E.jsx(C0,{})})]})})]})}):E.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-[var(--color-bg-primary)]",children:E.jsx(Jy,{isOpen:l,onClose:()=>{},onSave:v,isFirstTime:!0})})}z1.createRoot(document.getElementById("root")).render(E.jsx(k.StrictMode,{children:E.jsx(QD,{})}));
