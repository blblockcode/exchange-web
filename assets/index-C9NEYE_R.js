function C1(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function M1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var sf={exports:{}},Ha={};var kg;function T1(){if(kg)return Ha;kg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var c in a)c!=="key"&&(l[c]=a[c])}else l=a;return a=l.ref,{$$typeof:r,type:n,key:u,ref:a!==void 0?a:null,props:l}}return Ha.Fragment=t,Ha.jsx=e,Ha.jsxs=e,Ha}var jg;function A1(){return jg||(jg=1,sf.exports=T1()),sf.exports}var _=A1(),af={exports:{}},zt={};var zg;function R1(){if(zg)return zt;zg=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=y&&k[y]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function M(k,L,F){this.props=k,this.context=L,this.refs=S,this.updater=F||b}M.prototype.isReactComponent={},M.prototype.setState=function(k,L){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,L,"setState")},M.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function N(){}N.prototype=M.prototype;function T(k,L,F){this.props=k,this.context=L,this.refs=S,this.updater=F||b}var R=T.prototype=new N;R.constructor=T,w(R,M.prototype),R.isPureReactComponent=!0;var C=Array.isArray;function z(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function B(k,L,F){var q=F.ref;return{$$typeof:r,type:k,key:L,ref:q!==void 0?q:null,props:F}}function V(k,L){return B(k.type,L,k.props)}function W(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function Z(k){var L={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(F){return L[F]})}var it=/\/+/g;function X(k,L){return typeof k=="object"&&k!==null&&k.key!=null?Z(""+k.key):L.toString(36)}function ot(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(z,z):(k.status="pending",k.then(function(L){k.status==="pending"&&(k.status="fulfilled",k.value=L)},function(L){k.status==="pending"&&(k.status="rejected",k.reason=L)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function j(k,L,F,q,$){var J=typeof k;(J==="undefined"||J==="boolean")&&(k=null);var tt=!1;if(k===null)tt=!0;else switch(J){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(k.$$typeof){case r:case t:tt=!0;break;case v:return tt=k._init,j(tt(k._payload),L,F,q,$)}}if(tt)return $=$(k),tt=q===""?"."+X(k,0):q,C($)?(F="",tt!=null&&(F=tt.replace(it,"$&/")+"/"),j($,L,F,"",function(ut){return ut})):$!=null&&(W($)&&($=V($,F+($.key==null||k&&k.key===$.key?"":(""+$.key).replace(it,"$&/")+"/")+tt)),L.push($)),1;tt=0;var vt=q===""?".":q+":";if(C(k))for(var pt=0;pt<k.length;pt++)q=k[pt],J=vt+X(q,pt),tt+=j(q,L,F,J,$);else if(pt=x(k),typeof pt=="function")for(k=pt.call(k),pt=0;!(q=k.next()).done;)q=q.value,J=vt+X(q,pt++),tt+=j(q,L,F,J,$);else if(J==="object"){if(typeof k.then=="function")return j(ot(k),L,F,q,$);throw L=String(k),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return tt}function U(k,L,F){if(k==null)return k;var q=[],$=0;return j(k,q,"","",function(J){return L.call(F,J,$++)}),q}function st(k){if(k._status===-1){var L=k._result;L=L(),L.then(function(F){(k._status===0||k._status===-1)&&(k._status=1,k._result=F)},function(F){(k._status===0||k._status===-1)&&(k._status=2,k._result=F)}),k._status===-1&&(k._status=0,k._result=L)}if(k._status===1)return k._result.default;throw k._result}var ft=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},rt={map:U,forEach:function(k,L,F){U(k,function(){L.apply(this,arguments)},F)},count:function(k){var L=0;return U(k,function(){L++}),L},toArray:function(k){return U(k,function(L){return L})||[]},only:function(k){if(!W(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return zt.Activity=m,zt.Children=rt,zt.Component=M,zt.Fragment=e,zt.Profiler=a,zt.PureComponent=T,zt.StrictMode=n,zt.Suspense=f,zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,zt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},zt.cache=function(k){return function(){return k.apply(null,arguments)}},zt.cacheSignal=function(){return null},zt.cloneElement=function(k,L,F){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var q=w({},k.props),$=k.key;if(L!=null)for(J in L.key!==void 0&&($=""+L.key),L)!I.call(L,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&L.ref===void 0||(q[J]=L[J]);var J=arguments.length-2;if(J===1)q.children=F;else if(1<J){for(var tt=Array(J),vt=0;vt<J;vt++)tt[vt]=arguments[vt+2];q.children=tt}return B(k.type,$,q)},zt.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},zt.createElement=function(k,L,F){var q,$={},J=null;if(L!=null)for(q in L.key!==void 0&&(J=""+L.key),L)I.call(L,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&($[q]=L[q]);var tt=arguments.length-2;if(tt===1)$.children=F;else if(1<tt){for(var vt=Array(tt),pt=0;pt<tt;pt++)vt[pt]=arguments[pt+2];$.children=vt}if(k&&k.defaultProps)for(q in tt=k.defaultProps,tt)$[q]===void 0&&($[q]=tt[q]);return B(k,J,$)},zt.createRef=function(){return{current:null}},zt.forwardRef=function(k){return{$$typeof:c,render:k}},zt.isValidElement=W,zt.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:st}},zt.memo=function(k,L){return{$$typeof:d,type:k,compare:L===void 0?null:L}},zt.startTransition=function(k){var L=D.T,F={};D.T=F;try{var q=k(),$=D.S;$!==null&&$(F,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(z,ft)}catch(J){ft(J)}finally{L!==null&&F.types!==null&&(L.types=F.types),D.T=L}},zt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},zt.use=function(k){return D.H.use(k)},zt.useActionState=function(k,L,F){return D.H.useActionState(k,L,F)},zt.useCallback=function(k,L){return D.H.useCallback(k,L)},zt.useContext=function(k){return D.H.useContext(k)},zt.useDebugValue=function(){},zt.useDeferredValue=function(k,L){return D.H.useDeferredValue(k,L)},zt.useEffect=function(k,L){return D.H.useEffect(k,L)},zt.useEffectEvent=function(k){return D.H.useEffectEvent(k)},zt.useId=function(){return D.H.useId()},zt.useImperativeHandle=function(k,L,F){return D.H.useImperativeHandle(k,L,F)},zt.useInsertionEffect=function(k,L){return D.H.useInsertionEffect(k,L)},zt.useLayoutEffect=function(k,L){return D.H.useLayoutEffect(k,L)},zt.useMemo=function(k,L){return D.H.useMemo(k,L)},zt.useOptimistic=function(k,L){return D.H.useOptimistic(k,L)},zt.useReducer=function(k,L,F){return D.H.useReducer(k,L,F)},zt.useRef=function(k){return D.H.useRef(k)},zt.useState=function(k){return D.H.useState(k)},zt.useSyncExternalStore=function(k,L,F){return D.H.useSyncExternalStore(k,L,F)},zt.useTransition=function(){return D.H.useTransition()},zt.version="19.2.3",zt}var Lg;function wu(){return Lg||(Lg=1,af.exports=R1()),af.exports}var O=wu();const kt=M1(O),Bg=C1({__proto__:null,default:kt},[O]);var lf={exports:{}},Ya={},of={exports:{}},uf={};var Fg;function D1(){return Fg||(Fg=1,(function(r){function t(j,U){var st=j.length;j.push(U);t:for(;0<st;){var ft=st-1>>>1,rt=j[ft];if(0<a(rt,U))j[ft]=U,j[st]=rt,st=ft;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var U=j[0],st=j.pop();if(st!==U){j[0]=st;t:for(var ft=0,rt=j.length,k=rt>>>1;ft<k;){var L=2*(ft+1)-1,F=j[L],q=L+1,$=j[q];if(0>a(F,st))q<rt&&0>a($,F)?(j[ft]=$,j[q]=st,ft=q):(j[ft]=F,j[L]=st,ft=L);else if(q<rt&&0>a($,st))j[ft]=$,j[q]=st,ft=q;else break t}}return U}function a(j,U){var st=j.sortIndex-U.sortIndex;return st!==0?st:j.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var f=[],d=[],v=1,m=null,y=3,x=!1,b=!1,w=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R(j){for(var U=e(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=j)n(d),U.sortIndex=U.expirationTime,t(f,U);else break;U=e(d)}}function C(j){if(w=!1,R(j),!b)if(e(f)!==null)b=!0,z||(z=!0,Z());else{var U=e(d);U!==null&&ot(C,U.startTime-j)}}var z=!1,D=-1,I=5,B=-1;function V(){return S?!0:!(r.unstable_now()-B<I)}function W(){if(S=!1,z){var j=r.unstable_now();B=j;var U=!0;try{t:{b=!1,w&&(w=!1,N(D),D=-1),x=!0;var st=y;try{e:{for(R(j),m=e(f);m!==null&&!(m.expirationTime>j&&V());){var ft=m.callback;if(typeof ft=="function"){m.callback=null,y=m.priorityLevel;var rt=ft(m.expirationTime<=j);if(j=r.unstable_now(),typeof rt=="function"){m.callback=rt,R(j),U=!0;break e}m===e(f)&&n(f),R(j)}else n(f);m=e(f)}if(m!==null)U=!0;else{var k=e(d);k!==null&&ot(C,k.startTime-j),U=!1}}break t}finally{m=null,y=st,x=!1}U=void 0}}finally{U?Z():z=!1}}}var Z;if(typeof T=="function")Z=function(){T(W)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,X=it.port2;it.port1.onmessage=W,Z=function(){X.postMessage(null)}}else Z=function(){M(W,0)};function ot(j,U){D=M(function(){j(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(j){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var st=y;y=U;try{return j()}finally{y=st}},r.unstable_requestPaint=function(){S=!0},r.unstable_runWithPriority=function(j,U){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var st=y;y=j;try{return U()}finally{y=st}},r.unstable_scheduleCallback=function(j,U,st){var ft=r.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?ft+st:ft):st=ft,j){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=st+rt,j={id:v++,callback:U,priorityLevel:j,startTime:st,expirationTime:rt,sortIndex:-1},st>ft?(j.sortIndex=st,t(d,j),e(f)===null&&j===e(d)&&(w?(N(D),D=-1):w=!0,ot(C,st-ft))):(j.sortIndex=rt,t(f,j),b||x||(b=!0,z||(z=!0,Z()))),j},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(j){var U=y;return function(){var st=y;y=U;try{return j.apply(this,arguments)}finally{y=st}}}})(uf)),uf}var Pg;function N1(){return Pg||(Pg=1,of.exports=D1()),of.exports}var cf={exports:{}},Ye={};var Ig;function O1(){if(Ig)return Ye;Ig=1;var r=wu();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,d,v){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:f,containerInfo:d,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ye.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ye.createPortal=function(f,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return l(f,d,null,v)},Ye.flushSync=function(f){var d=u.T,v=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=d,n.p=v,n.d.f()}},Ye.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(f,d))},Ye.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Ye.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var v=d.as,m=c(v,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;v==="style"?n.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):v==="script"&&n.d.X(f,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ye.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var v=c(d.as,d.crossOrigin);n.d.M(f,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(f)},Ye.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var v=d.as,m=c(v,d.crossOrigin);n.d.L(f,v,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ye.preloadModule=function(f,d){if(typeof f=="string")if(d){var v=c(d.as,d.crossOrigin);n.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(f)},Ye.requestFormReset=function(f){n.d.r(f)},Ye.unstable_batchedUpdates=function(f,d){return f(d)},Ye.useFormState=function(f,d,v){return u.H.useFormState(f,d,v)},Ye.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ye.version="19.2.3",Ye}var Vg;function tb(){if(Vg)return cf.exports;Vg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),cf.exports=O1(),cf.exports}var Ug;function k1(){if(Ug)return Ya;Ug=1;var r=N1(),t=wu(),e=tb();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(l(i)!==i)throw Error(n(188))}function d(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(n(188));return s!==i?null:i}for(var o=i,h=s;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(h=p.return,h!==null){o=h;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return f(p),i;if(g===h)return f(p),s;g=g.sibling}throw Error(n(188))}if(o.return!==h.return)o=p,h=g;else{for(var E=!1,A=p.child;A;){if(A===o){E=!0,o=p,h=g;break}if(A===h){E=!0,h=p,o=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===o){E=!0,o=g,h=p;break}if(A===h){E=!0,h=g,o=p;break}A=A.sibling}if(!E)throw Error(n(189))}}if(o.alternate!==h)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var it=Symbol.for("react.client.reference");function X(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===it?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case M:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case z:return"SuspenseList";case B:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case T:return i.displayName||"Context";case N:return(i._context.displayName||"Context")+".Consumer";case R:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:X(i.type)||"Memo";case I:s=i._payload,i=i._init;try{return X(i(s))}catch{}}return null}var ot=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},ft=[],rt=-1;function k(i){return{current:i}}function L(i){0>rt||(i.current=ft[rt],ft[rt]=null,rt--)}function F(i,s){rt++,ft[rt]=i.current,i.current=s}var q=k(null),$=k(null),J=k(null),tt=k(null);function vt(i,s){switch(F(J,s),F($,i),F(q,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?ig(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=ig(s),i=ng(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}L(q),F(q,i)}function pt(){L(q),L($),L(J)}function ut(i){i.memoizedState!==null&&F(tt,i);var s=q.current,o=ng(s,i.type);s!==o&&(F($,i),F(q,o))}function dt(i){$.current===i&&(L(q),L($)),tt.current===i&&(L(tt),Pa._currentValue=st)}var St,yt;function _t(i){if(St===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);St=s&&s[1]||"",yt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+St+i+yt}var xt=!1;function Mt(i,s){if(!i||xt)return"";xt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(nt){var Q=nt}Reflect.construct(i,[],ht)}else{try{ht.call()}catch(nt){Q=nt}i.call(ht.prototype)}}else{try{throw Error()}catch(nt){Q=nt}(ht=i())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(nt){if(nt&&Q&&typeof nt.stack=="string")return[nt.stack,Q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=h.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var P=E.split(`
`),K=A.split(`
`);for(p=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(h===P.length||p===K.length)for(h=P.length-1,p=K.length-1;1<=h&&0<=p&&P[h]!==K[p];)p--;for(;1<=h&&0<=p;h--,p--)if(P[h]!==K[p]){if(h!==1||p!==1)do if(h--,p--,0>p||P[h]!==K[p]){var lt=`
`+P[h].replace(" at new "," at ");return i.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",i.displayName)),lt}while(1<=h&&0<=p);break}}}finally{xt=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?_t(o):""}function jt(i,s){switch(i.tag){case 26:case 27:case 5:return _t(i.type);case 16:return _t("Lazy");case 13:return i.child!==s&&s!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return Mt(i.type,!1);case 11:return Mt(i.type.render,!1);case 1:return Mt(i.type,!0);case 31:return _t("Activity");default:return""}}function gt(i){try{var s="",o=null;do s+=jt(i,o),o=i,i=i.return;while(i);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var At=Object.prototype.hasOwnProperty,wt=r.unstable_scheduleCallback,Nt=r.unstable_cancelCallback,Lt=r.unstable_shouldYield,ae=r.unstable_requestPaint,Qt=r.unstable_now,me=r.unstable_getCurrentPriorityLevel,Xe=r.unstable_ImmediatePriority,ce=r.unstable_UserBlockingPriority,ge=r.unstable_NormalPriority,He=r.unstable_LowPriority,Ge=r.unstable_IdlePriority,tn=r.log,qr=r.unstable_setDisableYieldValue,Ze=null,Ke=null;function De(i){if(typeof tn=="function"&&qr(i),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Ze,i)}catch{}}var he=Math.clz32?Math.clz32:zi,Je=Math.log,Si=Math.LN2;function zi(i){return i>>>=0,i===0?32:31-(Je(i)/Si|0)|0}var en=256,Xr=262144,wl=4194304;function cr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function El(i,s,o){var h=i.pendingLanes;if(h===0)return 0;var p=0,g=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var A=h&134217727;return A!==0?(h=A&~g,h!==0?p=cr(h):(E&=A,E!==0?p=cr(E):o||(o=A&~i,o!==0&&(p=cr(o))))):(A=h&~g,A!==0?p=cr(A):E!==0?p=cr(E):o||(o=h&~i,o!==0&&(p=cr(o)))),p===0?0:s!==0&&s!==p&&(s&g)===0&&(g=p&-p,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:p}function Zs(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function fS(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bd(){var i=wl;return wl<<=1,(wl&62914560)===0&&(wl=4194304),i}function qu(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Js(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function dS(i,s,o,h,p,g){var E=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var A=i.entanglements,P=i.expirationTimes,K=i.hiddenUpdates;for(o=E&~o;0<o;){var lt=31-he(o),ht=1<<lt;A[lt]=0,P[lt]=-1;var Q=K[lt];if(Q!==null)for(K[lt]=null,lt=0;lt<Q.length;lt++){var nt=Q[lt];nt!==null&&(nt.lane&=-536870913)}o&=~ht}h!==0&&Fd(i,h,0),g!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=g&~(E&~s))}function Fd(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var h=31-he(s);i.entangledLanes|=s,i.entanglements[h]=i.entanglements[h]|1073741824|o&261930}function Pd(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var h=31-he(o),p=1<<h;p&s|i[h]&s&&(i[h]|=s),o&=~p}}function Id(i,s){var o=s&-s;return o=(o&42)!==0?1:Xu(o),(o&(i.suspendedLanes|s))!==0?0:o}function Xu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Gu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Vd(){var i=U.p;return i!==0?i:(i=window.event,i===void 0?32:Mg(i.type))}function Ud(i,s){var o=U.p;try{return U.p=i,s()}finally{U.p=o}}var Nn=Math.random().toString(36).slice(2),ze="__reactFiber$"+Nn,ti="__reactProps$"+Nn,Gr="__reactContainer$"+Nn,Ku="__reactEvents$"+Nn,vS="__reactListeners$"+Nn,pS="__reactHandles$"+Nn,Hd="__reactResources$"+Nn,ta="__reactMarker$"+Nn;function Qu(i){delete i[ze],delete i[ti],delete i[Ku],delete i[vS],delete i[pS]}function Kr(i){var s=i[ze];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Gr]||o[ze]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=cg(i);i!==null;){if(o=i[ze])return o;i=cg(i)}return s}i=o,o=i.parentNode}return null}function Qr(i){if(i=i[ze]||i[Gr]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ea(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function $r(i){var s=i[Hd];return s||(s=i[Hd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ne(i){i[ta]=!0}var Yd=new Set,Wd={};function hr(i,s){Zr(i,s),Zr(i+"Capture",s)}function Zr(i,s){for(Wd[i]=s,i=0;i<s.length;i++)Yd.add(s[i])}var mS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qd={},Xd={};function gS(i){return At.call(Xd,i)?!0:At.call(qd,i)?!1:mS.test(i)?Xd[i]=!0:(qd[i]=!0,!1)}function Cl(i,s,o){if(gS(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function Ml(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function nn(i,s,o,h){if(h===null)i.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+h)}}function _i(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Gd(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yS(i,s,o){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,g=h.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(E){o=""+E,g.call(this,E)}}),Object.defineProperty(i,s,{enumerable:h.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function $u(i){if(!i._valueTracker){var s=Gd(i)?"checked":"value";i._valueTracker=yS(i,s,""+i[s])}}function Kd(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),h="";return i&&(h=Gd(i)?i.checked?"true":"false":i.value),i=h,i!==o?(s.setValue(i),!0):!1}function Tl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var bS=/[\n"\\]/g;function wi(i){return i.replace(bS,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Zu(i,s,o,h,p,g,E,A){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),s!=null?E==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+_i(s)):i.value!==""+_i(s)&&(i.value=""+_i(s)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),s!=null?Ju(i,E,_i(s)):o!=null?Ju(i,E,_i(o)):h!=null&&i.removeAttribute("value"),p==null&&g!=null&&(i.defaultChecked=!!g),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+_i(A):i.removeAttribute("name")}function Qd(i,s,o,h,p,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){$u(i);return}o=o!=null?""+_i(o):"",s=s!=null?""+_i(s):o,A||s===i.value||(i.value=s),i.defaultValue=s}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=A?i.checked:!!h,i.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),$u(i)}function Ju(i,s,o){s==="number"&&Tl(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Jr(i,s,o,h){if(i=i.options,s){s={};for(var p=0;p<o.length;p++)s["$"+o[p]]=!0;for(o=0;o<i.length;o++)p=s.hasOwnProperty("$"+i[o].value),i[o].selected!==p&&(i[o].selected=p),p&&h&&(i[o].defaultSelected=!0)}else{for(o=""+_i(o),s=null,p=0;p<i.length;p++){if(i[p].value===o){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function $d(i,s,o){if(s!=null&&(s=""+_i(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+_i(o):""}function Zd(i,s,o,h){if(s==null){if(h!=null){if(o!=null)throw Error(n(92));if(ot(h)){if(1<h.length)throw Error(n(93));h=h[0]}o=h}o==null&&(o=""),s=o}o=_i(s),i.defaultValue=o,h=i.textContent,h===o&&h!==""&&h!==null&&(i.value=h),$u(i)}function ts(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var xS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jd(i,s,o){var h=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":h?i.setProperty(s,o):typeof o!="number"||o===0||xS.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function tv(i,s,o){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in s)h=s[p],s.hasOwnProperty(p)&&o[p]!==h&&Jd(i,p,h)}else for(var g in s)s.hasOwnProperty(g)&&Jd(i,g,s[g])}function tc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_S=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(i){return _S.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function rn(){}var ec=null;function ic(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var es=null,is=null;function ev(i){var s=Qr(i);if(s&&(i=s.stateNode)){var o=i[ti]||null;t:switch(i=s.stateNode,s.type){case"input":if(Zu(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+wi(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var h=o[s];if(h!==i&&h.form===i.form){var p=h[ti]||null;if(!p)throw Error(n(90));Zu(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<o.length;s++)h=o[s],h.form===i.form&&Kd(h)}break t;case"textarea":$d(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Jr(i,!!o.multiple,s,!1)}}}var nc=!1;function iv(i,s,o){if(nc)return i(s,o);nc=!0;try{var h=i(s);return h}finally{if(nc=!1,(es!==null||is!==null)&&(mo(),es&&(s=es,i=is,is=es=null,ev(s),i)))for(s=0;s<i.length;s++)ev(i[s])}}function ia(i,s){var o=i.stateNode;if(o===null)return null;var h=o[ti]||null;if(h===null)return null;o=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(n(231,s,typeof o));return o}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(sn)try{var na={};Object.defineProperty(na,"passive",{get:function(){rc=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{rc=!1}var On=null,sc=null,Rl=null;function nv(){if(Rl)return Rl;var i,s=sc,o=s.length,h,p="value"in On?On.value:On.textContent,g=p.length;for(i=0;i<o&&s[i]===p[i];i++);var E=o-i;for(h=1;h<=E&&s[o-h]===p[g-h];h++);return Rl=p.slice(i,1<h?1-h:void 0)}function Dl(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Nl(){return!0}function rv(){return!1}function ei(i){function s(o,h,p,g,E){this._reactName=o,this._targetInst=p,this.type=h,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(o=i[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Nl:rv,this.isPropagationStopped=rv,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),s}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=ei(fr),ra=m({},fr,{view:0,detail:0}),wS=ei(ra),ac,lc,sa,kl=m({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==sa&&(sa&&i.type==="mousemove"?(ac=i.screenX-sa.screenX,lc=i.screenY-sa.screenY):lc=ac=0,sa=i),ac)},movementY:function(i){return"movementY"in i?i.movementY:lc}}),sv=ei(kl),ES=m({},kl,{dataTransfer:0}),CS=ei(ES),MS=m({},ra,{relatedTarget:0}),oc=ei(MS),TS=m({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),AS=ei(TS),RS=m({},fr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),DS=ei(RS),NS=m({},fr,{data:0}),av=ei(NS),OS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zS(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=jS[i])?!!s[i]:!1}function uc(){return zS}var LS=m({},ra,{key:function(i){if(i.key){var s=OS[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Dl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?kS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(i){return i.type==="keypress"?Dl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Dl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),BS=ei(LS),FS=m({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lv=ei(FS),PS=m({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),IS=ei(PS),VS=m({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),US=ei(VS),HS=m({},kl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=ei(HS),WS=m({},fr,{newState:0,oldState:0}),qS=ei(WS),XS=[9,13,27,32],cc=sn&&"CompositionEvent"in window,aa=null;sn&&"documentMode"in document&&(aa=document.documentMode);var GS=sn&&"TextEvent"in window&&!aa,ov=sn&&(!cc||aa&&8<aa&&11>=aa),uv=" ",cv=!1;function hv(i,s){switch(i){case"keyup":return XS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ns=!1;function KS(i,s){switch(i){case"compositionend":return fv(s);case"keypress":return s.which!==32?null:(cv=!0,uv);case"textInput":return i=s.data,i===uv&&cv?null:i;default:return null}}function QS(i,s){if(ns)return i==="compositionend"||!cc&&hv(i,s)?(i=nv(),Rl=sc=On=null,ns=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ov&&s.locale!=="ko"?null:s.data;default:return null}}var $S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dv(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!$S[i.type]:s==="textarea"}function vv(i,s,o,h){es?is?is.push(h):is=[h]:es=h,s=wo(s,"onChange"),0<s.length&&(o=new Ol("onChange","change",null,o,h),i.push({event:o,listeners:s}))}var la=null,oa=null;function ZS(i){Qm(i,0)}function jl(i){var s=ea(i);if(Kd(s))return i}function pv(i,s){if(i==="change")return s}var mv=!1;if(sn){var hc;if(sn){var fc="oninput"in document;if(!fc){var gv=document.createElement("div");gv.setAttribute("oninput","return;"),fc=typeof gv.oninput=="function"}hc=fc}else hc=!1;mv=hc&&(!document.documentMode||9<document.documentMode)}function yv(){la&&(la.detachEvent("onpropertychange",bv),oa=la=null)}function bv(i){if(i.propertyName==="value"&&jl(oa)){var s=[];vv(s,oa,i,ic(i)),iv(ZS,s)}}function JS(i,s,o){i==="focusin"?(yv(),la=s,oa=o,la.attachEvent("onpropertychange",bv)):i==="focusout"&&yv()}function t_(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return jl(oa)}function e_(i,s){if(i==="click")return jl(s)}function i_(i,s){if(i==="input"||i==="change")return jl(s)}function n_(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var fi=typeof Object.is=="function"?Object.is:n_;function ua(i,s){if(fi(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),h=Object.keys(s);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var p=o[h];if(!At.call(s,p)||!fi(i[p],s[p]))return!1}return!0}function xv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sv(i,s){var o=xv(i);i=0;for(var h;o;){if(o.nodeType===3){if(h=i+o.textContent.length,i<=s&&h>=s)return{node:o,offset:s-i};i=h}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=xv(o)}}function _v(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?_v(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function wv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Tl(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Tl(i.document)}return s}function dc(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var r_=sn&&"documentMode"in document&&11>=document.documentMode,rs=null,vc=null,ca=null,pc=!1;function Ev(i,s,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;pc||rs==null||rs!==Tl(h)||(h=rs,"selectionStart"in h&&dc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ca&&ua(ca,h)||(ca=h,h=wo(vc,"onSelect"),0<h.length&&(s=new Ol("onSelect","select",null,s,o),i.push({event:s,listeners:h}),s.target=rs)))}function dr(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var ss={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},mc={},Cv={};sn&&(Cv=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function vr(i){if(mc[i])return mc[i];if(!ss[i])return i;var s=ss[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in Cv)return mc[i]=s[o];return i}var Mv=vr("animationend"),Tv=vr("animationiteration"),Av=vr("animationstart"),s_=vr("transitionrun"),a_=vr("transitionstart"),l_=vr("transitioncancel"),Rv=vr("transitionend"),Dv=new Map,gc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gc.push("scrollEnd");function Li(i,s){Dv.set(i,s),hr(s,[i])}var zl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ei=[],as=0,yc=0;function Ll(){for(var i=as,s=yc=as=0;s<i;){var o=Ei[s];Ei[s++]=null;var h=Ei[s];Ei[s++]=null;var p=Ei[s];Ei[s++]=null;var g=Ei[s];if(Ei[s++]=null,h!==null&&p!==null){var E=h.pending;E===null?p.next=p:(p.next=E.next,E.next=p),h.pending=p}g!==0&&Nv(o,p,g)}}function Bl(i,s,o,h){Ei[as++]=i,Ei[as++]=s,Ei[as++]=o,Ei[as++]=h,yc|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function bc(i,s,o,h){return Bl(i,s,o,h),Fl(i)}function pr(i,s){return Bl(i,null,null,s),Fl(i)}function Nv(i,s,o){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o);for(var p=!1,g=i.return;g!==null;)g.childLanes|=o,h=g.alternate,h!==null&&(h.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(p=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,p&&s!==null&&(p=31-he(o),i=g.hiddenUpdates,h=i[p],h===null?i[p]=[s]:h.push(s),s.lane=o|536870912),g):null}function Fl(i){if(50<Oa)throw Oa=0,Ah=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ls={};function o_(i,s,o,h){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(i,s,o,h){return new o_(i,s,o,h)}function xc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function an(i,s){var o=i.alternate;return o===null?(o=di(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function Ov(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Pl(i,s,o,h,p,g){var E=0;if(h=i,typeof i=="function")xc(i)&&(E=1);else if(typeof i=="string")E=d1(i,o,q.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case B:return i=di(31,o,s,p),i.elementType=B,i.lanes=g,i;case w:return mr(o.children,p,g,s);case S:E=8,p|=24;break;case M:return i=di(12,o,s,p|2),i.elementType=M,i.lanes=g,i;case C:return i=di(13,o,s,p),i.elementType=C,i.lanes=g,i;case z:return i=di(19,o,s,p),i.elementType=z,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:E=10;break t;case N:E=9;break t;case R:E=11;break t;case D:E=14;break t;case I:E=16,h=null;break t}E=29,o=Error(n(130,i===null?"null":typeof i,"")),h=null}return s=di(E,o,s,p),s.elementType=i,s.type=h,s.lanes=g,s}function mr(i,s,o,h){return i=di(7,i,h,s),i.lanes=o,i}function Sc(i,s,o){return i=di(6,i,null,s),i.lanes=o,i}function kv(i){var s=di(18,null,null,0);return s.stateNode=i,s}function _c(i,s,o){return s=di(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var jv=new WeakMap;function Ci(i,s){if(typeof i=="object"&&i!==null){var o=jv.get(i);return o!==void 0?o:(s={value:i,source:s,stack:gt(s)},jv.set(i,s),s)}return{value:i,source:s,stack:gt(s)}}var os=[],us=0,Il=null,ha=0,Mi=[],Ti=0,kn=null,Hi=1,Yi="";function ln(i,s){os[us++]=ha,os[us++]=Il,Il=i,ha=s}function zv(i,s,o){Mi[Ti++]=Hi,Mi[Ti++]=Yi,Mi[Ti++]=kn,kn=i;var h=Hi;i=Yi;var p=32-he(h)-1;h&=~(1<<p),o+=1;var g=32-he(s)+p;if(30<g){var E=p-p%5;g=(h&(1<<E)-1).toString(32),h>>=E,p-=E,Hi=1<<32-he(s)+p|o<<p|h,Yi=g+i}else Hi=1<<g|o<<p|h,Yi=i}function wc(i){i.return!==null&&(ln(i,1),zv(i,1,0))}function Ec(i){for(;i===Il;)Il=os[--us],os[us]=null,ha=os[--us],os[us]=null;for(;i===kn;)kn=Mi[--Ti],Mi[Ti]=null,Yi=Mi[--Ti],Mi[Ti]=null,Hi=Mi[--Ti],Mi[Ti]=null}function Lv(i,s){Mi[Ti++]=Hi,Mi[Ti++]=Yi,Mi[Ti++]=kn,Hi=s.id,Yi=s.overflow,kn=i}var Le=null,fe=null,Gt=!1,jn=null,Ai=!1,Cc=Error(n(519));function zn(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fa(Ci(s,i)),Cc}function Bv(i){var s=i.stateNode,o=i.type,h=i.memoizedProps;switch(s[ze]=i,s[ti]=h,o){case"dialog":Yt("cancel",s),Yt("close",s);break;case"iframe":case"object":case"embed":Yt("load",s);break;case"video":case"audio":for(o=0;o<ja.length;o++)Yt(ja[o],s);break;case"source":Yt("error",s);break;case"img":case"image":case"link":Yt("error",s),Yt("load",s);break;case"details":Yt("toggle",s);break;case"input":Yt("invalid",s),Qd(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Yt("invalid",s);break;case"textarea":Yt("invalid",s),Zd(s,h.value,h.defaultValue,h.children)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||h.suppressHydrationWarning===!0||tg(s.textContent,o)?(h.popover!=null&&(Yt("beforetoggle",s),Yt("toggle",s)),h.onScroll!=null&&Yt("scroll",s),h.onScrollEnd!=null&&Yt("scrollend",s),h.onClick!=null&&(s.onclick=rn),s=!0):s=!1,s||zn(i,!0)}function Fv(i){for(Le=i.return;Le;)switch(Le.tag){case 5:case 31:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:Le=Le.return}}function cs(i){if(i!==Le)return!1;if(!Gt)return Fv(i),Gt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Hh(i.type,i.memoizedProps)),o=!o),o&&fe&&zn(i),Fv(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));fe=ug(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));fe=ug(i)}else s===27?(s=fe,Kn(i.type)?(i=Gh,Gh=null,fe=i):fe=s):fe=Le?Di(i.stateNode.nextSibling):null;return!0}function gr(){fe=Le=null,Gt=!1}function Mc(){var i=jn;return i!==null&&(si===null?si=i:si.push.apply(si,i),jn=null),i}function fa(i){jn===null?jn=[i]:jn.push(i)}var Tc=k(null),yr=null,on=null;function Ln(i,s,o){F(Tc,s._currentValue),s._currentValue=o}function un(i){i._currentValue=Tc.current,L(Tc)}function Ac(i,s,o){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===o)break;i=i.return}}function Rc(i,s,o,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var g=p.dependencies;if(g!==null){var E=p.child;g=g.firstContext;t:for(;g!==null;){var A=g;g=p;for(var P=0;P<s.length;P++)if(A.context===s[P]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),Ac(g.return,o,i),h||(E=null);break t}g=A.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(n(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Ac(E,o,i),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===i){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function hs(i,s,o,h){i=null;for(var p=s,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var A=p.type;fi(p.pendingProps.value,E.value)||(i!==null?i.push(A):i=[A])}}else if(p===tt.current){if(E=p.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Pa):i=[Pa])}p=p.return}i!==null&&Rc(s,i,o,h),s.flags|=262144}function Vl(i){for(i=i.firstContext;i!==null;){if(!fi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function br(i){yr=i,on=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Be(i){return Pv(yr,i)}function Ul(i,s){return yr===null&&br(i),Pv(i,s)}function Pv(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},on===null){if(i===null)throw Error(n(308));on=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else on=on.next=s;return o}var u_=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,h){i.push(h)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},c_=r.unstable_scheduleCallback,h_=r.unstable_NormalPriority,Ee={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new u_,data:new Map,refCount:0}}function da(i){i.refCount--,i.refCount===0&&c_(h_,function(){i.controller.abort()})}var va=null,Nc=0,fs=0,ds=null;function f_(i,s){if(va===null){var o=va=[];Nc=0,fs=jh(),ds={status:"pending",value:void 0,then:function(h){o.push(h)}}}return Nc++,s.then(Iv,Iv),s}function Iv(){if(--Nc===0&&va!==null){ds!==null&&(ds.status="fulfilled");var i=va;va=null,fs=0,ds=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function d_(i,s){var o=[],h={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return i.then(function(){h.status="fulfilled",h.value=s;for(var p=0;p<o.length;p++)(0,o[p])(s)},function(p){for(h.status="rejected",h.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),h}var Vv=j.S;j.S=function(i,s){Em=Qt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&f_(i,s),Vv!==null&&Vv(i,s)};var xr=k(null);function Oc(){var i=xr.current;return i!==null?i:le.pooledCache}function Hl(i,s){s===null?F(xr,xr.current):F(xr,s.pool)}function Uv(){var i=Oc();return i===null?null:{parent:Ee._currentValue,pool:i}}var vs=Error(n(460)),kc=Error(n(474)),Yl=Error(n(542)),Wl={then:function(){}};function Hv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Yv(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(rn,rn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,qv(i),i;default:if(typeof s.status=="string")s.then(rn,rn);else{if(i=le,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(h){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=h}},function(h){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,qv(i),i}throw _r=s,vs}}function Sr(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(_r=o,vs):o}}var _r=null;function Wv(){if(_r===null)throw Error(n(459));var i=_r;return _r=null,i}function qv(i){if(i===vs||i===Yl)throw Error(n(483))}var ps=null,pa=0;function ql(i){var s=pa;return pa+=1,ps===null&&(ps=[]),Yv(ps,i,s)}function ma(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Xl(i,s){throw s.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Xv(i){function s(Y,H){if(i){var G=Y.deletions;G===null?(Y.deletions=[H],Y.flags|=16):G.push(H)}}function o(Y,H){if(!i)return null;for(;H!==null;)s(Y,H),H=H.sibling;return null}function h(Y){for(var H=new Map;Y!==null;)Y.key!==null?H.set(Y.key,Y):H.set(Y.index,Y),Y=Y.sibling;return H}function p(Y,H){return Y=an(Y,H),Y.index=0,Y.sibling=null,Y}function g(Y,H,G){return Y.index=G,i?(G=Y.alternate,G!==null?(G=G.index,G<H?(Y.flags|=67108866,H):G):(Y.flags|=67108866,H)):(Y.flags|=1048576,H)}function E(Y){return i&&Y.alternate===null&&(Y.flags|=67108866),Y}function A(Y,H,G,ct){return H===null||H.tag!==6?(H=Sc(G,Y.mode,ct),H.return=Y,H):(H=p(H,G),H.return=Y,H)}function P(Y,H,G,ct){var Tt=G.type;return Tt===w?lt(Y,H,G.props.children,ct,G.key):H!==null&&(H.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===I&&Sr(Tt)===H.type)?(H=p(H,G.props),ma(H,G),H.return=Y,H):(H=Pl(G.type,G.key,G.props,null,Y.mode,ct),ma(H,G),H.return=Y,H)}function K(Y,H,G,ct){return H===null||H.tag!==4||H.stateNode.containerInfo!==G.containerInfo||H.stateNode.implementation!==G.implementation?(H=_c(G,Y.mode,ct),H.return=Y,H):(H=p(H,G.children||[]),H.return=Y,H)}function lt(Y,H,G,ct,Tt){return H===null||H.tag!==7?(H=mr(G,Y.mode,ct,Tt),H.return=Y,H):(H=p(H,G),H.return=Y,H)}function ht(Y,H,G){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Sc(""+H,Y.mode,G),H.return=Y,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return G=Pl(H.type,H.key,H.props,null,Y.mode,G),ma(G,H),G.return=Y,G;case b:return H=_c(H,Y.mode,G),H.return=Y,H;case I:return H=Sr(H),ht(Y,H,G)}if(ot(H)||Z(H))return H=mr(H,Y.mode,G,null),H.return=Y,H;if(typeof H.then=="function")return ht(Y,ql(H),G);if(H.$$typeof===T)return ht(Y,Ul(Y,H),G);Xl(Y,H)}return null}function Q(Y,H,G,ct){var Tt=H!==null?H.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Tt!==null?null:A(Y,H,""+G,ct);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return G.key===Tt?P(Y,H,G,ct):null;case b:return G.key===Tt?K(Y,H,G,ct):null;case I:return G=Sr(G),Q(Y,H,G,ct)}if(ot(G)||Z(G))return Tt!==null?null:lt(Y,H,G,ct,null);if(typeof G.then=="function")return Q(Y,H,ql(G),ct);if(G.$$typeof===T)return Q(Y,H,Ul(Y,G),ct);Xl(Y,G)}return null}function nt(Y,H,G,ct,Tt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Y=Y.get(G)||null,A(H,Y,""+ct,Tt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:return Y=Y.get(ct.key===null?G:ct.key)||null,P(H,Y,ct,Tt);case b:return Y=Y.get(ct.key===null?G:ct.key)||null,K(H,Y,ct,Tt);case I:return ct=Sr(ct),nt(Y,H,G,ct,Tt)}if(ot(ct)||Z(ct))return Y=Y.get(G)||null,lt(H,Y,ct,Tt,null);if(typeof ct.then=="function")return nt(Y,H,G,ql(ct),Tt);if(ct.$$typeof===T)return nt(Y,H,G,Ul(H,ct),Tt);Xl(H,ct)}return null}function Et(Y,H,G,ct){for(var Tt=null,$t=null,Ct=H,It=H=0,Xt=null;Ct!==null&&It<G.length;It++){Ct.index>It?(Xt=Ct,Ct=null):Xt=Ct.sibling;var Zt=Q(Y,Ct,G[It],ct);if(Zt===null){Ct===null&&(Ct=Xt);break}i&&Ct&&Zt.alternate===null&&s(Y,Ct),H=g(Zt,H,It),$t===null?Tt=Zt:$t.sibling=Zt,$t=Zt,Ct=Xt}if(It===G.length)return o(Y,Ct),Gt&&ln(Y,It),Tt;if(Ct===null){for(;It<G.length;It++)Ct=ht(Y,G[It],ct),Ct!==null&&(H=g(Ct,H,It),$t===null?Tt=Ct:$t.sibling=Ct,$t=Ct);return Gt&&ln(Y,It),Tt}for(Ct=h(Ct);It<G.length;It++)Xt=nt(Ct,Y,It,G[It],ct),Xt!==null&&(i&&Xt.alternate!==null&&Ct.delete(Xt.key===null?It:Xt.key),H=g(Xt,H,It),$t===null?Tt=Xt:$t.sibling=Xt,$t=Xt);return i&&Ct.forEach(function(tr){return s(Y,tr)}),Gt&&ln(Y,It),Tt}function Ot(Y,H,G,ct){if(G==null)throw Error(n(151));for(var Tt=null,$t=null,Ct=H,It=H=0,Xt=null,Zt=G.next();Ct!==null&&!Zt.done;It++,Zt=G.next()){Ct.index>It?(Xt=Ct,Ct=null):Xt=Ct.sibling;var tr=Q(Y,Ct,Zt.value,ct);if(tr===null){Ct===null&&(Ct=Xt);break}i&&Ct&&tr.alternate===null&&s(Y,Ct),H=g(tr,H,It),$t===null?Tt=tr:$t.sibling=tr,$t=tr,Ct=Xt}if(Zt.done)return o(Y,Ct),Gt&&ln(Y,It),Tt;if(Ct===null){for(;!Zt.done;It++,Zt=G.next())Zt=ht(Y,Zt.value,ct),Zt!==null&&(H=g(Zt,H,It),$t===null?Tt=Zt:$t.sibling=Zt,$t=Zt);return Gt&&ln(Y,It),Tt}for(Ct=h(Ct);!Zt.done;It++,Zt=G.next())Zt=nt(Ct,Y,It,Zt.value,ct),Zt!==null&&(i&&Zt.alternate!==null&&Ct.delete(Zt.key===null?It:Zt.key),H=g(Zt,H,It),$t===null?Tt=Zt:$t.sibling=Zt,$t=Zt);return i&&Ct.forEach(function(E1){return s(Y,E1)}),Gt&&ln(Y,It),Tt}function re(Y,H,G,ct){if(typeof G=="object"&&G!==null&&G.type===w&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case x:t:{for(var Tt=G.key;H!==null;){if(H.key===Tt){if(Tt=G.type,Tt===w){if(H.tag===7){o(Y,H.sibling),ct=p(H,G.props.children),ct.return=Y,Y=ct;break t}}else if(H.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===I&&Sr(Tt)===H.type){o(Y,H.sibling),ct=p(H,G.props),ma(ct,G),ct.return=Y,Y=ct;break t}o(Y,H);break}else s(Y,H);H=H.sibling}G.type===w?(ct=mr(G.props.children,Y.mode,ct,G.key),ct.return=Y,Y=ct):(ct=Pl(G.type,G.key,G.props,null,Y.mode,ct),ma(ct,G),ct.return=Y,Y=ct)}return E(Y);case b:t:{for(Tt=G.key;H!==null;){if(H.key===Tt)if(H.tag===4&&H.stateNode.containerInfo===G.containerInfo&&H.stateNode.implementation===G.implementation){o(Y,H.sibling),ct=p(H,G.children||[]),ct.return=Y,Y=ct;break t}else{o(Y,H);break}else s(Y,H);H=H.sibling}ct=_c(G,Y.mode,ct),ct.return=Y,Y=ct}return E(Y);case I:return G=Sr(G),re(Y,H,G,ct)}if(ot(G))return Et(Y,H,G,ct);if(Z(G)){if(Tt=Z(G),typeof Tt!="function")throw Error(n(150));return G=Tt.call(G),Ot(Y,H,G,ct)}if(typeof G.then=="function")return re(Y,H,ql(G),ct);if(G.$$typeof===T)return re(Y,H,Ul(Y,G),ct);Xl(Y,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,H!==null&&H.tag===6?(o(Y,H.sibling),ct=p(H,G),ct.return=Y,Y=ct):(o(Y,H),ct=Sc(G,Y.mode,ct),ct.return=Y,Y=ct),E(Y)):o(Y,H)}return function(Y,H,G,ct){try{pa=0;var Tt=re(Y,H,G,ct);return ps=null,Tt}catch(Ct){if(Ct===vs||Ct===Yl)throw Ct;var $t=di(29,Ct,null,Y.mode);return $t.lanes=ct,$t.return=Y,$t}}}var wr=Xv(!0),Gv=Xv(!1),Bn=!1;function jc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zc(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Fn(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Pn(i,s,o){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Jt&2)!==0){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,s=Fl(i),Nv(i,null,o),s}return Bl(i,h,s,o),Fl(i)}function ga(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var h=s.lanes;h&=i.pendingLanes,o|=h,s.lanes=o,Pd(i,o)}}function Lc(i,s){var o=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?p=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?p=g=s:g=g.next=s}else p=g=s;o={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:h.shared,callbacks:h.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Bc=!1;function ya(){if(Bc){var i=ds;if(i!==null)throw i}}function ba(i,s,o,h){Bc=!1;var p=i.updateQueue;Bn=!1;var g=p.firstBaseUpdate,E=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var P=A,K=P.next;P.next=null,E===null?g=K:E.next=K,E=P;var lt=i.alternate;lt!==null&&(lt=lt.updateQueue,A=lt.lastBaseUpdate,A!==E&&(A===null?lt.firstBaseUpdate=K:A.next=K,lt.lastBaseUpdate=P))}if(g!==null){var ht=p.baseState;E=0,lt=K=P=null,A=g;do{var Q=A.lane&-536870913,nt=Q!==A.lane;if(nt?(qt&Q)===Q:(h&Q)===Q){Q!==0&&Q===fs&&(Bc=!0),lt!==null&&(lt=lt.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Et=i,Ot=A;Q=s;var re=o;switch(Ot.tag){case 1:if(Et=Ot.payload,typeof Et=="function"){ht=Et.call(re,ht,Q);break t}ht=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Ot.payload,Q=typeof Et=="function"?Et.call(re,ht,Q):Et,Q==null)break t;ht=m({},ht,Q);break t;case 2:Bn=!0}}Q=A.callback,Q!==null&&(i.flags|=64,nt&&(i.flags|=8192),nt=p.callbacks,nt===null?p.callbacks=[Q]:nt.push(Q))}else nt={lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},lt===null?(K=lt=nt,P=ht):lt=lt.next=nt,E|=Q;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;nt=A,A=nt.next,nt.next=null,p.lastBaseUpdate=nt,p.shared.pending=null}}while(!0);lt===null&&(P=ht),p.baseState=P,p.firstBaseUpdate=K,p.lastBaseUpdate=lt,g===null&&(p.shared.lanes=0),Yn|=E,i.lanes=E,i.memoizedState=ht}}function Kv(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function Qv(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Kv(o[i],s)}var ms=k(null),Gl=k(0);function $v(i,s){i=yn,F(Gl,i),F(ms,s),yn=i|s.baseLanes}function Fc(){F(Gl,yn),F(ms,ms.current)}function Pc(){yn=Gl.current,L(ms),L(Gl)}var vi=k(null),Ri=null;function In(i){var s=i.alternate;F(Se,Se.current&1),F(vi,i),Ri===null&&(s===null||ms.current!==null||s.memoizedState!==null)&&(Ri=i)}function Ic(i){F(Se,Se.current),F(vi,i),Ri===null&&(Ri=i)}function Zv(i){i.tag===22?(F(Se,Se.current),F(vi,i),Ri===null&&(Ri=i)):Vn()}function Vn(){F(Se,Se.current),F(vi,vi.current)}function pi(i){L(vi),Ri===i&&(Ri=null),L(Se)}var Se=k(0);function Kl(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||qh(o)||Xh(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cn=0,Bt=null,ie=null,Ce=null,Ql=!1,gs=!1,Er=!1,$l=0,xa=0,ys=null,v_=0;function ye(){throw Error(n(321))}function Vc(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!fi(i[o],s[o]))return!1;return!0}function Uc(i,s,o,h,p,g){return cn=g,Bt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,j.H=i===null||i.memoizedState===null?zp:nh,Er=!1,g=o(h,p),Er=!1,gs&&(g=tp(s,o,h,p)),Jv(i),g}function Jv(i){j.H=wa;var s=ie!==null&&ie.next!==null;if(cn=0,Ce=ie=Bt=null,Ql=!1,xa=0,ys=null,s)throw Error(n(300));i===null||Me||(i=i.dependencies,i!==null&&Vl(i)&&(Me=!0))}function tp(i,s,o,h){Bt=i;var p=0;do{if(gs&&(ys=null),xa=0,gs=!1,25<=p)throw Error(n(301));if(p+=1,Ce=ie=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}j.H=Lp,g=s(o,h)}while(gs);return g}function p_(){var i=j.H,s=i.useState()[0];return s=typeof s.then=="function"?Sa(s):s,i=i.useState()[0],(ie!==null?ie.memoizedState:null)!==i&&(Bt.flags|=1024),s}function Hc(){var i=$l!==0;return $l=0,i}function Yc(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Wc(i){if(Ql){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ql=!1}cn=0,Ce=ie=Bt=null,gs=!1,xa=$l=0,ys=null}function Qe(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?Bt.memoizedState=Ce=i:Ce=Ce.next=i,Ce}function _e(){if(ie===null){var i=Bt.alternate;i=i!==null?i.memoizedState:null}else i=ie.next;var s=Ce===null?Bt.memoizedState:Ce.next;if(s!==null)Ce=s,ie=i;else{if(i===null)throw Bt.alternate===null?Error(n(467)):Error(n(310));ie=i,i={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Ce===null?Bt.memoizedState=Ce=i:Ce=Ce.next=i}return Ce}function Zl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sa(i){var s=xa;return xa+=1,ys===null&&(ys=[]),i=Yv(ys,i,s),s=Bt,(Ce===null?s.memoizedState:Ce.next)===null&&(s=s.alternate,j.H=s===null||s.memoizedState===null?zp:nh),i}function Jl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Sa(i);if(i.$$typeof===T)return Be(i)}throw Error(n(438,String(i)))}function qc(i){var s=null,o=Bt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var h=Bt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Zl(),Bt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),h=0;h<i;h++)o[h]=V;return s.index++,o}function hn(i,s){return typeof s=="function"?s(i):s}function to(i){var s=_e();return Xc(s,ie,i)}function Xc(i,s,o){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var p=i.baseQueue,g=h.pending;if(g!==null){if(p!==null){var E=p.next;p.next=g.next,g.next=E}s.baseQueue=p=g,h.pending=null}if(g=i.baseState,p===null)i.memoizedState=g;else{s=p.next;var A=E=null,P=null,K=s,lt=!1;do{var ht=K.lane&-536870913;if(ht!==K.lane?(qt&ht)===ht:(cn&ht)===ht){var Q=K.revertLane;if(Q===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ht===fs&&(lt=!0);else if((cn&Q)===Q){K=K.next,Q===fs&&(lt=!0);continue}else ht={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(A=P=ht,E=g):P=P.next=ht,Bt.lanes|=Q,Yn|=Q;ht=K.action,Er&&o(g,ht),g=K.hasEagerState?K.eagerState:o(g,ht)}else Q={lane:ht,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(A=P=Q,E=g):P=P.next=Q,Bt.lanes|=ht,Yn|=ht;K=K.next}while(K!==null&&K!==s);if(P===null?E=g:P.next=A,!fi(g,i.memoizedState)&&(Me=!0,lt&&(o=ds,o!==null)))throw o;i.memoizedState=g,i.baseState=E,i.baseQueue=P,h.lastRenderedState=g}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Gc(i){var s=_e(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=i;var h=o.dispatch,p=o.pending,g=s.memoizedState;if(p!==null){o.pending=null;var E=p=p.next;do g=i(g,E.action),E=E.next;while(E!==p);fi(g,s.memoizedState)||(Me=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,h]}function ep(i,s,o){var h=Bt,p=_e(),g=Gt;if(g){if(o===void 0)throw Error(n(407));o=o()}else o=s();var E=!fi((ie||p).memoizedState,o);if(E&&(p.memoizedState=o,Me=!0),p=p.queue,$c(rp.bind(null,h,p,i),[i]),p.getSnapshot!==s||E||Ce!==null&&Ce.memoizedState.tag&1){if(h.flags|=2048,bs(9,{destroy:void 0},np.bind(null,h,p,o,s),null),le===null)throw Error(n(349));g||(cn&127)!==0||ip(h,s,o)}return o}function ip(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Bt.updateQueue,s===null?(s=Zl(),Bt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function np(i,s,o,h){s.value=o,s.getSnapshot=h,sp(s)&&ap(i)}function rp(i,s,o){return o(function(){sp(s)&&ap(i)})}function sp(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!fi(i,o)}catch{return!0}}function ap(i){var s=pr(i,2);s!==null&&ai(s,i,2)}function Kc(i){var s=Qe();if(typeof i=="function"){var o=i;if(i=o(),Er){De(!0);try{o()}finally{De(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:i},s}function lp(i,s,o,h){return i.baseState=o,Xc(i,ie,typeof h=="function"?h:hn)}function m_(i,s,o,h,p){if(no(i))throw Error(n(485));if(i=s.action,i!==null){var g={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};j.T!==null?o(!0):g.isTransition=!1,h(g),o=s.pending,o===null?(g.next=s.pending=g,op(s,g)):(g.next=o.next,s.pending=o.next=g)}}function op(i,s){var o=s.action,h=s.payload,p=i.state;if(s.isTransition){var g=j.T,E={};j.T=E;try{var A=o(p,h),P=j.S;P!==null&&P(E,A),up(i,s,A)}catch(K){Qc(i,s,K)}finally{g!==null&&E.types!==null&&(g.types=E.types),j.T=g}}else try{g=o(p,h),up(i,s,g)}catch(K){Qc(i,s,K)}}function up(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){cp(i,s,h)},function(h){return Qc(i,s,h)}):cp(i,s,o)}function cp(i,s,o){s.status="fulfilled",s.value=o,hp(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,op(i,o)))}function Qc(i,s,o){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=o,hp(s),s=s.next;while(s!==h)}i.action=null}function hp(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function fp(i,s){return s}function dp(i,s){if(Gt){var o=le.formState;if(o!==null){t:{var h=Bt;if(Gt){if(fe){e:{for(var p=fe,g=Ai;p.nodeType!==8;){if(!g){p=null;break e}if(p=Di(p.nextSibling),p===null){p=null;break e}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){fe=Di(p.nextSibling),h=p.data==="F!";break t}}zn(h)}h=!1}h&&(s=o[0])}}return o=Qe(),o.memoizedState=o.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:s},o.queue=h,o=Op.bind(null,Bt,h),h.dispatch=o,h=Kc(!1),g=ih.bind(null,Bt,!1,h.queue),h=Qe(),p={state:s,dispatch:null,action:i,pending:null},h.queue=p,o=m_.bind(null,Bt,p,g,o),p.dispatch=o,h.memoizedState=i,[s,o,!1]}function vp(i){var s=_e();return pp(s,ie,i)}function pp(i,s,o){if(s=Xc(i,s,fp)[0],i=to(hn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Sa(s)}catch(E){throw E===vs?Yl:E}else h=s;s=_e();var p=s.queue,g=p.dispatch;return o!==s.memoizedState&&(Bt.flags|=2048,bs(9,{destroy:void 0},g_.bind(null,p,o),null)),[h,g,i]}function g_(i,s){i.action=s}function mp(i){var s=_e(),o=ie;if(o!==null)return pp(s,o,i);_e(),s=s.memoizedState,o=_e();var h=o.queue.dispatch;return o.memoizedState=i,[s,h,!1]}function bs(i,s,o,h){return i={tag:i,create:o,deps:h,inst:s,next:null},s=Bt.updateQueue,s===null&&(s=Zl(),Bt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(h=o.next,o.next=i,i.next=h,s.lastEffect=i),i}function gp(){return _e().memoizedState}function eo(i,s,o,h){var p=Qe();Bt.flags|=i,p.memoizedState=bs(1|s,{destroy:void 0},o,h===void 0?null:h)}function io(i,s,o,h){var p=_e();h=h===void 0?null:h;var g=p.memoizedState.inst;ie!==null&&h!==null&&Vc(h,ie.memoizedState.deps)?p.memoizedState=bs(s,g,o,h):(Bt.flags|=i,p.memoizedState=bs(1|s,g,o,h))}function yp(i,s){eo(8390656,8,i,s)}function $c(i,s){io(2048,8,i,s)}function y_(i){Bt.flags|=4;var s=Bt.updateQueue;if(s===null)s=Zl(),Bt.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function bp(i){var s=_e().memoizedState;return y_({ref:s,nextImpl:i}),function(){if((Jt&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function xp(i,s){return io(4,2,i,s)}function Sp(i,s){return io(4,4,i,s)}function _p(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function wp(i,s,o){o=o!=null?o.concat([i]):null,io(4,4,_p.bind(null,s,i),o)}function Zc(){}function Ep(i,s){var o=_e();s=s===void 0?null:s;var h=o.memoizedState;return s!==null&&Vc(s,h[1])?h[0]:(o.memoizedState=[i,s],i)}function Cp(i,s){var o=_e();s=s===void 0?null:s;var h=o.memoizedState;if(s!==null&&Vc(s,h[1]))return h[0];if(h=i(),Er){De(!0);try{i()}finally{De(!1)}}return o.memoizedState=[h,s],h}function Jc(i,s,o){return o===void 0||(cn&1073741824)!==0&&(qt&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=Mm(),Bt.lanes|=i,Yn|=i,o)}function Mp(i,s,o,h){return fi(o,s)?o:ms.current!==null?(i=Jc(i,o,h),fi(i,s)||(Me=!0),i):(cn&42)===0||(cn&1073741824)!==0&&(qt&261930)===0?(Me=!0,i.memoizedState=o):(i=Mm(),Bt.lanes|=i,Yn|=i,s)}function Tp(i,s,o,h,p){var g=U.p;U.p=g!==0&&8>g?g:8;var E=j.T,A={};j.T=A,ih(i,!1,s,o);try{var P=p(),K=j.S;if(K!==null&&K(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var lt=d_(P,h);_a(i,s,lt,yi(i))}else _a(i,s,h,yi(i))}catch(ht){_a(i,s,{then:function(){},status:"rejected",reason:ht},yi())}finally{U.p=g,E!==null&&A.types!==null&&(E.types=A.types),j.T=E}}function b_(){}function th(i,s,o,h){if(i.tag!==5)throw Error(n(476));var p=Ap(i).queue;Tp(i,p,s,st,o===null?b_:function(){return Rp(i),o(h)})}function Ap(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:st},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Rp(i){var s=Ap(i);s.next===null&&(s=i.alternate.memoizedState),_a(i,s.next.queue,{},yi())}function eh(){return Be(Pa)}function Dp(){return _e().memoizedState}function Np(){return _e().memoizedState}function x_(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=yi();i=Fn(o);var h=Pn(s,i,o);h!==null&&(ai(h,s,o),ga(h,s,o)),s={cache:Dc()},i.payload=s;return}s=s.return}}function S_(i,s,o){var h=yi();o={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},no(i)?kp(s,o):(o=bc(i,s,o,h),o!==null&&(ai(o,i,h),jp(o,s,h)))}function Op(i,s,o){var h=yi();_a(i,s,o,h)}function _a(i,s,o,h){var p={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(no(i))kp(s,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,A=g(E,o);if(p.hasEagerState=!0,p.eagerState=A,fi(A,E))return Bl(i,s,p,0),le===null&&Ll(),!1}catch{}if(o=bc(i,s,p,h),o!==null)return ai(o,i,h),jp(o,s,h),!0}return!1}function ih(i,s,o,h){if(h={lane:2,revertLane:jh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},no(i)){if(s)throw Error(n(479))}else s=bc(i,o,h,2),s!==null&&ai(s,i,2)}function no(i){var s=i.alternate;return i===Bt||s!==null&&s===Bt}function kp(i,s){gs=Ql=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function jp(i,s,o){if((o&4194048)!==0){var h=s.lanes;h&=i.pendingLanes,o|=h,s.lanes=o,Pd(i,o)}}var wa={readContext:Be,use:Jl,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye};wa.useEffectEvent=ye;var zp={readContext:Be,use:Jl,useCallback:function(i,s){return Qe().memoizedState=[i,s===void 0?null:s],i},useContext:Be,useEffect:yp,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,eo(4194308,4,_p.bind(null,s,i),o)},useLayoutEffect:function(i,s){return eo(4194308,4,i,s)},useInsertionEffect:function(i,s){eo(4,2,i,s)},useMemo:function(i,s){var o=Qe();s=s===void 0?null:s;var h=i();if(Er){De(!0);try{i()}finally{De(!1)}}return o.memoizedState=[h,s],h},useReducer:function(i,s,o){var h=Qe();if(o!==void 0){var p=o(s);if(Er){De(!0);try{o(s)}finally{De(!1)}}}else p=s;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=S_.bind(null,Bt,i),[h.memoizedState,i]},useRef:function(i){var s=Qe();return i={current:i},s.memoizedState=i},useState:function(i){i=Kc(i);var s=i.queue,o=Op.bind(null,Bt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:Zc,useDeferredValue:function(i,s){var o=Qe();return Jc(o,i,s)},useTransition:function(){var i=Kc(!1);return i=Tp.bind(null,Bt,i.queue,!0,!1),Qe().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var h=Bt,p=Qe();if(Gt){if(o===void 0)throw Error(n(407));o=o()}else{if(o=s(),le===null)throw Error(n(349));(qt&127)!==0||ip(h,s,o)}p.memoizedState=o;var g={value:o,getSnapshot:s};return p.queue=g,yp(rp.bind(null,h,g,i),[i]),h.flags|=2048,bs(9,{destroy:void 0},np.bind(null,h,g,o,s),null),o},useId:function(){var i=Qe(),s=le.identifierPrefix;if(Gt){var o=Yi,h=Hi;o=(h&~(1<<32-he(h)-1)).toString(32)+o,s="_"+s+"R_"+o,o=$l++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=v_++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:eh,useFormState:dp,useActionState:dp,useOptimistic:function(i){var s=Qe();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=ih.bind(null,Bt,!0,o),o.dispatch=s,[i,s]},useMemoCache:qc,useCacheRefresh:function(){return Qe().memoizedState=x_.bind(null,Bt)},useEffectEvent:function(i){var s=Qe(),o={impl:i};return s.memoizedState=o,function(){if((Jt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}},nh={readContext:Be,use:Jl,useCallback:Ep,useContext:Be,useEffect:$c,useImperativeHandle:wp,useInsertionEffect:xp,useLayoutEffect:Sp,useMemo:Cp,useReducer:to,useRef:gp,useState:function(){return to(hn)},useDebugValue:Zc,useDeferredValue:function(i,s){var o=_e();return Mp(o,ie.memoizedState,i,s)},useTransition:function(){var i=to(hn)[0],s=_e().memoizedState;return[typeof i=="boolean"?i:Sa(i),s]},useSyncExternalStore:ep,useId:Dp,useHostTransitionStatus:eh,useFormState:vp,useActionState:vp,useOptimistic:function(i,s){var o=_e();return lp(o,ie,i,s)},useMemoCache:qc,useCacheRefresh:Np};nh.useEffectEvent=bp;var Lp={readContext:Be,use:Jl,useCallback:Ep,useContext:Be,useEffect:$c,useImperativeHandle:wp,useInsertionEffect:xp,useLayoutEffect:Sp,useMemo:Cp,useReducer:Gc,useRef:gp,useState:function(){return Gc(hn)},useDebugValue:Zc,useDeferredValue:function(i,s){var o=_e();return ie===null?Jc(o,i,s):Mp(o,ie.memoizedState,i,s)},useTransition:function(){var i=Gc(hn)[0],s=_e().memoizedState;return[typeof i=="boolean"?i:Sa(i),s]},useSyncExternalStore:ep,useId:Dp,useHostTransitionStatus:eh,useFormState:mp,useActionState:mp,useOptimistic:function(i,s){var o=_e();return ie!==null?lp(o,ie,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:qc,useCacheRefresh:Np};Lp.useEffectEvent=bp;function rh(i,s,o,h){s=i.memoizedState,o=o(h,s),o=o==null?s:m({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var sh={enqueueSetState:function(i,s,o){i=i._reactInternals;var h=yi(),p=Fn(h);p.payload=s,o!=null&&(p.callback=o),s=Pn(i,p,h),s!==null&&(ai(s,i,h),ga(s,i,h))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var h=yi(),p=Fn(h);p.tag=1,p.payload=s,o!=null&&(p.callback=o),s=Pn(i,p,h),s!==null&&(ai(s,i,h),ga(s,i,h))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=yi(),h=Fn(o);h.tag=2,s!=null&&(h.callback=s),s=Pn(i,h,o),s!==null&&(ai(s,i,o),ga(s,i,o))}};function Bp(i,s,o,h,p,g,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,g,E):s.prototype&&s.prototype.isPureReactComponent?!ua(o,h)||!ua(p,g):!0}function Fp(i,s,o,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,h),s.state!==i&&sh.enqueueReplaceState(s,s.state,null)}function Cr(i,s){var o=s;if("ref"in s){o={};for(var h in s)h!=="ref"&&(o[h]=s[h])}if(i=i.defaultProps){o===s&&(o=m({},o));for(var p in i)o[p]===void 0&&(o[p]=i[p])}return o}function Pp(i){zl(i)}function Ip(i){console.error(i)}function Vp(i){zl(i)}function ro(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function Up(i,s,o){try{var h=i.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function ah(i,s,o){return o=Fn(o),o.tag=3,o.payload={element:null},o.callback=function(){ro(i,s)},o}function Hp(i){return i=Fn(i),i.tag=3,i}function Yp(i,s,o,h){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=h.value;i.payload=function(){return p(g)},i.callback=function(){Up(s,o,h)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Up(s,o,h),typeof p!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function __(i,s,o,h,p){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=o.alternate,s!==null&&hs(s,o,p,!0),o=vi.current,o!==null){switch(o.tag){case 31:case 13:return Ri===null?go():o.alternate===null&&be===0&&(be=3),o.flags&=-257,o.flags|=65536,o.lanes=p,h===Wl?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([h]):s.add(h),Nh(i,h,p)),!1;case 22:return o.flags|=65536,h===Wl?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([h]):o.add(h)),Nh(i,h,p)),!1}throw Error(n(435,o.tag))}return Nh(i,h,p),go(),!1}if(Gt)return s=vi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,h!==Cc&&(i=Error(n(422),{cause:h}),fa(Ci(i,o)))):(h!==Cc&&(s=Error(n(423),{cause:h}),fa(Ci(s,o))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Ci(h,o),p=ah(i.stateNode,h,p),Lc(i,p),be!==4&&(be=2)),!1;var g=Error(n(520),{cause:h});if(g=Ci(g,o),Na===null?Na=[g]:Na.push(g),be!==4&&(be=2),s===null)return!0;h=Ci(h,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=p&-p,o.lanes|=i,i=ah(o.stateNode,h,i),Lc(o,i),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Wn===null||!Wn.has(g))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Hp(p),Yp(p,i,o,h),Lc(o,p),!1}o=o.return}while(o!==null);return!1}var lh=Error(n(461)),Me=!1;function Fe(i,s,o,h){s.child=i===null?Gv(s,null,o,h):wr(s,i.child,o,h)}function Wp(i,s,o,h,p){o=o.render;var g=s.ref;if("ref"in h){var E={};for(var A in h)A!=="ref"&&(E[A]=h[A])}else E=h;return br(s),h=Uc(i,s,o,E,g,p),A=Hc(),i!==null&&!Me?(Yc(i,s,p),fn(i,s,p)):(Gt&&A&&wc(s),s.flags|=1,Fe(i,s,h,p),s.child)}function qp(i,s,o,h,p){if(i===null){var g=o.type;return typeof g=="function"&&!xc(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Xp(i,s,g,h,p)):(i=Pl(o.type,null,h,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!ph(i,p)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:ua,o(E,h)&&i.ref===s.ref)return fn(i,s,p)}return s.flags|=1,i=an(g,h),i.ref=s.ref,i.return=s,s.child=i}function Xp(i,s,o,h,p){if(i!==null){var g=i.memoizedProps;if(ua(g,h)&&i.ref===s.ref)if(Me=!1,s.pendingProps=h=g,ph(i,p))(i.flags&131072)!==0&&(Me=!0);else return s.lanes=i.lanes,fn(i,s,p)}return oh(i,s,o,h,p)}function Gp(i,s,o,h){var p=h.children,g=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,i!==null){for(h=s.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~g}else h=0,s.child=null;return Kp(i,s,g,o,h)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Hl(s,g!==null?g.cachePool:null),g!==null?$v(s,g):Fc(),Zv(s);else return h=s.lanes=536870912,Kp(i,s,g!==null?g.baseLanes|o:o,o,h)}else g!==null?(Hl(s,g.cachePool),$v(s,g),Vn(),s.memoizedState=null):(i!==null&&Hl(s,null),Fc(),Vn());return Fe(i,s,p,o),s.child}function Ea(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Kp(i,s,o,h,p){var g=Oc();return g=g===null?null:{parent:Ee._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},i!==null&&Hl(s,null),Fc(),Zv(s),i!==null&&hs(i,s,h,!0),s.childLanes=p,null}function so(i,s){return s=lo({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Qp(i,s,o){return wr(s,i.child,null,o),i=so(s,s.pendingProps),i.flags|=2,pi(s),s.memoizedState=null,i}function w_(i,s,o){var h=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Gt){if(h.mode==="hidden")return i=so(s,h),s.lanes=536870912,Ea(null,i);if(Ic(s),(i=fe)?(i=og(i,Ai),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:kn!==null?{id:Hi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},o=kv(i),o.return=s,s.child=o,Le=s,fe=null)):i=null,i===null)throw zn(s);return s.lanes=536870912,null}return so(s,h)}var g=i.memoizedState;if(g!==null){var E=g.dehydrated;if(Ic(s),p)if(s.flags&256)s.flags&=-257,s=Qp(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(Me||hs(i,s,o,!1),p=(o&i.childLanes)!==0,Me||p){if(h=le,h!==null&&(E=Id(h,o),E!==0&&E!==g.retryLane))throw g.retryLane=E,pr(i,E),ai(h,i,E),lh;go(),s=Qp(i,s,o)}else i=g.treeContext,fe=Di(E.nextSibling),Le=s,Gt=!0,jn=null,Ai=!1,i!==null&&Lv(s,i),s=so(s,h),s.flags|=4096;return s}return i=an(i.child,{mode:h.mode,children:h.children}),i.ref=s.ref,s.child=i,i.return=s,i}function ao(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function oh(i,s,o,h,p){return br(s),o=Uc(i,s,o,h,void 0,p),h=Hc(),i!==null&&!Me?(Yc(i,s,p),fn(i,s,p)):(Gt&&h&&wc(s),s.flags|=1,Fe(i,s,o,p),s.child)}function $p(i,s,o,h,p,g){return br(s),s.updateQueue=null,o=tp(s,h,o,p),Jv(i),h=Hc(),i!==null&&!Me?(Yc(i,s,g),fn(i,s,g)):(Gt&&h&&wc(s),s.flags|=1,Fe(i,s,o,g),s.child)}function Zp(i,s,o,h,p){if(br(s),s.stateNode===null){var g=ls,E=o.contextType;typeof E=="object"&&E!==null&&(g=Be(E)),g=new o(h,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=sh,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=h,g.state=s.memoizedState,g.refs={},jc(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?Be(E):ls,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(rh(s,o,E,h),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&sh.enqueueReplaceState(g,g.state,null),ba(s,h,g,p),ya(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(i===null){g=s.stateNode;var A=s.memoizedProps,P=Cr(o,A);g.props=P;var K=g.context,lt=o.contextType;E=ls,typeof lt=="object"&&lt!==null&&(E=Be(lt));var ht=o.getDerivedStateFromProps;lt=typeof ht=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,lt||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||K!==E)&&Fp(s,g,h,E),Bn=!1;var Q=s.memoizedState;g.state=Q,ba(s,h,g,p),ya(),K=s.memoizedState,A||Q!==K||Bn?(typeof ht=="function"&&(rh(s,o,ht,h),K=s.memoizedState),(P=Bn||Bp(s,o,P,h,Q,K,E))?(lt||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=K),g.props=h,g.state=K,g.context=E,h=P):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{g=s.stateNode,zc(i,s),E=s.memoizedProps,lt=Cr(o,E),g.props=lt,ht=s.pendingProps,Q=g.context,K=o.contextType,P=ls,typeof K=="object"&&K!==null&&(P=Be(K)),A=o.getDerivedStateFromProps,(K=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==ht||Q!==P)&&Fp(s,g,h,P),Bn=!1,Q=s.memoizedState,g.state=Q,ba(s,h,g,p),ya();var nt=s.memoizedState;E!==ht||Q!==nt||Bn||i!==null&&i.dependencies!==null&&Vl(i.dependencies)?(typeof A=="function"&&(rh(s,o,A,h),nt=s.memoizedState),(lt=Bn||Bp(s,o,lt,h,Q,nt,P)||i!==null&&i.dependencies!==null&&Vl(i.dependencies))?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(h,nt,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(h,nt,P)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=nt),g.props=h,g.state=nt,g.context=P,h=lt):(typeof g.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(s.flags|=1024),h=!1)}return g=h,ao(i,s),h=(s.flags&128)!==0,g||h?(g=s.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&h?(s.child=wr(s,i.child,null,p),s.child=wr(s,null,o,p)):Fe(i,s,o,p),s.memoizedState=g.state,i=s.child):i=fn(i,s,p),i}function Jp(i,s,o,h){return gr(),s.flags|=256,Fe(i,s,o,h),s.child}var uh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ch(i){return{baseLanes:i,cachePool:Uv()}}function hh(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=gi),i}function tm(i,s,o){var h=s.pendingProps,p=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=i!==null&&i.memoizedState===null?!1:(Se.current&2)!==0),E&&(p=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,i===null){if(Gt){if(p?In(s):Vn(),(i=fe)?(i=og(i,Ai),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:kn!==null?{id:Hi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},o=kv(i),o.return=s,s.child=o,Le=s,fe=null)):i=null,i===null)throw zn(s);return Xh(i)?s.lanes=32:s.lanes=536870912,null}var A=h.children;return h=h.fallback,p?(Vn(),p=s.mode,A=lo({mode:"hidden",children:A},p),h=mr(h,p,o,null),A.return=s,h.return=s,A.sibling=h,s.child=A,h=s.child,h.memoizedState=ch(o),h.childLanes=hh(i,E,o),s.memoizedState=uh,Ea(null,h)):(In(s),fh(s,A))}var P=i.memoizedState;if(P!==null&&(A=P.dehydrated,A!==null)){if(g)s.flags&256?(In(s),s.flags&=-257,s=dh(i,s,o)):s.memoizedState!==null?(Vn(),s.child=i.child,s.flags|=128,s=null):(Vn(),A=h.fallback,p=s.mode,h=lo({mode:"visible",children:h.children},p),A=mr(A,p,o,null),A.flags|=2,h.return=s,A.return=s,h.sibling=A,s.child=h,wr(s,i.child,null,o),h=s.child,h.memoizedState=ch(o),h.childLanes=hh(i,E,o),s.memoizedState=uh,s=Ea(null,h));else if(In(s),Xh(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var K=E.dgst;E=K,h=Error(n(419)),h.stack="",h.digest=E,fa({value:h,source:null,stack:null}),s=dh(i,s,o)}else if(Me||hs(i,s,o,!1),E=(o&i.childLanes)!==0,Me||E){if(E=le,E!==null&&(h=Id(E,o),h!==0&&h!==P.retryLane))throw P.retryLane=h,pr(i,h),ai(E,i,h),lh;qh(A)||go(),s=dh(i,s,o)}else qh(A)?(s.flags|=192,s.child=i.child,s=null):(i=P.treeContext,fe=Di(A.nextSibling),Le=s,Gt=!0,jn=null,Ai=!1,i!==null&&Lv(s,i),s=fh(s,h.children),s.flags|=4096);return s}return p?(Vn(),A=h.fallback,p=s.mode,P=i.child,K=P.sibling,h=an(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,K!==null?A=an(K,A):(A=mr(A,p,o,null),A.flags|=2),A.return=s,h.return=s,h.sibling=A,s.child=h,Ea(null,h),h=s.child,A=i.child.memoizedState,A===null?A=ch(o):(p=A.cachePool,p!==null?(P=Ee._currentValue,p=p.parent!==P?{parent:P,pool:P}:p):p=Uv(),A={baseLanes:A.baseLanes|o,cachePool:p}),h.memoizedState=A,h.childLanes=hh(i,E,o),s.memoizedState=uh,Ea(i.child,h)):(In(s),o=i.child,i=o.sibling,o=an(o,{mode:"visible",children:h.children}),o.return=s,o.sibling=null,i!==null&&(E=s.deletions,E===null?(s.deletions=[i],s.flags|=16):E.push(i)),s.child=o,s.memoizedState=null,o)}function fh(i,s){return s=lo({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function lo(i,s){return i=di(22,i,null,s),i.lanes=0,i}function dh(i,s,o){return wr(s,i.child,null,o),i=fh(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function em(i,s,o){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),Ac(i.return,s,o)}function vh(i,s,o,h,p,g){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:p,treeForkCount:g}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=o,E.tailMode=p,E.treeForkCount=g)}function im(i,s,o){var h=s.pendingProps,p=h.revealOrder,g=h.tail;h=h.children;var E=Se.current,A=(E&2)!==0;if(A?(E=E&1|2,s.flags|=128):E&=1,F(Se,E),Fe(i,s,h,o),h=Gt?ha:0,!A&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&em(i,o,s);else if(i.tag===19)em(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(o=s.child,p=null;o!==null;)i=o.alternate,i!==null&&Kl(i)===null&&(p=o),o=o.sibling;o=p,o===null?(p=s.child,s.child=null):(p=o.sibling,o.sibling=null),vh(s,!1,p,o,g,h);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&Kl(i)===null){s.child=p;break}i=p.sibling,p.sibling=o,o=p,p=i}vh(s,!0,o,null,g,h);break;case"together":vh(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function fn(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),Yn|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(hs(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,o=an(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=an(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function ph(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Vl(i)))}function E_(i,s,o){switch(s.tag){case 3:vt(s,s.stateNode.containerInfo),Ln(s,Ee,i.memoizedState.cache),gr();break;case 27:case 5:ut(s);break;case 4:vt(s,s.stateNode.containerInfo);break;case 10:Ln(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ic(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(In(s),s.flags|=128,null):(o&s.child.childLanes)!==0?tm(i,s,o):(In(s),i=fn(i,s,o),i!==null?i.sibling:null);In(s);break;case 19:var p=(i.flags&128)!==0;if(h=(o&s.childLanes)!==0,h||(hs(i,s,o,!1),h=(o&s.childLanes)!==0),p){if(h)return im(i,s,o);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),F(Se,Se.current),h)break;return null;case 22:return s.lanes=0,Gp(i,s,o,s.pendingProps);case 24:Ln(s,Ee,i.memoizedState.cache)}return fn(i,s,o)}function nm(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Me=!0;else{if(!ph(i,o)&&(s.flags&128)===0)return Me=!1,E_(i,s,o);Me=(i.flags&131072)!==0}else Me=!1,Gt&&(s.flags&1048576)!==0&&zv(s,ha,s.index);switch(s.lanes=0,s.tag){case 16:t:{var h=s.pendingProps;if(i=Sr(s.elementType),s.type=i,typeof i=="function")xc(i)?(h=Cr(i,h),s.tag=1,s=Zp(null,s,i,h,o)):(s.tag=0,s=oh(null,s,i,h,o));else{if(i!=null){var p=i.$$typeof;if(p===R){s.tag=11,s=Wp(null,s,i,h,o);break t}else if(p===D){s.tag=14,s=qp(null,s,i,h,o);break t}}throw s=X(i)||i,Error(n(306,s,""))}}return s;case 0:return oh(i,s,s.type,s.pendingProps,o);case 1:return h=s.type,p=Cr(h,s.pendingProps),Zp(i,s,h,p,o);case 3:t:{if(vt(s,s.stateNode.containerInfo),i===null)throw Error(n(387));h=s.pendingProps;var g=s.memoizedState;p=g.element,zc(i,s),ba(s,h,null,o);var E=s.memoizedState;if(h=E.cache,Ln(s,Ee,h),h!==g.cache&&Rc(s,[Ee],o,!0),ya(),h=E.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Jp(i,s,h,o);break t}else if(h!==p){p=Ci(Error(n(424)),s),fa(p),s=Jp(i,s,h,o);break t}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,fe=Di(i.firstChild),Le=s,Gt=!0,jn=null,Ai=!0,o=Gv(s,null,h,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(gr(),h===p){s=fn(i,s,o);break t}Fe(i,s,h,o)}s=s.child}return s;case 26:return ao(i,s),i===null?(o=vg(s.type,null,s.pendingProps,null))?s.memoizedState=o:Gt||(o=s.type,i=s.pendingProps,h=Eo(J.current).createElement(o),h[ze]=s,h[ti]=i,Pe(h,o,i),Ne(h),s.stateNode=h):s.memoizedState=vg(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ut(s),i===null&&Gt&&(h=s.stateNode=hg(s.type,s.pendingProps,J.current),Le=s,Ai=!0,p=fe,Kn(s.type)?(Gh=p,fe=Di(h.firstChild)):fe=p),Fe(i,s,s.pendingProps.children,o),ao(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Gt&&((p=h=fe)&&(h=t1(h,s.type,s.pendingProps,Ai),h!==null?(s.stateNode=h,Le=s,fe=Di(h.firstChild),Ai=!1,p=!0):p=!1),p||zn(s)),ut(s),p=s.type,g=s.pendingProps,E=i!==null?i.memoizedProps:null,h=g.children,Hh(p,g)?h=null:E!==null&&Hh(p,E)&&(s.flags|=32),s.memoizedState!==null&&(p=Uc(i,s,p_,null,null,o),Pa._currentValue=p),ao(i,s),Fe(i,s,h,o),s.child;case 6:return i===null&&Gt&&((i=o=fe)&&(o=e1(o,s.pendingProps,Ai),o!==null?(s.stateNode=o,Le=s,fe=null,i=!0):i=!1),i||zn(s)),null;case 13:return tm(i,s,o);case 4:return vt(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=wr(s,null,h,o):Fe(i,s,h,o),s.child;case 11:return Wp(i,s,s.type,s.pendingProps,o);case 7:return Fe(i,s,s.pendingProps,o),s.child;case 8:return Fe(i,s,s.pendingProps.children,o),s.child;case 12:return Fe(i,s,s.pendingProps.children,o),s.child;case 10:return h=s.pendingProps,Ln(s,s.type,h.value),Fe(i,s,h.children,o),s.child;case 9:return p=s.type._context,h=s.pendingProps.children,br(s),p=Be(p),h=h(p),s.flags|=1,Fe(i,s,h,o),s.child;case 14:return qp(i,s,s.type,s.pendingProps,o);case 15:return Xp(i,s,s.type,s.pendingProps,o);case 19:return im(i,s,o);case 31:return w_(i,s,o);case 22:return Gp(i,s,o,s.pendingProps);case 24:return br(s),h=Be(Ee),i===null?(p=Oc(),p===null&&(p=le,g=Dc(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=o),p=g),s.memoizedState={parent:h,cache:p},jc(s),Ln(s,Ee,p)):((i.lanes&o)!==0&&(zc(i,s),ba(s,null,null,o),ya()),p=i.memoizedState,g=s.memoizedState,p.parent!==h?(p={parent:h,cache:h},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Ln(s,Ee,h)):(h=g.cache,Ln(s,Ee,h),h!==p.cache&&Rc(s,[Ee],o,!0))),Fe(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function dn(i){i.flags|=4}function mh(i,s,o,h,p){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(Dm())i.flags|=8192;else throw _r=Wl,kc}else i.flags&=-16777217}function rm(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!bg(s))if(Dm())i.flags|=8192;else throw _r=Wl,kc}function oo(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Bd():536870912,i.lanes|=s,ws|=s)}function Ca(i,s){if(!Gt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function de(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,h=0;if(s)for(var p=i.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=o,s}function C_(i,s,o){var h=s.pendingProps;switch(Ec(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(s),null;case 1:return de(s),null;case 3:return o=s.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),un(Ee),pt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(cs(s)?dn(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mc())),de(s),null;case 26:var p=s.type,g=s.memoizedState;return i===null?(dn(s),g!==null?(de(s),rm(s,g)):(de(s),mh(s,p,null,h,o))):g?g!==i.memoizedState?(dn(s),de(s),rm(s,g)):(de(s),s.flags&=-16777217):(i=i.memoizedProps,i!==h&&dn(s),de(s),mh(s,p,i,h,o)),null;case 27:if(dt(s),o=J.current,p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==h&&dn(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return de(s),null}i=q.current,cs(s)?Bv(s):(i=hg(p,h,o),s.stateNode=i,dn(s))}return de(s),null;case 5:if(dt(s),p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==h&&dn(s);else{if(!h){if(s.stateNode===null)throw Error(n(166));return de(s),null}if(g=q.current,cs(s))Bv(s);else{var E=Eo(J.current);switch(g){case 1:g=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=E.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof h.is=="string"?E.createElement("select",{is:h.is}):E.createElement("select"),h.multiple?g.multiple=!0:h.size&&(g.size=h.size);break;default:g=typeof h.is=="string"?E.createElement(p,{is:h.is}):E.createElement(p)}}g[ze]=s,g[ti]=h;t:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)g.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break t;for(;E.sibling===null;){if(E.return===null||E.return===s)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=g;t:switch(Pe(g,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&dn(s)}}return de(s),mh(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==h&&dn(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(n(166));if(i=J.current,cs(s)){if(i=s.stateNode,o=s.memoizedProps,h=null,p=Le,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[ze]=s,i=!!(i.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||tg(i.nodeValue,o)),i||zn(s,!0)}else i=Eo(i).createTextNode(h),i[ze]=s,s.stateNode=i}return de(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(h=cs(s),o!==null){if(i===null){if(!h)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[ze]=s}else gr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;de(s),i=!1}else o=Mc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(pi(s),s):(pi(s),null);if((s.flags&128)!==0)throw Error(n(558))}return de(s),null;case 13:if(h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=cs(s),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[ze]=s}else gr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;de(s),p=!1}else p=Mc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(pi(s),s):(pi(s),null)}return pi(s),(s.flags&128)!==0?(s.lanes=o,s):(o=h!==null,i=i!==null&&i.memoizedState!==null,o&&(h=s.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),g=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(g=h.memoizedState.cachePool.pool),g!==p&&(h.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),oo(s,s.updateQueue),de(s),null);case 4:return pt(),i===null&&Fh(s.stateNode.containerInfo),de(s),null;case 10:return un(s.type),de(s),null;case 19:if(L(Se),h=s.memoizedState,h===null)return de(s),null;if(p=(s.flags&128)!==0,g=h.rendering,g===null)if(p)Ca(h,!1);else{if(be!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=Kl(i),g!==null){for(s.flags|=128,Ca(h,!1),i=g.updateQueue,s.updateQueue=i,oo(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)Ov(o,i),o=o.sibling;return F(Se,Se.current&1|2),Gt&&ln(s,h.treeForkCount),s.child}i=i.sibling}h.tail!==null&&Qt()>vo&&(s.flags|=128,p=!0,Ca(h,!1),s.lanes=4194304)}else{if(!p)if(i=Kl(g),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,s.updateQueue=i,oo(s,i),Ca(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Gt)return de(s),null}else 2*Qt()-h.renderingStartTime>vo&&o!==536870912&&(s.flags|=128,p=!0,Ca(h,!1),s.lanes=4194304);h.isBackwards?(g.sibling=s.child,s.child=g):(i=h.last,i!==null?i.sibling=g:s.child=g,h.last=g)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Qt(),i.sibling=null,o=Se.current,F(Se,p?o&1|2:o&1),Gt&&ln(s,h.treeForkCount),i):(de(s),null);case 22:case 23:return pi(s),Pc(),h=s.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(o&536870912)!==0&&(s.flags&128)===0&&(de(s),s.subtreeFlags&6&&(s.flags|=8192)):de(s),o=s.updateQueue,o!==null&&oo(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==o&&(s.flags|=2048),i!==null&&L(xr),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),un(Ee),de(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function M_(i,s){switch(Ec(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return un(Ee),pt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return dt(s),null;case 31:if(s.memoizedState!==null){if(pi(s),s.alternate===null)throw Error(n(340));gr()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(pi(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));gr()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return L(Se),null;case 4:return pt(),null;case 10:return un(s.type),null;case 22:case 23:return pi(s),Pc(),i!==null&&L(xr),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return un(Ee),null;case 25:return null;default:return null}}function sm(i,s){switch(Ec(s),s.tag){case 3:un(Ee),pt();break;case 26:case 27:case 5:dt(s);break;case 4:pt();break;case 31:s.memoizedState!==null&&pi(s);break;case 13:pi(s);break;case 19:L(Se);break;case 10:un(s.type);break;case 22:case 23:pi(s),Pc(),i!==null&&L(xr);break;case 24:un(Ee)}}function Ma(i,s){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var p=h.next;o=p;do{if((o.tag&i)===i){h=void 0;var g=o.create,E=o.inst;h=g(),E.destroy=h}o=o.next}while(o!==p)}}catch(A){ee(s,s.return,A)}}function Un(i,s,o){try{var h=s.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var g=p.next;h=g;do{if((h.tag&i)===i){var E=h.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,p=s;var P=o,K=A;try{K()}catch(lt){ee(p,P,lt)}}}h=h.next}while(h!==g)}}catch(lt){ee(s,s.return,lt)}}function am(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{Qv(s,o)}catch(h){ee(i,i.return,h)}}}function lm(i,s,o){o.props=Cr(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(h){ee(i,s,h)}}function Ta(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof o=="function"?i.refCleanup=o(h):o.current=h}}catch(p){ee(i,s,p)}}function Wi(i,s){var o=i.ref,h=i.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(p){ee(i,s,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){ee(i,s,p)}else o.current=null}function om(i){var s=i.type,o=i.memoizedProps,h=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break t;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(p){ee(i,i.return,p)}}function gh(i,s,o){try{var h=i.stateNode;G_(h,i.type,o,s),h[ti]=s}catch(p){ee(i,i.return,p)}}function um(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Kn(i.type)||i.tag===4}function yh(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||um(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Kn(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bh(i,s,o){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=rn));else if(h!==4&&(h===27&&Kn(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(bh(i,s,o),i=i.sibling;i!==null;)bh(i,s,o),i=i.sibling}function uo(i,s,o){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(h!==4&&(h===27&&Kn(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(uo(i,s,o),i=i.sibling;i!==null;)uo(i,s,o),i=i.sibling}function cm(i){var s=i.stateNode,o=i.memoizedProps;try{for(var h=i.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Pe(s,h,o),s[ze]=i,s[ti]=o}catch(g){ee(i,i.return,g)}}var vn=!1,Te=!1,xh=!1,hm=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function T_(i,s){if(i=i.containerInfo,Vh=No,i=wv(i),dc(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var p=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var E=0,A=-1,P=-1,K=0,lt=0,ht=i,Q=null;e:for(;;){for(var nt;ht!==o||p!==0&&ht.nodeType!==3||(A=E+p),ht!==g||h!==0&&ht.nodeType!==3||(P=E+h),ht.nodeType===3&&(E+=ht.nodeValue.length),(nt=ht.firstChild)!==null;)Q=ht,ht=nt;for(;;){if(ht===i)break e;if(Q===o&&++K===p&&(A=E),Q===g&&++lt===h&&(P=E),(nt=ht.nextSibling)!==null)break;ht=Q,Q=ht.parentNode}ht=nt}o=A===-1||P===-1?null:{start:A,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Uh={focusedElem:i,selectionRange:o},No=!1,Oe=s;Oe!==null;)if(s=Oe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Oe=i;else for(;Oe!==null;){switch(s=Oe,g=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)p=i[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=s,p=g.memoizedProps,g=g.memoizedState,h=o.stateNode;try{var Et=Cr(o.type,p);i=h.getSnapshotBeforeUpdate(Et,g),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ot){ee(o,o.return,Ot)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Wh(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Wh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,Oe=i;break}Oe=s.return}}function fm(i,s,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:mn(i,o),h&4&&Ma(5,o);break;case 1:if(mn(i,o),h&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(E){ee(o,o.return,E)}else{var p=Cr(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(p,s,i.__reactInternalSnapshotBeforeUpdate)}catch(E){ee(o,o.return,E)}}h&64&&am(o),h&512&&Ta(o,o.return);break;case 3:if(mn(i,o),h&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Qv(i,s)}catch(E){ee(o,o.return,E)}}break;case 27:s===null&&h&4&&cm(o);case 26:case 5:mn(i,o),s===null&&h&4&&om(o),h&512&&Ta(o,o.return);break;case 12:mn(i,o);break;case 31:mn(i,o),h&4&&pm(i,o);break;case 13:mn(i,o),h&4&&mm(i,o),h&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=L_.bind(null,o),i1(i,o))));break;case 22:if(h=o.memoizedState!==null||vn,!h){s=s!==null&&s.memoizedState!==null||Te,p=vn;var g=Te;vn=h,(Te=s)&&!g?gn(i,o,(o.subtreeFlags&8772)!==0):mn(i,o),vn=p,Te=g}break;case 30:break;default:mn(i,o)}}function dm(i){var s=i.alternate;s!==null&&(i.alternate=null,dm(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Qu(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ve=null,ii=!1;function pn(i,s,o){for(o=o.child;o!==null;)vm(i,s,o),o=o.sibling}function vm(i,s,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Ze,o)}catch{}switch(o.tag){case 26:Te||Wi(o,s),pn(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Te||Wi(o,s);var h=ve,p=ii;Kn(o.type)&&(ve=o.stateNode,ii=!1),pn(i,s,o),La(o.stateNode),ve=h,ii=p;break;case 5:Te||Wi(o,s);case 6:if(h=ve,p=ii,ve=null,pn(i,s,o),ve=h,ii=p,ve!==null)if(ii)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(o.stateNode)}catch(g){ee(o,s,g)}else try{ve.removeChild(o.stateNode)}catch(g){ee(o,s,g)}break;case 18:ve!==null&&(ii?(i=ve,ag(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Ns(i)):ag(ve,o.stateNode));break;case 4:h=ve,p=ii,ve=o.stateNode.containerInfo,ii=!0,pn(i,s,o),ve=h,ii=p;break;case 0:case 11:case 14:case 15:Un(2,o,s),Te||Un(4,o,s),pn(i,s,o);break;case 1:Te||(Wi(o,s),h=o.stateNode,typeof h.componentWillUnmount=="function"&&lm(o,s,h)),pn(i,s,o);break;case 21:pn(i,s,o);break;case 22:Te=(h=Te)||o.memoizedState!==null,pn(i,s,o),Te=h;break;default:pn(i,s,o)}}function pm(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ns(i)}catch(o){ee(s,s.return,o)}}}function mm(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ns(i)}catch(o){ee(s,s.return,o)}}function A_(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new hm),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new hm),s;default:throw Error(n(435,i.tag))}}function co(i,s){var o=A_(i);s.forEach(function(h){if(!o.has(h)){o.add(h);var p=B_.bind(null,i,h);h.then(p,p)}})}function ni(i,s){var o=s.deletions;if(o!==null)for(var h=0;h<o.length;h++){var p=o[h],g=i,E=s,A=E;t:for(;A!==null;){switch(A.tag){case 27:if(Kn(A.type)){ve=A.stateNode,ii=!1;break t}break;case 5:ve=A.stateNode,ii=!1;break t;case 3:case 4:ve=A.stateNode.containerInfo,ii=!0;break t}A=A.return}if(ve===null)throw Error(n(160));vm(g,E,p),ve=null,ii=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gm(s,i),s=s.sibling}var Bi=null;function gm(i,s){var o=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ni(s,i),ri(i),h&4&&(Un(3,i,i.return),Ma(3,i),Un(5,i,i.return));break;case 1:ni(s,i),ri(i),h&512&&(Te||o===null||Wi(o,o.return)),h&64&&vn&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var p=Bi;if(ni(s,i),ri(i),h&512&&(Te||o===null||Wi(o,o.return)),h&4){var g=o!==null?o.memoizedState:null;if(h=i.memoizedState,o===null)if(h===null)if(i.stateNode===null){t:{h=i.type,o=i.memoizedProps,p=p.ownerDocument||p;e:switch(h){case"title":g=p.getElementsByTagName("title")[0],(!g||g[ta]||g[ze]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(h),p.head.insertBefore(g,p.querySelector("head > title"))),Pe(g,h,o),g[ze]=i,Ne(g),h=g;break t;case"link":var E=gg("link","href",p).get(h+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break e}}g=p.createElement(h),Pe(g,h,o),p.head.appendChild(g);break;case"meta":if(E=gg("meta","content",p).get(h+(o.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break e}}g=p.createElement(h),Pe(g,h,o),p.head.appendChild(g);break;default:throw Error(n(468,h))}g[ze]=i,Ne(g),h=g}i.stateNode=h}else yg(p,i.type,i.stateNode);else i.stateNode=mg(p,h,i.memoizedProps);else g!==h?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,h===null?yg(p,i.type,i.stateNode):mg(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&gh(i,i.memoizedProps,o.memoizedProps)}break;case 27:ni(s,i),ri(i),h&512&&(Te||o===null||Wi(o,o.return)),o!==null&&h&4&&gh(i,i.memoizedProps,o.memoizedProps);break;case 5:if(ni(s,i),ri(i),h&512&&(Te||o===null||Wi(o,o.return)),i.flags&32){p=i.stateNode;try{ts(p,"")}catch(Et){ee(i,i.return,Et)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,gh(i,p,o!==null?o.memoizedProps:p)),h&1024&&(xh=!0);break;case 6:if(ni(s,i),ri(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,o=i.stateNode;try{o.nodeValue=h}catch(Et){ee(i,i.return,Et)}}break;case 3:if(To=null,p=Bi,Bi=Co(s.containerInfo),ni(s,i),Bi=p,ri(i),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Ns(s.containerInfo)}catch(Et){ee(i,i.return,Et)}xh&&(xh=!1,ym(i));break;case 4:h=Bi,Bi=Co(i.stateNode.containerInfo),ni(s,i),ri(i),Bi=h;break;case 12:ni(s,i),ri(i);break;case 31:ni(s,i),ri(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,co(i,h)));break;case 13:ni(s,i),ri(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fo=Qt()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,co(i,h)));break;case 22:p=i.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,K=vn,lt=Te;if(vn=K||p,Te=lt||P,ni(s,i),Te=lt,vn=K,ri(i),h&8192)t:for(s=i.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(o===null||P||vn||Te||Mr(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){P=o=s;try{if(g=P.stateNode,p)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=P.stateNode;var ht=P.memoizedProps.style,Q=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;A.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Et){ee(P,P.return,Et)}}}else if(s.tag===6){if(o===null){P=s;try{P.stateNode.nodeValue=p?"":P.memoizedProps}catch(Et){ee(P,P.return,Et)}}}else if(s.tag===18){if(o===null){P=s;try{var nt=P.stateNode;p?lg(nt,!0):lg(P.stateNode,!1)}catch(Et){ee(P,P.return,Et)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=i.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,co(i,o))));break;case 19:ni(s,i),ri(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,co(i,h)));break;case 30:break;case 21:break;default:ni(s,i),ri(i)}}function ri(i){var s=i.flags;if(s&2){try{for(var o,h=i.return;h!==null;){if(um(h)){o=h;break}h=h.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var p=o.stateNode,g=yh(i);uo(i,g,p);break;case 5:var E=o.stateNode;o.flags&32&&(ts(E,""),o.flags&=-33);var A=yh(i);uo(i,A,E);break;case 3:case 4:var P=o.stateNode.containerInfo,K=yh(i);bh(i,K,P);break;default:throw Error(n(161))}}catch(lt){ee(i,i.return,lt)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function ym(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;ym(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function mn(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)fm(i,s.alternate,s),s=s.sibling}function Mr(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Un(4,s,s.return),Mr(s);break;case 1:Wi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&lm(s,s.return,o),Mr(s);break;case 27:La(s.stateNode);case 26:case 5:Wi(s,s.return),Mr(s);break;case 22:s.memoizedState===null&&Mr(s);break;case 30:Mr(s);break;default:Mr(s)}i=i.sibling}}function gn(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,p=i,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:gn(p,g,o),Ma(4,g);break;case 1:if(gn(p,g,o),h=g,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){ee(h,h.return,K)}if(h=g,p=h.updateQueue,p!==null){var A=h.stateNode;try{var P=p.shared.hiddenCallbacks;if(P!==null)for(p.shared.hiddenCallbacks=null,p=0;p<P.length;p++)Kv(P[p],A)}catch(K){ee(h,h.return,K)}}o&&E&64&&am(g),Ta(g,g.return);break;case 27:cm(g);case 26:case 5:gn(p,g,o),o&&h===null&&E&4&&om(g),Ta(g,g.return);break;case 12:gn(p,g,o);break;case 31:gn(p,g,o),o&&E&4&&pm(p,g);break;case 13:gn(p,g,o),o&&E&4&&mm(p,g);break;case 22:g.memoizedState===null&&gn(p,g,o),Ta(g,g.return);break;case 30:break;default:gn(p,g,o)}s=s.sibling}}function Sh(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&da(o))}function _h(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&da(i))}function Fi(i,s,o,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)bm(i,s,o,h),s=s.sibling}function bm(i,s,o,h){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Fi(i,s,o,h),p&2048&&Ma(9,s);break;case 1:Fi(i,s,o,h);break;case 3:Fi(i,s,o,h),p&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&da(i)));break;case 12:if(p&2048){Fi(i,s,o,h),i=s.stateNode;try{var g=s.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){ee(s,s.return,P)}}else Fi(i,s,o,h);break;case 31:Fi(i,s,o,h);break;case 13:Fi(i,s,o,h);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?Fi(i,s,o,h):Aa(i,s):g._visibility&2?Fi(i,s,o,h):(g._visibility|=2,xs(i,s,o,h,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Sh(E,s);break;case 24:Fi(i,s,o,h),p&2048&&_h(s.alternate,s);break;default:Fi(i,s,o,h)}}function xs(i,s,o,h,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=i,E=s,A=o,P=h,K=E.flags;switch(E.tag){case 0:case 11:case 15:xs(g,E,A,P,p),Ma(8,E);break;case 23:break;case 22:var lt=E.stateNode;E.memoizedState!==null?lt._visibility&2?xs(g,E,A,P,p):Aa(g,E):(lt._visibility|=2,xs(g,E,A,P,p)),p&&K&2048&&Sh(E.alternate,E);break;case 24:xs(g,E,A,P,p),p&&K&2048&&_h(E.alternate,E);break;default:xs(g,E,A,P,p)}s=s.sibling}}function Aa(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,h=s,p=h.flags;switch(h.tag){case 22:Aa(o,h),p&2048&&Sh(h.alternate,h);break;case 24:Aa(o,h),p&2048&&_h(h.alternate,h);break;default:Aa(o,h)}s=s.sibling}}var Ra=8192;function Ss(i,s,o){if(i.subtreeFlags&Ra)for(i=i.child;i!==null;)xm(i,s,o),i=i.sibling}function xm(i,s,o){switch(i.tag){case 26:Ss(i,s,o),i.flags&Ra&&i.memoizedState!==null&&v1(o,Bi,i.memoizedState,i.memoizedProps);break;case 5:Ss(i,s,o);break;case 3:case 4:var h=Bi;Bi=Co(i.stateNode.containerInfo),Ss(i,s,o),Bi=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Ra,Ra=16777216,Ss(i,s,o),Ra=h):Ss(i,s,o));break;default:Ss(i,s,o)}}function Sm(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Da(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var h=s[o];Oe=h,wm(h,i)}Sm(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_m(i),i=i.sibling}function _m(i){switch(i.tag){case 0:case 11:case 15:Da(i),i.flags&2048&&Un(9,i,i.return);break;case 3:Da(i);break;case 12:Da(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ho(i)):Da(i);break;default:Da(i)}}function ho(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var h=s[o];Oe=h,wm(h,i)}Sm(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Un(8,s,s.return),ho(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ho(s));break;default:ho(s)}i=i.sibling}}function wm(i,s){for(;Oe!==null;){var o=Oe;switch(o.tag){case 0:case 11:case 15:Un(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:da(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,Oe=h;else t:for(o=i;Oe!==null;){h=Oe;var p=h.sibling,g=h.return;if(dm(h),h===o){Oe=null;break t}if(p!==null){p.return=g,Oe=p;break t}Oe=g}}}var R_={getCacheForType:function(i){var s=Be(Ee),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return Be(Ee).controller.signal}},D_=typeof WeakMap=="function"?WeakMap:Map,Jt=0,le=null,Ht=null,qt=0,te=0,mi=null,Hn=!1,_s=!1,wh=!1,yn=0,be=0,Yn=0,Tr=0,Eh=0,gi=0,ws=0,Na=null,si=null,Ch=!1,fo=0,Em=0,vo=1/0,po=null,Wn=null,Ae=0,qn=null,Es=null,bn=0,Mh=0,Th=null,Cm=null,Oa=0,Ah=null;function yi(){return(Jt&2)!==0&&qt!==0?qt&-qt:j.T!==null?jh():Vd()}function Mm(){if(gi===0)if((qt&536870912)===0||Gt){var i=Xr;Xr<<=1,(Xr&3932160)===0&&(Xr=262144),gi=i}else gi=536870912;return i=vi.current,i!==null&&(i.flags|=32),gi}function ai(i,s,o){(i===le&&(te===2||te===9)||i.cancelPendingCommit!==null)&&(Cs(i,0),Xn(i,qt,gi,!1)),Js(i,o),((Jt&2)===0||i!==le)&&(i===le&&((Jt&2)===0&&(Tr|=o),be===4&&Xn(i,qt,gi,!1)),qi(i))}function Tm(i,s,o){if((Jt&6)!==0)throw Error(n(327));var h=!o&&(s&127)===0&&(s&i.expiredLanes)===0||Zs(i,s),p=h?k_(i,s):Dh(i,s,!0),g=h;do{if(p===0){_s&&!h&&Xn(i,s,0,!1);break}else{if(o=i.current.alternate,g&&!N_(o)){p=Dh(i,s,!1),g=!1;continue}if(p===2){if(g=s,i.errorRecoveryDisabledLanes&g)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var A=i;p=Na;var P=A.current.memoizedState.isDehydrated;if(P&&(Cs(A,E).flags|=256),E=Dh(A,E,!1),E!==2){if(wh&&!P){A.errorRecoveryDisabledLanes|=g,Tr|=g,p=4;break t}g=si,si=p,g!==null&&(si===null?si=g:si.push.apply(si,g))}p=E}if(g=!1,p!==2)continue}}if(p===1){Cs(i,0),Xn(i,s,0,!0);break}t:{switch(h=i,g=p,g){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Xn(h,s,gi,!Hn);break t;case 2:si=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(p=fo+300-Qt(),10<p)){if(Xn(h,s,gi,!Hn),El(h,0,!0)!==0)break t;bn=s,h.timeoutHandle=rg(Am.bind(null,h,o,si,po,Ch,s,gi,Tr,ws,Hn,g,"Throttled",-0,0),p);break t}Am(h,o,si,po,Ch,s,gi,Tr,ws,Hn,g,null,-0,0)}}break}while(!0);qi(i)}function Am(i,s,o,h,p,g,E,A,P,K,lt,ht,Q,nt){if(i.timeoutHandle=-1,ht=s.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rn},xm(s,g,ht);var Et=(g&62914560)===g?fo-Qt():(g&4194048)===g?Em-Qt():0;if(Et=p1(ht,Et),Et!==null){bn=g,i.cancelPendingCommit=Et(Lm.bind(null,i,s,g,o,h,p,E,A,P,lt,ht,null,Q,nt)),Xn(i,g,E,!K);return}}Lm(i,s,g,o,h,p,E,A,P)}function N_(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var p=o[h],g=p.getSnapshot;p=p.value;try{if(!fi(g(),p))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xn(i,s,o,h){s&=~Eh,s&=~Tr,i.suspendedLanes|=s,i.pingedLanes&=~s,h&&(i.warmLanes|=s),h=i.expirationTimes;for(var p=s;0<p;){var g=31-he(p),E=1<<g;h[g]=-1,p&=~E}o!==0&&Fd(i,o,s)}function mo(){return(Jt&6)===0?(ka(0),!1):!0}function Rh(){if(Ht!==null){if(te===0)var i=Ht.return;else i=Ht,on=yr=null,Wc(i),ps=null,pa=0,i=Ht;for(;i!==null;)sm(i.alternate,i),i=i.return;Ht=null}}function Cs(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,$_(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),bn=0,Rh(),le=i,Ht=o=an(i.current,null),qt=s,te=0,mi=null,Hn=!1,_s=Zs(i,s),wh=!1,ws=gi=Eh=Tr=Yn=be=0,si=Na=null,Ch=!1,(s&8)!==0&&(s|=s&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=s;0<h;){var p=31-he(h),g=1<<p;s|=i[p],h&=~g}return yn=s,Ll(),o}function Rm(i,s){Bt=null,j.H=wa,s===vs||s===Yl?(s=Wv(),te=3):s===kc?(s=Wv(),te=4):te=s===lh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mi=s,Ht===null&&(be=1,ro(i,Ci(s,i.current)))}function Dm(){var i=vi.current;return i===null?!0:(qt&4194048)===qt?Ri===null:(qt&62914560)===qt||(qt&536870912)!==0?i===Ri:!1}function Nm(){var i=j.H;return j.H=wa,i===null?wa:i}function Om(){var i=j.A;return j.A=R_,i}function go(){be=4,Hn||(qt&4194048)!==qt&&vi.current!==null||(_s=!0),(Yn&134217727)===0&&(Tr&134217727)===0||le===null||Xn(le,qt,gi,!1)}function Dh(i,s,o){var h=Jt;Jt|=2;var p=Nm(),g=Om();(le!==i||qt!==s)&&(po=null,Cs(i,s)),s=!1;var E=be;t:do try{if(te!==0&&Ht!==null){var A=Ht,P=mi;switch(te){case 8:Rh(),E=6;break t;case 3:case 2:case 9:case 6:vi.current===null&&(s=!0);var K=te;if(te=0,mi=null,Ms(i,A,P,K),o&&_s){E=0;break t}break;default:K=te,te=0,mi=null,Ms(i,A,P,K)}}O_(),E=be;break}catch(lt){Rm(i,lt)}while(!0);return s&&i.shellSuspendCounter++,on=yr=null,Jt=h,j.H=p,j.A=g,Ht===null&&(le=null,qt=0,Ll()),E}function O_(){for(;Ht!==null;)km(Ht)}function k_(i,s){var o=Jt;Jt|=2;var h=Nm(),p=Om();le!==i||qt!==s?(po=null,vo=Qt()+500,Cs(i,s)):_s=Zs(i,s);t:do try{if(te!==0&&Ht!==null){s=Ht;var g=mi;e:switch(te){case 1:te=0,mi=null,Ms(i,s,g,1);break;case 2:case 9:if(Hv(g)){te=0,mi=null,jm(s);break}s=function(){te!==2&&te!==9||le!==i||(te=7),qi(i)},g.then(s,s);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:Hv(g)?(te=0,mi=null,jm(s)):(te=0,mi=null,Ms(i,s,g,7));break;case 5:var E=null;switch(Ht.tag){case 26:E=Ht.memoizedState;case 5:case 27:var A=Ht;if(E?bg(E):A.stateNode.complete){te=0,mi=null;var P=A.sibling;if(P!==null)Ht=P;else{var K=A.return;K!==null?(Ht=K,yo(K)):Ht=null}break e}}te=0,mi=null,Ms(i,s,g,5);break;case 6:te=0,mi=null,Ms(i,s,g,6);break;case 8:Rh(),be=6;break t;default:throw Error(n(462))}}j_();break}catch(lt){Rm(i,lt)}while(!0);return on=yr=null,j.H=h,j.A=p,Jt=o,Ht!==null?0:(le=null,qt=0,Ll(),be)}function j_(){for(;Ht!==null&&!Lt();)km(Ht)}function km(i){var s=nm(i.alternate,i,yn);i.memoizedProps=i.pendingProps,s===null?yo(i):Ht=s}function jm(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=$p(o,s,s.pendingProps,s.type,void 0,qt);break;case 11:s=$p(o,s,s.pendingProps,s.type.render,s.ref,qt);break;case 5:Wc(s);default:sm(o,s),s=Ht=Ov(s,yn),s=nm(o,s,yn)}i.memoizedProps=i.pendingProps,s===null?yo(i):Ht=s}function Ms(i,s,o,h){on=yr=null,Wc(s),ps=null,pa=0;var p=s.return;try{if(__(i,p,s,o,qt)){be=1,ro(i,Ci(o,i.current)),Ht=null;return}}catch(g){if(p!==null)throw Ht=p,g;be=1,ro(i,Ci(o,i.current)),Ht=null;return}s.flags&32768?(Gt||h===1?i=!0:_s||(qt&536870912)!==0?i=!1:(Hn=i=!0,(h===2||h===9||h===3||h===6)&&(h=vi.current,h!==null&&h.tag===13&&(h.flags|=16384))),zm(s,i)):yo(s)}function yo(i){var s=i;do{if((s.flags&32768)!==0){zm(s,Hn);return}i=s.return;var o=C_(s.alternate,s,yn);if(o!==null){Ht=o;return}if(s=s.sibling,s!==null){Ht=s;return}Ht=s=i}while(s!==null);be===0&&(be=5)}function zm(i,s){do{var o=M_(i.alternate,i);if(o!==null){o.flags&=32767,Ht=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Ht=i;return}Ht=i=o}while(i!==null);be=6,Ht=null}function Lm(i,s,o,h,p,g,E,A,P){i.cancelPendingCommit=null;do bo();while(Ae!==0);if((Jt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(g=s.lanes|s.childLanes,g|=yc,dS(i,o,g,E,A,P),i===le&&(Ht=le=null,qt=0),Es=s,qn=i,bn=o,Mh=g,Th=p,Cm=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,F_(ge,function(){return Vm(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=j.T,j.T=null,p=U.p,U.p=2,E=Jt,Jt|=4;try{T_(i,s,o)}finally{Jt=E,U.p=p,j.T=h}}Ae=1,Bm(),Fm(),Pm()}}function Bm(){if(Ae===1){Ae=0;var i=qn,s=Es,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=j.T,j.T=null;var h=U.p;U.p=2;var p=Jt;Jt|=4;try{gm(s,i);var g=Uh,E=wv(i.containerInfo),A=g.focusedElem,P=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&_v(A.ownerDocument.documentElement,A)){if(P!==null&&dc(A)){var K=P.start,lt=P.end;if(lt===void 0&&(lt=K),"selectionStart"in A)A.selectionStart=K,A.selectionEnd=Math.min(lt,A.value.length);else{var ht=A.ownerDocument||document,Q=ht&&ht.defaultView||window;if(Q.getSelection){var nt=Q.getSelection(),Et=A.textContent.length,Ot=Math.min(P.start,Et),re=P.end===void 0?Ot:Math.min(P.end,Et);!nt.extend&&Ot>re&&(E=re,re=Ot,Ot=E);var Y=Sv(A,Ot),H=Sv(A,re);if(Y&&H&&(nt.rangeCount!==1||nt.anchorNode!==Y.node||nt.anchorOffset!==Y.offset||nt.focusNode!==H.node||nt.focusOffset!==H.offset)){var G=ht.createRange();G.setStart(Y.node,Y.offset),nt.removeAllRanges(),Ot>re?(nt.addRange(G),nt.extend(H.node,H.offset)):(G.setEnd(H.node,H.offset),nt.addRange(G))}}}}for(ht=[],nt=A;nt=nt.parentNode;)nt.nodeType===1&&ht.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ht.length;A++){var ct=ht[A];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}No=!!Vh,Uh=Vh=null}finally{Jt=p,U.p=h,j.T=o}}i.current=s,Ae=2}}function Fm(){if(Ae===2){Ae=0;var i=qn,s=Es,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=j.T,j.T=null;var h=U.p;U.p=2;var p=Jt;Jt|=4;try{fm(i,s.alternate,s)}finally{Jt=p,U.p=h,j.T=o}}Ae=3}}function Pm(){if(Ae===4||Ae===3){Ae=0,ae();var i=qn,s=Es,o=bn,h=Cm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ae=5:(Ae=0,Es=qn=null,Im(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Wn=null),Gu(o),s=s.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Ze,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=j.T,p=U.p,U.p=2,j.T=null;try{for(var g=i.onRecoverableError,E=0;E<h.length;E++){var A=h[E];g(A.value,{componentStack:A.stack})}}finally{j.T=s,U.p=p}}(bn&3)!==0&&bo(),qi(i),p=i.pendingLanes,(o&261930)!==0&&(p&42)!==0?i===Ah?Oa++:(Oa=0,Ah=i):Oa=0,ka(0)}}function Im(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,da(s)))}function bo(){return Bm(),Fm(),Pm(),Vm()}function Vm(){if(Ae!==5)return!1;var i=qn,s=Mh;Mh=0;var o=Gu(bn),h=j.T,p=U.p;try{U.p=32>o?32:o,j.T=null,o=Th,Th=null;var g=qn,E=bn;if(Ae=0,Es=qn=null,bn=0,(Jt&6)!==0)throw Error(n(331));var A=Jt;if(Jt|=4,_m(g.current),bm(g,g.current,E,o),Jt=A,ka(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Ze,g)}catch{}return!0}finally{U.p=p,j.T=h,Im(i,s)}}function Um(i,s,o){s=Ci(o,s),s=ah(i.stateNode,s,2),i=Pn(i,s,2),i!==null&&(Js(i,2),qi(i))}function ee(i,s,o){if(i.tag===3)Um(i,i,o);else for(;s!==null;){if(s.tag===3){Um(s,i,o);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Wn===null||!Wn.has(h))){i=Ci(o,i),o=Hp(2),h=Pn(s,o,2),h!==null&&(Yp(o,h,s,i),Js(h,2),qi(h));break}}s=s.return}}function Nh(i,s,o){var h=i.pingCache;if(h===null){h=i.pingCache=new D_;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(o)||(wh=!0,p.add(o),i=z_.bind(null,i,s,o),s.then(i,i))}function z_(i,s,o){var h=i.pingCache;h!==null&&h.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,le===i&&(qt&o)===o&&(be===4||be===3&&(qt&62914560)===qt&&300>Qt()-fo?(Jt&2)===0&&Cs(i,0):Eh|=o,ws===qt&&(ws=0)),qi(i)}function Hm(i,s){s===0&&(s=Bd()),i=pr(i,s),i!==null&&(Js(i,s),qi(i))}function L_(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),Hm(i,o)}function B_(i,s){var o=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(o=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(s),Hm(i,o)}function F_(i,s){return wt(i,s)}var xo=null,Ts=null,Oh=!1,So=!1,kh=!1,Gn=0;function qi(i){i!==Ts&&i.next===null&&(Ts===null?xo=Ts=i:Ts=Ts.next=i),So=!0,Oh||(Oh=!0,I_())}function ka(i,s){if(!kh&&So){kh=!0;do for(var o=!1,h=xo;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var g=0;else{var E=h.suspendedLanes,A=h.pingedLanes;g=(1<<31-he(42|i)+1)-1,g&=p&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Xm(h,g))}else g=qt,g=El(h,h===le?g:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(g&3)===0||Zs(h,g)||(o=!0,Xm(h,g));h=h.next}while(o);kh=!1}}function P_(){Ym()}function Ym(){So=Oh=!1;var i=0;Gn!==0&&Q_()&&(i=Gn);for(var s=Qt(),o=null,h=xo;h!==null;){var p=h.next,g=Wm(h,s);g===0?(h.next=null,o===null?xo=p:o.next=p,p===null&&(Ts=o)):(o=h,(i!==0||(g&3)!==0)&&(So=!0)),h=p}Ae!==0&&Ae!==5||ka(i),Gn!==0&&(Gn=0)}function Wm(i,s){for(var o=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var E=31-he(g),A=1<<E,P=p[E];P===-1?((A&o)===0||(A&h)!==0)&&(p[E]=fS(A,s)):P<=s&&(i.expiredLanes|=A),g&=~A}if(s=le,o=qt,o=El(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,o===0||i===s&&(te===2||te===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Nt(h),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Zs(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(h!==null&&Nt(h),Gu(o)){case 2:case 8:o=ce;break;case 32:o=ge;break;case 268435456:o=Ge;break;default:o=ge}return h=qm.bind(null,i),o=wt(o,h),i.callbackPriority=s,i.callbackNode=o,s}return h!==null&&h!==null&&Nt(h),i.callbackPriority=2,i.callbackNode=null,2}function qm(i,s){if(Ae!==0&&Ae!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(bo()&&i.callbackNode!==o)return null;var h=qt;return h=El(i,i===le?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(Tm(i,h,s),Wm(i,Qt()),i.callbackNode!=null&&i.callbackNode===o?qm.bind(null,i):null)}function Xm(i,s){if(bo())return null;Tm(i,s,!0)}function I_(){Z_(function(){(Jt&6)!==0?wt(Xe,P_):Ym()})}function jh(){if(Gn===0){var i=fs;i===0&&(i=en,en<<=1,(en&261888)===0&&(en=256)),Gn=i}return Gn}function Gm(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Al(""+i)}function Km(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function V_(i,s,o,h,p){if(s==="submit"&&o&&o.stateNode===p){var g=Gm((p[ti]||null).action),E=h.submitter;E&&(s=(s=E[ti]||null)?Gm(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var A=new Ol("action","action",null,h,p);i.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Gn!==0){var P=E?Km(p,E):new FormData(p);th(o,{pending:!0,data:P,method:p.method,action:g},null,P)}}else typeof g=="function"&&(A.preventDefault(),P=E?Km(p,E):new FormData(p),th(o,{pending:!0,data:P,method:p.method,action:g},g,P))},currentTarget:p}]})}}for(var zh=0;zh<gc.length;zh++){var Lh=gc[zh],U_=Lh.toLowerCase(),H_=Lh[0].toUpperCase()+Lh.slice(1);Li(U_,"on"+H_)}Li(Mv,"onAnimationEnd"),Li(Tv,"onAnimationIteration"),Li(Av,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(s_,"onTransitionRun"),Li(a_,"onTransitionStart"),Li(l_,"onTransitionCancel"),Li(Rv,"onTransitionEnd"),Zr("onMouseEnter",["mouseout","mouseover"]),Zr("onMouseLeave",["mouseout","mouseover"]),Zr("onPointerEnter",["pointerout","pointerover"]),Zr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ja));function Qm(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var h=i[o],p=h.event;h=h.listeners;t:{var g=void 0;if(s)for(var E=h.length-1;0<=E;E--){var A=h[E],P=A.instance,K=A.currentTarget;if(A=A.listener,P!==g&&p.isPropagationStopped())break t;g=A,p.currentTarget=K;try{g(p)}catch(lt){zl(lt)}p.currentTarget=null,g=P}else for(E=0;E<h.length;E++){if(A=h[E],P=A.instance,K=A.currentTarget,A=A.listener,P!==g&&p.isPropagationStopped())break t;g=A,p.currentTarget=K;try{g(p)}catch(lt){zl(lt)}p.currentTarget=null,g=P}}}}function Yt(i,s){var o=s[Ku];o===void 0&&(o=s[Ku]=new Set);var h=i+"__bubble";o.has(h)||($m(s,i,2,!1),o.add(h))}function Bh(i,s,o){var h=0;s&&(h|=4),$m(o,i,h,s)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Fh(i){if(!i[_o]){i[_o]=!0,Yd.forEach(function(o){o!=="selectionchange"&&(Y_.has(o)||Bh(o,!1,i),Bh(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[_o]||(s[_o]=!0,Bh("selectionchange",!1,s))}}function $m(i,s,o,h){switch(Mg(s)){case 2:var p=y1;break;case 8:p=b1;break;default:p=Jh}o=p.bind(null,s,o,i),p=void 0,!rc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(s,o,{capture:!0,passive:p}):i.addEventListener(s,o,!0):p!==void 0?i.addEventListener(s,o,{passive:p}):i.addEventListener(s,o,!1)}function Ph(i,s,o,h,p){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var A=h.stateNode.containerInfo;if(A===p)break;if(E===4)for(E=h.return;E!==null;){var P=E.tag;if((P===3||P===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;A!==null;){if(E=Kr(A),E===null)return;if(P=E.tag,P===5||P===6||P===26||P===27){h=g=E;continue t}A=A.parentNode}}h=h.return}iv(function(){var K=g,lt=ic(o),ht=[];t:{var Q=Dv.get(i);if(Q!==void 0){var nt=Ol,Et=i;switch(i){case"keypress":if(Dl(o)===0)break t;case"keydown":case"keyup":nt=BS;break;case"focusin":Et="focus",nt=oc;break;case"focusout":Et="blur",nt=oc;break;case"beforeblur":case"afterblur":nt=oc;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=sv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=CS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=IS;break;case Mv:case Tv:case Av:nt=AS;break;case Rv:nt=US;break;case"scroll":case"scrollend":nt=wS;break;case"wheel":nt=YS;break;case"copy":case"cut":case"paste":nt=DS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=lv;break;case"toggle":case"beforetoggle":nt=qS}var Ot=(s&4)!==0,re=!Ot&&(i==="scroll"||i==="scrollend"),Y=Ot?Q!==null?Q+"Capture":null:Q;Ot=[];for(var H=K,G;H!==null;){var ct=H;if(G=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||G===null||Y===null||(ct=ia(H,Y),ct!=null&&Ot.push(za(H,ct,G))),re)break;H=H.return}0<Ot.length&&(Q=new nt(Q,Et,null,o,lt),ht.push({event:Q,listeners:Ot}))}}if((s&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",nt=i==="mouseout"||i==="pointerout",Q&&o!==ec&&(Et=o.relatedTarget||o.fromElement)&&(Kr(Et)||Et[Gr]))break t;if((nt||Q)&&(Q=lt.window===lt?lt:(Q=lt.ownerDocument)?Q.defaultView||Q.parentWindow:window,nt?(Et=o.relatedTarget||o.toElement,nt=K,Et=Et?Kr(Et):null,Et!==null&&(re=l(Et),Ot=Et.tag,Et!==re||Ot!==5&&Ot!==27&&Ot!==6)&&(Et=null)):(nt=null,Et=K),nt!==Et)){if(Ot=sv,ct="onMouseLeave",Y="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ot=lv,ct="onPointerLeave",Y="onPointerEnter",H="pointer"),re=nt==null?Q:ea(nt),G=Et==null?Q:ea(Et),Q=new Ot(ct,H+"leave",nt,o,lt),Q.target=re,Q.relatedTarget=G,ct=null,Kr(lt)===K&&(Ot=new Ot(Y,H+"enter",Et,o,lt),Ot.target=G,Ot.relatedTarget=re,ct=Ot),re=ct,nt&&Et)e:{for(Ot=W_,Y=nt,H=Et,G=0,ct=Y;ct;ct=Ot(ct))G++;ct=0;for(var Tt=H;Tt;Tt=Ot(Tt))ct++;for(;0<G-ct;)Y=Ot(Y),G--;for(;0<ct-G;)H=Ot(H),ct--;for(;G--;){if(Y===H||H!==null&&Y===H.alternate){Ot=Y;break e}Y=Ot(Y),H=Ot(H)}Ot=null}else Ot=null;nt!==null&&Zm(ht,Q,nt,Ot,!1),Et!==null&&re!==null&&Zm(ht,re,Et,Ot,!0)}}t:{if(Q=K?ea(K):window,nt=Q.nodeName&&Q.nodeName.toLowerCase(),nt==="select"||nt==="input"&&Q.type==="file")var $t=pv;else if(dv(Q))if(mv)$t=i_;else{$t=t_;var Ct=JS}else nt=Q.nodeName,!nt||nt.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&tc(K.elementType)&&($t=pv):$t=e_;if($t&&($t=$t(i,K))){vv(ht,$t,o,lt);break t}Ct&&Ct(i,Q,K),i==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Ju(Q,"number",Q.value)}switch(Ct=K?ea(K):window,i){case"focusin":(dv(Ct)||Ct.contentEditable==="true")&&(rs=Ct,vc=K,ca=null);break;case"focusout":ca=vc=rs=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,Ev(ht,o,lt);break;case"selectionchange":if(r_)break;case"keydown":case"keyup":Ev(ht,o,lt)}var It;if(cc)t:{switch(i){case"compositionstart":var Xt="onCompositionStart";break t;case"compositionend":Xt="onCompositionEnd";break t;case"compositionupdate":Xt="onCompositionUpdate";break t}Xt=void 0}else ns?hv(i,o)&&(Xt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Xt="onCompositionStart");Xt&&(ov&&o.locale!=="ko"&&(ns||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&ns&&(It=nv()):(On=lt,sc="value"in On?On.value:On.textContent,ns=!0)),Ct=wo(K,Xt),0<Ct.length&&(Xt=new av(Xt,i,null,o,lt),ht.push({event:Xt,listeners:Ct}),It?Xt.data=It:(It=fv(o),It!==null&&(Xt.data=It)))),(It=GS?KS(i,o):QS(i,o))&&(Xt=wo(K,"onBeforeInput"),0<Xt.length&&(Ct=new av("onBeforeInput","beforeinput",null,o,lt),ht.push({event:Ct,listeners:Xt}),Ct.data=It)),V_(ht,i,K,o,lt)}Qm(ht,s)})}function za(i,s,o){return{instance:i,listener:s,currentTarget:o}}function wo(i,s){for(var o=s+"Capture",h=[];i!==null;){var p=i,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=ia(i,o),p!=null&&h.unshift(za(i,p,g)),p=ia(i,s),p!=null&&h.push(za(i,p,g))),i.tag===3)return h;i=i.return}return[]}function W_(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Zm(i,s,o,h,p){for(var g=s._reactName,E=[];o!==null&&o!==h;){var A=o,P=A.alternate,K=A.stateNode;if(A=A.tag,P!==null&&P===h)break;A!==5&&A!==26&&A!==27||K===null||(P=K,p?(K=ia(o,g),K!=null&&E.unshift(za(o,K,P))):p||(K=ia(o,g),K!=null&&E.push(za(o,K,P)))),o=o.return}E.length!==0&&i.push({event:s,listeners:E})}var q_=/\r\n?/g,X_=/\u0000|\uFFFD/g;function Jm(i){return(typeof i=="string"?i:""+i).replace(q_,`
`).replace(X_,"")}function tg(i,s){return s=Jm(s),Jm(i)===s}function ne(i,s,o,h,p,g){switch(o){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||ts(i,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&ts(i,""+h);break;case"className":Ml(i,"class",h);break;case"tabIndex":Ml(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ml(i,o,h);break;case"style":tv(i,h,g);break;case"data":if(s!=="object"){Ml(i,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(o);break}h=Al(""+h),i.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&ne(i,s,"name",p.name,p,null),ne(i,s,"formEncType",p.formEncType,p,null),ne(i,s,"formMethod",p.formMethod,p,null),ne(i,s,"formTarget",p.formTarget,p,null)):(ne(i,s,"encType",p.encType,p,null),ne(i,s,"method",p.method,p,null),ne(i,s,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(o);break}h=Al(""+h),i.setAttribute(o,h);break;case"onClick":h!=null&&(i.onclick=rn);break;case"onScroll":h!=null&&Yt("scroll",i);break;case"onScrollEnd":h!=null&&Yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}o=Al(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(o,""+h):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":h===!0?i.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(o,h):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(o,h):i.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(o):i.setAttribute(o,h);break;case"popover":Yt("beforetoggle",i),Yt("toggle",i),Cl(i,"popover",h);break;case"xlinkActuate":nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":nn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":nn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":nn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":nn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Cl(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=SS.get(o)||o,Cl(i,o,h))}}function Ih(i,s,o,h,p,g){switch(o){case"style":tv(i,h,g);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"children":typeof h=="string"?ts(i,h):(typeof h=="number"||typeof h=="bigint")&&ts(i,""+h);break;case"onScroll":h!=null&&Yt("scroll",i);break;case"onScrollEnd":h!=null&&Yt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wd.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),s=o.slice(2,p?o.length-7:void 0),g=i[ti]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(s,g,p),typeof h=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,h,p);break t}o in i?i[o]=h:h===!0?i.setAttribute(o,""):Cl(i,o,h)}}}function Pe(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",i),Yt("load",i);var h=!1,p=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ne(i,s,g,E,o,null)}}p&&ne(i,s,"srcSet",o.srcSet,o,null),h&&ne(i,s,"src",o.src,o,null);return;case"input":Yt("invalid",i);var A=g=E=p=null,P=null,K=null;for(h in o)if(o.hasOwnProperty(h)){var lt=o[h];if(lt!=null)switch(h){case"name":p=lt;break;case"type":E=lt;break;case"checked":P=lt;break;case"defaultChecked":K=lt;break;case"value":g=lt;break;case"defaultValue":A=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,s));break;default:ne(i,s,h,lt,o,null)}}Qd(i,g,A,P,K,E,p,!1);return;case"select":Yt("invalid",i),h=E=g=null;for(p in o)if(o.hasOwnProperty(p)&&(A=o[p],A!=null))switch(p){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":h=A;default:ne(i,s,p,A,o,null)}s=g,o=E,i.multiple=!!h,s!=null?Jr(i,!!h,s,!1):o!=null&&Jr(i,!!h,o,!0);return;case"textarea":Yt("invalid",i),g=p=h=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":h=A;break;case"defaultValue":p=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:ne(i,s,E,A,o,null)}Zd(i,h,p,g);return;case"option":for(P in o)o.hasOwnProperty(P)&&(h=o[P],h!=null)&&(P==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":ne(i,s,P,h,o,null));return;case"dialog":Yt("beforetoggle",i),Yt("toggle",i),Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":Yt("load",i);break;case"video":case"audio":for(h=0;h<ja.length;h++)Yt(ja[h],i);break;case"image":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"embed":case"source":case"link":Yt("error",i),Yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in o)if(o.hasOwnProperty(K)&&(h=o[K],h!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ne(i,s,K,h,o,null)}return;default:if(tc(s)){for(lt in o)o.hasOwnProperty(lt)&&(h=o[lt],h!==void 0&&Ih(i,s,lt,h,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(h=o[A],h!=null&&ne(i,s,A,h,o,null))}function G_(i,s,o,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,E=null,A=null,P=null,K=null,lt=null;for(nt in o){var ht=o[nt];if(o.hasOwnProperty(nt)&&ht!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":P=ht;default:h.hasOwnProperty(nt)||ne(i,s,nt,null,h,ht)}}for(var Q in h){var nt=h[Q];if(ht=o[Q],h.hasOwnProperty(Q)&&(nt!=null||ht!=null))switch(Q){case"type":g=nt;break;case"name":p=nt;break;case"checked":K=nt;break;case"defaultChecked":lt=nt;break;case"value":E=nt;break;case"defaultValue":A=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,s));break;default:nt!==ht&&ne(i,s,Q,nt,h,ht)}}Zu(i,E,A,P,K,lt,g,p);return;case"select":nt=E=A=Q=null;for(g in o)if(P=o[g],o.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":nt=P;default:h.hasOwnProperty(g)||ne(i,s,g,null,h,P)}for(p in h)if(g=h[p],P=o[p],h.hasOwnProperty(p)&&(g!=null||P!=null))switch(p){case"value":Q=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==P&&ne(i,s,p,g,h,P)}s=A,o=E,h=nt,Q!=null?Jr(i,!!o,Q,!1):!!h!=!!o&&(s!=null?Jr(i,!!o,s,!0):Jr(i,!!o,o?[]:"",!1));return;case"textarea":nt=Q=null;for(A in o)if(p=o[A],o.hasOwnProperty(A)&&p!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ne(i,s,A,null,h,p)}for(E in h)if(p=h[E],g=o[E],h.hasOwnProperty(E)&&(p!=null||g!=null))switch(E){case"value":Q=p;break;case"defaultValue":nt=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==g&&ne(i,s,E,p,h,g)}$d(i,Q,nt);return;case"option":for(var Et in o)Q=o[Et],o.hasOwnProperty(Et)&&Q!=null&&!h.hasOwnProperty(Et)&&(Et==="selected"?i.selected=!1:ne(i,s,Et,null,h,Q));for(P in h)Q=h[P],nt=o[P],h.hasOwnProperty(P)&&Q!==nt&&(Q!=null||nt!=null)&&(P==="selected"?i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":ne(i,s,P,Q,h,nt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in o)Q=o[Ot],o.hasOwnProperty(Ot)&&Q!=null&&!h.hasOwnProperty(Ot)&&ne(i,s,Ot,null,h,Q);for(K in h)if(Q=h[K],nt=o[K],h.hasOwnProperty(K)&&Q!==nt&&(Q!=null||nt!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,s));break;default:ne(i,s,K,Q,h,nt)}return;default:if(tc(s)){for(var re in o)Q=o[re],o.hasOwnProperty(re)&&Q!==void 0&&!h.hasOwnProperty(re)&&Ih(i,s,re,void 0,h,Q);for(lt in h)Q=h[lt],nt=o[lt],!h.hasOwnProperty(lt)||Q===nt||Q===void 0&&nt===void 0||Ih(i,s,lt,Q,h,nt);return}}for(var Y in o)Q=o[Y],o.hasOwnProperty(Y)&&Q!=null&&!h.hasOwnProperty(Y)&&ne(i,s,Y,null,h,Q);for(ht in h)Q=h[ht],nt=o[ht],!h.hasOwnProperty(ht)||Q===nt||Q==null&&nt==null||ne(i,s,ht,Q,h,nt)}function eg(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function K_(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),h=0;h<o.length;h++){var p=o[h],g=p.transferSize,E=p.initiatorType,A=p.duration;if(g&&A&&eg(E)){for(E=0,A=p.responseEnd,h+=1;h<o.length;h++){var P=o[h],K=P.startTime;if(K>A)break;var lt=P.transferSize,ht=P.initiatorType;lt&&eg(ht)&&(P=P.responseEnd,E+=lt*(P<A?1:(A-K)/(P-K)))}if(--h,s+=8*(g+E)/(p.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Vh=null,Uh=null;function Eo(i){return i.nodeType===9?i:i.ownerDocument}function ig(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ng(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Hh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yh=null;function Q_(){var i=window.event;return i&&i.type==="popstate"?i===Yh?!1:(Yh=i,!0):(Yh=null,!1)}var rg=typeof setTimeout=="function"?setTimeout:void 0,$_=typeof clearTimeout=="function"?clearTimeout:void 0,sg=typeof Promise=="function"?Promise:void 0,Z_=typeof queueMicrotask=="function"?queueMicrotask:typeof sg<"u"?function(i){return sg.resolve(null).then(i).catch(J_)}:rg;function J_(i){setTimeout(function(){throw i})}function Kn(i){return i==="head"}function ag(i,s){var o=s,h=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(h===0){i.removeChild(p),Ns(s);return}h--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")h++;else if(o==="html")La(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,La(o);for(var g=o.firstChild;g;){var E=g.nextSibling,A=g.nodeName;g[ta]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=E}}else o==="body"&&La(i.ownerDocument.body);o=p}while(o);Ns(s)}function lg(i,s){var o=i;i=0;do{var h=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=h}while(o)}function Wh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wh(o),Qu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function t1(i,s,o,h){for(;i.nodeType===1;){var p=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[ta])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=Di(i.nextSibling),i===null)break}return null}function e1(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Di(i.nextSibling),i===null))return null;return i}function og(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Di(i.nextSibling),i===null))return null;return i}function qh(i){return i.data==="$?"||i.data==="$~"}function Xh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function i1(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var h=function(){s(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Di(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Gh=null;function ug(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return Di(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function cg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function hg(i,s,o){switch(s=Eo(o),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function La(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Qu(i)}var Ni=new Map,fg=new Set;function Co(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xn=U.d;U.d={f:n1,r:r1,D:s1,C:a1,L:l1,m:o1,X:c1,S:u1,M:h1};function n1(){var i=xn.f(),s=mo();return i||s}function r1(i){var s=Qr(i);s!==null&&s.tag===5&&s.type==="form"?Rp(s):xn.r(i)}var As=typeof document>"u"?null:document;function dg(i,s,o){var h=As;if(h&&typeof s=="string"&&s){var p=wi(s);p='link[rel="'+i+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),fg.has(p)||(fg.add(p),i={rel:i,crossOrigin:o,href:s},h.querySelector(p)===null&&(s=h.createElement("link"),Pe(s,"link",i),Ne(s),h.head.appendChild(s)))}}function s1(i){xn.D(i),dg("dns-prefetch",i,null)}function a1(i,s){xn.C(i,s),dg("preconnect",i,s)}function l1(i,s,o){xn.L(i,s,o);var h=As;if(h&&i&&s){var p='link[rel="preload"][as="'+wi(s)+'"]';s==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+wi(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+wi(o.imageSizes)+'"]')):p+='[href="'+wi(i)+'"]';var g=p;switch(s){case"style":g=Rs(i);break;case"script":g=Ds(i)}Ni.has(g)||(i=m({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),Ni.set(g,i),h.querySelector(p)!==null||s==="style"&&h.querySelector(Ba(g))||s==="script"&&h.querySelector(Fa(g))||(s=h.createElement("link"),Pe(s,"link",i),Ne(s),h.head.appendChild(s)))}}function o1(i,s){xn.m(i,s);var o=As;if(o&&i){var h=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+wi(h)+'"][href="'+wi(i)+'"]',g=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ds(i)}if(!Ni.has(g)&&(i=m({rel:"modulepreload",href:i},s),Ni.set(g,i),o.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fa(g)))return}h=o.createElement("link"),Pe(h,"link",i),Ne(h),o.head.appendChild(h)}}}function u1(i,s,o){xn.S(i,s,o);var h=As;if(h&&i){var p=$r(h).hoistableStyles,g=Rs(i);s=s||"default";var E=p.get(g);if(!E){var A={loading:0,preload:null};if(E=h.querySelector(Ba(g)))A.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":s},o),(o=Ni.get(g))&&Kh(i,o);var P=E=h.createElement("link");Ne(P),Pe(P,"link",i),P._p=new Promise(function(K,lt){P.onload=K,P.onerror=lt}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Mo(E,s,h)}E={type:"stylesheet",instance:E,count:1,state:A},p.set(g,E)}}}function c1(i,s){xn.X(i,s);var o=As;if(o&&i){var h=$r(o).hoistableScripts,p=Ds(i),g=h.get(p);g||(g=o.querySelector(Fa(p)),g||(i=m({src:i,async:!0},s),(s=Ni.get(p))&&Qh(i,s),g=o.createElement("script"),Ne(g),Pe(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},h.set(p,g))}}function h1(i,s){xn.M(i,s);var o=As;if(o&&i){var h=$r(o).hoistableScripts,p=Ds(i),g=h.get(p);g||(g=o.querySelector(Fa(p)),g||(i=m({src:i,async:!0,type:"module"},s),(s=Ni.get(p))&&Qh(i,s),g=o.createElement("script"),Ne(g),Pe(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},h.set(p,g))}}function vg(i,s,o,h){var p=(p=J.current)?Co(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Rs(o.href),o=$r(p).hoistableStyles,h=o.get(s),h||(h={type:"style",instance:null,count:0,state:null},o.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Rs(o.href);var g=$r(p).hoistableStyles,E=g.get(i);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,E),(g=p.querySelector(Ba(i)))&&!g._p&&(E.instance=g,E.state.loading=5),Ni.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ni.set(i,o),g||f1(p,i,o,E.state))),s&&h===null)throw Error(n(528,""));return E}if(s&&h!==null)throw Error(n(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ds(o),o=$r(p).hoistableScripts,h=o.get(s),h||(h={type:"script",instance:null,count:0,state:null},o.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Rs(i){return'href="'+wi(i)+'"'}function Ba(i){return'link[rel="stylesheet"]['+i+"]"}function pg(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function f1(i,s,o,h){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=i.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),Pe(s,"link",o),Ne(s),i.head.appendChild(s))}function Ds(i){return'[src="'+wi(i)+'"]'}function Fa(i){return"script[async]"+i}function mg(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var h=i.querySelector('style[data-href~="'+wi(o.href)+'"]');if(h)return s.instance=h,Ne(h),h;var p=m({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Ne(h),Pe(h,"style",p),Mo(h,o.precedence,i),s.instance=h;case"stylesheet":p=Rs(o.href);var g=i.querySelector(Ba(p));if(g)return s.state.loading|=4,s.instance=g,Ne(g),g;h=pg(o),(p=Ni.get(p))&&Kh(h,p),g=(i.ownerDocument||i).createElement("link"),Ne(g);var E=g;return E._p=new Promise(function(A,P){E.onload=A,E.onerror=P}),Pe(g,"link",h),s.state.loading|=4,Mo(g,o.precedence,i),s.instance=g;case"script":return g=Ds(o.src),(p=i.querySelector(Fa(g)))?(s.instance=p,Ne(p),p):(h=o,(p=Ni.get(g))&&(h=m({},o),Qh(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),Ne(p),Pe(p,"link",h),i.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Mo(h,o.precedence,i));return s.instance}function Mo(i,s,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,g=p,E=0;E<h.length;E++){var A=h[E];if(A.dataset.precedence===s)g=A;else if(g!==p)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Kh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Qh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var To=null;function gg(i,s,o){if(To===null){var h=new Map,p=To=new Map;p.set(o,h)}else p=To,h=p.get(o),h||(h=new Map,p.set(o,h));if(h.has(i))return h;for(h.set(i,null),o=o.getElementsByTagName(i),p=0;p<o.length;p++){var g=o[p];if(!(g[ta]||g[ze]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=i+E;var A=h.get(E);A?A.push(g):h.set(E,[g])}}return h}function yg(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function d1(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function bg(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function v1(i,s,o,h){if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Rs(h.href),g=s.querySelector(Ba(p));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Ao.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=g,Ne(g);return}g=s.ownerDocument||s,h=pg(h),(p=Ni.get(p))&&Kh(h,p),g=g.createElement("link"),Ne(g);var E=g;E._p=new Promise(function(A,P){E.onload=A,E.onerror=P}),Pe(g,"link",h),o.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Ao.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var $h=0;function p1(i,s){return i.stylesheets&&i.count===0&&Do(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var h=setTimeout(function(){if(i.stylesheets&&Do(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+s);0<i.imgBytes&&$h===0&&($h=62500*K_());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Do(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>$h?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function Ao(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Do(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ro=null;function Do(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ro=new Map,s.forEach(m1,i),Ro=null,Ao.call(i))}function m1(i,s){if(!(s.state.loading&4)){var o=Ro.get(i);if(o)var h=o.get(null);else{o=new Map,Ro.set(i,o);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var E=p[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),h=E)}h&&o.set(null,h)}p=s.instance,E=p.getAttribute("data-precedence"),g=o.get(E)||h,g===h&&o.set(null,p),o.set(E,p),this.count++,h=Ao.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),g?g.parentNode.insertBefore(p,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),s.state.loading|=4}}var Pa={$$typeof:T,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function g1(i,s,o,h,p,g,E,A,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.hiddenUpdates=qu(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function xg(i,s,o,h,p,g,E,A,P,K,lt,ht){return i=new g1(i,s,o,E,P,K,lt,ht,A),s=1,g===!0&&(s|=24),g=di(3,null,null,s),i.current=g,g.stateNode=i,s=Dc(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:h,isDehydrated:o,cache:s},jc(g),i}function Sg(i){return i?(i=ls,i):ls}function _g(i,s,o,h,p,g){p=Sg(p),h.context===null?h.context=p:h.pendingContext=p,h=Fn(s),h.payload={element:o},g=g===void 0?null:g,g!==null&&(h.callback=g),o=Pn(i,h,s),o!==null&&(ai(o,i,s),ga(o,i,s))}function wg(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function Zh(i,s){wg(i,s),(i=i.alternate)&&wg(i,s)}function Eg(i){if(i.tag===13||i.tag===31){var s=pr(i,67108864);s!==null&&ai(s,i,67108864),Zh(i,67108864)}}function Cg(i){if(i.tag===13||i.tag===31){var s=yi();s=Xu(s);var o=pr(i,s);o!==null&&ai(o,i,s),Zh(i,s)}}var No=!0;function y1(i,s,o,h){var p=j.T;j.T=null;var g=U.p;try{U.p=2,Jh(i,s,o,h)}finally{U.p=g,j.T=p}}function b1(i,s,o,h){var p=j.T;j.T=null;var g=U.p;try{U.p=8,Jh(i,s,o,h)}finally{U.p=g,j.T=p}}function Jh(i,s,o,h){if(No){var p=tf(h);if(p===null)Ph(i,s,h,Oo,o),Tg(i,h);else if(S1(p,i,s,o,h))h.stopPropagation();else if(Tg(i,h),s&4&&-1<x1.indexOf(i)){for(;p!==null;){var g=Qr(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=cr(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var P=1<<31-he(E);A.entanglements[1]|=P,E&=~P}qi(g),(Jt&6)===0&&(vo=Qt()+500,ka(0))}}break;case 31:case 13:A=pr(g,2),A!==null&&ai(A,g,2),mo(),Zh(g,2)}if(g=tf(h),g===null&&Ph(i,s,h,Oo,o),g===p)break;p=g}p!==null&&h.stopPropagation()}else Ph(i,s,h,null,o)}}function tf(i){return i=ic(i),ef(i)}var Oo=null;function ef(i){if(Oo=null,i=Kr(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=u(s),i!==null)return i;i=null}else if(o===31){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Oo=i,null}function Mg(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case Xe:return 2;case ce:return 8;case ge:case He:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var nf=!1,Qn=null,$n=null,Zn=null,Ia=new Map,Va=new Map,Jn=[],x1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tg(i,s){switch(i){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Ia.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Va.delete(s.pointerId)}}function Ua(i,s,o,h,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:o,eventSystemFlags:h,nativeEvent:g,targetContainers:[p]},s!==null&&(s=Qr(s),s!==null&&Eg(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function S1(i,s,o,h,p){switch(s){case"focusin":return Qn=Ua(Qn,i,s,o,h,p),!0;case"dragenter":return $n=Ua($n,i,s,o,h,p),!0;case"mouseover":return Zn=Ua(Zn,i,s,o,h,p),!0;case"pointerover":var g=p.pointerId;return Ia.set(g,Ua(Ia.get(g)||null,i,s,o,h,p)),!0;case"gotpointercapture":return g=p.pointerId,Va.set(g,Ua(Va.get(g)||null,i,s,o,h,p)),!0}return!1}function Ag(i){var s=Kr(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){i.blockedOn=s,Ud(i.priority,function(){Cg(o)});return}}else if(s===31){if(s=c(o),s!==null){i.blockedOn=s,Ud(i.priority,function(){Cg(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ko(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=tf(i.nativeEvent);if(o===null){o=i.nativeEvent;var h=new o.constructor(o.type,o);ec=h,o.target.dispatchEvent(h),ec=null}else return s=Qr(o),s!==null&&Eg(s),i.blockedOn=o,!1;s.shift()}return!0}function Rg(i,s,o){ko(i)&&o.delete(s)}function _1(){nf=!1,Qn!==null&&ko(Qn)&&(Qn=null),$n!==null&&ko($n)&&($n=null),Zn!==null&&ko(Zn)&&(Zn=null),Ia.forEach(Rg),Va.forEach(Rg)}function jo(i,s){i.blockedOn===s&&(i.blockedOn=null,nf||(nf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_1)))}var zo=null;function Dg(i){zo!==i&&(zo=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zo===i&&(zo=null);for(var s=0;s<i.length;s+=3){var o=i[s],h=i[s+1],p=i[s+2];if(typeof h!="function"){if(ef(h||o)===null)continue;break}var g=Qr(o);g!==null&&(i.splice(s,3),s-=3,th(g,{pending:!0,data:p,method:o.method,action:h},h,p))}}))}function Ns(i){function s(P){return jo(P,i)}Qn!==null&&jo(Qn,i),$n!==null&&jo($n,i),Zn!==null&&jo(Zn,i),Ia.forEach(s),Va.forEach(s);for(var o=0;o<Jn.length;o++){var h=Jn[o];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Jn.length&&(o=Jn[0],o.blockedOn===null);)Ag(o),o.blockedOn===null&&Jn.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var p=o[h],g=o[h+1],E=p[ti]||null;if(typeof g=="function")E||Dg(o);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(p=g,E=g[ti]||null)A=E.formAction;else if(ef(p)!==null)continue}else A=E.action;typeof A=="function"?o[h+1]=A:(o.splice(h,3),h-=3),Dg(o)}}}function Ng(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(E){return p=E})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),h||setTimeout(o,20)}function o(){if(!h&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function rf(i){this._internalRoot=i}Lo.prototype.render=rf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var o=s.current,h=yi();_g(o,h,i,s,null,null)},Lo.prototype.unmount=rf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;_g(i.current,2,null,i,null,null),mo(),s[Gr]=null}};function Lo(i){this._internalRoot=i}Lo.prototype.unstable_scheduleHydration=function(i){if(i){var s=Vd();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Jn.length&&s!==0&&s<Jn[o].priority;o++);Jn.splice(o,0,i),o===0&&Ag(i)}};var Og=t.version;if(Og!=="19.2.3")throw Error(n(527,Og,"19.2.3"));U.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=d(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var w1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Ze=Bo.inject(w1),Ke=Bo}catch{}}return Ya.createRoot=function(i,s){if(!a(i))throw Error(n(299));var o=!1,h="",p=Pp,g=Ip,E=Vp;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=xg(i,1,!1,null,null,o,h,null,p,g,E,Ng),i[Gr]=s.current,Fh(i),new rf(s)},Ya.hydrateRoot=function(i,s,o){if(!a(i))throw Error(n(299));var h=!1,p="",g=Pp,E=Ip,A=Vp,P=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),s=xg(i,1,!0,s,o??null,h,p,P,g,E,A,Ng),s.context=Sg(null),o=s.current,h=yi(),h=Xu(h),p=Fn(h),p.callback=null,Pn(o,p,h),o=h,s.current.lanes=o,Js(s,o),qi(s),i[Gr]=s.current,Fh(i),new Lo(s)},Ya.version="19.2.3",Ya}var Hg;function j1(){if(Hg)return lf.exports;Hg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),lf.exports=k1(),lf.exports}var z1=j1();const Yg=r=>{let t;const e=new Set,n=(d,v)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const y=t;t=v??(typeof m!="object"||m===null)?m:Object.assign({},t,m),e.forEach(x=>x(t,y))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>f,subscribe:d=>(e.add(d),()=>e.delete(d))},f=t=r(n,a,c);return c},L1=(r=>r?Yg(r):Yg),B1=r=>r;function F1(r,t=B1){const e=kt.useSyncExternalStore(r.subscribe,kt.useCallback(()=>t(r.getState()),[r,t]),kt.useCallback(()=>t(r.getInitialState()),[r,t]));return kt.useDebugValue(e),e}const P1=r=>{const t=L1(r),e=n=>F1(t,n);return Object.assign(e,t),e},eb=(r=>P1);function I1(r,t){let e;try{e=r()}catch{return}return{getItem:a=>{var l;const u=f=>f===null?null:JSON.parse(f,void 0),c=(l=e.getItem(a))!=null?l:null;return c instanceof Promise?c.then(u):u(c)},setItem:(a,l)=>e.setItem(a,JSON.stringify(l,void 0)),removeItem:a=>e.removeItem(a)}}const Hf=r=>t=>{try{const e=r(t);return e instanceof Promise?e:{then(n){return Hf(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return Hf(n)(e)}}}},V1=(r,t)=>(e,n,a)=>{let l={storage:I1(()=>localStorage),partialize:S=>S,version:0,merge:(S,M)=>({...M,...S}),...t},u=!1,c=0;const f=new Set,d=new Set;let v=l.storage;if(!v)return r((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),e(...S)},n,a);const m=()=>{const S=l.partialize({...n()});return v.setItem(l.name,{state:S,version:l.version})},y=a.setState;a.setState=(S,M)=>(y(S,M),m());const x=r((...S)=>(e(...S),m()),n,a);a.getInitialState=()=>x;let b;const w=()=>{var S,M;if(!v)return;const N=++c;u=!1,f.forEach(R=>{var C;return R((C=n())!=null?C:x)});const T=((M=l.onRehydrateStorage)==null?void 0:M.call(l,(S=n())!=null?S:x))||void 0;return Hf(v.getItem.bind(v))(l.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==l.version){if(l.migrate){const C=l.migrate(R.state,R.version);return C instanceof Promise?C.then(z=>[!0,z]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var C;if(N!==c)return;const[z,D]=R;if(b=l.merge(D,(C=n())!=null?C:x),e(b,!0),z)return m()}).then(()=>{N===c&&(T?.(b,void 0),b=n(),u=!0,d.forEach(R=>R(b)))}).catch(R=>{N===c&&T?.(void 0,R)})};return a.persist={setOptions:S=>{l={...l,...S},S.storage&&(v=S.storage)},clearStorage:()=>{v?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>w(),hasHydrated:()=>u,onHydrate:S=>(f.add(S),()=>{f.delete(S)}),onFinishHydration:S=>(d.add(S),()=>{d.delete(S)})},l.skipHydration||w(),b||x},ib=V1;function nb(r,t){return function(){return r.apply(t,arguments)}}const{toString:U1}=Object.prototype,{getPrototypeOf:ud}=Object,{iterator:Eu,toStringTag:rb}=Symbol,Cu=(r=>t=>{const e=U1.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ui=r=>(r=r.toLowerCase(),t=>Cu(t)===r),Mu=r=>t=>typeof t===r,{isArray:Qs}=Array,Ys=Mu("undefined");function vl(r){return r!==null&&!Ys(r)&&r.constructor!==null&&!Ys(r.constructor)&&li(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const sb=Ui("ArrayBuffer");function H1(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&sb(r.buffer),t}const Y1=Mu("string"),li=Mu("function"),ab=Mu("number"),pl=r=>r!==null&&typeof r=="object",W1=r=>r===!0||r===!1,Jo=r=>{if(Cu(r)!=="object")return!1;const t=ud(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(rb in r)&&!(Eu in r)},q1=r=>{if(!pl(r)||vl(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},X1=Ui("Date"),G1=Ui("File"),K1=Ui("Blob"),Q1=Ui("FileList"),$1=r=>pl(r)&&li(r.pipe),Z1=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||li(r.append)&&((t=Cu(r))==="formdata"||t==="object"&&li(r.toString)&&r.toString()==="[object FormData]"))},J1=Ui("URLSearchParams"),[tw,ew,iw,nw]=["ReadableStream","Request","Response","Headers"].map(Ui),rw=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ml(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let n,a;if(typeof r!="object"&&(r=[r]),Qs(r))for(n=0,a=r.length;n<a;n++)t.call(null,r[n],n,r);else{if(vl(r))return;const l=e?Object.getOwnPropertyNames(r):Object.keys(r),u=l.length;let c;for(n=0;n<u;n++)c=l[n],t.call(null,r[c],c,r)}}function lb(r,t){if(vl(r))return null;t=t.toLowerCase();const e=Object.keys(r);let n=e.length,a;for(;n-- >0;)if(a=e[n],t===a.toLowerCase())return a;return null}const Or=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ob=r=>!Ys(r)&&r!==Or;function Yf(){const{caseless:r,skipUndefined:t}=ob(this)&&this||{},e={},n=(a,l)=>{const u=r&&lb(e,l)||l;Jo(e[u])&&Jo(a)?e[u]=Yf(e[u],a):Jo(a)?e[u]=Yf({},a):Qs(a)?e[u]=a.slice():(!t||!Ys(a))&&(e[u]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&ml(arguments[a],n);return e}const sw=(r,t,e,{allOwnKeys:n}={})=>(ml(t,(a,l)=>{e&&li(a)?r[l]=nb(a,e):r[l]=a},{allOwnKeys:n}),r),aw=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),lw=(r,t,e,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},ow=(r,t,e,n)=>{let a,l,u;const c={};if(t=t||{},r==null)return t;do{for(a=Object.getOwnPropertyNames(r),l=a.length;l-- >0;)u=a[l],(!n||n(u,r,t))&&!c[u]&&(t[u]=r[u],c[u]=!0);r=e!==!1&&ud(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},uw=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const n=r.indexOf(t,e);return n!==-1&&n===e},cw=r=>{if(!r)return null;if(Qs(r))return r;let t=r.length;if(!ab(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},hw=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&ud(Uint8Array)),fw=(r,t)=>{const n=(r&&r[Eu]).call(r);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(r,l[0],l[1])}},dw=(r,t)=>{let e;const n=[];for(;(e=r.exec(t))!==null;)n.push(e);return n},vw=Ui("HTMLFormElement"),pw=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,a){return n.toUpperCase()+a}),Wg=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),mw=Ui("RegExp"),ub=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),n={};ml(e,(a,l)=>{let u;(u=t(a,l,r))!==!1&&(n[l]=u||a)}),Object.defineProperties(r,n)},gw=r=>{ub(r,(t,e)=>{if(li(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=r[e];if(li(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},yw=(r,t)=>{const e={},n=a=>{a.forEach(l=>{e[l]=!0})};return Qs(r)?n(r):n(String(r).split(t)),e},bw=()=>{},xw=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function Sw(r){return!!(r&&li(r.append)&&r[rb]==="FormData"&&r[Eu])}const _w=r=>{const t=new Array(10),e=(n,a)=>{if(pl(n)){if(t.indexOf(n)>=0)return;if(vl(n))return n;if(!("toJSON"in n)){t[a]=n;const l=Qs(n)?[]:{};return ml(n,(u,c)=>{const f=e(u,a+1);!Ys(f)&&(l[c]=f)}),t[a]=void 0,l}}return n};return e(r,0)},ww=Ui("AsyncFunction"),Ew=r=>r&&(pl(r)||li(r))&&li(r.then)&&li(r.catch),cb=((r,t)=>r?setImmediate:t?((e,n)=>(Or.addEventListener("message",({source:a,data:l})=>{a===Or&&l===e&&n.length&&n.shift()()},!1),a=>{n.push(a),Or.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",li(Or.postMessage)),Cw=typeof queueMicrotask<"u"?queueMicrotask.bind(Or):typeof process<"u"&&process.nextTick||cb,Mw=r=>r!=null&&li(r[Eu]),et={isArray:Qs,isArrayBuffer:sb,isBuffer:vl,isFormData:Z1,isArrayBufferView:H1,isString:Y1,isNumber:ab,isBoolean:W1,isObject:pl,isPlainObject:Jo,isEmptyObject:q1,isReadableStream:tw,isRequest:ew,isResponse:iw,isHeaders:nw,isUndefined:Ys,isDate:X1,isFile:G1,isBlob:K1,isRegExp:mw,isFunction:li,isStream:$1,isURLSearchParams:J1,isTypedArray:hw,isFileList:Q1,forEach:ml,merge:Yf,extend:sw,trim:rw,stripBOM:aw,inherits:lw,toFlatObject:ow,kindOf:Cu,kindOfTest:Ui,endsWith:uw,toArray:cw,forEachEntry:fw,matchAll:dw,isHTMLForm:vw,hasOwnProperty:Wg,hasOwnProp:Wg,reduceDescriptors:ub,freezeMethods:gw,toObjectSet:yw,toCamelCase:pw,noop:bw,toFiniteNumber:xw,findKey:lb,global:Or,isContextDefined:ob,isSpecCompliantForm:Sw,toJSONObject:_w,isAsyncFn:ww,isThenable:Ew,setImmediate:cb,asap:Cw,isIterable:Mw};function Ft(r,t,e,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}et.inherits(Ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:et.toJSONObject(this.config),code:this.code,status:this.status}}});const hb=Ft.prototype,fb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{fb[r]={value:r}});Object.defineProperties(Ft,fb);Object.defineProperty(hb,"isAxiosError",{value:!0});Ft.from=(r,t,e,n,a,l)=>{const u=Object.create(hb);et.toFlatObject(r,u,function(v){return v!==Error.prototype},d=>d!=="isAxiosError");const c=r&&r.message?r.message:"Error",f=t==null&&r?r.code:t;return Ft.call(u,c,f,e,n,a),r&&u.cause==null&&Object.defineProperty(u,"cause",{value:r,configurable:!0}),u.name=r&&r.name||"Error",l&&Object.assign(u,l),u};const Tw=null;function Wf(r){return et.isPlainObject(r)||et.isArray(r)}function db(r){return et.endsWith(r,"[]")?r.slice(0,-2):r}function qg(r,t,e){return r?r.concat(t).map(function(a,l){return a=db(a),!e&&l?"["+a+"]":a}).join(e?".":""):t}function Aw(r){return et.isArray(r)&&!r.some(Wf)}const Rw=et.toFlatObject(et,{},null,function(t){return/^is[A-Z]/.test(t)});function Tu(r,t,e){if(!et.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=et.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,S){return!et.isUndefined(S[w])});const n=e.metaTokens,a=e.visitor||v,l=e.dots,u=e.indexes,f=(e.Blob||typeof Blob<"u"&&Blob)&&et.isSpecCompliantForm(t);if(!et.isFunction(a))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(et.isDate(b))return b.toISOString();if(et.isBoolean(b))return b.toString();if(!f&&et.isBlob(b))throw new Ft("Blob is not supported. Use a Buffer instead.");return et.isArrayBuffer(b)||et.isTypedArray(b)?f&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function v(b,w,S){let M=b;if(b&&!S&&typeof b=="object"){if(et.endsWith(w,"{}"))w=n?w:w.slice(0,-2),b=JSON.stringify(b);else if(et.isArray(b)&&Aw(b)||(et.isFileList(b)||et.endsWith(w,"[]"))&&(M=et.toArray(b)))return w=db(w),M.forEach(function(T,R){!(et.isUndefined(T)||T===null)&&t.append(u===!0?qg([w],R,l):u===null?w:w+"[]",d(T))}),!1}return Wf(b)?!0:(t.append(qg(S,w,l),d(b)),!1)}const m=[],y=Object.assign(Rw,{defaultVisitor:v,convertValue:d,isVisitable:Wf});function x(b,w){if(!et.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));m.push(b),et.forEach(b,function(M,N){(!(et.isUndefined(M)||M===null)&&a.call(t,M,et.isString(N)?N.trim():N,w,y))===!0&&x(M,w?w.concat(N):[N])}),m.pop()}}if(!et.isObject(r))throw new TypeError("data must be an object");return x(r),t}function Xg(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function cd(r,t){this._pairs=[],r&&Tu(r,this,t)}const vb=cd.prototype;vb.append=function(t,e){this._pairs.push([t,e])};vb.toString=function(t){const e=t?function(n){return t.call(this,n,Xg)}:Xg;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function Dw(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function pb(r,t,e){if(!t)return r;const n=e&&e.encode||Dw;et.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let l;if(a?l=a(t,e):l=et.isURLSearchParams(t)?t.toString():new cd(t,e).toString(n),l){const u=r.indexOf("#");u!==-1&&(r=r.slice(0,u)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class Gg{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){et.forEach(this.handlers,function(n){n!==null&&t(n)})}}const mb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nw=typeof URLSearchParams<"u"?URLSearchParams:cd,Ow=typeof FormData<"u"?FormData:null,kw=typeof Blob<"u"?Blob:null,jw={isBrowser:!0,classes:{URLSearchParams:Nw,FormData:Ow,Blob:kw},protocols:["http","https","file","blob","url","data"]},hd=typeof window<"u"&&typeof document<"u",qf=typeof navigator=="object"&&navigator||void 0,zw=hd&&(!qf||["ReactNative","NativeScript","NS"].indexOf(qf.product)<0),Lw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bw=hd&&window.location.href||"http://localhost",Fw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hd,hasStandardBrowserEnv:zw,hasStandardBrowserWebWorkerEnv:Lw,navigator:qf,origin:Bw},Symbol.toStringTag,{value:"Module"})),qe={...Fw,...jw};function Pw(r,t){return Tu(r,new qe.classes.URLSearchParams,{visitor:function(e,n,a,l){return qe.isNode&&et.isBuffer(e)?(this.append(n,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function Iw(r){return et.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Vw(r){const t={},e=Object.keys(r);let n;const a=e.length;let l;for(n=0;n<a;n++)l=e[n],t[l]=r[l];return t}function gb(r){function t(e,n,a,l){let u=e[l++];if(u==="__proto__")return!0;const c=Number.isFinite(+u),f=l>=e.length;return u=!u&&et.isArray(a)?a.length:u,f?(et.hasOwnProp(a,u)?a[u]=[a[u],n]:a[u]=n,!c):((!a[u]||!et.isObject(a[u]))&&(a[u]=[]),t(e,n,a[u],l)&&et.isArray(a[u])&&(a[u]=Vw(a[u])),!c)}if(et.isFormData(r)&&et.isFunction(r.entries)){const e={};return et.forEachEntry(r,(n,a)=>{t(Iw(n),a,e,0)}),e}return null}function Uw(r,t,e){if(et.isString(r))try{return(t||JSON.parse)(r),et.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}const gl={transitional:mb,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",a=n.indexOf("application/json")>-1,l=et.isObject(t);if(l&&et.isHTMLForm(t)&&(t=new FormData(t)),et.isFormData(t))return a?JSON.stringify(gb(t)):t;if(et.isArrayBuffer(t)||et.isBuffer(t)||et.isStream(t)||et.isFile(t)||et.isBlob(t)||et.isReadableStream(t))return t;if(et.isArrayBufferView(t))return t.buffer;if(et.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Pw(t,this.formSerializer).toString();if((c=et.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Tu(c?{"files[]":t}:t,f&&new f,this.formSerializer)}}return l||a?(e.setContentType("application/json",!1),Uw(t)):t}],transformResponse:[function(t){const e=this.transitional||gl.transitional,n=e&&e.forcedJSONParsing,a=this.responseType==="json";if(et.isResponse(t)||et.isReadableStream(t))return t;if(t&&et.isString(t)&&(n&&!this.responseType||a)){const u=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(c){if(u)throw c.name==="SyntaxError"?Ft.from(c,Ft.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};et.forEach(["delete","get","head","post","put","patch"],r=>{gl.headers[r]={}});const Hw=et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yw=r=>{const t={};let e,n,a;return r&&r.split(`
`).forEach(function(u){a=u.indexOf(":"),e=u.substring(0,a).trim().toLowerCase(),n=u.substring(a+1).trim(),!(!e||t[e]&&Hw[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Kg=Symbol("internals");function Wa(r){return r&&String(r).trim().toLowerCase()}function tu(r){return r===!1||r==null?r:et.isArray(r)?r.map(tu):String(r)}function Ww(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(r);)t[n[1]]=n[2];return t}const qw=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function hf(r,t,e,n,a){if(et.isFunction(n))return n.call(this,t,e);if(a&&(t=e),!!et.isString(t)){if(et.isString(n))return t.indexOf(n)!==-1;if(et.isRegExp(n))return n.test(t)}}function Xw(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function Gw(r,t){const e=et.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+e,{value:function(a,l,u){return this[n].call(this,t,a,l,u)},configurable:!0})})}let oi=class{constructor(t){t&&this.set(t)}set(t,e,n){const a=this;function l(c,f,d){const v=Wa(f);if(!v)throw new Error("header name must be a non-empty string");const m=et.findKey(a,v);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||f]=tu(c))}const u=(c,f)=>et.forEach(c,(d,v)=>l(d,v,f));if(et.isPlainObject(t)||t instanceof this.constructor)u(t,e);else if(et.isString(t)&&(t=t.trim())&&!qw(t))u(Yw(t),e);else if(et.isObject(t)&&et.isIterable(t)){let c={},f,d;for(const v of t){if(!et.isArray(v))throw TypeError("Object iterator must return a key-value pair");c[d=v[0]]=(f=c[d])?et.isArray(f)?[...f,v[1]]:[f,v[1]]:v[1]}u(c,e)}else t!=null&&l(e,t,n);return this}get(t,e){if(t=Wa(t),t){const n=et.findKey(this,t);if(n){const a=this[n];if(!e)return a;if(e===!0)return Ww(a);if(et.isFunction(e))return e.call(this,a,n);if(et.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Wa(t),t){const n=et.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||hf(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let a=!1;function l(u){if(u=Wa(u),u){const c=et.findKey(n,u);c&&(!e||hf(n,n[c],c,e))&&(delete n[c],a=!0)}}return et.isArray(t)?t.forEach(l):l(t),a}clear(t){const e=Object.keys(this);let n=e.length,a=!1;for(;n--;){const l=e[n];(!t||hf(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const e=this,n={};return et.forEach(this,(a,l)=>{const u=et.findKey(n,l);if(u){e[u]=tu(a),delete e[l];return}const c=t?Xw(l):String(l).trim();c!==l&&delete e[l],e[c]=tu(a),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return et.forEach(this,(n,a)=>{n!=null&&n!==!1&&(e[a]=t&&et.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Kg]=this[Kg]={accessors:{}}).accessors,a=this.prototype;function l(u){const c=Wa(u);n[c]||(Gw(a,u),n[c]=!0)}return et.isArray(t)?t.forEach(l):l(t),this}};oi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);et.reduceDescriptors(oi.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[e]=n}}});et.freezeMethods(oi);function ff(r,t){const e=this||gl,n=t||e,a=oi.from(n.headers);let l=n.data;return et.forEach(r,function(c){l=c.call(e,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function yb(r){return!!(r&&r.__CANCEL__)}function $s(r,t,e){Ft.call(this,r??"canceled",Ft.ERR_CANCELED,t,e),this.name="CanceledError"}et.inherits($s,Ft,{__CANCEL__:!0});function bb(r,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?r(e):t(new Ft("Request failed with status code "+e.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Kw(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function Qw(r,t){r=r||10;const e=new Array(r),n=new Array(r);let a=0,l=0,u;return t=t!==void 0?t:1e3,function(f){const d=Date.now(),v=n[l];u||(u=d),e[a]=f,n[a]=d;let m=l,y=0;for(;m!==a;)y+=e[m++],m=m%r;if(a=(a+1)%r,a===l&&(l=(l+1)%r),d-u<t)return;const x=v&&d-v;return x?Math.round(y*1e3/x):void 0}}function $w(r,t){let e=0,n=1e3/t,a,l;const u=(d,v=Date.now())=>{e=v,a=null,l&&(clearTimeout(l),l=null),r(...d)};return[(...d)=>{const v=Date.now(),m=v-e;m>=n?u(d,v):(a=d,l||(l=setTimeout(()=>{l=null,u(a)},n-m)))},()=>a&&u(a)]}const ou=(r,t,e=3)=>{let n=0;const a=Qw(50,250);return $w(l=>{const u=l.loaded,c=l.lengthComputable?l.total:void 0,f=u-n,d=a(f),v=u<=c;n=u;const m={loaded:u,total:c,progress:c?u/c:void 0,bytes:f,rate:d||void 0,estimated:d&&c&&v?(c-u)/d:void 0,event:l,lengthComputable:c!=null,[t?"download":"upload"]:!0};r(m)},e)},Qg=(r,t)=>{const e=r!=null;return[n=>t[0]({lengthComputable:e,total:r,loaded:n}),t[1]]},$g=r=>(...t)=>et.asap(()=>r(...t)),Zw=qe.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,qe.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0,Jw=qe.hasStandardBrowserEnv?{write(r,t,e,n,a,l,u){if(typeof document>"u")return;const c=[`${r}=${encodeURIComponent(t)}`];et.isNumber(e)&&c.push(`expires=${new Date(e).toUTCString()}`),et.isString(n)&&c.push(`path=${n}`),et.isString(a)&&c.push(`domain=${a}`),l===!0&&c.push("secure"),et.isString(u)&&c.push(`SameSite=${u}`),document.cookie=c.join("; ")},read(r){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function tE(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function eE(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function xb(r,t,e){let n=!tE(t);return r&&(n||e==!1)?eE(r,t):t}const Zg=r=>r instanceof oi?{...r}:r;function Lr(r,t){t=t||{};const e={};function n(d,v,m,y){return et.isPlainObject(d)&&et.isPlainObject(v)?et.merge.call({caseless:y},d,v):et.isPlainObject(v)?et.merge({},v):et.isArray(v)?v.slice():v}function a(d,v,m,y){if(et.isUndefined(v)){if(!et.isUndefined(d))return n(void 0,d,m,y)}else return n(d,v,m,y)}function l(d,v){if(!et.isUndefined(v))return n(void 0,v)}function u(d,v){if(et.isUndefined(v)){if(!et.isUndefined(d))return n(void 0,d)}else return n(void 0,v)}function c(d,v,m){if(m in t)return n(d,v);if(m in r)return n(void 0,d)}const f={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:c,headers:(d,v,m)=>a(Zg(d),Zg(v),m,!0)};return et.forEach(Object.keys({...r,...t}),function(v){const m=f[v]||a,y=m(r[v],t[v],v);et.isUndefined(y)&&m!==c||(e[v]=y)}),e}const Sb=r=>{const t=Lr({},r);let{data:e,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:u,auth:c}=t;if(t.headers=u=oi.from(u),t.url=pb(xb(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),c&&u.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),et.isFormData(e)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(et.isFunction(e.getHeaders)){const f=e.getHeaders(),d=["content-type","content-length"];Object.entries(f).forEach(([v,m])=>{d.includes(v.toLowerCase())&&u.set(v,m)})}}if(qe.hasStandardBrowserEnv&&(n&&et.isFunction(n)&&(n=n(t)),n||n!==!1&&Zw(t.url))){const f=a&&l&&Jw.read(l);f&&u.set(a,f)}return t},iE=typeof XMLHttpRequest<"u",nE=iE&&function(r){return new Promise(function(e,n){const a=Sb(r);let l=a.data;const u=oi.from(a.headers).normalize();let{responseType:c,onUploadProgress:f,onDownloadProgress:d}=a,v,m,y,x,b;function w(){x&&x(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(v),a.signal&&a.signal.removeEventListener("abort",v)}let S=new XMLHttpRequest;S.open(a.method.toUpperCase(),a.url,!0),S.timeout=a.timeout;function M(){if(!S)return;const T=oi.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),C={data:!c||c==="text"||c==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:T,config:r,request:S};bb(function(D){e(D),w()},function(D){n(D),w()},C),S=null}"onloadend"in S?S.onloadend=M:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(M)},S.onabort=function(){S&&(n(new Ft("Request aborted",Ft.ECONNABORTED,r,S)),S=null)},S.onerror=function(R){const C=R&&R.message?R.message:"Network Error",z=new Ft(C,Ft.ERR_NETWORK,r,S);z.event=R||null,n(z),S=null},S.ontimeout=function(){let R=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const C=a.transitional||mb;a.timeoutErrorMessage&&(R=a.timeoutErrorMessage),n(new Ft(R,C.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,r,S)),S=null},l===void 0&&u.setContentType(null),"setRequestHeader"in S&&et.forEach(u.toJSON(),function(R,C){S.setRequestHeader(C,R)}),et.isUndefined(a.withCredentials)||(S.withCredentials=!!a.withCredentials),c&&c!=="json"&&(S.responseType=a.responseType),d&&([y,b]=ou(d,!0),S.addEventListener("progress",y)),f&&S.upload&&([m,x]=ou(f),S.upload.addEventListener("progress",m),S.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(v=T=>{S&&(n(!T||T.type?new $s(null,r,S):T),S.abort(),S=null)},a.cancelToken&&a.cancelToken.subscribe(v),a.signal&&(a.signal.aborted?v():a.signal.addEventListener("abort",v)));const N=Kw(a.url);if(N&&qe.protocols.indexOf(N)===-1){n(new Ft("Unsupported protocol "+N+":",Ft.ERR_BAD_REQUEST,r));return}S.send(l||null)})},rE=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let n=new AbortController,a;const l=function(d){if(!a){a=!0,c();const v=d instanceof Error?d:this.reason;n.abort(v instanceof Ft?v:new $s(v instanceof Error?v.message:v))}};let u=t&&setTimeout(()=>{u=null,l(new Ft(`timeout ${t} of ms exceeded`,Ft.ETIMEDOUT))},t);const c=()=>{r&&(u&&clearTimeout(u),u=null,r.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),r=null)};r.forEach(d=>d.addEventListener("abort",l));const{signal:f}=n;return f.unsubscribe=()=>et.asap(c),f}},sE=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let n=0,a;for(;n<e;)a=n+t,yield r.slice(n,a),n=a},aE=async function*(r,t){for await(const e of lE(r))yield*sE(e,t)},lE=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Jg=(r,t,e,n)=>{const a=aE(r,t);let l=0,u,c=f=>{u||(u=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:d,value:v}=await a.next();if(d){c(),f.close();return}let m=v.byteLength;if(e){let y=l+=m;e(y)}f.enqueue(new Uint8Array(v))}catch(d){throw c(d),d}},cancel(f){return c(f),a.return()}},{highWaterMark:2})},t0=64*1024,{isFunction:Fo}=et,oE=(({Request:r,Response:t})=>({Request:r,Response:t}))(et.global),{ReadableStream:e0,TextEncoder:i0}=et.global,n0=(r,...t)=>{try{return!!r(...t)}catch{return!1}},uE=r=>{r=et.merge.call({skipUndefined:!0},oE,r);const{fetch:t,Request:e,Response:n}=r,a=t?Fo(t):typeof fetch=="function",l=Fo(e),u=Fo(n);if(!a)return!1;const c=a&&Fo(e0),f=a&&(typeof i0=="function"?(b=>w=>b.encode(w))(new i0):async b=>new Uint8Array(await new e(b).arrayBuffer())),d=l&&c&&n0(()=>{let b=!1;const w=new e(qe.origin,{body:new e0,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!w}),v=u&&c&&n0(()=>et.isReadableStream(new n("").body)),m={stream:v&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!m[b]&&(m[b]=(w,S)=>{let M=w&&w[b];if(M)return M.call(w);throw new Ft(`Response type '${b}' is not supported`,Ft.ERR_NOT_SUPPORT,S)})});const y=async b=>{if(b==null)return 0;if(et.isBlob(b))return b.size;if(et.isSpecCompliantForm(b))return(await new e(qe.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(et.isArrayBufferView(b)||et.isArrayBuffer(b))return b.byteLength;if(et.isURLSearchParams(b)&&(b=b+""),et.isString(b))return(await f(b)).byteLength},x=async(b,w)=>{const S=et.toFiniteNumber(b.getContentLength());return S??y(w)};return async b=>{let{url:w,method:S,data:M,signal:N,cancelToken:T,timeout:R,onDownloadProgress:C,onUploadProgress:z,responseType:D,headers:I,withCredentials:B="same-origin",fetchOptions:V}=Sb(b),W=t||fetch;D=D?(D+"").toLowerCase():"text";let Z=rE([N,T&&T.toAbortSignal()],R),it=null;const X=Z&&Z.unsubscribe&&(()=>{Z.unsubscribe()});let ot;try{if(z&&d&&S!=="get"&&S!=="head"&&(ot=await x(I,M))!==0){let k=new e(w,{method:"POST",body:M,duplex:"half"}),L;if(et.isFormData(M)&&(L=k.headers.get("content-type"))&&I.setContentType(L),k.body){const[F,q]=Qg(ot,ou($g(z)));M=Jg(k.body,t0,F,q)}}et.isString(B)||(B=B?"include":"omit");const j=l&&"credentials"in e.prototype,U={...V,signal:Z,method:S.toUpperCase(),headers:I.normalize().toJSON(),body:M,duplex:"half",credentials:j?B:void 0};it=l&&new e(w,U);let st=await(l?W(it,V):W(w,U));const ft=v&&(D==="stream"||D==="response");if(v&&(C||ft&&X)){const k={};["status","statusText","headers"].forEach($=>{k[$]=st[$]});const L=et.toFiniteNumber(st.headers.get("content-length")),[F,q]=C&&Qg(L,ou($g(C),!0))||[];st=new n(Jg(st.body,t0,F,()=>{q&&q(),X&&X()}),k)}D=D||"text";let rt=await m[et.findKey(m,D)||"text"](st,b);return!ft&&X&&X(),await new Promise((k,L)=>{bb(k,L,{data:rt,headers:oi.from(st.headers),status:st.status,statusText:st.statusText,config:b,request:it})})}catch(j){throw X&&X(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Ft("Network Error",Ft.ERR_NETWORK,b,it),{cause:j.cause||j}):Ft.from(j,j&&j.code,b,it)}}},cE=new Map,_b=r=>{let t=r&&r.env||{};const{fetch:e,Request:n,Response:a}=t,l=[n,a,e];let u=l.length,c=u,f,d,v=cE;for(;c--;)f=l[c],d=v.get(f),d===void 0&&v.set(f,d=c?new Map:uE(t)),v=d;return d};_b();const fd={http:Tw,xhr:nE,fetch:{get:_b}};et.forEach(fd,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const r0=r=>`- ${r}`,hE=r=>et.isFunction(r)||r===null||r===!1;function fE(r,t){r=et.isArray(r)?r:[r];const{length:e}=r;let n,a;const l={};for(let u=0;u<e;u++){n=r[u];let c;if(a=n,!hE(n)&&(a=fd[(c=String(n)).toLowerCase()],a===void 0))throw new Ft(`Unknown adapter '${c}'`);if(a&&(et.isFunction(a)||(a=a.get(t))))break;l[c||"#"+u]=a}if(!a){const u=Object.entries(l).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=e?u.length>1?`since :
`+u.map(r0).join(`
`):" "+r0(u[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a}const wb={getAdapter:fE,adapters:fd};function df(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new $s(null,r)}function s0(r){return df(r),r.headers=oi.from(r.headers),r.data=ff.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),wb.getAdapter(r.adapter||gl.adapter,r)(r).then(function(n){return df(r),n.data=ff.call(r,r.transformResponse,n),n.headers=oi.from(n.headers),n},function(n){return yb(n)||(df(r),n&&n.response&&(n.response.data=ff.call(r,r.transformResponse,n.response),n.response.headers=oi.from(n.response.headers))),Promise.reject(n)})}const Eb="1.13.2",Au={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{Au[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const a0={};Au.transitional=function(t,e,n){function a(l,u){return"[Axios v"+Eb+"] Transitional option '"+l+"'"+u+(n?". "+n:"")}return(l,u,c)=>{if(t===!1)throw new Ft(a(u," has been removed"+(e?" in "+e:"")),Ft.ERR_DEPRECATED);return e&&!a0[u]&&(a0[u]=!0,console.warn(a(u," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(l,u,c):!0}};Au.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function dE(r,t,e){if(typeof r!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let a=n.length;for(;a-- >0;){const l=n[a],u=t[l];if(u){const c=r[l],f=c===void 0||u(c,l,r);if(f!==!0)throw new Ft("option "+l+" must be "+f,Ft.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Ft("Unknown option "+l,Ft.ERR_BAD_OPTION)}}const eu={assertOptions:dE,validators:Au},Xi=eu.validators;let jr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Gg,response:new Gg}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Lr(this.defaults,e);const{transitional:n,paramsSerializer:a,headers:l}=e;n!==void 0&&eu.assertOptions(n,{silentJSONParsing:Xi.transitional(Xi.boolean),forcedJSONParsing:Xi.transitional(Xi.boolean),clarifyTimeoutError:Xi.transitional(Xi.boolean)},!1),a!=null&&(et.isFunction(a)?e.paramsSerializer={serialize:a}:eu.assertOptions(a,{encode:Xi.function,serialize:Xi.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),eu.assertOptions(e,{baseUrl:Xi.spelling("baseURL"),withXsrfToken:Xi.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let u=l&&et.merge(l.common,l[e.method]);l&&et.forEach(["delete","get","head","post","put","patch","common"],b=>{delete l[b]}),e.headers=oi.concat(u,l);const c=[];let f=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(f=f&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let v,m=0,y;if(!f){const b=[s0.bind(this),void 0];for(b.unshift(...c),b.push(...d),y=b.length,v=Promise.resolve(e);m<y;)v=v.then(b[m++],b[m++]);return v}y=c.length;let x=e;for(;m<y;){const b=c[m++],w=c[m++];try{x=b(x)}catch(S){w.call(this,S);break}}try{v=s0.call(this,x)}catch(b){return Promise.reject(b)}for(m=0,y=d.length;m<y;)v=v.then(d[m++],d[m++]);return v}getUri(t){t=Lr(this.defaults,t);const e=xb(t.baseURL,t.url,t.allowAbsoluteUrls);return pb(e,t.params,t.paramsSerializer)}};et.forEach(["delete","get","head","options"],function(t){jr.prototype[t]=function(e,n){return this.request(Lr(n||{},{method:t,url:e,data:(n||{}).data}))}});et.forEach(["post","put","patch"],function(t){function e(n){return function(l,u,c){return this.request(Lr(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}jr.prototype[t]=e(),jr.prototype[t+"Form"]=e(!0)});let vE=class Cb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const u=new Promise(c=>{n.subscribe(c),l=c}).then(a);return u.cancel=function(){n.unsubscribe(l)},u},t(function(l,u,c){n.reason||(n.reason=new $s(l,u,c),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Cb(function(a){t=a}),cancel:t}}};function pE(r){return function(e){return r.apply(null,e)}}function mE(r){return et.isObject(r)&&r.isAxiosError===!0}const Xf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xf).forEach(([r,t])=>{Xf[t]=r});function Mb(r){const t=new jr(r),e=nb(jr.prototype.request,t);return et.extend(e,jr.prototype,t,{allOwnKeys:!0}),et.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return Mb(Lr(r,a))},e}const pe=Mb(gl);pe.Axios=jr;pe.CanceledError=$s;pe.CancelToken=vE;pe.isCancel=yb;pe.VERSION=Eb;pe.toFormData=Tu;pe.AxiosError=Ft;pe.Cancel=pe.CanceledError;pe.all=function(t){return Promise.all(t)};pe.spread=pE;pe.isAxiosError=mE;pe.mergeConfig=Lr;pe.AxiosHeaders=oi;pe.formToJSON=r=>gb(et.isHTMLForm(r)?new FormData(r):r);pe.getAdapter=wb.getAdapter;pe.HttpStatusCode=Xf;pe.default=pe;const{Axios:tN,AxiosError:eN,CanceledError:iN,isCancel:nN,CancelToken:rN,VERSION:sN,all:aN,Cancel:lN,isAxiosError:oN,spread:uN,toFormData:cN,AxiosHeaders:hN,HttpStatusCode:fN,formToJSON:dN,getAdapter:vN,mergeConfig:pN}=pe,iu=!0,dd={ORDER_SERVICE:"https://6fa1577e.r8.cpolar.top",DEPTH_SERVICE:"https://6fa1577e.r8.cpolar.top",WS_SERVICE:"wss://6fa1577e.r8.cpolar.top/ws",MARKET_SERVICE:"https://6fa1577e.r8.cpolar.top",KLINE_SERVICE:"https://6fa1577e.r8.cpolar.top"},uu=eb()(ib(r=>({config:dd,isConfigured:!0,setConfig:t=>r({config:t,isConfigured:!0}),clearConfig:()=>r({config:null,isConfigured:!1})}),{name:"exchange-config",skipHydration:iu}));function Tb(){const{config:r}=uu.getState();return r||dd}class gE{orderClient;depthClient;marketClient;klineClient;token=null;constructor(){this.init()}init(){const t=Tb();this.orderClient=pe.create({baseURL:t.ORDER_SERVICE}),this.depthClient=pe.create({baseURL:t.DEPTH_SERVICE}),this.marketClient=pe.create({baseURL:t.MARKET_SERVICE}),this.klineClient=pe.create({baseURL:t.KLINE_SERVICE}),this.orderClient.interceptors.request.use(e=>(this.token&&(e.headers.Authorization=`Bearer ${this.token}`),e))}convertApiOrderToOrder(t){return{id:t.id,clientOrderId:t.client_order_id,symbol:t.symbol,side:t.side,type:t.type,price:t.price,qty:t.qty,quoteQty:t.quote_qty,filledQty:t.filled_qty,filledQuote:t.filled_quote,status:t.status,totalFee:t.total_fee,feeAsset:t.fee_asset,createdAt:t.created_at,updatedAt:t.updated_at}}setToken(t){this.token=t}getToken(){return this.token}async getAuthToken(t){const e=await this.orderClient.post("/api/v1/auth/token",{user_id:t});return{token:e.data.data.token,userId:e.data.data.user_id}}async getTicker(t){return(await this.marketClient.get(`/api/v1/ticker/${t}`)).data.data}async getDepth(t,e=100){return(await this.depthClient.get("/api/v1/depth",{params:{symbol:t,limit:e,with_id:!0}})).data}getIntervalMs(t){return{"1m":6e4,"5m":3e5,"15m":9e5,"30m":18e5,"1h":36e5,"4h":144e5,"1d":864e5,"1w":6048e5}[t]||60*1e3}async getKlines(t,e,n=500,a){try{const l={symbol:t,interval:e};if(a){const c=this.getIntervalMs(e);l.end_time=a,l.start_time=a-n*c}else l.limit=n;const u=await this.klineClient.get("/api/v1/klines",{params:l});return Array.isArray(u.data)?u.data:u.data&&u.data.data&&Array.isArray(u.data.data)||u.data&&u.data.code===0&&Array.isArray(u.data.data)?u.data.data:(console.warn("KAPI:",u.data),[])}catch(l){return console.error("KAPI:",l),[]}}async getAssets(){return(await this.orderClient.get("/api/v1/assets")).data.data}async getAsset(t){return(await this.orderClient.get(`/api/v1/assets/${t}`)).data.data}async placeOrder(t){const e=await this.orderClient.post("/api/v1/orders",t);return{orderId:e.data.data.order_id,clientOrderId:e.data.data.client_order_id}}async cancelOrder(t){await this.orderClient.delete(`/api/v1/orders/${t}`)}async getOrders(t){const e=await this.orderClient.get("/api/v1/orders",{params:t});return{orders:e.data.data.orders.map(n=>this.convertApiOrderToOrder(n)),total:e.data.data.total}}async getOrder(t){const e=await this.orderClient.get(`/api/v1/orders/${t}`);return this.convertApiOrderToOrder(e.data.data)}async getOpenOrders(t){return(await this.orderClient.get("/api/v1/openOrders",{params:t})).data.data.map(n=>this.convertApiOrderToOrder(n))}async getTrades(t,e=50){return(await this.orderClient.get("/api/v1/trades",{params:{symbol:t,limit:e}})).data.data.map((a,l)=>({id:`${a.t}-${l}`,symbol:t,price:a.p,qty:a.q,quote_qty:a.Q,taker_side:a.s,created_at:a.t}))}async getMyTrades(t){return(await this.orderClient.get("/api/v1/myTrades",{params:{symbol:t?.symbol,limit:t?.limit,from_id:t?.fromId}})).data.data}async getOrderTrades(t){return(await this.orderClient.get(`/api/v1/orders/${t}/trades`)).data.data.map(n=>({id:n.id,orderId:n.order_id,symbol:n.symbol,price:n.price,qty:n.qty,quoteQty:n.quote_qty,fee:n.fee,feeAsset:n.fee_asset,isBuyer:n.is_buyer,isMaker:n.is_maker,time:n.time}))}}const xe=new gE;class yE{ws=null;reconnectTimer=null;heartbeatTimer=null;subscriptions=new Set;handlers=new Map;isConnecting=!1;token=null;isAuthenticated=!1;isAuthenticating=!1;pendingPrivateSubscriptions=[];connectionStatus="disconnected";statusCallbacks=new Set;getWsUrl(){return Tb().WS_SERVICE}setConnectionStatus(t){this.connectionStatus!==t&&(this.connectionStatus=t,this.statusCallbacks.forEach(e=>{try{e(t)}catch(n){console.error("[WS] Status callback error:",n)}}))}getConnectionStatus(){return this.connectionStatus}onConnectionStatusChange(t){return this.statusCallbacks.add(t),()=>{this.statusCallbacks.delete(t)}}reinit(){this.disconnect(),this.subscriptions.clear(),this.handlers.clear(),this.isAuthenticated=!1,this.isAuthenticating=!1,this.pendingPrivateSubscriptions=[]}connect(){return new Promise((t,e)=>{if(this.ws?.readyState===WebSocket.OPEN){t();return}if(this.isConnecting){const n=setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&(clearInterval(n),t())},100);return}this.isConnecting=!0,this.setConnectionStatus("connecting"),this.ws=new WebSocket(this.getWsUrl()),this.ws.onopen=()=>{this.isConnecting=!1,this.isAuthenticated=!1,this.setConnectionStatus("connected"),this.startHeartbeat(),this.token?this.authenticate(this.token):this.resubscribePublicChannels(),t()},this.ws.onmessage=n=>{const a=n.data.split(`
`).filter(l=>l.trim());for(const l of a)try{const u=JSON.parse(l);if(u.op==="pong"||u.op==="subscribe"||u.op==="unsubscribe")continue;if(u.op==="auth"){console.log("[WS] Auth response:",u),this.isAuthenticating=!1,u.code===0||u.success?(this.isAuthenticated=!0,this.subscribePrivateChannels()):console.error("[WS] Auth failed:",u.message||u.msg);continue}const c=u.ch||u.channel,f=u.d||u.data;c&&f&&this.notifyHandlers(c,f)}catch(u){console.error("[WS] Message parse error:",u)}},this.ws.onclose=()=>{this.isConnecting=!1,this.isAuthenticated=!1,this.setConnectionStatus("disconnected"),this.stopHeartbeat(),this.scheduleReconnect()},this.ws.onerror=n=>{console.error("[WS] Error:",n),this.isConnecting=!1,e(n)}})}disconnect(){this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws&&(this.ws.close(),this.ws=null),this.subscriptions.clear(),this.handlers.clear()}scheduleReconnect(){this.reconnectTimer||(this.reconnectTimer=window.setTimeout(()=>{this.reconnectTimer=null,this.connect()},3e3))}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=window.setInterval(()=>{this.send({op:"ping"})},3e4)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}sendSubscribe(t){this.send({op:"subscribe",args:t})}sendUnsubscribe(t){this.send({op:"unsubscribe",args:t})}authenticate(t){this.isAuthenticated||this.isAuthenticating||(this.token=t,this.ws?.readyState===WebSocket.OPEN&&(this.isAuthenticating=!0,this.send({op:"auth",args:[t]})))}isPrivateChannel(t){return t==="order"||t==="balance"}resubscribePublicChannels(){const t=[];this.subscriptions.forEach(e=>{this.isPrivateChannel(e)||t.push(e)}),t.length>0&&this.sendSubscribe(t)}subscribePrivateChannels(){if(this.pendingPrivateSubscriptions.length>0){const t=[...new Set(this.pendingPrivateSubscriptions)];console.log("[WS] Subscribing private channels:",t),this.sendSubscribe(t),t.forEach(e=>{this.subscriptions.add(e)}),this.pendingPrivateSubscriptions=[]}}setToken(t){if(this.token=t,t&&this.ws?.readyState===WebSocket.OPEN&&!this.isAuthenticated&&!this.isAuthenticating)this.authenticate(t);else if(!t){this.isAuthenticated=!1,this.isAuthenticating=!1,this.pendingPrivateSubscriptions=[];const e=[];this.subscriptions.forEach(n=>{this.isPrivateChannel(n)&&(e.push(n),this.subscriptions.delete(n),this.handlers.delete(n))}),e.length>0&&this.sendUnsubscribe(e)}}subscribe(t,e){return this.subscriptions.has(t)||(this.subscriptions.add(t),this.isPrivateChannel(t)?this.isAuthenticated?this.sendSubscribe([t]):(this.pendingPrivateSubscriptions.includes(t)||this.pendingPrivateSubscriptions.push(t),this.token&&this.ws?.readyState===WebSocket.OPEN&&this.authenticate(this.token)):this.sendSubscribe([t])),this.handlers.has(t)||this.handlers.set(t,new Set),this.handlers.get(t).add(e),()=>{this.unsubscribe(t,e)}}unsubscribe(t,e){const n=this.handlers.get(t);n&&(n.delete(e),n.size===0&&(this.handlers.delete(t),this.subscriptions.delete(t),this.sendUnsubscribe([t])))}unsubscribeAll(t){const e=[];this.subscriptions.forEach(n=>{n.startsWith(t)&&e.push(n)}),e.forEach(n=>{this.subscriptions.delete(n),this.handlers.delete(n)}),e.length>0&&this.sendUnsubscribe(e)}notifyHandlers(t,e){const n=this.handlers.get(t);n&&n.forEach(a=>{try{a(t,e)}catch(l){console.error("[WS] Handler error:",l)}})}}const se=new yE,bE="BTC_USDT",l0=50,xE=[{label:"0.01",value:2},{label:"0.1",value:1},{label:"1",value:0},{label:"10",value:-1},{label:"100",value:-2}],Wt=eb()(ib((r,t)=>({isLoggedIn:!1,userId:null,token:null,assets:[],orders:[],openOrders:[],symbol:bE,ticker:null,interval:"1m",lastKline:null,login:async e=>{try{const{token:n,userId:a}=await xe.getAuthToken(e);xe.setToken(n),se.setToken(n),r({isLoggedIn:!0,userId:a,token:n}),await t().fetchAssets()}catch(n){throw console.error("Login failed:",n),n}},logout:()=>{xe.setToken(null),se.setToken(null),r({isLoggedIn:!1,userId:null,token:null,assets:[],orders:[],openOrders:[]})},fetchAssets:async()=>{try{const e=await xe.getAssets();r({assets:e})}catch(e){console.error("Fetch assets failed:",e)}},fetchOrders:async()=>{try{const{orders:e}=await xe.getOrders({symbol:t().symbol,pageSize:50});r({orders:e})}catch(e){console.error("Fetch orders failed:",e)}},fetchOpenOrders:async()=>{try{const e=await xe.getOpenOrders();r({openOrders:e})}catch(e){console.error("Fetch open orders failed:",e)}},updateOrder:e=>{r(n=>{const a=n.orders.findIndex(l=>l.id===e.id);if(a>=0){const l=[...n.orders];return l[a]=e,{orders:l}}else return{orders:[e,...n.orders]}})},updateOpenOrders:e=>{r(n=>{const a=e.status===1||e.status===2,l=n.openOrders.findIndex(u=>u.id===e.id);if(a)if(l>=0){const u=[...n.openOrders];return u[l]=e,{openOrders:u}}else return{openOrders:[e,...n.openOrders]};else if(l>=0)return{openOrders:n.openOrders.filter(c=>c.id!==e.id)};return n})},updateAsset:e=>{r(n=>{const a=n.assets.findIndex(l=>l.asset===e.asset);if(a>=0){const l=[...n.assets];return l[a]=e,{assets:l}}else return{assets:[...n.assets,e]}})},updateAssetDelta:(e,n)=>{r(a=>{const l=a.assets.findIndex(u=>u.asset===e);if(l>=0){const u=a.assets[l],c=(parseFloat(u.available)+parseFloat(n)).toString(),f=(parseFloat(c)+parseFloat(u.frozen)).toString(),d=[...a.assets];return d[l]={...u,available:c,total:f},{assets:d}}else{const u=parseFloat(n).toString();return{assets:[...a.assets,{asset:e,available:u,frozen:"0",total:u}]}}})},setSymbol:e=>{r({symbol:e,ticker:null})},setTicker:e=>{r({ticker:e})},setInterval:e=>{r({interval:e})},setLastKline:e=>{r({lastKline:e})}}),{name:"exchange-storage",partialize:r=>({token:r.token,userId:r.userId,isLoggedIn:r.isLoggedIn,symbol:r.symbol,interval:r.interval})})),{token:vf}=Wt.getState();vf&&(xe.setToken(vf),se.setToken(vf));function Ab(){const r=Wt(a=>a.symbol),t=Wt(a=>a.ticker),e=Wt(a=>a.setTicker),n=O.useCallback((a,l)=>{const u=l;e({symbol:u.s,lastPrice:u.lp,lastQty:u.lq,open24h:u.o,high24h:u.h,low24h:u.l,volume24h:u.v,quoteVolume24h:u.qv,priceChange24h:u.c,priceChangePercent:u.cp,bestBid:u.bb,bestAsk:u.ba,timestamp:u.t})},[e]);return O.useEffect(()=>{const a=`ticker@${r}`;return se.connect().then(()=>{se.subscribe(a,n)}).catch(()=>{}),()=>{se.unsubscribe(a,n)}},[r,n]),t}function vd(){const[r,t]=O.useState(se.getConnectionStatus());return O.useEffect(()=>se.onConnectionStatusChange(n=>{t(n)}),[]),r}function SE(r,t,e){const n=parseFloat(r);if(t>=0){const a=Math.pow(10,-t);return e==="bid"?(Math.floor(n/a)*a).toFixed(t):(Math.ceil(n/a)*a).toFixed(t)}else{const a=Math.pow(10,-t);return String(e==="bid"?Math.floor(n/a)*a:Math.ceil(n/a)*a)}}function o0(r,t,e,n){const a=new Map;for(const[f,d]of r){if(parseFloat(d)===0)continue;const v=SE(f,t,e),m=a.get(v)||0;a.set(v,m+parseFloat(d))}const u=[...a.entries()].sort((f,d)=>e==="bid"?parseFloat(d[0])-parseFloat(f[0]):parseFloat(f[0])-parseFloat(d[0])).slice(0,n);let c=0;return u.map(([f,d])=>(c+=d,[f,d.toFixed(8),c.toFixed(8)]))}function _E(r=2){const t=Wt(D=>D.symbol),e=vd(),[n,a]=O.useState({bids:[],asks:[],isReady:!1}),l=O.useRef(new Map),u=O.useRef(new Map),c=O.useRef(0),f=O.useRef([]),d=O.useRef(!1),v=O.useRef(0),m=O.useRef(!1),y=O.useRef(e),x=5,b=500,w=O.useRef(t);w.current=t;const S=O.useRef(r);S.current=r;const M=O.useCallback(()=>{const D=o0(l.current,S.current,"bid",l0),I=o0(u.current,S.current,"ask",l0);a({bids:D,asks:I,isReady:!0})},[]),N=O.useCallback(D=>{for(const[I,B]of D.b)B==="0"||parseFloat(B)===0?l.current.delete(I):l.current.set(I,B);for(const[I,B]of D.a)B==="0"||parseFloat(B)===0?u.current.delete(I):u.current.set(I,B);c.current=D.u},[]),T=O.useRef(void 0),R=O.useCallback(async(D=!1)=>{if(!d.current){d.current=!0;try{if(D){if(v.current++,v.current>x){d.current=!1;return}await new Promise(Z=>setTimeout(Z,b))}const I=await xe.getDepth(w.current,500),B=I.id;l.current.clear(),u.current.clear();for(const[Z,it]of I.bids)l.current.set(Z,it);for(const[Z,it]of I.asks)u.current.set(Z,it);const V=f.current.sort((Z,it)=>Z.U-it.U);let W=-1;for(let Z=0;Z<V.length;Z++){const it=V[Z];if(!(it.u<=B)&&it.U<=B+1&&it.u>=B+1){W=Z;break}}if(W>=0){for(let Z=W;Z<V.length;Z++){const it=V[Z];if(Z>W&&it.U>c.current+1)break;it.u<=c.current||N(it)}v.current=0}else c.current=B;f.current=[],M()}catch(I){console.error("Failed to initialize order book:",I)}finally{d.current=!1}}},[N,M]);T.current=R;const C=O.useRef(void 0);C.current=(D,I)=>{const B=I;if(d.current||c.current===0){f.current.push(B);return}if(!(B.u<=c.current)){if(B.U>c.current+1){c.current=0,T.current?.(!0);return}N(B),M()}};const z=O.useCallback((D,I)=>{C.current?.(D,I)},[]);return O.useEffect(()=>{const D=y.current!=="connected"&&e==="connected",I=w.current!==t||D;if(w.current=t,y.current=e,!I)return;l.current.clear(),u.current.clear(),c.current=0,f.current=[],v.current=0,m.current=!1,a({bids:[],asks:[],isReady:!1});const B=`depth_update@${t}`;let V=!0;return xe.getDepth(t,500).then(W=>{if(!V)return;for(const[it,X]of W.bids)l.current.set(it,X);for(const[it,X]of W.asks)u.current.set(it,X);c.current=W.id;const Z=f.current.sort((it,X)=>it.U-X.U);for(const it of Z)if(!(it.u<=c.current)){if(it.U>c.current+1)break;N(it)}f.current=[],M()}).catch(W=>{console.error("Failed to get initial depth:",W)}),se.connect().then(()=>{V&&(m.current=!0,se.subscribe(B,z))}).catch(()=>{}),()=>{V=!1,se.unsubscribe(B,z)}},[t,e,z,N,M]),O.useEffect(()=>{c.current>0&&M()},[r,M]),n}function wE(r=50){const t=Wt(d=>d.symbol),e=vd(),[n,a]=O.useState([]),l=O.useRef(r),u=O.useRef(t),c=O.useRef(e),f=O.useRef(!1);return O.useEffect(()=>{l.current=r},[r]),O.useEffect(()=>{const d=c.current!=="connected"&&e==="connected",v=u.current!==t,m=v||d||!f.current,y=u.current;if(u.current=t,c.current=e,e!=="connected")return;const x=`trade@${t}`,b=`trade@${y}`,w=(S,M)=>{const N=M,T={id:String(N.id),symbol:N.s,price:N.p,qty:N.q,quote_qty:N.qq,taker_side:N.ts,created_at:N.t};a(R=>R.some(z=>z.id===T.id)?R:[T,...R].slice(0,l.current))};return v&&y&&se.unsubscribe(b,w),m&&(a([]),f.current=!0,xe.getTrades(t,r).then(S=>{S&&S.length>0&&a(S)}).catch(S=>{console.error("Failed to fetch trades:",S)})),se.subscribe(x,w),()=>{se.unsubscribe(x,w)}},[t,r,e]),n}function EE(r){const[t,e]=O.useState(()=>typeof window<"u"?window.matchMedia(r).matches:!1);return O.useEffect(()=>{const n=window.matchMedia(r),a=l=>e(l.matches);return n.addEventListener?(n.addEventListener("change",a),()=>n.removeEventListener("change",a)):(n.addListener(a),()=>n.removeListener(a))},[r]),t}function Yr(){return EE("(max-width: 768px)")}var Ru=tb(),CE=Object.defineProperty,ME=(r,t,e)=>t in r?CE(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,pf=(r,t,e)=>(ME(r,typeof t!="symbol"?t+"":t,e),e);let TE=class{constructor(){pf(this,"current",this.detect()),pf(this,"handoffState","pending"),pf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Zi=new TE;function yl(r){var t;return Zi.isServer?null:r==null?document:(t=r?.ownerDocument)!=null?t:document}function Gf(r){var t,e;return Zi.isServer?null:r==null?document:(e=(t=r?.getRootNode)==null?void 0:t.call(r))!=null?e:document}function Rb(r){var t,e;return(e=(t=Gf(r))==null?void 0:t.activeElement)!=null?e:null}function AE(r){return Rb(r)===r}function Du(r){typeof queueMicrotask=="function"?queueMicrotask(r):Promise.resolve().then(r).catch(t=>setTimeout(()=>{throw t}))}function Rn(){let r=[],t={addEventListener(e,n,a,l){return e.addEventListener(n,a,l),t.add(()=>e.removeEventListener(n,a,l))},requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...e){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...e))},setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){let n={current:!0};return Du(()=>{n.current&&e[0]()}),t.add(()=>{n.current=!1})},style(e,n,a){let l=e.style.getPropertyValue(n);return Object.assign(e.style,{[n]:a}),this.add(()=>{Object.assign(e.style,{[n]:l})})},group(e){let n=Rn();return e(n),this.add(()=>n.dispose())},add(e){return r.includes(e)||r.push(e),()=>{let n=r.indexOf(e);if(n>=0)for(let a of r.splice(n,1))a()}},dispose(){for(let e of r.splice(0))e()}};return t}function Nu(){let[r]=O.useState(Rn);return O.useEffect(()=>()=>r.dispose(),[r]),r}let ui=(r,t)=>{Zi.isServer?O.useEffect(r,t):O.useLayoutEffect(r,t)};function Wr(r){let t=O.useRef(r);return ui(()=>{t.current=r},[r]),t}let ue=function(r){let t=Wr(r);return kt.useCallback((...e)=>t.current(...e),[t])};function bl(r){return O.useMemo(()=>r,Object.values(r))}let RE=O.createContext(void 0);function DE(){return O.useContext(RE)}function Kf(...r){return Array.from(new Set(r.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Tn(r,t,...e){if(r in t){let a=t[r];return typeof a=="function"?a(...e):a}let n=new Error(`Tried to handle "${r}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Tn),n}var cu=(r=>(r[r.None=0]="None",r[r.RenderStrategy=1]="RenderStrategy",r[r.Static=2]="Static",r))(cu||{}),nr=(r=>(r[r.Unmount=0]="Unmount",r[r.Hidden=1]="Hidden",r))(nr||{});function ki(){let r=OE();return O.useCallback(t=>NE({mergeRefs:r,...t}),[r])}function NE({ourProps:r,theirProps:t,slot:e,defaultTag:n,features:a,visible:l=!0,name:u,mergeRefs:c}){c=c??kE;let f=Db(t,r);if(l)return Po(f,e,n,u,c);let d=a??0;if(d&2){let{static:v=!1,...m}=f;if(v)return Po(m,e,n,u,c)}if(d&1){let{unmount:v=!0,...m}=f;return Tn(v?0:1,{0(){return null},1(){return Po({...m,hidden:!0,style:{display:"none"}},e,n,u,c)}})}return Po(f,e,n,u,c)}function Po(r,t={},e,n,a){let{as:l=e,children:u,refName:c="ref",...f}=mf(r,["unmount","static"]),d=r.ref!==void 0?{[c]:r.ref}:{},v=typeof u=="function"?u(t):u;"className"in f&&f.className&&typeof f.className=="function"&&(f.className=f.className(t)),f["aria-labelledby"]&&f["aria-labelledby"]===f.id&&(f["aria-labelledby"]=void 0);let m={};if(t){let y=!1,x=[];for(let[b,w]of Object.entries(t))typeof w=="boolean"&&(y=!0),w===!0&&x.push(b.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(y){m["data-headlessui-state"]=x.join(" ");for(let b of x)m[`data-${b}`]=""}}if(el(l)&&(Object.keys(Rr(f)).length>0||Object.keys(Rr(m)).length>0))if(!O.isValidElement(v)||Array.isArray(v)&&v.length>1||zE(v)){if(Object.keys(Rr(f)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Rr(f)).concat(Object.keys(Rr(m))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=v.props,x=y?.className,b=typeof x=="function"?(...M)=>Kf(x(...M),f.className):Kf(x,f.className),w=b?{className:b}:{},S=Db(v.props,Rr(mf(f,["ref"])));for(let M in m)M in S&&delete m[M];return O.cloneElement(v,Object.assign({},S,m,d,{ref:a(jE(v),d.ref)},w))}return O.createElement(l,Object.assign({},mf(f,["ref"]),!el(l)&&d,!el(l)&&m),v)}function OE(){let r=O.useRef([]),t=O.useCallback(e=>{for(let n of r.current)n!=null&&(typeof n=="function"?n(e):n.current=e)},[]);return(...e)=>{if(!e.every(n=>n==null))return r.current=e,t}}function kE(...r){return r.every(t=>t==null)?void 0:t=>{for(let e of r)e!=null&&(typeof e=="function"?e(t):e.current=t)}}function Db(...r){if(r.length===0)return{};if(r.length===1)return r[0];let t={},e={};for(let n of r)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(e[a]!=null||(e[a]=[]),e[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])for(let n in e)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(e[n]=[a=>{var l;return(l=a?.preventDefault)==null?void 0:l.call(a)}]);for(let n in e)Object.assign(t,{[n](a,...l){let u=e[n];for(let c of u){if((a instanceof Event||a?.nativeEvent instanceof Event)&&a.defaultPrevented)return;c(a,...l)}}});return t}function hi(r){var t;return Object.assign(O.forwardRef(r),{displayName:(t=r.displayName)!=null?t:r.name})}function Rr(r){let t=Object.assign({},r);for(let e in t)t[e]===void 0&&delete t[e];return t}function mf(r,t=[]){let e=Object.assign({},r);for(let n of t)n in e&&delete e[n];return e}function jE(r){return kt.version.split(".")[0]>="19"?r.props.ref:r.ref}function el(r){return r===O.Fragment||r===Symbol.for("react.fragment")}function zE(r){return el(r.type)}let LE="span";var hu=(r=>(r[r.None=1]="None",r[r.Focusable=2]="Focusable",r[r.Hidden=4]="Hidden",r))(hu||{});function BE(r,t){var e;let{features:n=1,...a}=r,l={ref:t,"aria-hidden":(n&2)===2?!0:(e=a["aria-hidden"])!=null?e:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return ki()({ourProps:l,theirProps:a,slot:{},defaultTag:LE,name:"Hidden"})}let Qf=hi(BE);function FE(r){return typeof r!="object"||r===null?!1:"nodeType"in r}function ar(r){return FE(r)&&"tagName"in r}function Br(r){return ar(r)&&"accessKey"in r}function rr(r){return ar(r)&&"tabIndex"in r}function PE(r){return ar(r)&&"style"in r}function IE(r){return Br(r)&&r.nodeName==="IFRAME"}function VE(r){return Br(r)&&r.nodeName==="INPUT"}let Nb=Symbol();function UE(r,t=!0){return Object.assign(r,{[Nb]:t})}function Ji(...r){let t=O.useRef(r);O.useEffect(()=>{t.current=r},[r]);let e=ue(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return r.every(n=>n==null||n?.[Nb])?void 0:e}let pd=O.createContext(null);pd.displayName="DescriptionContext";function Ob(){let r=O.useContext(pd);if(r===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Ob),t}return r}function HE(){let[r,t]=O.useState([]);return[r.length>0?r.join(" "):void 0,O.useMemo(()=>function(e){let n=ue(l=>(t(u=>[...u,l]),()=>t(u=>{let c=u.slice(),f=c.indexOf(l);return f!==-1&&c.splice(f,1),c}))),a=O.useMemo(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return kt.createElement(pd.Provider,{value:a},e.children)},[t])]}let YE="p";function WE(r,t){let e=O.useId(),n=DE(),{id:a=`headlessui-description-${e}`,...l}=r,u=Ob(),c=Ji(t);ui(()=>u.register(a),[a,u.register]);let f=bl({...u.slot,disabled:n||!1}),d={ref:c,...u.props,id:a};return ki()({ourProps:d,theirProps:l,slot:f,defaultTag:YE,name:u.name||"Description"})}let qE=hi(WE),XE=Object.assign(qE,{});var kb=(r=>(r.Space=" ",r.Enter="Enter",r.Escape="Escape",r.Backspace="Backspace",r.Delete="Delete",r.ArrowLeft="ArrowLeft",r.ArrowUp="ArrowUp",r.ArrowRight="ArrowRight",r.ArrowDown="ArrowDown",r.Home="Home",r.End="End",r.PageUp="PageUp",r.PageDown="PageDown",r.Tab="Tab",r))(kb||{});let GE=O.createContext(()=>{});function KE({value:r,children:t}){return kt.createElement(GE.Provider,{value:r},t)}let jb=class extends Map{constructor(t){super(),this.factory=t}get(t){let e=super.get(t);return e===void 0&&(e=this.factory(t),this.set(t,e)),e}};var QE=Object.defineProperty,$E=(r,t,e)=>t in r?QE(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,ZE=(r,t,e)=>($E(r,t+"",e),e),zb=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)},Oi=(r,t,e)=>(zb(r,t,"read from private field"),e?e.call(r):t.get(r)),gf=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},u0=(r,t,e,n)=>(zb(r,t,"write to private field"),t.set(r,e),e),Ki,$a,Za;let JE=class{constructor(t){gf(this,Ki,{}),gf(this,$a,new jb(()=>new Set)),gf(this,Za,new Set),ZE(this,"disposables",Rn()),u0(this,Ki,t),Zi.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Oi(this,Ki)}subscribe(t,e){if(Zi.isServer)return()=>{};let n={selector:t,callback:e,current:t(Oi(this,Ki))};return Oi(this,Za).add(n),this.disposables.add(()=>{Oi(this,Za).delete(n)})}on(t,e){return Zi.isServer?()=>{}:(Oi(this,$a).get(t).add(e),this.disposables.add(()=>{Oi(this,$a).get(t).delete(e)}))}send(t){let e=this.reduce(Oi(this,Ki),t);if(e!==Oi(this,Ki)){u0(this,Ki,e);for(let n of Oi(this,Za)){let a=n.selector(Oi(this,Ki));Lb(n.current,a)||(n.current=a,n.callback(a))}for(let n of Oi(this,$a).get(t.type))n(Oi(this,Ki),t)}}};Ki=new WeakMap,$a=new WeakMap,Za=new WeakMap;function Lb(r,t){return Object.is(r,t)?!0:typeof r!="object"||r===null||typeof t!="object"||t===null?!1:Array.isArray(r)&&Array.isArray(t)?r.length!==t.length?!1:yf(r[Symbol.iterator](),t[Symbol.iterator]()):r instanceof Map&&t instanceof Map||r instanceof Set&&t instanceof Set?r.size!==t.size?!1:yf(r.entries(),t.entries()):c0(r)&&c0(t)?yf(Object.entries(r)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function yf(r,t){do{let e=r.next(),n=t.next();if(e.done&&n.done)return!0;if(e.done||n.done||!Object.is(e.value,n.value))return!1}while(!0)}function c0(r){if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let t=Object.getPrototypeOf(r);return t===null||Object.getPrototypeOf(t)===null}var tC=Object.defineProperty,eC=(r,t,e)=>t in r?tC(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,h0=(r,t,e)=>(eC(r,typeof t!="symbol"?t+"":t,e),e),iC=(r=>(r[r.Push=0]="Push",r[r.Pop=1]="Pop",r))(iC||{});let nC={0(r,t){let e=t.id,n=r.stack,a=r.stack.indexOf(e);if(a!==-1){let l=r.stack.slice();return l.splice(a,1),l.push(e),n=l,{...r,stack:n}}return{...r,stack:[...r.stack,e]}},1(r,t){let e=t.id,n=r.stack.indexOf(e);if(n===-1)return r;let a=r.stack.slice();return a.splice(n,1),{...r,stack:a}}},rC=class Bb extends JE{constructor(){super(...arguments),h0(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),h0(this,"selectors",{isTop:(t,e)=>t.stack[t.stack.length-1]===e,inStack:(t,e)=>t.stack.includes(e)})}static new(){return new Bb({stack:[]})}reduce(t,e){return Tn(e.type,nC,t,e)}};const Fb=new jb(()=>rC.new());var bf={exports:{}},xf={};var f0;function sC(){if(f0)return xf;f0=1;var r=wu();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var e=typeof Object.is=="function"?Object.is:t,n=r.useSyncExternalStore,a=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;return xf.useSyncExternalStoreWithSelector=function(f,d,v,m,y){var x=a(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=u(function(){function S(C){if(!M){if(M=!0,N=C,C=m(C),y!==void 0&&b.hasValue){var z=b.value;if(y(z,C))return T=z}return T=C}if(z=T,e(N,C))return z;var D=m(C);return y!==void 0&&y(z,D)?(N=C,z):(N=C,T=D)}var M=!1,N,T,R=v===void 0?null:v;return[function(){return S(d())},R===null?void 0:function(){return S(R())}]},[d,v,m,y]);var w=n(f,x[0],x[1]);return l(function(){b.hasValue=!0,b.value=w},[w]),c(w),w},xf}var d0;function aC(){return d0||(d0=1,bf.exports=sC()),bf.exports}var lC=aC();function Pb(r,t,e=Lb){return lC.useSyncExternalStoreWithSelector(ue(n=>r.subscribe(oC,n)),ue(()=>r.state),ue(()=>r.state),ue(t),e)}function oC(r){return r}function xl(r,t){let e=O.useId(),n=Fb.get(t),[a,l]=Pb(n,O.useCallback(u=>[n.selectors.isTop(u,e),n.selectors.inStack(u,e)],[n,e]));return ui(()=>{if(r)return n.actions.push(e),()=>n.actions.pop(e)},[n,r,e]),r?l?a:!0:!1}let $f=new Map,il=new Map;function v0(r){var t;let e=(t=il.get(r))!=null?t:0;return il.set(r,e+1),e!==0?()=>p0(r):($f.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0,()=>p0(r))}function p0(r){var t;let e=(t=il.get(r))!=null?t:1;if(e===1?il.delete(r):il.set(r,e-1),e!==1)return;let n=$f.get(r);n&&(n["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",n["aria-hidden"]),r.inert=n.inert,$f.delete(r))}function uC(r,{allowed:t,disallowed:e}={}){let n=xl(r,"inert-others");ui(()=>{var a,l;if(!n)return;let u=Rn();for(let f of(a=e?.())!=null?a:[])f&&u.add(v0(f));let c=(l=t?.())!=null?l:[];for(let f of c){if(!f)continue;let d=yl(f);if(!d)continue;let v=f.parentElement;for(;v&&v!==d.body;){for(let m of v.children)c.some(y=>m.contains(y))||u.add(v0(m));v=v.parentElement}}return u.dispose},[n,t,e])}function cC(r,t,e){let n=Wr(a=>{let l=a.getBoundingClientRect();l.x===0&&l.y===0&&l.width===0&&l.height===0&&e()});O.useEffect(()=>{if(!r)return;let a=t===null?null:Br(t)?t:t.current;if(!a)return;let l=Rn();if(typeof ResizeObserver<"u"){let u=new ResizeObserver(()=>n.current(a));u.observe(a),l.add(()=>u.disconnect())}if(typeof IntersectionObserver<"u"){let u=new IntersectionObserver(()=>n.current(a));u.observe(a),l.add(()=>u.disconnect())}return()=>l.dispose()},[t,n,r])}let fu=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(r=>`${r}:not([tabindex='-1'])`).join(","),hC=["[data-autofocus]"].map(r=>`${r}:not([tabindex='-1'])`).join(",");var _n=(r=>(r[r.First=1]="First",r[r.Previous=2]="Previous",r[r.Next=4]="Next",r[r.Last=8]="Last",r[r.WrapAround=16]="WrapAround",r[r.NoScroll=32]="NoScroll",r[r.AutoFocus=64]="AutoFocus",r))(_n||{}),Zf=(r=>(r[r.Error=0]="Error",r[r.Overflow=1]="Overflow",r[r.Success=2]="Success",r[r.Underflow=3]="Underflow",r))(Zf||{}),fC=(r=>(r[r.Previous=-1]="Previous",r[r.Next=1]="Next",r))(fC||{});function dC(r=document.body){return r==null?[]:Array.from(r.querySelectorAll(fu)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}function vC(r=document.body){return r==null?[]:Array.from(r.querySelectorAll(hC)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ib=(r=>(r[r.Strict=0]="Strict",r[r.Loose=1]="Loose",r))(Ib||{});function pC(r,t=0){var e;return r===((e=yl(r))==null?void 0:e.body)?!1:Tn(t,{0(){return r.matches(fu)},1(){let n=r;for(;n!==null;){if(n.matches(fu))return!0;n=n.parentElement}return!1}})}var mC=(r=>(r[r.Keyboard=0]="Keyboard",r[r.Mouse=1]="Mouse",r))(mC||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",r=>{r.metaKey||r.altKey||r.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",r=>{r.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:r.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Mn(r){r?.focus({preventScroll:!0})}let gC=["textarea","input"].join(",");function yC(r){var t,e;return(e=(t=r?.matches)==null?void 0:t.call(r,gC))!=null?e:!1}function bC(r,t=e=>e){return r.slice().sort((e,n)=>{let a=t(e),l=t(n);if(a===null||l===null)return 0;let u=a.compareDocumentPosition(l);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function nl(r,t,{sorted:e=!0,relativeTo:n=null,skipElements:a=[]}={}){let l=Array.isArray(r)?r.length>0?Gf(r[0]):document:Gf(r),u=Array.isArray(r)?e?bC(r):r:t&64?vC(r):dC(r);a.length>0&&u.length>1&&(u=u.filter(x=>!a.some(b=>b!=null&&"current"in b?b?.current===x:b===x))),n=n??l?.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,u.indexOf(n))-1;if(t&4)return Math.max(0,u.indexOf(n))+1;if(t&8)return u.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},v=0,m=u.length,y;do{if(v>=m||v+m<=0)return 0;let x=f+v;if(t&16)x=(x+m)%m;else{if(x<0)return 3;if(x>=m)return 1}y=u[x],y?.focus(d),v+=c}while(y!==Rb(y));return t&6&&yC(y)&&y.select(),2}function Vb(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function xC(){return/Android/gi.test(window.navigator.userAgent)}function m0(){return Vb()||xC()}function Io(r,t,e,n){let a=Wr(e);O.useEffect(()=>{if(!r)return;function l(u){a.current(u)}return document.addEventListener(t,l,n),()=>document.removeEventListener(t,l,n)},[r,t,n])}function Ub(r,t,e,n){let a=Wr(e);O.useEffect(()=>{if(!r)return;function l(u){a.current(u)}return window.addEventListener(t,l,n),()=>window.removeEventListener(t,l,n)},[r,t,n])}const g0=30;function SC(r,t,e){let n=Wr(e),a=O.useCallback(function(c,f){if(c.defaultPrevented)return;let d=f(c);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let v=(function m(y){return typeof y=="function"?m(y()):Array.isArray(y)||y instanceof Set?y:[y]})(t);for(let m of v)if(m!==null&&(m.contains(d)||c.composed&&c.composedPath().includes(m)))return;return!pC(d,Ib.Loose)&&d.tabIndex!==-1&&c.preventDefault(),n.current(c,d)},[n,t]),l=O.useRef(null);Io(r,"pointerdown",c=>{var f,d;m0()||(l.current=((d=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:d[0])||c.target)},!0),Io(r,"pointerup",c=>{if(m0()||!l.current)return;let f=l.current;return l.current=null,a(c,()=>f)},!0);let u=O.useRef({x:0,y:0});Io(r,"touchstart",c=>{u.current.x=c.touches[0].clientX,u.current.y=c.touches[0].clientY},!0),Io(r,"touchend",c=>{let f={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(f.x-u.current.x)>=g0||Math.abs(f.y-u.current.y)>=g0))return a(c,()=>rr(c.target)?c.target:null)},!0),Ub(r,"blur",c=>a(c,()=>IE(window.document.activeElement)?window.document.activeElement:null),!0)}function md(...r){return O.useMemo(()=>yl(...r),[...r])}function Hb(r,t,e,n){let a=Wr(e);O.useEffect(()=>{r=r??window;function l(u){a.current(u)}return r.addEventListener(t,l,n),()=>r.removeEventListener(t,l,n)},[r,t,n])}function _C(r){return O.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getSnapshot)}function wC(r,t){let e=r(),n=new Set;return{getSnapshot(){return e},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...l){let u=t[a].call(e,...l);u&&(e=u,n.forEach(c=>c()))}}}function EC(){let r;return{before({doc:t}){var e;let n=t.documentElement,a=(e=t.defaultView)!=null?e:window;r=Math.max(0,a.innerWidth-n.clientWidth)},after({doc:t,d:e}){let n=t.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),l=Math.max(0,r-a);e.style(n,"paddingRight",`${l}px`)}}}function CC(){return Vb()?{before({doc:r,d:t,meta:e}){function n(a){for(let l of e().containers)for(let u of l())if(u.contains(a))return!0;return!1}t.microTask(()=>{var a;if(window.getComputedStyle(r.documentElement).scrollBehavior!=="auto"){let c=Rn();c.style(r.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,u=null;t.addEventListener(r,"click",c=>{if(rr(c.target))try{let f=c.target.closest("a");if(!f)return;let{hash:d}=new URL(f.href),v=r.querySelector(d);rr(v)&&!n(v)&&(u=v)}catch{}},!0),t.group(c=>{t.addEventListener(r,"touchstart",f=>{if(c.dispose(),rr(f.target)&&PE(f.target))if(n(f.target)){let d=f.target;for(;d.parentElement&&n(d.parentElement);)d=d.parentElement;c.style(d,"overscrollBehavior","contain")}else c.style(f.target,"touchAction","none")})}),t.addEventListener(r,"touchmove",c=>{if(rr(c.target)){if(VE(c.target))return;if(n(c.target)){let f=c.target;for(;f.parentElement&&f.dataset.headlessuiPortal!==""&&!(f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth);)f=f.parentElement;f.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),t.add(()=>{var c;let f=(c=window.scrollY)!=null?c:window.pageYOffset;l!==f&&window.scrollTo(0,l),u&&u.isConnected&&(u.scrollIntoView({block:"nearest"}),u=null)})})}}:{}}function MC(){return{before({doc:r,d:t}){t.style(r.documentElement,"overflow","hidden")}}}function y0(r){let t={};for(let e of r)Object.assign(t,e(t));return t}let kr=wC(()=>new Map,{PUSH(r,t){var e;let n=(e=this.get(r))!=null?e:{doc:r,count:0,d:Rn(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(t),n.computedMeta=y0(n.meta),this.set(r,n),this},POP(r,t){let e=this.get(r);return e&&(e.count--,e.meta.delete(t),e.computedMeta=y0(e.meta)),this},SCROLL_PREVENT(r){let t={doc:r.doc,d:r.d,meta(){return r.computedMeta}},e=[CC(),EC(),MC()];e.forEach(({before:n})=>n?.(t)),e.forEach(({after:n})=>n?.(t))},SCROLL_ALLOW({d:r}){r.dispose()},TEARDOWN({doc:r}){this.delete(r)}});kr.subscribe(()=>{let r=kr.getSnapshot(),t=new Map;for(let[e]of r)t.set(e,e.documentElement.style.overflow);for(let e of r.values()){let n=t.get(e.doc)==="hidden",a=e.count!==0;(a&&!n||!a&&n)&&kr.dispatch(e.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",e),e.count===0&&kr.dispatch("TEARDOWN",e)}});function TC(r,t,e=()=>({containers:[]})){let n=_C(kr),a=t?n.get(t):void 0,l=a?a.count>0:!1;return ui(()=>{if(!(!t||!r))return kr.dispatch("PUSH",t,e),()=>kr.dispatch("POP",t,e)},[r,t]),l}function AC(r,t,e=()=>[document.body]){let n=xl(r,"scroll-lock");TC(n,t,a=>{var l;return{containers:[...(l=a.containers)!=null?l:[],e]}})}function RC(r=0){let[t,e]=O.useState(r),n=O.useCallback(f=>e(f),[]),a=O.useCallback(f=>e(d=>d|f),[]),l=O.useCallback(f=>(t&f)===f,[t]),u=O.useCallback(f=>e(d=>d&~f),[]),c=O.useCallback(f=>e(d=>d^f),[]);return{flags:t,setFlag:n,addFlag:a,hasFlag:l,removeFlag:u,toggleFlag:c}}var DC={},b0,x0;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((b0=process==null?void 0:DC)==null?void 0:b0.NODE_ENV)==="test"&&typeof((x0=Element?.prototype)==null?void 0:x0.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var NC=(r=>(r[r.None=0]="None",r[r.Closed=1]="Closed",r[r.Enter=2]="Enter",r[r.Leave=4]="Leave",r))(NC||{});function OC(r){let t={};for(let e in r)r[e]===!0&&(t[`data-${e}`]="");return t}function kC(r,t,e,n){let[a,l]=O.useState(e),{hasFlag:u,addFlag:c,removeFlag:f}=RC(r&&a?3:0),d=O.useRef(!1),v=O.useRef(!1),m=Nu();return ui(()=>{var y;if(r){if(e&&l(!0),!t){e&&c(3);return}return(y=n?.start)==null||y.call(n,e),jC(t,{inFlight:d,prepare(){v.current?v.current=!1:v.current=d.current,d.current=!0,!v.current&&(e?(c(3),f(4)):(c(4),f(2)))},run(){v.current?e?(f(3),c(4)):(f(4),c(3)):e?f(1):c(1)},done(){var x;v.current&&BC(t)||(d.current=!1,f(7),e||l(!1),(x=n?.end)==null||x.call(n,e))}})}},[r,e,t,m]),r?[a,{closed:u(1),enter:u(2),leave:u(4),transition:u(2)||u(4)}]:[e,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function jC(r,{prepare:t,run:e,done:n,inFlight:a}){let l=Rn();return LC(r,{prepare:t,inFlight:a}),l.nextFrame(()=>{e(),l.requestAnimationFrame(()=>{l.add(zC(r,n))})}),l.dispose}function zC(r,t){var e,n;let a=Rn();if(!r)return a.dispose;let l=!1;a.add(()=>{l=!0});let u=(n=(e=r.getAnimations)==null?void 0:e.call(r).filter(c=>c instanceof CSSTransition))!=null?n:[];return u.length===0?(t(),a.dispose):(Promise.allSettled(u.map(c=>c.finished)).then(()=>{l||t()}),a.dispose)}function LC(r,{inFlight:t,prepare:e}){if(t!=null&&t.current){e();return}let n=r.style.transition;r.style.transition="none",e(),r.offsetHeight,r.style.transition=n}function BC(r){var t,e;return((e=(t=r.getAnimations)==null?void 0:t.call(r))!=null?e:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}function gd(r,t){let e=O.useRef([]),n=ue(r);O.useEffect(()=>{let a=[...e.current];for(let[l,u]of t.entries())if(e.current[l]!==u){let c=n(t,a);return e.current=t,c}},[n,...t])}let Ou=O.createContext(null);Ou.displayName="OpenClosedContext";var Ii=(r=>(r[r.Open=1]="Open",r[r.Closed=2]="Closed",r[r.Closing=4]="Closing",r[r.Opening=8]="Opening",r))(Ii||{});function ku(){return O.useContext(Ou)}function FC({value:r,children:t}){return kt.createElement(Ou.Provider,{value:r},t)}function PC({children:r}){return kt.createElement(Ou.Provider,{value:null},r)}function IC(r){function t(){document.readyState!=="loading"&&(r(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let ir=[];IC(()=>{function r(t){if(!rr(t.target)||t.target===document.body||ir[0]===t.target)return;let e=t.target;e=e.closest(fu),ir.unshift(e??t.target),ir=ir.filter(n=>n!=null&&n.isConnected),ir.splice(10)}window.addEventListener("click",r,{capture:!0}),window.addEventListener("mousedown",r,{capture:!0}),window.addEventListener("focus",r,{capture:!0}),document.body.addEventListener("click",r,{capture:!0}),document.body.addEventListener("mousedown",r,{capture:!0}),document.body.addEventListener("focus",r,{capture:!0})});function Yb(r){let t=ue(r),e=O.useRef(!1);O.useEffect(()=>(e.current=!1,()=>{e.current=!0,Du(()=>{e.current&&t()})}),[t])}let Wb=O.createContext(!1);function VC(){return O.useContext(Wb)}function S0(r){return kt.createElement(Wb.Provider,{value:r.force},r.children)}function UC(r){let t=VC(),e=O.useContext(Xb),[n,a]=O.useState(()=>{var l;if(!t&&e!==null)return(l=e.current)!=null?l:null;if(Zi.isServer)return null;let u=r?.getElementById("headlessui-portal-root");if(u)return u;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return O.useEffect(()=>{n!==null&&(r!=null&&r.body.contains(n)||r==null||r.body.appendChild(n))},[n,r]),O.useEffect(()=>{t||e!==null&&a(e.current)},[e,a,t]),n}let qb=O.Fragment,HC=hi(function(r,t){let{ownerDocument:e=null,...n}=r,a=O.useRef(null),l=Ji(UE(y=>{a.current=y}),t),u=md(a.current),c=e??u,f=UC(c),d=O.useContext(Jf),v=Nu(),m=ki();return Yb(()=>{var y;f&&f.childNodes.length<=0&&((y=f.parentElement)==null||y.removeChild(f))}),f?Ru.createPortal(kt.createElement("div",{"data-headlessui-portal":"",ref:y=>{v.dispose(),d&&y&&v.add(d.register(y))}},m({ourProps:{ref:l},theirProps:n,slot:{},defaultTag:qb,name:"Portal"})),f):null});function YC(r,t){let e=Ji(t),{enabled:n=!0,ownerDocument:a,...l}=r,u=ki();return n?kt.createElement(HC,{...l,ownerDocument:a,ref:e}):u({ourProps:{ref:e},theirProps:l,slot:{},defaultTag:qb,name:"Portal"})}let WC=O.Fragment,Xb=O.createContext(null);function qC(r,t){let{target:e,...n}=r,a={ref:Ji(t)},l=ki();return kt.createElement(Xb.Provider,{value:e},l({ourProps:a,theirProps:n,defaultTag:WC,name:"Popover.Group"}))}let Jf=O.createContext(null);function XC(){let r=O.useContext(Jf),t=O.useRef([]),e=ue(l=>(t.current.push(l),r&&r.register(l),()=>n(l))),n=ue(l=>{let u=t.current.indexOf(l);u!==-1&&t.current.splice(u,1),r&&r.unregister(l)}),a=O.useMemo(()=>({register:e,unregister:n,portals:t}),[e,n,t]);return[t,O.useMemo(()=>function({children:l}){return kt.createElement(Jf.Provider,{value:a},l)},[a])]}let GC=hi(YC),Gb=hi(qC),KC=Object.assign(GC,{Group:Gb});function QC(r,t=typeof document<"u"?document.defaultView:null,e){let n=xl(r,"escape");Hb(t,"keydown",a=>{n&&(a.defaultPrevented||a.key===kb.Escape&&e(a))})}function $C(){var r;let[t]=O.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[e,n]=O.useState((r=t?.matches)!=null?r:!1);return ui(()=>{if(!t)return;function a(l){n(l.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),e}function ZC({defaultContainers:r=[],portals:t,mainTreeNode:e}={}){let n=ue(()=>{var a,l;let u=yl(e),c=[];for(let f of r)f!==null&&(ar(f)?c.push(f):"current"in f&&ar(f.current)&&c.push(f.current));if(t!=null&&t.current)for(let f of t.current)c.push(f);for(let f of(a=u?.querySelectorAll("html > *, body > *"))!=null?a:[])f!==document.body&&f!==document.head&&ar(f)&&f.id!=="headlessui-portal-root"&&(e&&(f.contains(e)||f.contains((l=e?.getRootNode())==null?void 0:l.host))||c.some(d=>f.contains(d))||c.push(f));return c});return{resolveContainers:n,contains:ue(a=>n().some(l=>l.contains(a)))}}let Kb=O.createContext(null);function _0({children:r,node:t}){let[e,n]=O.useState(null),a=Qb(t??e);return kt.createElement(Kb.Provider,{value:a},r,a===null&&kt.createElement(Qf,{features:hu.Hidden,ref:l=>{var u,c;if(l){for(let f of(c=(u=yl(l))==null?void 0:u.querySelectorAll("html > *, body > *"))!=null?c:[])if(f!==document.body&&f!==document.head&&ar(f)&&f!=null&&f.contains(l)){n(f);break}}}}))}function Qb(r=null){var t;return(t=O.useContext(Kb))!=null?t:r}function JC(){let r=typeof document>"u";return"useSyncExternalStore"in Bg?(t=>t.useSyncExternalStore)(Bg)(()=>()=>{},()=>!1,()=>!r):!1}function ju(){let r=JC(),[t,e]=O.useState(Zi.isHandoffComplete);return t&&Zi.isHandoffComplete===!1&&e(!1),O.useEffect(()=>{t!==!0&&e(!0)},[t]),O.useEffect(()=>Zi.handoff(),[]),r?!1:t}function yd(){let r=O.useRef(!1);return ui(()=>(r.current=!0,()=>{r.current=!1}),[]),r}var Ja=(r=>(r[r.Forwards=0]="Forwards",r[r.Backwards=1]="Backwards",r))(Ja||{});function tM(){let r=O.useRef(0);return Ub(!0,"keydown",t=>{t.key==="Tab"&&(r.current=t.shiftKey?1:0)},!0),r}function $b(r){if(!r)return new Set;if(typeof r=="function")return new Set(r());let t=new Set;for(let e of r.current)ar(e.current)&&t.add(e.current);return t}let eM="div";var Dr=(r=>(r[r.None=0]="None",r[r.InitialFocus=1]="InitialFocus",r[r.TabLock=2]="TabLock",r[r.FocusLock=4]="FocusLock",r[r.RestoreFocus=8]="RestoreFocus",r[r.AutoFocus=16]="AutoFocus",r))(Dr||{});function iM(r,t){let e=O.useRef(null),n=Ji(e,t),{initialFocus:a,initialFocusFallback:l,containers:u,features:c=15,...f}=r;ju()||(c=0);let d=md(e.current);aM(c,{ownerDocument:d});let v=lM(c,{ownerDocument:d,container:e,initialFocus:a,initialFocusFallback:l});oM(c,{ownerDocument:d,container:e,containers:u,previousActiveElement:v});let m=tM(),y=ue(N=>{if(!Br(e.current))return;let T=e.current;(R=>R())(()=>{Tn(m.current,{[Ja.Forwards]:()=>{nl(T,_n.First,{skipElements:[N.relatedTarget,l]})},[Ja.Backwards]:()=>{nl(T,_n.Last,{skipElements:[N.relatedTarget,l]})}})})}),x=xl(!!(c&2),"focus-trap#tab-lock"),b=Nu(),w=O.useRef(!1),S={ref:n,onKeyDown(N){N.key=="Tab"&&(w.current=!0,b.requestAnimationFrame(()=>{w.current=!1}))},onBlur(N){if(!(c&4))return;let T=$b(u);Br(e.current)&&T.add(e.current);let R=N.relatedTarget;rr(R)&&R.dataset.headlessuiFocusGuard!=="true"&&(Zb(T,R)||(w.current?nl(e.current,Tn(m.current,{[Ja.Forwards]:()=>_n.Next,[Ja.Backwards]:()=>_n.Previous})|_n.WrapAround,{relativeTo:N.target}):rr(N.target)&&Mn(N.target)))}},M=ki();return kt.createElement(kt.Fragment,null,x&&kt.createElement(Qf,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:hu.Focusable}),M({ourProps:S,theirProps:f,defaultTag:eM,name:"FocusTrap"}),x&&kt.createElement(Qf,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:hu.Focusable}))}let nM=hi(iM),rM=Object.assign(nM,{features:Dr});function sM(r=!0){let t=O.useRef(ir.slice());return gd(([e],[n])=>{n===!0&&e===!1&&Du(()=>{t.current.splice(0)}),n===!1&&e===!0&&(t.current=ir.slice())},[r,ir,t]),ue(()=>{var e;return(e=t.current.find(n=>n!=null&&n.isConnected))!=null?e:null})}function aM(r,{ownerDocument:t}){let e=!!(r&8),n=sM(e);gd(()=>{e||AE(t?.body)&&Mn(n())},[e]),Yb(()=>{e&&Mn(n())})}function lM(r,{ownerDocument:t,container:e,initialFocus:n,initialFocusFallback:a}){let l=O.useRef(null),u=xl(!!(r&1),"focus-trap#initial-focus"),c=yd();return gd(()=>{if(r===0)return;if(!u){a!=null&&a.current&&Mn(a.current);return}let f=e.current;f&&Du(()=>{if(!c.current)return;let d=t?.activeElement;if(n!=null&&n.current){if(n?.current===d){l.current=d;return}}else if(f.contains(d)){l.current=d;return}if(n!=null&&n.current)Mn(n.current);else{if(r&16){if(nl(f,_n.First|_n.AutoFocus)!==Zf.Error)return}else if(nl(f,_n.First)!==Zf.Error)return;if(a!=null&&a.current&&(Mn(a.current),t?.activeElement===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=t?.activeElement})},[a,u,r]),l}function oM(r,{ownerDocument:t,container:e,containers:n,previousActiveElement:a}){let l=yd(),u=!!(r&4);Hb(t?.defaultView,"focus",c=>{if(!u||!l.current)return;let f=$b(n);Br(e.current)&&f.add(e.current);let d=a.current;if(!d)return;let v=c.target;Br(v)?Zb(f,v)?(a.current=v,Mn(v)):(c.preventDefault(),c.stopPropagation(),Mn(d)):Mn(a.current)},!0)}function Zb(r,t){for(let e of r)if(e.contains(t))return!0;return!1}function Jb(r){var t;return!!(r.enter||r.enterFrom||r.enterTo||r.leave||r.leaveFrom||r.leaveTo)||!el((t=r.as)!=null?t:ex)||kt.Children.count(r.children)===1}let zu=O.createContext(null);zu.displayName="TransitionContext";var uM=(r=>(r.Visible="visible",r.Hidden="hidden",r))(uM||{});function cM(){let r=O.useContext(zu);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}function hM(){let r=O.useContext(Lu);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}let Lu=O.createContext(null);Lu.displayName="NestingContext";function Bu(r){return"children"in r?Bu(r.children):r.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function tx(r,t){let e=Wr(r),n=O.useRef([]),a=yd(),l=Nu(),u=ue((x,b=nr.Hidden)=>{let w=n.current.findIndex(({el:S})=>S===x);w!==-1&&(Tn(b,{[nr.Unmount](){n.current.splice(w,1)},[nr.Hidden](){n.current[w].state="hidden"}}),l.microTask(()=>{var S;!Bu(n)&&a.current&&((S=e.current)==null||S.call(e))}))}),c=ue(x=>{let b=n.current.find(({el:w})=>w===x);return b?b.state!=="visible"&&(b.state="visible"):n.current.push({el:x,state:"visible"}),()=>u(x,nr.Unmount)}),f=O.useRef([]),d=O.useRef(Promise.resolve()),v=O.useRef({enter:[],leave:[]}),m=ue((x,b,w)=>{f.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([S])=>S!==x)),t?.chains.current[b].push([x,new Promise(S=>{f.current.push(S)})]),t?.chains.current[b].push([x,new Promise(S=>{Promise.all(v.current[b].map(([M,N])=>N)).then(()=>S())})]),b==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>w(b)):w(b)}),y=ue((x,b,w)=>{Promise.all(v.current[b].splice(0).map(([S,M])=>M)).then(()=>{var S;(S=f.current.shift())==null||S()}).then(()=>w(b))});return O.useMemo(()=>({children:n,register:c,unregister:u,onStart:m,onStop:y,wait:d,chains:v}),[c,u,n,m,y,v,d])}let ex=O.Fragment,ix=cu.RenderStrategy;function fM(r,t){var e,n;let{transition:a=!0,beforeEnter:l,afterEnter:u,beforeLeave:c,afterLeave:f,enter:d,enterFrom:v,enterTo:m,entered:y,leave:x,leaveFrom:b,leaveTo:w,...S}=r,[M,N]=O.useState(null),T=O.useRef(null),R=Jb(r),C=Ji(...R?[T,t,N]:t===null?[]:[t]),z=(e=S.unmount)==null||e?nr.Unmount:nr.Hidden,{show:D,appear:I,initial:B}=cM(),[V,W]=O.useState(D?"visible":"hidden"),Z=hM(),{register:it,unregister:X}=Z;ui(()=>it(T),[it,T]),ui(()=>{if(z===nr.Hidden&&T.current){if(D&&V!=="visible"){W("visible");return}return Tn(V,{hidden:()=>X(T),visible:()=>it(T)})}},[V,T,it,X,D,z]);let ot=ju();ui(()=>{if(R&&ot&&V==="visible"&&T.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[T,V,ot,R]);let j=B&&!I,U=I&&D&&B,st=O.useRef(!1),ft=tx(()=>{st.current||(W("hidden"),X(T))},Z),rt=ue(tt=>{st.current=!0;let vt=tt?"enter":"leave";ft.onStart(T,vt,pt=>{pt==="enter"?l?.():pt==="leave"&&c?.()})}),k=ue(tt=>{let vt=tt?"enter":"leave";st.current=!1,ft.onStop(T,vt,pt=>{pt==="enter"?u?.():pt==="leave"&&f?.()}),vt==="leave"&&!Bu(ft)&&(W("hidden"),X(T))});O.useEffect(()=>{R&&a||(rt(D),k(D))},[D,R,a]);let L=!(!a||!R||!ot||j),[,F]=kC(L,M,D,{start:rt,end:k}),q=Rr({ref:C,className:((n=Kf(S.className,U&&d,U&&v,F.enter&&d,F.enter&&F.closed&&v,F.enter&&!F.closed&&m,F.leave&&x,F.leave&&!F.closed&&b,F.leave&&F.closed&&w,!F.transition&&D&&y))==null?void 0:n.trim())||void 0,...OC(F)}),$=0;V==="visible"&&($|=Ii.Open),V==="hidden"&&($|=Ii.Closed),D&&V==="hidden"&&($|=Ii.Opening),!D&&V==="visible"&&($|=Ii.Closing);let J=ki();return kt.createElement(Lu.Provider,{value:ft},kt.createElement(FC,{value:$},J({ourProps:q,theirProps:S,defaultTag:ex,features:ix,visible:V==="visible",name:"Transition.Child"})))}function dM(r,t){let{show:e,appear:n=!1,unmount:a=!0,...l}=r,u=O.useRef(null),c=Jb(r),f=Ji(...c?[u,t]:t===null?[]:[t]);ju();let d=ku();if(e===void 0&&d!==null&&(e=(d&Ii.Open)===Ii.Open),e===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,m]=O.useState(e?"visible":"hidden"),y=tx(()=>{e||m("hidden")}),[x,b]=O.useState(!0),w=O.useRef([e]);ui(()=>{x!==!1&&w.current[w.current.length-1]!==e&&(w.current.push(e),b(!1))},[w,e]);let S=O.useMemo(()=>({show:e,appear:n,initial:x}),[e,n,x]);ui(()=>{e?m("visible"):!Bu(y)&&u.current!==null&&m("hidden")},[e,y]);let M={unmount:a},N=ue(()=>{var C;x&&b(!1),(C=r.beforeEnter)==null||C.call(r)}),T=ue(()=>{var C;x&&b(!1),(C=r.beforeLeave)==null||C.call(r)}),R=ki();return kt.createElement(Lu.Provider,{value:y},kt.createElement(zu.Provider,{value:S},R({ourProps:{...M,as:O.Fragment,children:kt.createElement(nx,{ref:f,...M,...l,beforeEnter:N,beforeLeave:T})},theirProps:{},defaultTag:O.Fragment,features:ix,visible:v==="visible",name:"Transition"})))}function vM(r,t){let e=O.useContext(zu)!==null,n=ku()!==null;return kt.createElement(kt.Fragment,null,!e&&n?kt.createElement(td,{ref:t,...r}):kt.createElement(nx,{ref:t,...r}))}let td=hi(dM),nx=hi(fM),Fr=hi(vM),bd=Object.assign(td,{Child:Fr,Root:td});var pM=(r=>(r[r.Open=0]="Open",r[r.Closed=1]="Closed",r))(pM||{}),mM=(r=>(r[r.SetTitleId=0]="SetTitleId",r))(mM||{});let gM={0(r,t){return r.titleId===t.id?r:{...r,titleId:t.id}}},xd=O.createContext(null);xd.displayName="DialogContext";function Fu(r){let t=O.useContext(xd);if(t===null){let e=new Error(`<${r} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,Fu),e}return t}function yM(r,t){return Tn(t.type,gM,r,t)}let w0=hi(function(r,t){let e=O.useId(),{id:n=`headlessui-dialog-${e}`,open:a,onClose:l,initialFocus:u,role:c="dialog",autoFocus:f=!0,__demoMode:d=!1,unmount:v=!1,...m}=r,y=O.useRef(!1);c=(function(){return c==="dialog"||c==="alertdialog"?c:(y.current||(y.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=ku();a===void 0&&x!==null&&(a=(x&Ii.Open)===Ii.Open);let b=O.useRef(null),w=Ji(b,t),S=md(b.current),M=a?0:1,[N,T]=O.useReducer(yM,{titleId:null,descriptionId:null,panelRef:O.createRef()}),R=ue(()=>l(!1)),C=ue(F=>T({type:0,id:F})),z=ju()?M===0:!1,[D,I]=XC(),B={get current(){var F;return(F=N.panelRef.current)!=null?F:b.current}},V=Qb(),{resolveContainers:W}=ZC({mainTreeNode:V,portals:D,defaultContainers:[B]}),Z=x!==null?(x&Ii.Closing)===Ii.Closing:!1;uC(d||Z?!1:z,{allowed:ue(()=>{var F,q;return[(q=(F=b.current)==null?void 0:F.closest("[data-headlessui-portal]"))!=null?q:null]}),disallowed:ue(()=>{var F;return[(F=V?.closest("body > *:not(#headlessui-portal-root)"))!=null?F:null]})});let it=Fb.get(null);ui(()=>{if(z)return it.actions.push(n),()=>it.actions.pop(n)},[it,n,z]);let X=Pb(it,O.useCallback(F=>it.selectors.isTop(F,n),[it,n]));SC(X,W,F=>{F.preventDefault(),R()}),QC(X,S?.defaultView,F=>{F.preventDefault(),F.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),R()}),AC(d||Z?!1:z,S,W),cC(z,b,R);let[ot,j]=HE(),U=O.useMemo(()=>[{dialogState:M,close:R,setTitleId:C,unmount:v},N],[M,R,C,v,N]),st=bl({open:M===0}),ft={ref:w,id:n,role:c,tabIndex:-1,"aria-modal":d?void 0:M===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":ot,unmount:v},rt=!$C(),k=Dr.None;z&&!d&&(k|=Dr.RestoreFocus,k|=Dr.TabLock,f&&(k|=Dr.AutoFocus),rt&&(k|=Dr.InitialFocus));let L=ki();return kt.createElement(PC,null,kt.createElement(S0,{force:!0},kt.createElement(KC,null,kt.createElement(xd.Provider,{value:U},kt.createElement(Gb,{target:b},kt.createElement(S0,{force:!1},kt.createElement(j,{slot:st},kt.createElement(I,null,kt.createElement(rM,{initialFocus:u,initialFocusFallback:b,containers:W,features:k},kt.createElement(KE,{value:R},L({ourProps:ft,theirProps:m,slot:st,defaultTag:bM,features:xM,visible:M===0,name:"Dialog"})))))))))))}),bM="div",xM=cu.RenderStrategy|cu.Static;function SM(r,t){let{transition:e=!1,open:n,...a}=r,l=ku(),u=r.hasOwnProperty("open")||l!==null,c=r.hasOwnProperty("onClose");if(!u&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!u)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof r.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r.open}`);if(typeof r.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${r.onClose}`);return(n!==void 0||e)&&!a.static?kt.createElement(_0,null,kt.createElement(bd,{show:n,transition:e,unmount:a.unmount},kt.createElement(w0,{ref:t,...a}))):kt.createElement(_0,null,kt.createElement(w0,{ref:t,open:n,...a}))}let _M="div";function wM(r,t){let e=O.useId(),{id:n=`headlessui-dialog-panel-${e}`,transition:a=!1,...l}=r,[{dialogState:u,unmount:c},f]=Fu("Dialog.Panel"),d=Ji(t,f.panelRef),v=bl({open:u===0}),m=ue(S=>{S.stopPropagation()}),y={ref:d,id:n,onClick:m},x=a?Fr:O.Fragment,b=a?{unmount:c}:{},w=ki();return kt.createElement(x,{...b},w({ourProps:y,theirProps:l,slot:v,defaultTag:_M,name:"Dialog.Panel"}))}let EM="div";function CM(r,t){let{transition:e=!1,...n}=r,[{dialogState:a,unmount:l}]=Fu("Dialog.Backdrop"),u=bl({open:a===0}),c={ref:t,"aria-hidden":!0},f=e?Fr:O.Fragment,d=e?{unmount:l}:{},v=ki();return kt.createElement(f,{...d},v({ourProps:c,theirProps:n,slot:u,defaultTag:EM,name:"Dialog.Backdrop"}))}let MM="h2";function TM(r,t){let e=O.useId(),{id:n=`headlessui-dialog-title-${e}`,...a}=r,[{dialogState:l,setTitleId:u}]=Fu("Dialog.Title"),c=Ji(t);O.useEffect(()=>(u(n),()=>u(null)),[n,u]);let f=bl({open:l===0}),d={ref:c,id:n};return ki()({ourProps:d,theirProps:a,slot:f,defaultTag:MM,name:"Dialog.Title"})}let AM=hi(SM),Sd=hi(wM);hi(CM);let _d=hi(TM),rx=Object.assign(AM,{Panel:Sd,Title:_d,Description:XE});function sx({isOpen:r,title:t="",message:e,confirmText:n="",cancelText:a="",type:l="warning",onConfirm:u,onCancel:c}){const f=O.useRef(null),v={danger:{icon:"#F6465D",iconBg:"rgba(246, 70, 93, 0.15)",confirmBg:"#F6465D",confirmHover:"#d93d53"},warning:{icon:"#f0b90b",iconBg:"rgba(240, 185, 11, 0.15)",confirmBg:"#fcd535",confirmHover:"#f0b90b"},info:{icon:"#1e96fc",iconBg:"rgba(30, 150, 252, 0.15)",confirmBg:"#1e96fc",confirmHover:"#1a85e0"}}[l],m={danger:"",warning:"",info:""};return _.jsx(bd,{appear:!0,show:r,as:O.Fragment,children:_.jsxs(rx,{as:"div",className:"relative z-[9999]",initialFocus:f,onClose:c,children:[_.jsx(Fr,{as:O.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:_.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm"})}),_.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:_.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:_.jsx(Fr,{as:O.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:_.jsxs(Sd,{className:"w-full max-w-[420px] transform overflow-hidden rounded-lg bg-[#1e2329] shadow-2xl transition-all",children:[_.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-[#848e9c] hover:text-white transition-colors text-xl w-6 h-6 flex items-center justify-center",children:""}),_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-4 pr-6",children:[_.jsx("span",{className:"text-xl flex-shrink-0",style:{color:v.icon},children:m[l]}),_.jsx(_d,{as:"h3",className:"text-base font-medium text-white",children:t})]}),_.jsx("p",{className:"text-sm text-[#848e9c] leading-relaxed mb-6 pl-8",children:e}),_.jsxs("div",{className:"flex items-center justify-end gap-3",children:[_.jsx("button",{onClick:c,className:"px-4 py-1.5 text-sm text-[#848e9c] hover:text-white transition-colors",children:a}),_.jsx("button",{ref:f,onClick:u,className:"px-5 py-1.5 rounded text-sm font-medium transition-colors hover:opacity-90",style:{backgroundColor:v.confirmBg,color:l==="danger"?"#fff":"#0c0e12"},children:n})]})]})]})})})})]})})}function RM({isOpen:r,title:t,onClose:e,children:n,width:a="360px"}){const l=O.useRef(null);return O.useEffect(()=>(r&&(document.body.style.overflow="hidden",l.current?.focus()),()=>{document.body.style.overflow=""}),[r]),O.useEffect(()=>{const u=c=>{c.key==="Escape"&&e()};return r&&window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[r,e]),r?Ru.createPortal(_.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onClick:e,children:[_.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),_.jsxs("div",{ref:l,className:"relative bg-[#1e2329] rounded-xl shadow-2xl mx-4 animate-modal-in",style:{width:a,maxWidth:"90vw"},onClick:u=>u.stopPropagation(),tabIndex:-1,children:[_.jsxs("div",{className:"flex items-center justify-between px-8 py-5 border-b border-[#2b3139]",children:[_.jsx("h3",{className:"text-lg font-semibold text-white",children:t}),_.jsx("button",{onClick:e,className:"text-[#848e9c] hover:text-white transition-colors text-xl leading-none w-8 h-8 flex items-center justify-center rounded hover:bg-[#2b3139]",children:""})]}),_.jsx("div",{className:"px-8 py-6",children:n})]})]}),document.body):null}let DM=0,Fs=null;const Ws={success:r=>Fs?.("success",r),error:r=>Fs?.("error",r),warning:r=>Fs?.("warning",r),info:r=>Fs?.("info",r)},NM={success:"",error:"",warning:"",info:""},Sf={success:{bg:"rgba(14, 203, 129, 0.15)",border:"#0ECB81",icon:"#0ECB81"},error:{bg:"rgba(246, 70, 93, 0.15)",border:"#F6465D",icon:"#F6465D"},warning:{bg:"rgba(240, 185, 11, 0.15)",border:"#f0b90b",icon:"#f0b90b"},info:{bg:"rgba(30, 150, 252, 0.15)",border:"#1e96fc",icon:"#1e96fc"}};function OM(){const[r,t]=O.useState([]);return O.useEffect(()=>(Fs=(e,n)=>{const a=++DM;t(l=>[...l,{id:a,type:e,message:n}]),setTimeout(()=>{t(l=>l.filter(u=>u.id!==a))},3e3)},()=>{Fs=null}),[]),r.length===0?null:Ru.createPortal(_.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2",children:r.map(e=>_.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg animate-slide-in min-w-[280px] max-w-[400px]",style:{backgroundColor:Sf[e.type].bg,border:`1px solid ${Sf[e.type].border}`,backdropFilter:"blur(8px)"},children:[_.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full text-sm font-bold",style:{backgroundColor:Sf[e.type].icon,color:"#181a20"},children:NM[e.type]}),_.jsx("span",{className:"text-sm text-white flex-1",children:e.message}),_.jsx("button",{onClick:()=>t(n=>n.filter(a=>a.id!==e.id)),className:"text-[#848e9c] hover:text-white transition-colors text-lg leading-none",children:""})]},e.id))}),document.body)}function kM({onOpenConfig:r}){const t=Wt(V=>V.symbol),e=Wt(V=>V.isLoggedIn),n=Wt(V=>V.assets),a=Wt(V=>V.login),l=Wt(V=>V.logout),u=Ab(),c=Yr(),[f,d]=O.useState(!1),[v,m]=O.useState(!1),[y,x]=O.useState(!1),[b,w]=O.useState(""),[S,M]=O.useState(!1),N=async()=>{if(b){M(!0);try{await a(parseInt(b)),d(!1),w(""),Ws.success("")}catch{Ws.error("")}finally{M(!1)}}},T=parseFloat(u?.priceChangePercent||"0"),R=T>=0,[C,z]=t.split("_"),D=n.find(V=>V.asset===C),I=n.find(V=>V.asset===z),B=c?"48px":"64px";return _.jsxs(_.Fragment,{children:[_.jsxs("header",{style:{height:B,minHeight:B,backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:c?"0":"0 32px",flexShrink:0,position:"relative"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"10px":"20px",overflow:"auto",flex:1,minWidth:0,maxWidth:c?"100%":"calc(100% - 300px)",paddingLeft:c?"8px":"0",paddingRight:c?"48px":"0"},className:"scrollbar-hide",children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexShrink:0},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[!c&&_.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"#F0B90B"}),_.jsx("path",{d:"M2 17L12 22L22 17L12 12L2 17Z",fill:"#F0B90B",opacity:"0.6"}),_.jsx("path",{d:"M2 12L12 17L22 12",stroke:"#F0B90B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),!c&&_.jsx("span",{style:{fontSize:"20px",fontWeight:"bold",background:"linear-gradient(135deg, #F0B90B 0%, #FCD535 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"ExchangeHub"})]}),!c&&_.jsx("div",{style:{width:"1px",height:"24px",backgroundColor:"var(--color-border)"}}),_.jsx("span",{style:{fontSize:c?"14px":"17px",fontWeight:600,whiteSpace:"nowrap"},children:t.replace("_","/")})]}),u&&_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:c?"10px":"24px",flexShrink:0,whiteSpace:"nowrap"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[_.jsx("span",{style:{fontSize:c?"16px":"22px",fontWeight:"bold",color:R?"var(--color-green)":"var(--color-red)",whiteSpace:"nowrap"},children:parseFloat(u.lastPrice).toFixed(2)}),!c&&_.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"12px",whiteSpace:"nowrap"},children:[" $",parseFloat(u.lastPrice).toFixed(2)]})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:c?"11px":"12px",whiteSpace:"nowrap"},children:"24h"}),_.jsxs("span",{style:{color:R?"var(--color-green)":"var(--color-red)",fontSize:c?"12px":"13px",whiteSpace:"nowrap"},children:[R?"+":"",T.toFixed(2),"%"]})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:c?"11px":"12px",whiteSpace:"nowrap"},children:"24h"}),_.jsx("span",{style:{fontSize:c?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.high24h).toFixed(2)})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:c?"11px":"12px",whiteSpace:"nowrap"},children:"24h"}),_.jsx("span",{style:{fontSize:c?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.low24h).toFixed(2)})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[_.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:c?"11px":"12px",whiteSpace:"nowrap"},children:["24h(",C,")"]}),_.jsx("span",{style:{fontSize:c?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.volume24h).toFixed(4)})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",flexShrink:0},children:[_.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:c?"11px":"12px",whiteSpace:"nowrap"},children:["24h(",z,")"]}),_.jsx("span",{style:{fontSize:c?"12px":"13px",whiteSpace:"nowrap"},children:parseFloat(u.quoteVolume24h).toFixed(2)})]})]})]}),c?_.jsx("button",{onClick:()=>x(!y),style:{padding:"8px",backgroundColor:"var(--color-bg-secondary)",border:"none",cursor:"pointer",color:"var(--color-text-primary)",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",right:"0",top:"0",bottom:"0",width:"48px",zIndex:10},children:_.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),_.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),_.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}):_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[!iu,e?_.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"12px"},children:C}),_.jsxs("span",{style:{fontSize:"13px"},children:[D?parseFloat(D.available).toFixed(8):"0.00000000",D&&parseFloat(D.frozen)>0&&_.jsxs("span",{style:{color:"var(--color-text-tertiary)",marginLeft:"4px",fontSize:"12px"},children:["(: ",parseFloat(D.frozen).toFixed(8),")"]})]})]}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"12px"},children:z}),_.jsxs("span",{style:{fontSize:"13px"},children:[I?parseFloat(I.available).toFixed(2):"0.00",I&&parseFloat(I.frozen)>0&&_.jsxs("span",{style:{color:"var(--color-text-tertiary)",marginLeft:"4px",fontSize:"12px"},children:["(: ",parseFloat(I.frozen).toFixed(2),")"]})]})]})]}),_.jsx("button",{onClick:()=>m(!0),style:{padding:"6px 16px",fontSize:"13px",border:"1px solid var(--color-border)",borderRadius:"4px",backgroundColor:"transparent",color:"var(--color-text-primary)",cursor:"pointer"},children:""})]}):_.jsx("button",{onClick:()=>d(!0),style:{padding:"6px 16px",fontSize:"13px",backgroundColor:"var(--color-yellow)",color:"black",fontWeight:500,borderRadius:"4px",border:"none",cursor:"pointer"},children:""})]})]}),c&&y&&_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999},onClick:()=>x(!1)}),_.jsx("div",{style:{position:"absolute",top:"48px",left:0,right:0,backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",animation:"slideDown 0.2s ease-out"},children:_.jsx("div",{style:{padding:"16px"},children:e?_.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{marginBottom:"16px"},children:[_.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"12px",marginBottom:"8px"},children:""}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"4px"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"13px"},children:C}),_.jsx("span",{style:{fontSize:"13px",fontFamily:"monospace"},children:D?parseFloat(D.available).toFixed(8):"0.00000000"})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"4px"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"13px"},children:z}),_.jsx("span",{style:{fontSize:"13px",fontFamily:"monospace"},children:I?parseFloat(I.available).toFixed(2):"0.00"})]})]})]}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[!iu,_.jsx("button",{onClick:()=>{x(!1),m(!0)},style:{flex:1,padding:"10px",fontSize:"13px",border:"1px solid var(--color-red)",borderRadius:"4px",backgroundColor:"transparent",color:"var(--color-red)",cursor:"pointer"},children:""})]})]}):_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[_.jsx("button",{onClick:()=>{x(!1),d(!0)},style:{padding:"12px",fontSize:"14px",backgroundColor:"var(--color-yellow)",color:"black",fontWeight:500,borderRadius:"4px",border:"none",cursor:"pointer"},children:""}),!iu]})})})]}),_.jsx(sx,{isOpen:v,title:"",message:"",confirmText:"",cancelText:"",type:"warning",onConfirm:()=>{m(!1),l()},onCancel:()=>m(!1)}),_.jsx(RM,{isOpen:f,title:"",onClose:()=>d(!1),width:"480px",children:_.jsxs("div",{className:"flex flex-col gap-6",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-[#b7bdc6] mb-2.5",children:" ID"}),_.jsx("input",{type:"number",placeholder:" ID",value:b,onChange:V=>w(V.target.value),onKeyDown:V=>V.key==="Enter"&&N(),className:"w-full px-4 py-2.5 text-sm bg-transparent border border-[#434343] rounded outline-none text-white placeholder-[#848e9c] hover:border-[#5e6673] focus:border-[#f0b90b] transition-colors"})]}),_.jsxs("div",{className:"flex justify-end gap-3",children:[_.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2.5 text-sm font-normal text-white bg-transparent border border-[#434343] hover:border-[#5e6673] rounded transition-colors",children:""}),_.jsx("button",{onClick:N,disabled:S||!b,className:"px-6 py-2.5 text-sm font-normal text-[#000] bg-[#fcd535] hover:bg-[#f0b90b] rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S?"...":""})]})]})})]})}function rl(r){const t=Math.abs(r);return t>=1e6?`${(r/1e6).toFixed(2)}M`:t>=1e4?`${(r/1e3).toFixed(2)}K`:t>=1?r.toFixed(2):r.toFixed(4)}function _f(r){return r>=1e3?r.toFixed(2):r>=1?r.toFixed(4):r.toFixed(6)}function E0(){const[r,t]=O.useState(2),{bids:e,asks:n,isReady:a}=_E(r),l=Wt(T=>T.ticker),u=Yr(),c=u?8:15,f=(T,R)=>{const C=T.slice(0,R).map(z=>({data:z,isPlaceholder:!1}));for(;C.length<R;)C.push({data:["--","--","--"],isPlaceholder:!0});return C},d=O.useMemo(()=>f(n,c).reverse(),[n]),v=O.useMemo(()=>f(e,c),[e]),{buyPercent:m,sellPercent:y}=O.useMemo(()=>{const T=e.slice(0,20),R=n.slice(0,20),C=T.reduce((I,[B,V])=>I+parseFloat(B)*parseFloat(V),0),z=R.reduce((I,[B,V])=>I+parseFloat(B)*parseFloat(V),0),D=C+z;return D===0?{buyPercent:50,sellPercent:50}:{buyPercent:C/D*100,sellPercent:z/D*100}},[e,n]),x=O.useMemo(()=>{const T=v.filter(R=>!R.isPlaceholder);return T.length>0?Math.max(...T.map(R=>parseFloat(R.data[1]))):1},[v]),b=O.useMemo(()=>{const T=d.filter(R=>!R.isPlaceholder);return T.length>0?Math.max(...T.map(R=>parseFloat(R.data[1]))):1},[d]),w=O.useRef(null);O.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[d]);const S=l?.lastPrice||"0",N=parseFloat(l?.priceChangePercent||"0")>=0;return _.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"var(--color-bg-secondary)",overflow:"hidden"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderBottom:"1px solid var(--color-border)",flexShrink:0},children:[_.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:""}),_.jsx("select",{value:r,onChange:T=>t(parseInt(T.target.value)),style:{padding:"3px 10px",fontSize:"12px",backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"3px",color:"var(--color-text-primary)",outline:"none",cursor:"pointer"},children:xE.map(T=>_.jsx("option",{value:T.value,children:T.label},T.value))})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",padding:u?"4px 8px":"6px 16px",fontSize:u?"11px":"12px",color:"var(--color-text-secondary)",borderBottom:"1px solid var(--color-border)",flexShrink:0},children:[_.jsx("span",{style:{flex:1},children:""}),_.jsx("span",{style:{flex:1,textAlign:"right"},children:""}),!u&&_.jsx("span",{style:{flex:1,textAlign:"right"},children:""})]}),_.jsx("div",{style:{flexShrink:0},children:a?_.jsx("div",{ref:w,children:d.map(({data:[T,R],isPlaceholder:C},z)=>{const D=C?0:parseFloat(R)/b*100,I=C?0:parseFloat(T)*parseFloat(R);return _.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",padding:u?"1px 8px":"2px 16px",fontSize:u?"11px":"12px",cursor:C?"default":"pointer",opacity:C?.3:1},children:[!C&&_.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,backgroundColor:"rgba(246, 70, 93, 0.12)",width:`${D}%`,transition:"width 0.11s ease-out"}}),_.jsx("span",{style:{flex:1,color:"var(--color-red)",position:"relative",fontFamily:"monospace"},children:T}),_.jsx("span",{style:{flex:1,textAlign:"right",position:"relative",fontFamily:"monospace"},children:C?"--":_f(parseFloat(R))}),!u&&_.jsx("span",{style:{flex:1,textAlign:"right",color:"var(--color-text-secondary)",position:"relative",fontFamily:"monospace"},children:C?"--":rl(I)})]},`ask-${z}`)})}):_.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"200px",color:"var(--color-text-secondary)",fontSize:"13px"},children:"..."})}),_.jsx("div",{style:{padding:"8px 16px",borderTop:"1px solid var(--color-border)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)",flexShrink:0},children:_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[_.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",fontFamily:"monospace",color:N?"var(--color-green)":"var(--color-red)"},children:parseFloat(S).toFixed(2)}),_.jsx("span",{style:{fontSize:"13px",color:N?"var(--color-green)":"var(--color-red)"},children:N?"":""})]})}),_.jsx("div",{style:{flexShrink:0},children:a&&_.jsx("div",{children:v.map(({data:[T,R],isPlaceholder:C},z)=>{const D=C?0:parseFloat(R)/x*100,I=C?0:parseFloat(T)*parseFloat(R);return _.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",padding:u?"1px 8px":"2px 16px",fontSize:u?"11px":"12px",cursor:C?"default":"pointer",opacity:C?.3:1},children:[!C&&_.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,backgroundColor:"rgba(14, 203, 129, 0.12)",width:`${D}%`,transition:"width 0.3s ease-out"}}),_.jsx("span",{style:{flex:1,color:"var(--color-green)",position:"relative",fontFamily:"monospace"},children:T}),_.jsx("span",{style:{flex:1,textAlign:"right",position:"relative",fontFamily:"monospace"},children:C?"--":_f(parseFloat(R))}),!u&&_.jsx("span",{style:{flex:1,textAlign:"right",color:"var(--color-text-secondary)",position:"relative",fontFamily:"monospace"},children:C?"--":rl(I)})]},`bid-${z}`)})})}),_.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid var(--color-border)",flexShrink:0},children:[_.jsxs("div",{style:{display:"flex",height:"8px",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"},children:[_.jsx("div",{style:{backgroundColor:"var(--color-green)",width:`${m}%`,transition:"width 0.3s ease"}}),_.jsx("div",{style:{backgroundColor:"var(--color-red)",width:`${y}%`,transition:"width 0.3s ease"}})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px"},children:[_.jsxs("span",{style:{color:"var(--color-green)"},children:[" ",m.toFixed(1),"%"]}),_.jsxs("span",{style:{color:"var(--color-red)"},children:[" ",y.toFixed(1),"%"]})]})]}),!u&&_.jsxs("div",{style:{padding:"16px",borderTop:"1px solid var(--color-border)",flexShrink:0},children:[_.jsx("div",{style:{fontSize:"13px",fontWeight:500,marginBottom:"12px",color:"var(--color-text-primary)"},children:"24"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"12px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),_.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.high24h?parseFloat(l.high24h).toFixed(2):"--"})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),_.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.low24h?parseFloat(l.low24h).toFixed(2):"--"})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),_.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.volume24h?_f(parseFloat(l.volume24h)):"--"})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)"},children:"24h"}),_.jsx("span",{style:{fontFamily:"monospace",color:"var(--color-text-primary)"},children:l?.quoteVolume24h?rl(parseFloat(l.quoteVolume24h)):"--"})]})]})]})]})}function jM(){const r=wE(60);return _.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"var(--color-bg-secondary)"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 16px",fontSize:"12px",color:"var(--color-text-secondary)",borderBottom:"1px solid var(--color-border)",flexShrink:0},children:[_.jsx("span",{style:{flex:1},children:""}),_.jsx("span",{style:{flex:1,textAlign:"right"},children:""}),_.jsx("span",{style:{flex:1,textAlign:"right"},children:""})]}),_.jsx("div",{style:{flexShrink:0},children:r.length===0?_.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)",fontSize:"13px"},children:""}):r.map(t=>_.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"2px 16px",fontSize:"12px"},children:[_.jsx("span",{style:{flex:1,fontFamily:"monospace",color:t.taker_side===2?"var(--color-red)":"var(--color-green)"},children:parseFloat(t.price).toFixed(2)}),_.jsx("span",{style:{flex:1,textAlign:"right",fontFamily:"monospace"},children:parseFloat(t.qty).toFixed(4)}),_.jsx("span",{style:{flex:1,textAlign:"right",color:"var(--color-text-secondary)",fontFamily:"monospace"},children:new Date(t.created_at).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]},t.id))})]})}function C0(){const r=Wt(B=>B.symbol),t=Wt(B=>B.isLoggedIn),e=Wt(B=>B.assets),n=Wt(B=>B.ticker),[a,l]=O.useState("buy"),[u,c]=O.useState("limit"),[f,d]=O.useState(""),[v,m]=O.useState(""),[y,x]=O.useState(""),[b,w]=O.useState(!1),[S,M]=r.split("_"),N=e.find(B=>B.asset===S),T=e.find(B=>B.asset===M),R=parseFloat(a==="buy"?T?.available||"0":N?.available||"0"),C=u==="limit"&&f&&v?(parseFloat(f)*parseFloat(v)).toFixed(2):"",z=u==="market"&&a==="buy"&&y&&n?.lastPrice?(parseFloat(y)/parseFloat(n.lastPrice)).toFixed(8):"",D=B=>{if(t)if(a==="buy"){const W=parseFloat(T?.available||"0")*B;if(u==="market")x(W.toFixed(2));else{const Z=parseFloat(f||n?.lastPrice||"0");Z>0&&m((W/Z).toFixed(8))}}else{const V=parseFloat(N?.available||"0");m((V*B).toFixed(8))}},I=async()=>{if(!t){alert("");return}if(u==="limit"&&!f){alert("");return}if(u==="market"&&a==="buy"){if(!y){alert("");return}}else if(!v){alert("");return}w(!0);try{const B=crypto.randomUUID();let V;u==="limit"?V={symbol:r,side:a,type:"limit",price:f,qty:v,client_order_id:B}:a==="buy"?V={symbol:r,side:a,type:"market_buy",quote_qty:y,client_order_id:B}:V={symbol:r,side:a,type:"market_sell",qty:v,client_order_id:B},await xe.placeOrder(V),d(""),m(""),x(""),Ws.success("")}catch(B){const V=B;Ws.error(": "+(V.response?.data?.message||""))}finally{w(!1)}};return _.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"var(--color-bg-secondary)",padding:"16px",overflowY:"auto"},children:[_.jsxs("div",{style:{display:"flex",marginBottom:"16px"},children:[_.jsx("button",{onClick:()=>l("buy"),style:{flex:1,padding:"10px 0",fontSize:"13px",fontWeight:500,borderRadius:"4px 0 0 4px",border:"none",cursor:"pointer",transition:"all 0.2s",backgroundColor:a==="buy"?"var(--color-green)":"var(--color-bg-tertiary)",color:a==="buy"?"white":"var(--color-text-secondary)"},children:""}),_.jsx("button",{onClick:()=>l("sell"),style:{flex:1,padding:"10px 0",fontSize:"13px",fontWeight:500,borderRadius:"0 4px 4px 0",border:"none",cursor:"pointer",transition:"all 0.2s",backgroundColor:a==="sell"?"var(--color-red)":"var(--color-bg-tertiary)",color:a==="sell"?"white":"var(--color-text-secondary)"},children:""})]}),_.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"16px"},children:[_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[_.jsx("input",{type:"radio",name:"orderType",checked:u==="limit",onChange:()=>c("limit"),style:{accentColor:"var(--color-yellow)"}}),_.jsx("span",{style:{fontSize:"13px"},children:""})]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[_.jsx("input",{type:"radio",name:"orderType",checked:u==="market",onChange:()=>c("market"),style:{accentColor:"var(--color-yellow)"}}),_.jsx("span",{style:{fontSize:"13px"},children:""})]})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"12px"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)"},children:""}),_.jsxs("span",{style:{fontFamily:"monospace"},children:[R.toFixed(a==="buy"?2:8)," ",a==="buy"?M:S]})]}),u==="limit"&&_.jsxs("div",{style:{marginBottom:"12px"},children:[_.jsx("label",{style:{fontSize:"12px",color:"var(--color-text-secondary)",display:"block",marginBottom:"6px"},children:""}),_.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"6px",overflow:"hidden",transition:"border-color 0.2s"},onFocus:B=>B.currentTarget.style.borderColor="var(--color-yellow)",onBlur:B=>B.currentTarget.style.borderColor="var(--color-border)",children:[_.jsx("input",{type:"number",value:f,onChange:B=>d(B.target.value),placeholder:"0.00",style:{flex:1,padding:"12px 14px",backgroundColor:"transparent",border:"none",outline:"none",fontSize:"14px",fontFamily:"monospace",color:"var(--color-text-primary)"}}),_.jsx("span",{style:{padding:"0 14px",fontSize:"13px",color:"var(--color-text-secondary)",fontWeight:500},children:M})]})]}),u==="market"&&a==="buy"?_.jsxs("div",{style:{marginBottom:"12px"},children:[_.jsx("label",{style:{fontSize:"12px",color:"var(--color-text-secondary)",display:"block",marginBottom:"6px"},children:""}),_.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"6px",overflow:"hidden",transition:"border-color 0.2s"},onFocus:B=>B.currentTarget.style.borderColor="var(--color-yellow)",onBlur:B=>B.currentTarget.style.borderColor="var(--color-border)",children:[_.jsx("input",{type:"number",value:y,onChange:B=>x(B.target.value),placeholder:"0.00",style:{flex:1,padding:"12px 14px",backgroundColor:"transparent",border:"none",outline:"none",fontSize:"14px",fontFamily:"monospace",color:"var(--color-text-primary)"}}),_.jsx("span",{style:{padding:"0 14px",fontSize:"13px",color:"var(--color-text-secondary)",fontWeight:500},children:M})]}),z&&_.jsxs("div",{style:{fontSize:"11px",color:"var(--color-text-tertiary)",marginTop:"6px",textAlign:"right"},children:[" ",z," ",S]})]}):_.jsxs("div",{style:{marginBottom:"12px"},children:[_.jsx("label",{style:{fontSize:"12px",color:"var(--color-text-secondary)",display:"block",marginBottom:"6px"},children:""}),_.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"6px",overflow:"hidden",transition:"border-color 0.2s"},onFocus:B=>B.currentTarget.style.borderColor="var(--color-yellow)",onBlur:B=>B.currentTarget.style.borderColor="var(--color-border)",children:[_.jsx("input",{type:"number",value:v,onChange:B=>m(B.target.value),placeholder:"0.00",style:{flex:1,padding:"12px 14px",backgroundColor:"transparent",border:"none",outline:"none",fontSize:"14px",fontFamily:"monospace",color:"var(--color-text-primary)"}}),_.jsx("span",{style:{padding:"0 14px",fontSize:"13px",color:"var(--color-text-secondary)",fontWeight:500},children:S})]})]}),_.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[.25,.5,.75,1].map(B=>_.jsxs("button",{onClick:()=>D(B),style:{flex:1,padding:"8px 0",fontSize:"12px",backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"4px",color:"var(--color-text-primary)",cursor:"pointer",transition:"all 0.2s"},children:[B*100,"%"]},B))}),u==="limit"&&_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"16px"},children:[_.jsx("span",{style:{color:"var(--color-text-secondary)"},children:""}),_.jsxs("span",{style:{fontFamily:"monospace"},children:[C||"0.00"," ",M]})]}),_.jsx("button",{onClick:I,disabled:b||!t,style:{width:"100%",padding:"12px 0",fontSize:"13px",fontWeight:500,borderRadius:"4px",border:"none",cursor:b||!t?"not-allowed":"pointer",transition:"all 0.2s",backgroundColor:a==="buy"?"var(--color-green)":"var(--color-red)",color:"white",opacity:b||!t?.5:1},children:t?b?"...":a==="buy"?` ${S}`:` ${S}`:""})]})}function oe(r){var t=r.width,e=r.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function zr(r,t){return r.width===t.width&&r.height===t.height}var zM=(function(){function r(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return r.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(r.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),r.prototype.subscribe=function(t){var e=this,n={next:t};return this._observers.push(n),{unsubscribe:function(){e._observers=e._observers.filter(function(a){return a!==n})}}},r.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},r.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},r.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},r.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},r})();function LM(r){return new zM(r)}var BM=(function(){function r(t,e,n){var a;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=oe({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(l){return l}),this._allowResizeObserver=(a=n?.allowResizeObserver)!==null&&a!==void 0?a:!0,this._chooseAndInitObserver()}return r.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(r.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bitmapSize",{get:function(){return oe({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),r.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=oe(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},r.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},r.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(r.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),r.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},r.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},r.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},r.prototype._resizeBitmap=function(t){var e=this.bitmapSize;zr(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},r.prototype._emitBitmapSizeChanged=function(t,e){var n=this;this._bitmapSizeChangedListeners.forEach(function(a){return a.call(n,t,e)})},r.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,n=oe(this._transformBitmapSize(t,this._canvasElementClientSize)),a=zr(this.bitmapSize,n)?null:n;e===null&&a===null||e!==null&&a!==null&&zr(e,a)||(this._suggestedBitmapSize=a,this._emitSuggestedBitmapSizeChanged(e,a))},r.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(a){return a.call(n,t,e)})},r.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}PM().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},r.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=M0(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=LM(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},r.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var n=M0(this._canvasElement);if(n!==null){var a=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:n.devicePixelRatio,l=this._canvasElement.getClientRects(),u=l[0]!==void 0?IM(l[0],a):oe({width:this._canvasElementClientSize.width*a,height:this._canvasElementClientSize.height*a});this._suggestNewBitmapSize(u)}}},r.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var n=e.find(function(u){return u.target===t._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var a=n.devicePixelContentBoxSize[0],l=oe({width:a.inlineSize,height:a.blockSize});t._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},r})();function FM(r,t){return new BM(r,t.transform,t.options)}function M0(r){return r.ownerDocument.defaultView}function PM(){return new Promise(function(r){var t=new ResizeObserver(function(e){r(e.every(function(n){return"devicePixelContentBoxSize"in n})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function IM(r,t){return oe({width:Math.round(r.left*t+r.width*t)-Math.round(r.left*t),height:Math.round(r.top*t+r.height*t)-Math.round(r.top*t)})}var VM=(function(){function r(t,e,n){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=t}return r.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},r.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(r.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),r})();function Pr(r,t){var e=r.canvasElementClientSize;if(e.width===0||e.height===0)return null;var n=r.bitmapSize;if(n.width===0||n.height===0)return null;var a=r.canvasElement.getContext("2d",t);return a===null?null:new VM(a,e,n)}const ax={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var T0,A0;function ur(r,t){const e={0:[],1:[r.lineWidth,r.lineWidth],2:[2*r.lineWidth,2*r.lineWidth],3:[6*r.lineWidth,6*r.lineWidth],4:[r.lineWidth,4*r.lineWidth]}[t];r.setLineDash(e)}function lx(r,t,e,n){r.beginPath();const a=r.lineWidth%2?.5:0;r.moveTo(e,t+a),r.lineTo(n,t+a),r.stroke()}function Ve(r,t){if(!r)throw new Error("Assertion failed"+(t?": "+t:""))}function ci(r){if(r===void 0)throw new Error("Value is undefined");return r}function mt(r){if(r===null)throw new Error("Value is null");return r}function sr(r){return mt(ci(r))}(function(r){r[r.Simple=0]="Simple",r[r.WithSteps=1]="WithSteps",r[r.Curved=2]="Curved"})(T0||(T0={})),(function(r){r[r.Solid=0]="Solid",r[r.Dotted=1]="Dotted",r[r.Dashed=2]="Dashed",r[r.LargeDashed=3]="LargeDashed",r[r.SparseDotted=4]="SparseDotted"})(A0||(A0={}));class we{constructor(){this.t=[]}i(t,e,n){const a={h:t,l:e,o:n===!0};this.t.push(a)}_(t){const e=this.t.findIndex((n=>t===n.h));e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter((e=>e.l!==t))}p(t,e,n){const a=[...this.t];this.t=this.t.filter((l=>!l.o)),a.forEach((l=>l.h(t,e,n)))}v(){return this.t.length>0}m(){this.t=[]}}function bi(r,...t){for(const e of t)for(const n in e)e[n]!==void 0&&Object.prototype.hasOwnProperty.call(e,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof e[n]!="object"||r[n]===void 0||Array.isArray(e[n])?r[n]=e[n]:bi(r[n],e[n]));return r}function Ir(r){return typeof r=="number"&&isFinite(r)}function ul(r){return typeof r=="number"&&r%1==0}function Sl(r){return typeof r=="string"}function Vo(r){return typeof r=="boolean"}function wn(r){const t=r;if(!t||typeof t!="object")return t;let e,n,a;for(n in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(n)&&(a=t[n],e[n]=a&&typeof a=="object"?wn(a):a);return e}function R0(r){return r!==null}function cl(r){return r===null?void 0:r}const ox="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function hl(r,t,e){return t===void 0&&(t=ox),`${e=e!==void 0?`${e} `:""}${r}px ${t}`}class UM{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=t}N(){const t=this.M,e=this.F(),n=this.W();return t.k===e&&t.T===n||(t.k=e,t.T=n,t.P=hl(e,n),t.A=2.5/12*e,t.I=t.A,t.V=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function wf(r){return r<0?0:r>255?255:Math.round(r)||0}function D0(r){return .199*r[0]+.687*r[1]+.114*r[2]}class HM{constructor(t,e){this.q=new Map,this.j=t,e&&(this.q=e)}Y(t,e){if(t==="transparent")return t;const n=this.K(t),a=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${e*a})`}Z(t){const e=this.K(t);return{G:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,X:D0(e)>160?"black":"white"}}J(t){return D0(this.K(t))}tt(t,e,n){const[a,l,u,c]=this.K(t),[f,d,v,m]=this.K(e),y=[wf(a+n*(f-a)),wf(l+n*(d-l)),wf(u+n*(v-u)),(x=c+n*(m-c),x<=0||x>1?Math.min(Math.max(x,0),1):Math.round(1e4*x)/1e4)];var x;return`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${y[3]})`}K(t){const e=this.q.get(t);if(e)return e;const n=(function(u){const c=document.createElement("div");c.style.display="none",document.body.appendChild(c),c.style.color=u;const f=window.getComputedStyle(c).color;return document.body.removeChild(c),f})(t),a=n.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!a){if(this.j.length)for(const u of this.j){const c=u(t);if(c)return this.q.set(t,c),c}throw new Error(`Failed to parse color: ${t}`)}const l=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),a[4]?parseFloat(a[4]):1];return this.q.set(t,l),l}}class ux{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,n){this.it.forEach((a=>{a.nt(t,e,n)}))}}class Dn{nt(t,e,n){t.useBitmapCoordinateSpace((a=>this.et(a,e,n)))}}class YM extends Dn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.rt===null||this.rt.lt===null)return;const a=this.rt.lt,l=this.rt,u=Math.max(1,Math.floor(e))%2/2,c=f=>{t.beginPath();for(let d=a.to-1;d>=a.from;--d){const v=l.ot[d],m=Math.round(v._t*e)+u,y=v.ut*n,x=f*n+u;t.moveTo(m,y),t.arc(m,y,x,0,2*Math.PI)}t.fill()};l.ct>0&&(t.fillStyle=l.dt,c(l.ft+l.ct)),t.fillStyle=l.vt,c(l.ft)}}function WM(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const qM={from:0,to:1};class XM{constructor(t,e,n){this.Mt=new ux,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.yt=n,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map(WM),this.bt=this.St.map((e=>{const n=new YM;return n.ht(e),n})),this.Mt.st(this.bt))}Rt(){const t=this.Ct.N().mode===2||!this.Ct.It(),e=this.yt.Vt(),n=this.Ct.Bt(),a=this.O.Et();this.Pt(),e.forEach(((l,u)=>{const c=this.St[u],f=l.At(n),d=l.Lt();!t&&f!==null&&l.It()&&d!==null?(c.vt=f.zt,c.ft=f.ft,c.ct=f.Ot,c.ot[0].gt=f.gt,c.ot[0].ut=l.Ft().Nt(f.gt,d.Wt),c.dt=f.Ht??this.O.Ut(c.ot[0].ut/l.Ft().$t()),c.ot[0].wt=n,c.ot[0]._t=a.qt(n),c.lt=qM):c.lt=null}))}}class GM extends Dn{constructor(t){super(),this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.jt===null)return;const l=this.jt.Yt.It,u=this.jt.Kt.It;if(!l&&!u)return;const c=Math.round(this.jt._t*n),f=Math.round(this.jt.ut*a);t.lineCap="butt",l&&c>=0&&(t.lineWidth=Math.floor(this.jt.Yt.ct*n),t.strokeStyle=this.jt.Yt.R,t.fillStyle=this.jt.Yt.R,ur(t,this.jt.Yt.Zt),(function(d,v,m,y){d.beginPath();const x=d.lineWidth%2?.5:0;d.moveTo(v+x,m),d.lineTo(v+x,y),d.stroke()})(t,c,0,e.height)),u&&f>=0&&(t.lineWidth=Math.floor(this.jt.Kt.ct*a),t.strokeStyle=this.jt.Kt.R,t.fillStyle=this.jt.Kt.R,ur(t,this.jt.Kt.Zt),lx(t,f,0,e.width))}}class KM{constructor(t,e){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new GM(this.Gt),this.Jt=t,this.yt=e}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const t=this.Jt.It(),e=this.yt.Qt().N().crosshair,n=this.Gt;if(e.mode===2)return n.Kt.It=!1,void(n.Yt.It=!1);n.Kt.It=t&&this.Jt.ti(this.yt),n.Yt.It=t&&this.Jt.ii(),n.Kt.ct=e.horzLine.width,n.Kt.Zt=e.horzLine.style,n.Kt.R=e.horzLine.color,n.Yt.ct=e.vertLine.width,n.Yt.Zt=e.vertLine.style,n.Yt.R=e.vertLine.color,n._t=this.Jt.si(),n.ut=this.Jt.ni()}}function QM(r,t,e,n,a,l){r.fillRect(t+l,e,n-2*l,l),r.fillRect(t+l,e+a-l,n-2*l,l),r.fillRect(t,e,l,a),r.fillRect(t+n-l,e,l,a)}function Pu(r,t,e,n,a,l){r.save(),r.globalCompositeOperation="copy",r.fillStyle=l,r.fillRect(t,e,n,a),r.restore()}function N0(r,t,e,n,a,l){r.beginPath(),r.roundRect?r.roundRect(t,e,n,a,l):(r.lineTo(t+n-l[1],e),l[1]!==0&&r.arcTo(t+n,e,t+n,e+l[1],l[1]),r.lineTo(t+n,e+a-l[2]),l[2]!==0&&r.arcTo(t+n,e+a,t+n-l[2],e+a,l[2]),r.lineTo(t+l[3],e+a),l[3]!==0&&r.arcTo(t,e+a,t,e+a-l[3],l[3]),r.lineTo(t,e+l[0]),l[0]!==0&&r.arcTo(t,e,t+l[0],e,l[0]))}function O0(r,t,e,n,a,l,u=0,c=[0,0,0,0],f=""){if(r.save(),!u||!f||f===l)return N0(r,t,e,n,a,c),r.fillStyle=l,r.fill(),void r.restore();const d=u/2;var v;N0(r,t+d,e+d,n-u,a-u,(v=-d,c.map((m=>m===0?m:m+v)))),l!=="transparent"&&(r.fillStyle=l,r.fill()),f!=="transparent"&&(r.lineWidth=u,r.strokeStyle=f,r.closePath(),r.stroke()),r.restore()}function cx(r,t,e,n,a,l,u){r.save(),r.globalCompositeOperation="copy";const c=r.createLinearGradient(0,0,0,a);c.addColorStop(0,l),c.addColorStop(1,u),r.fillStyle=c,r.fillRect(t,e,n,a),r.restore()}class k0{constructor(t,e){this.ht(t,e)}ht(t,e){this.jt=t,this.ei=e}$t(t,e){return this.jt.It?t.k+t.A+t.I:0}nt(t,e,n,a){if(!this.jt.It||this.jt.ri.length===0)return;const l=this.jt.R,u=this.ei.G,c=t.useBitmapCoordinateSpace((f=>{const d=f.context;d.font=e.P;const v=this.hi(f,e,n,a),m=v.ai;return v.li?O0(d,m.oi,m._i,m.ui,m.ci,u,m.di,[m.ft,0,0,m.ft],u):O0(d,m.fi,m._i,m.ui,m.ci,u,m.di,[0,m.ft,m.ft,0],u),this.jt.pi&&(d.fillStyle=l,d.fillRect(m.fi,m.mi,m.wi-m.fi,m.gi)),this.jt.Mi&&(d.fillStyle=e.D,d.fillRect(v.li?m.bi-m.di:0,m._i,m.di,m.Si-m._i)),v}));t.useMediaCoordinateSpace((({context:f})=>{const d=c.xi;f.font=e.P,f.textAlign=c.li?"right":"left",f.textBaseline="middle",f.fillStyle=l,f.fillText(this.jt.ri,d.Ci,(d._i+d.Si)/2+d.yi)}))}hi(t,e,n,a){const{context:l,bitmapSize:u,mediaSize:c,horizontalPixelRatio:f,verticalPixelRatio:d}=t,v=this.jt.pi||!this.jt.ki?e.C:0,m=this.jt.Pi?e.S:0,y=e.A+this.ei.Ti,x=e.I+this.ei.Ri,b=e.V,w=e.B,S=this.jt.ri,M=e.k,N=n.Di(l,S),T=Math.ceil(n.Ii(l,S)),R=M+y+x,C=e.S+b+w+T+v,z=Math.max(1,Math.floor(d));let D=Math.round(R*d);D%2!=z%2&&(D+=1);const I=m>0?Math.max(1,Math.floor(m*f)):0,B=Math.round(C*f),V=Math.round(v*f),W=this.ei.Vi??this.ei.Bi??this.ei.Ei,Z=Math.round(W*d)-Math.floor(.5*d),it=Math.floor(Z+z/2-D/2),X=it+D,ot=a==="right",j=ot?c.width-m:m,U=ot?u.width-I:I;let st,ft,rt;return ot?(st=U-B,ft=U-V,rt=j-v-b-m):(st=U+B,ft=U+V,rt=j+v+b),{li:ot,ai:{_i:it,mi:Z,Si:X,ui:B,ci:D,ft:2*f,di:I,oi:st,fi:U,wi:ft,gi:z,bi:u.width},xi:{_i:it/d,Si:X/d,Ci:rt,yi:N}}}}class Iu{constructor(t){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(t||k0)(this.Li,this.Ai),this.Ni=new(t||k0)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Oi.$t(t,e),this.Ni.$t(t,e))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(t){this.Ai.Bi=t??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(t){return this.Fi(),this.Li.pi=this.Li.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class $M extends Iu{constructor(t,e,n){super(),this.Jt=t,this.Ki=e,this.Zi=n}Yi(t,e,n){if(t.It=!1,this.Jt.N().mode===2)return;const a=this.Jt.N().horzLine;if(!a.labelVisible)return;const l=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||l===null)return;const u=this.Ki.Xi().Z(a.labelBackgroundColor);n.G=u.G,t.R=u.X;const c=2/12*this.Ki.k();n.Ti=c,n.Ri=c;const f=this.Zi(this.Ki);n.Ei=f.Ei,t.ri=this.Ki.Ji(f.gt,l),t.It=!0}}const ZM=/[1-9]/g;class hx{constructor(){this.jt=null}ht(t){this.jt=t}nt(t,e){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const n=t.useMediaCoordinateSpace((({context:y})=>(y.font=e.P,Math.round(e.Qi.Ii(y,mt(this.jt).ri,ZM)))));if(n<=0)return;const a=e.ts,l=n+2*a,u=l/2,c=this.jt.ss;let f=this.jt.Ei,d=Math.floor(f-u)+.5;d<0?(f+=Math.abs(0-d),d=Math.floor(f-u)+.5):d+l>c&&(f-=Math.abs(c-(d+l)),d=Math.floor(f-u)+.5);const v=d+l,m=Math.ceil(0+e.S+e.C+e.A+e.k+e.I);t.useBitmapCoordinateSpace((({context:y,horizontalPixelRatio:x,verticalPixelRatio:b})=>{const w=mt(this.jt);y.fillStyle=w.G;const S=Math.round(d*x),M=Math.round(0*b),N=Math.round(v*x),T=Math.round(m*b),R=Math.round(2*x);if(y.beginPath(),y.moveTo(S,M),y.lineTo(S,T-R),y.arcTo(S,T,S+R,T,R),y.lineTo(N-R,T),y.arcTo(N,T,N,T-R,R),y.lineTo(N,M),y.fill(),w.pi){const C=Math.round(w.Ei*x),z=M,D=Math.round((z+e.C)*b);y.fillStyle=w.R;const I=Math.max(1,Math.floor(x)),B=Math.floor(.5*x);y.fillRect(C-B,z,I,D-z)}})),t.useMediaCoordinateSpace((({context:y})=>{const x=mt(this.jt),b=0+e.S+e.C+e.A+e.k/2;y.font=e.P,y.textAlign="left",y.textBaseline="middle",y.fillStyle=x.R;const w=e.Qi.Di(y,"Apr0");y.translate(d+a,b+w),y.fillText(x.ri,0,0)}))}}class JM{constructor(t,e,n){this.xt=!0,this.Xt=new hx,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=t,this.ns=e,this.Zi=n}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const t=this.Gt;if(t.It=!1,this.Ct.N().mode===2)return;const e=this.Ct.N().vertLine;if(!e.labelVisible)return;const n=this.ns.Et();if(n.Gi())return;t.ss=n.ss();const a=this.Zi();if(a===null)return;t.Ei=a.Ei;const l=n.es(this.Ct.Bt());t.ri=n.rs(mt(l)),t.It=!0;const u=this.ns.Xi().Z(e.labelBackgroundColor);t.G=u.G,t.R=u.X,t.pi=n.N().ticksVisible}}class fx{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(t){this.ls=t}Ft(){return this.hs}cs(t){this.hs=t}ds(t){return[]}fs(){return[]}It(){return!0}}var j0;(function(r){r[r.Normal=0]="Normal",r[r.Magnet=1]="Magnet",r[r.Hidden=2]="Hidden",r[r.MagnetOHLC=3]="MagnetOHLC"})(j0||(j0={}));class t2 extends fx{constructor(t,e){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=t,this.Ps=e,this.Ts=((a,l)=>u=>{const c=l(),f=a();if(u===mt(this.yt).Rs())return{gt:f,Ei:c};{const d=mt(u.Lt());return{gt:u.Ds(c,d),Ei:c}}})((()=>this.ps),(()=>this.Cs));const n=((a,l)=>()=>{const u=this.ns.Et().Is(a()),c=l();return u&&Number.isFinite(c)?{wt:u,Ei:c}:null})((()=>this.vs),(()=>this.si()));this.Vs=new JM(this,t,n)}N(){return this.Ps}Bs(t,e){this.ys=t,this.ks=e}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(t,e,n){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(t,e,n)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(t){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return t;const e=this.ns,n=e.Et();let a=null,l=null;for(const d of e.Us()){const v=d.qs().$s(t,-1);if(v){if(v.js===t)return t;(a===null||v.js>a)&&(a=v.js)}const m=d.qs().$s(t,1);if(m){if(m.js===t)return t;(l===null||m.js<l)&&(l=m.js)}}const u=[a,l].filter(R0);if(u.length===0)return t;const c=n.qt(t),f=u.map((d=>Math.abs(c-n.qt(d))));return u[f.indexOf(Math.min(...f))]}Ys(t){let e=this.bs.get(t);e||(e=new KM(this,t),this.bs.set(t,e));let n=this.Ss.get(t);return n||(n=new XM(this.ns,this,t),this.Ss.set(t,n)),[e,n]}ti(t){return t===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(t,e){this.ws&&this.yt===t||this.gs.clear();const n=[];return this.yt===t&&n.push(this.Zs(this.gs,e,this.Ts)),n}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach((t=>{this.bs.get(t)?.kt(),this.Ss.get(t)?.kt()})),this.gs.forEach((t=>t.kt())),this.Vs.kt()}Js(t){return t&&!t.Rs().Gi()?t.Rs():null}Os(t,e,n){this.Qs(t,e,n)&&this.Ws()}Qs(t,e,n){const a=this.xs,l=this.Cs,u=this.ps,c=this.vs,f=this.yt,d=this.Js(n);this.vs=t,this.xs=isNaN(t)?NaN:this.ns.Et().qt(t),this.yt=n;const v=d!==null?d.Lt():null;return d!==null&&v!==null?(this.ps=e,this.Cs=d.Nt(e,v)):(this.ps=NaN,this.Cs=NaN),a!==this.xs||l!==this.Cs||c!==this.vs||u!==this.ps||f!==this.yt}Fs(){const t=this.ns.tn().map((n=>n.qs().sn())).filter(R0),e=t.length===0?null:Math.max(...t);this.vs=e!==null?e:NaN}Zs(t,e,n){let a=t.get(e);return a===void 0&&(a=new $M(this,e,n),t.set(e,a)),a}}function Vu(r){return r==="left"||r==="right"}class Ie{constructor(t){this.nn=new Map,this.en=[],this.rn=t}hn(t,e){const n=(function(a,l){return a===void 0?l:{an:Math.max(a.an,l.an),ln:a.ln||l.ln}})(this.nn.get(t),e);this.nn.set(t,n)}_n(){return this.rn}un(t){const e=this.nn.get(t);return e===void 0?{an:this.rn}:{an:Math.max(this.rn,e.an),ln:e.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(t){this.dn(),this.en=[{fn:1,Wt:t}]}vn(t){this.mn(),this.en.push({fn:5,Wt:t})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(t){this.dn(),this.en.push({fn:2,Wt:t})}Mn(t){this.dn(),this.en.push({fn:3,Wt:t})}bn(){return this.en}Sn(t){for(const e of t.en)this.xn(e);this.rn=Math.max(this.rn,t.rn),t.nn.forEach(((e,n)=>{this.hn(n,e)}))}static Cn(){return new Ie(2)}static yn(){return new Ie(3)}xn(t){switch(t.fn){case 0:this.cn();break;case 1:this.pn(t.Wt);break;case 2:this.gn(t.Wt);break;case 3:this.Mn(t.Wt);break;case 4:this.wn();break;case 5:this.vn(t.Wt);break;case 6:this.mn()}}mn(){const t=this.en.findIndex((e=>e.fn===5));t!==-1&&this.en.splice(t,1)}}class dx{formatTickmarks(t){return t.map((e=>this.format(e)))}}const z0=".";function En(r,t){if(!Ir(r))return"n/a";if(!ul(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?r.toString():("0000000000000000"+r.toString()).slice(-t)}class Uu extends dx{constructor(t,e){if(super(),e||(e=1),Ir(t)&&ul(t)||(t=100),t<0)throw new TypeError("invalid base");this.Ki=t,this.kn=e,this.Pn()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.Tn(t)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let t=this.Ki;for(;t>1;)t/=10,this.Rn++}}Tn(t){const e=this.Ki/this.kn;let n=Math.floor(t),a="";const l=this.Rn!==void 0?this.Rn:NaN;if(e>1){let u=+(Math.round(t*e)-n*e).toFixed(this.Rn);u>=e&&(u-=e,n+=1),a=z0+En(+u.toFixed(this.Rn)*this.kn,l)}else n=Math.round(n*e)/e,l>0&&(a=z0+En(0,l));return n.toFixed(0)+a}}class vx extends Uu{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class e2 extends dx{constructor(t){super(),this.Dn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.In(t):t<999995?e+this.In(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.In(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.In(t/1e9)+"B")}In(t){let e;const n=Math.pow(10,this.Dn);return e=(t=Math.round(t*n)/n)>=1e-15&&t<1?t.toFixed(this.Dn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((a,l)=>l))}}const i2=/[2-9]/g;class fl{constructor(t=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=t}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(t,e,n){return this.Nn(t,e,n).width}Di(t,e,n){const a=this.Nn(t,e,n);return((a.actualBoundingBoxAscent||0)-(a.actualBoundingBoxDescent||0))/2}Nn(t,e,n){const a=n||i2,l=String(e).replace(a,"0");if(this.Ln.has(l))return ci(this.Ln.get(l)).Fn;if(this.Vn===this.zn){const c=this.An[this.En];delete this.An[this.En],this.Ln.delete(c),this.En++,this.Vn--}t.save(),t.textBaseline="middle";const u=t.measureText(l);return t.restore(),u.width===0&&e.length||(this.Ln.set(l,{Fn:u,Wn:this.Bn}),this.An[this.Bn]=l,this.Vn++,this.Bn++),u}}class n2{constructor(t){this.Hn=null,this.M=null,this.Un="right",this.$n=t}qn(t,e,n){this.Hn=t,this.M=e,this.Un=n}nt(t){this.M!==null&&this.Hn!==null&&this.Hn.nt(t,this.M,this.$n,this.Un)}}class px{constructor(t,e,n){this.jn=t,this.$n=new fl(50),this.Yn=e,this.O=n,this.F=-1,this.Xt=new n2(this.$n)}Tt(){const t=this.O.Kn(this.Yn);if(t===null)return null;const e=t.Zn(this.Yn)?t.Gn():this.Yn.Ft();if(e===null)return null;const n=t.Xn(e);if(n==="overlay")return null;const a=this.O.Jn();return a.k!==this.F&&(this.F=a.k,this.$n.On()),this.Xt.qn(this.jn.ji(),a,n),this.Xt}}class r2 extends Dn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}Qn(t,e){if(!this.jt?.It)return null;const{ut:n,ct:a,te:l}=this.jt;return e>=n-a-7&&e<=n+a+7?{ie:this.jt,te:l}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.jt===null||this.jt.It===!1)return;const l=Math.round(this.jt.ut*a);l<0||l>e.height||(t.lineCap="butt",t.strokeStyle=this.jt.R,t.lineWidth=Math.floor(this.jt.ct*n),ur(t,this.jt.Zt),lx(t,l,0,e.width))}}class wd{constructor(t){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new r2,this.xt=!0,this.ee=t,this.re=t.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class s2 extends wd{constructor(t){super(t)}he(){this.se.It=!1;const t=this.ee.Ft(),e=t.ae().ae;if(e!==2&&e!==3)return;const n=this.ee.N();if(!n.baseLineVisible||!this.ee.It())return;const a=this.ee.Lt();a!==null&&(this.se.It=!0,this.se.ut=t.Nt(a.Wt,a.Wt),this.se.R=n.baseLineColor,this.se.ct=n.baseLineWidth,this.se.Zt=n.baseLineStyle)}}class a2 extends Dn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}le(){return this.jt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){const a=this.jt;if(a===null)return;const l=Math.max(1,Math.floor(e)),u=l%2/2,c=Math.round(a.oe.x*e)+u,f=a.oe.y*n;t.fillStyle=a._e,t.beginPath();const d=Math.max(2,1.5*a.ue)*e;t.arc(c,f,d,0,2*Math.PI,!1),t.fill(),t.fillStyle=a.ce,t.beginPath(),t.arc(c,f,a.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=l,t.strokeStyle=a.de,t.beginPath(),t.arc(c,f,a.ft*e+l/2,0,2*Math.PI,!1),t.stroke()}}const l2=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class o2{constructor(t){this.Xt=new a2,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=t}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const t=performance.now(),e=this.Ce-t;if(e>0)return void(e<650&&(this.Ce+=2600));this.xe=t,this.Ce=t+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const t=this.ye.Qt().Et(),e=t.Ie(),n=this.ye.Lt();if(e===null||n===null)return;const a=this.ye.Ve(!0);if(a.Be||!e.Ee(a.js))return;const l={x:t.qt(a.js),y:this.ye.Ft().Nt(a.gt,n.Wt)},u=a.R,c=this.ye.N().lineWidth,f=this.Ae(this.Le(),u);this.Xt.ht({_e:u,ue:c,ce:f.ce,de:f.de,ft:f.ft,oe:l})}De(){const t=this.Xt.le();if(t!==null){const e=this.Ae(this.Le(),t._e);t.ce=e.ce,t.de=e.de,t.ft=e.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(t,e,n,a){const l=n+(a-n)*e;return this.ye.Qt().Xi().Y(t,l)}Ae(t,e){const n=t%2600/2600;let a;for(const d of l2)if(n>=d.fe&&n<=d.pe){a=d;break}Ve(a!==void 0,"Last price animation internal logic error");const l=(n-a.fe)/(a.pe-a.fe);return{ce:this.ze(e,l,a.we,a.ge),de:this.ze(e,l,a.Me,a.be),ft:(u=l,c=a.ve,f=a.me,c+(f-c)*u)};var u,c,f}}class u2 extends wd{constructor(t){super(t)}he(){const t=this.se;t.It=!1;const e=this.ee.N();if(!e.priceLineVisible||!this.ee.It())return;const n=this.ee.Ve(e.priceLineSource===0);n.Be||(t.It=!0,t.ut=n.Ei,t.R=this.ee.Oe(n.R),t.ct=e.priceLineWidth,t.Zt=e.priceLineStyle)}}class c2 extends Iu{constructor(t){super(),this.Jt=t}Yi(t,e,n){t.It=!1,e.It=!1;const a=this.Jt;if(!a.It())return;const l=a.N(),u=l.lastValueVisible,c=a.Ne()!=="",f=l.seriesLastValueMode===0,d=a.Ve(!1);if(d.Be)return;u&&(t.ri=this.Fe(d,u,f),t.It=t.ri.length!==0),(c||f)&&(e.ri=this.We(d,u,c,f),e.It=e.ri.length>0);const v=a.Oe(d.R),m=this.Jt.Qt().Xi().Z(v);n.G=m.G,n.Ei=d.Ei,e.Ht=a.Qt().Ut(d.Ei/a.Ft().$t()),t.Ht=v,t.R=m.X,e.R=m.X}We(t,e,n,a){let l="";const u=this.Jt.Ne();return n&&u.length!==0&&(l+=`${u} `),e&&a&&(l+=this.Jt.Ft().He()?t.Ue:t.$e),l.trim()}Fe(t,e,n){return e?n?this.Jt.Ft().He()?t.$e:t.Ue:t.ri:""}}function L0(r,t,e,n){const a=Number.isFinite(t),l=Number.isFinite(e);return a&&l?r(t,e):a||l?a?t:e:n}class $e{constructor(t,e){this.qe=t,this.je=e}Ye(t){return t!==null&&this.qe===t.qe&&this.je===t.je}Ke(){return new $e(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(t){return t===null?this:new $e(L0(Math.min,this.Ze(),t.Ze(),-1/0),L0(Math.max,this.Ge(),t.Ge(),1/0))}Je(t){if(!Ir(t)||this.je-this.qe===0)return;const e=.5*(this.je+this.qe);let n=this.je-e,a=this.qe-e;n*=t,a*=t,this.je=e+n,this.qe=e+a}Qe(t){Ir(t)&&(this.je+=t,this.qe+=t)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(t){return t===null?null:new $e(t.minValue,t.maxValue)}}class du{constructor(t,e){this.sr=t,this.nr=e||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(t){return t===null?null:new du($e.ir(t.priceRange),t.margins)}}const h2=[2,4,8,16,32,64,128,256,512],f2="Custom series with conflation reducer must have a priceValueBuilder method";class d2 extends wd{constructor(t,e){super(t),this.hr=e}he(){const t=this.se;t.It=!1;const e=this.hr.N();if(!this.ee.It()||!e.lineVisible)return;const n=this.hr.ar();n!==null&&(t.It=!0,t.ut=n,t.R=e.color,t.ct=e.lineWidth,t.Zt=e.lineStyle,t.te=this.hr.N().id)}}class v2 extends Iu{constructor(t,e){super(),this.ye=t,this.hr=e}Yi(t,e,n){t.It=!1,e.It=!1;const a=this.hr.N(),l=a.axisLabelVisible,u=a.title!=="",c=this.ye;if(!l||!c.It())return;const f=this.hr.ar();if(f===null)return;u&&(e.ri=a.title,e.It=!0),e.Ht=c.Qt().Ut(f/c.Ft().$t()),t.ri=this.lr(a.price),t.It=!0;const d=this.ye.Qt().Xi().Z(a.axisLabelColor||a.color);n.G=d.G;const v=a.axisLabelTextColor||d.X;t.R=v,e.R=v,n.Ei=f}lr(t){const e=this.ye.Lt();return e===null?"":this.ye.Ft().Ji(t,e.Wt)}}class p2{constructor(t,e){this.ye=t,this.Ps=e,this._r=new d2(t,this),this.jn=new v2(t,this),this.ur=new px(this.jn,t,t.Qt())}cr(t){bi(this.Ps,t),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const t=this.ye,e=t.Ft();if(t.Qt().Et().Gi()||e.Gi())return null;const n=t.Lt();return n===null?null:e.Nt(this.Ps.price,n.Wt)}}class m2{constructor(){this.wr=new WeakMap}gr(t,e,n){const a=1/e*n;if(t>=a)return 1;const l=a/t,u=Math.pow(2,Math.floor(Math.log2(l)));return Math.min(u,512)}Mr(t,e,n,a=!1,l){if(t.length===0||e<=1)return t;const u=this.br(e);if(u<=1)return t;const c=this.Sr(t);let f=c.Cr.get(u);return f!==void 0||(f=this.yr(t,u,n,a,l,c.Cr),c.Cr.set(u,f)),f}kr(t,e,n,a,l=!1,u){if(n<1||t.length===0)return t;const c=this.Sr(t),f=c.Cr.get(n);if(!f)return this.Mr(t,n,a,l,u);const d=this.Pr(t,e,n,f,l,a,u);return c.Cr.set(n,d),d}br(t){if(t<=2)return 2;for(const e of h2)if(t<=e)return e;return 512}Tr(t){if(t.length===0)return 0;const e=t[0],n=t[t.length-1];return 31*t.length+17*e.js+13*n.js}yr(t,e,n,a=!1,l,u=new Map){if(e===2)return this.Rr(t,2,n,a,l);const c=e/2;let f=u.get(c);return f||(f=this.yr(t,c,n,a,l,u),u.set(c,f)),this.Dr(f,n,a,l)}Rr(t,e,n,a=!1,l){const u=this.Ir(t,e,n,a,l);return this.Vr(u,a)}Dr(t,e,n=!1,a){const l=this.Ir(t,2,e,n,a);return this.Vr(l,n)}Ir(t,e,n,a=!1,l){const u=[];for(let c=0;c<t.length;c+=e)if(t.length-c>=e){const f=this.Br(t[c],t[c+1],n,a,l);f.Er=!1,u.push(f)}else if(u.length===0)u.push(this.Ar(t[c],!0));else{const f=u[u.length-1];u[u.length-1]=this.Lr(f,t[c],n,a,l)}return u}zr(t,e){return(t??1)+(e??1)}Br(t,e,n,a=!1,l){if(!a||!n||!l){const d=t.Wt[1]>e.Wt[1]?t.Wt[1]:e.Wt[1],v=t.Wt[2]<e.Wt[2]?t.Wt[2]:e.Wt[2];return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:d,$r:v,qr:e.Wt[3],jr:this.zr(t.jr,e.jr),Yr:void 0,Er:!1}}const u=n(this.Kr(t,l),this.Kr(e,l)),c=l(u),f=c.length?c[c.length-1]:0;return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:Math.max(t.Wt[1],f),$r:Math.min(t.Wt[2],f),qr:f,jr:this.zr(t.jr,e.jr),Yr:u,Er:!1}}Lr(t,e,n,a=!1,l){if(!a||!n||!l)return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:t.Ur>e.Wt[1]?t.Ur:e.Wt[1],$r:t.$r<e.Wt[2]?t.$r:e.Wt[2],qr:e.Wt[3],jr:t.jr+(e.jr??1),Yr:t.Yr,Er:!1};const u=t.Yr,c=this.Kr(e,l),f=u?{data:u,index:t.Or,originalTime:t.Fr,time:t.Fr,priceValues:l(u)}:null,d=f?n(f,c):c.data,v=f?l(d):c.priceValues,m=v.length?v[v.length-1]:0;return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:Math.max(t.Ur,m),$r:Math.min(t.$r,m),qr:m,jr:t.jr+(e.jr??1),Yr:d,Er:!1}}Zr(t,e,n,a,l,u,c=!1,f){const d=e===a?l:t[e];if(n-e==1)return this.Ar(d,!0);const v=e+1===a?l:t[e+1];let m=this.Br(d,v,u,c,f);for(let y=e+2;y<n;y++){const x=y===a?l:t[y];m=this.Lr(m,x,u,c,f)}return m}Kr(t,e){const n=t.le??{};return{data:t.le,index:t.js,originalTime:t.Gr,time:t.wt,priceValues:e(n)}}Xr(t,e=!1){const n=e===!0,a=!!t.Yr;return{js:t.Or,wt:t.Fr,Gr:t.Fr,Wt:[n?t.qr:t.Hr,t.Ur,t.$r,t.qr],jr:t.jr,le:n?a?t.Yr:{wt:t.Fr}:void 0}}Vr(t,e=!1){return t.map((n=>this.Xr(n,e)))}Pr(t,e,n,a,l=!1,u,c){if(a.length===0)return a;const f=t.length-1,d=Math.floor(f/n)*n;if(Math.min(d+n,t.length)-d<n&&t.length>n){const v=t.slice();return v[v.length-1]=e,this.Mr(v,n,u,l,c)}if(Math.floor((f-1)/n)===Math.floor(f/n)||a.length===1){const v=Math.min(d+n,t.length),m=v-d;if(m<=0)return a;const y=m===1?this.Ar(d===f?e:t[d],!0):this.Zr(t,d,v,f,e,u,l,c);return a[a.length-1]=this.Xr(y,l),a}{const v=t.slice();return v[v.length-1]=e,this.Mr(v,n,u,l,c)}}Ar(t,e=!1){return{Or:t.js,Nr:t.js,Fr:t.wt,Wr:t.wt,Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3],jr:t.jr??1,Yr:t.le,Er:e}}Sr(t){const e=this.Jr(t),n=this.Tr(t);return e.Qr!==n&&(e.Cr.clear(),e.Qr=n),e}Jr(t){let e=this.wr.get(t);return e===void 0&&(e={Qr:this.Tr(t),Cr:new Map},this.wr.set(t,e)),e}}class g2 extends fx{constructor(t){super(),this.ns=t}Qt(){return this.ns}}const y2={Bar:(r,t,e,n)=>{const a=t.upColor,l=t.downColor,u=mt(r(e,n)),c=sr(u.Wt[0])<=sr(u.Wt[3]);return{th:u.R??(c?a:l)}},Candlestick:(r,t,e,n)=>{const a=t.upColor,l=t.downColor,u=t.borderUpColor,c=t.borderDownColor,f=t.wickUpColor,d=t.wickDownColor,v=mt(r(e,n)),m=sr(v.Wt[0])<=sr(v.Wt[3]);return{th:v.R??(m?a:l),ih:v.Ht??(m?u:c),sh:v.nh??(m?f:d)}},Custom:(r,t,e,n)=>({th:mt(r(e,n)).R??t.color}),Area:(r,t,e,n)=>{const a=mt(r(e,n));return{th:a.vt??t.lineColor,vt:a.vt??t.lineColor,eh:a.eh??t.topColor,rh:a.rh??t.bottomColor}},Baseline:(r,t,e,n)=>{const a=mt(r(e,n));return{th:a.Wt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,hh:a.hh??t.topLineColor,ah:a.ah??t.bottomLineColor,oh:a.oh??t.topFillColor1,_h:a._h??t.topFillColor2,uh:a.uh??t.bottomFillColor1,dh:a.dh??t.bottomFillColor2}},Line:(r,t,e,n)=>{const a=mt(r(e,n));return{th:a.R??t.color,vt:a.R??t.color}},Histogram:(r,t,e,n)=>({th:mt(r(e,n)).R??t.color})};class b2{constructor(t){this.fh=(e,n)=>n!==void 0?n.Wt:this.ye.qs().ph(e),this.ye=t,this.mh=y2[t.wh()]}gh(t,e){return this.mh(this.fh,this.ye.N(),t,e)}}function mx(r,t,e,n,a=0,l=t.length){let u=l-a;for(;0<u;){const c=u>>1,f=a+c;n(t[f],e)===r?(a=f+1,u-=c+1):u=c}return a}const qs=mx.bind(null,!0),gx=mx.bind(null,!1);var B0;(function(r){r[r.NearestLeft=-1]="NearestLeft",r[r.None=0]="None",r[r.NearestRight=1]="NearestRight"})(B0||(B0={}));const er=30;class x2{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(t){return this.Th(t,0)!==null}ph(t){return this.$s(t)}$s(t,e=0){const n=this.Th(t,e);return n===null?null:{...this.Rh(n),js:this.Ph(n)}}Dh(){return this.Mh}Ih(t,e,n){if(this.Gi())return null;let a=null;for(const l of n)a=Uo(a,this.Vh(t,e,l));return a}ht(t){this.Sh.clear(),this.bh.clear(),this.Mh=t,this.xh=t.map((e=>e.js))}Bh(){return this.xh}Ph(t){return this.Mh[t].js}Rh(t){return this.Mh[t]}Th(t,e){const n=this.Eh(t);if(n===null&&e!==0)switch(e){case-1:return this.Ah(t);case 1:return this.Lh(t);default:throw new TypeError("Unknown search mode")}return n}Ah(t){let e=this.zh(t);return e>0&&(e-=1),e!==this.Mh.length&&this.Ph(e)<t?e:null}Lh(t){const e=this.Oh(t);return e!==this.Mh.length&&t<this.Ph(e)?e:null}Eh(t){const e=this.zh(t);return e===this.Mh.length||t<this.Mh[e].js?null:e}zh(t){return qs(this.Mh,t,((e,n)=>e.js<n))}Oh(t){return gx(this.Mh,t,((e,n)=>e.js>n))}Nh(t,e,n){let a=null;for(let l=t;l<e;l++){const u=this.Mh[l].Wt[n];Number.isNaN(u)||(a===null?a={Fh:u,Wh:u}:(u<a.Fh&&(a.Fh=u),u>a.Wh&&(a.Wh=u)))}return a}Vh(t,e,n){if(this.Gi())return null;let a=null;const l=mt(this.kh()),u=mt(this.sn()),c=Math.max(t,l),f=Math.min(e,u),d=Math.ceil(c/er)*er,v=Math.max(d,Math.floor(f/er)*er);{const y=this.zh(c),x=this.Oh(Math.min(f,d,e));a=Uo(a,this.Nh(y,x,n))}let m=this.bh.get(n);m===void 0&&(m=new Map,this.bh.set(n,m));for(let y=Math.max(d+1,c);y<v;y+=er){const x=Math.floor(y/er);let b=m.get(x);if(b===void 0){const w=this.zh(x*er),S=this.Oh((x+1)*er-1);b=this.Nh(w,S,n),m.set(x,b)}a=Uo(a,b)}{const y=this.zh(v),x=this.Oh(f);a=Uo(a,this.Nh(y,x,n))}return a}}function Uo(r,t){return r===null?t:t===null?r:{Fh:Math.min(r.Fh,t.Fh),Wh:Math.max(r.Wh,t.Wh)}}function Ef(){return new x2}const vu={setLineStyle:ur};class S2{constructor(t){this.Hh=t}nt(t,e,n){this.Hh.draw(t,vu)}Uh(t,e,n){this.Hh.drawBackground?.(t,vu)}}class _2{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new S2(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}class yx{constructor(t){this.Kh=null,this.Zh=t}Gh(){return this.Zh}Ws(){this.Zh.updateAllViews?.()}Ys(){const t=this.Zh.paneViews?.()??[];if(this.Kh?.qh===t)return this.Kh.jh;const e=t.map((n=>new _2(n)));return this.Kh={qh:t,jh:e},e}Qn(t,e){return this.Zh.hitTest?.(t,e)??null}}let w2=class extends yx{ds(){return[]}};class E2{constructor(t){this.Hh=t}nt(t,e,n){this.Hh.draw(t,vu)}Uh(t,e,n){this.Hh.drawBackground?.(t,vu)}}class F0{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new E2(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}}function bx(r){return{ri:r.text(),Ei:r.coordinate(),Vi:r.fixedCoordinate?.(),R:r.textColor(),G:r.backColor(),It:r.visible?.()??!0,pi:r.tickVisible?.()??!0}}class C2{constructor(t,e){this.Xt=new hx,this.Xh=t,this.Jh=e}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...bx(this.Xh)}),this.Xt}}class M2 extends Iu{constructor(t,e){super(),this.Xh=t,this.Ki=e}Yi(t,e,n){const a=bx(this.Xh);n.G=a.G,t.R=a.R;const l=2/12*this.Ki.k();n.Ti=l,n.Ri=l,n.Ei=a.Ei,n.Vi=a.Vi,t.ri=a.ri,t.It=a.It,t.pi=a.pi}}class T2 extends yx{constructor(t,e){super(t),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=e}fs(){const t=this.Zh.timeAxisViews?.()??[];if(this.Qh?.qh===t)return this.Qh.jh;const e=this.ye.Qt().Et(),n=t.map((a=>new C2(a,e)));return this.Qh={qh:t,jh:n},n}Ks(){const t=this.Zh.priceAxisViews?.()??[];if(this.ta?.qh===t)return this.ta.jh;const e=this.ye.Ft(),n=t.map((a=>new M2(a,e)));return this.ta={qh:t,jh:n},n}na(){const t=this.Zh.priceAxisPaneViews?.()??[];if(this.ia?.qh===t)return this.ia.jh;const e=t.map((n=>new F0(n)));return this.ia={qh:t,jh:e},e}ea(){const t=this.Zh.timeAxisPaneViews?.()??[];if(this.sa?.qh===t)return this.sa.jh;const e=t.map((n=>new F0(n)));return this.sa={qh:t,jh:e},e}ra(t,e){return this.Zh.autoscaleInfo?.(t,e)??null}}function Cf(r,t,e,n){r.forEach((a=>{t(a).forEach((l=>{l.Yh()===e&&n.push(l)}))}))}function Mf(r){return r.Ys()}function A2(r){return r.na()}function R2(r){return r.ea()}const D2=["Area","Line","Baseline"];class Hu extends g2{constructor(t,e,n,a,l){super(t),this.jt=Ef(),this._r=new u2(this),this.ha=[],this.aa=new s2(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new m2,this.da=new Map,this.fa=null,this.Ps=n,this.pa=e;const u=new c2(this);if(this.gs=[u],this.ur=new px(u,this,t),D2.includes(this.pa)&&(this.la=new o2(this)),this.va(),this.$h=a(this,this.Qt(),l),this.pa==="Custom"){const c=this.$h;c.ma&&this.wa(c.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(t){return this.Ps.priceLineColor||t}Ve(t){const e={Be:!0},n=this.Ft();if(this.Qt().Et().Gi()||n.Gi()||this.jt.Gi())return e;const a=this.Qt().Et().Ie(),l=this.Lt();if(a===null||l===null)return e;let u,c;if(t){const m=this.jt.Ch();if(m===null)return e;u=m,c=m.js}else{const m=this.jt.$s(a.bi(),-1);if(m===null||(u=this.jt.ph(m.js),u===null))return e;c=m.js}const f=u.Wt[3],d=this.ga().gh(c,{Wt:u}),v=n.Nt(f,l.Wt);return{Be:!1,gt:f,ri:n.Ji(f,l.Wt),Ue:n.Ma(f),$e:n.ba(f,l.Wt),R:d.th,Ei:v,js:c}}ga(){return this.oa!==null||(this.oa=new b2(this)),this.oa}N(){return this.Ps}cr(t){const e=this.Qt(),{priceScaleId:n,visible:a,priceFormat:l}=t;n!==void 0&&n!==this.Ps.priceScaleId&&e.Sa(this,n),a!==void 0&&a!==this.Ps.visible&&e.xa();const u=t.conflationThresholdFactor!==void 0;bi(this.Ps,t),u&&(this.da.clear(),this.Qt().dr()),l!==void 0&&(this.va(),e.Ca()),e.ya(this),e.ka(),this.$h.kt("options")}ht(t,e){this.jt.ht(t),this.da.clear();const n=this.Qt().Et().N();n.enableConflation&&n.precomputeConflationOnInit&&this.Pa(n.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(e&&e.Ta?this.la.Pe():t.length===0&&this.la.ke());const a=this.Qt().Kn(this);this.Qt().Ra(a),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(t){const e=new p2(this,t);return this.ha.push(e),this.Qt().ya(this),e}Ia(t){const e=this.ha.indexOf(t);e!==-1&&this.ha.splice(e,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const t=this.Ba();return t===null?null:{Wt:t.Wt[3],Ea:t.wt}}Ba(){const t=this.Qt().Et().Ie();if(t===null)return null;const e=t.Aa();return this.jt.$s(e,1)}qs(){return this.jt}wa(t){this.fa=t,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(t){if(!this.La())return;const e=this.za();if(!this.da.has(e))return;const n=this.pa==="Custom",a=n&&this.fa||void 0,l=n&&this.$h.Oa?f=>{const d=f,v=this.$h.Oa(d);return Array.isArray(v)?v:[typeof v=="number"?v:0]}:void 0,u=this.ca.kr(this.jt.Dh(),t,e,a,n,l),c=Ef();c.ht(u),this.da.set(e,c)}Na(){const t=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!t)return this.jt;const e=this.za(),n=this.da.get(e);return n||(this.Fa(e),this.da.get(e)??this.jt)}Wa(t){const e=this.jt.ph(t);return e===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3]}:e.Wt[3]}Ha(t){const e=[];Cf(this.ua,Mf,"top",e);const n=this.la;return n!==null&&n.It()&&(this._a===null&&n.Re()&&(this._a=setTimeout((()=>{this._a=null,this.Qt().Ua()}),0)),n.Te(),e.unshift(n)),e}Ys(){const t=[];this.$a()||t.push(this.aa),t.push(this.$h,this._r);const e=this.ha.map((n=>n.pr()));return t.push(...e),Cf(this.ua,Mf,"normal",t),t}qa(){return this.ja(Mf,"bottom")}Ya(t){return this.ja(A2,t)}Ka(t){return this.ja(R2,t)}Za(t,e){return this.ua.map((n=>n.Qn(t,e))).filter((n=>n!==null))}ds(){return[this.ur,...this.ha.map((t=>t.vr()))]}Ks(t,e){if(e!==this.hs&&!this.$a())return[];const n=[...this.gs];for(const a of this.ha)n.push(a.mr());return this.ua.forEach((a=>{n.push(...a.Ks())})),n}fs(){const t=[];return this.ua.forEach((e=>{t.push(...e.fs())})),t}ra(t,e){if(this.Ps.autoscaleInfoProvider!==void 0){const n=this.Ps.autoscaleInfoProvider((()=>{const a=this.Ga(t,e);return a===null?null:a.tr()}));return du.ir(n)}return this.Ga(t,e)}qh(){const t=this.Ps.priceFormat;return t.base??1/t.minMove}Xa(){return this.Ja}Ws(){this.$h.kt();for(const t of this.gs)t.kt();for(const t of this.ha)t.kt();this._r.kt(),this.aa.kt(),this.la?.kt(),this.ua.forEach((t=>t.Ws()))}Ft(){return mt(super.Ft())}At(t){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const e=this.jt.ph(t);return e===null?null:{gt:e.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(t)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(t){this.ua.push(new T2(t,this))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t))}rl(){if(this.pa==="Custom")return t=>this.$h.Oa(t)}hl(){if(this.pa==="Custom")return t=>this.$h.al(t)}ll(){return this.jt.Bh()}$a(){return!Vu(this.Ft().ol())}Ga(t,e){if(!ul(t)||!ul(e)||this.jt.Gi())return null;const n=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],a=this.jt.Ih(t,e,n);let l=a!==null?new $e(a.Fh,a.Wh):null,u=null;if(this.wh()==="Histogram"){const c=this.Ps.base,f=new $e(c,c);l=l!==null?l.Sn(f):f}return this.ua.forEach((c=>{const f=c.ra(t,e);if(f?.priceRange){const d=new $e(f.priceRange.minValue,f.priceRange.maxValue);l=l!==null?l.Sn(d):d}f?.margins&&(u=f.margins)})),new du(l,u)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(t){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.ga().gh(t).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const t=this.Ps.priceFormat.formatter;this.Ja={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.Ja=new e2(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new vx(this.Ps.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new Uu(t,this.Ps.priceFormat.minMove*t)}}this.hs!==null&&this.hs._l()}ja(t,e){const n=[];return Cf(this.ua,t,e,n),n}za(){const{ul:t,cl:e,dl:n}=this.fl();return this.ca.gr(t,e,n)}fl(){const t=this.Qt().Et(),e=t.ul(),n=window.devicePixelRatio||1,a=t.N().conflationThresholdFactor;return{ul:e,cl:n,dl:this.Ps.conflationThresholdFactor??a??1}}pl(t){const e=this.jt.Dh();let n;if(this.pa==="Custom"&&this.fa!==null){const l=this.rl();if(!l)throw new Error(f2);n=this.ca.Mr(e,t,this.fa,!0,(u=>l(u)))}else n=this.ca.Mr(e,t);const a=Ef();return a.ht(n),a}Fa(t){const e=this.pl(t);this.da.set(t,e)}Pa(t){if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const e=this.Qt().Et().vl();for(const n of e){const a=()=>{this.ml(n)},l=typeof window=="object"&&window||typeof self=="object"&&self;l?.gl?.wl?l.gl.wl((()=>{a()}),{Ml:t}):Promise.resolve().then((()=>a()))}}ml(t){if(this.da.has(t)||this.jt.Dh().length===0)return;const e=this.pl(t);this.da.set(t,e)}}const N2=[3],O2=[0,1,2,3];class k2{constructor(t){this.Ps=t}bl(t,e,n){let a=t;if(this.Ps.mode===0)return a;const l=n.Rs(),u=l.Lt();if(u===null)return a;const c=l.Nt(t,u),f=n.Sl().filter((v=>v instanceof Hu)).reduce(((v,m)=>{if(n.Zn(m)||!m.It())return v;const y=m.Ft(),x=m.qs();if(y.Gi()||!x.Ee(e))return v;const b=x.ph(e);if(b===null)return v;const w=sr(m.Lt()),S=this.Ps.mode===3?O2:N2;return v.concat(S.map((M=>y.Nt(b.Wt[M],w.Wt))))}),[]);if(f.length===0)return a;f.sort(((v,m)=>Math.abs(v-c)-Math.abs(m-c)));const d=f[0];return a=l.Ds(d,u),a}}function Vs(r,t,e){return Math.min(Math.max(r,t),e)}function Ho(r,t,e){return t-r<=e}function Ed(r){const t=Math.ceil(r);return t%2==0?t-1:t}class j2 extends Dn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.jt===null)return;const l=Math.max(1,Math.floor(n));t.lineWidth=l,(function(u,c){u.save(),u.lineWidth%2&&u.translate(.5,.5),c(),u.restore()})(t,(()=>{const u=mt(this.jt);if(u.xl){t.strokeStyle=u.Cl,ur(t,u.yl),t.beginPath();for(const c of u.kl){const f=Math.round(c.Pl*n);t.moveTo(f,-l),t.lineTo(f,e.height+l)}t.stroke()}if(u.Tl){t.strokeStyle=u.Rl,ur(t,u.Dl),t.beginPath();for(const c of u.Il){const f=Math.round(c.Pl*a);t.moveTo(-l,f),t.lineTo(e.width+l,f)}t.stroke()}}))}}class z2{constructor(t){this.Xt=new j2,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){const t=this.yt.Qt().N().grid,e={Tl:t.horzLines.visible,xl:t.vertLines.visible,Rl:t.horzLines.color,Cl:t.vertLines.color,Dl:t.horzLines.style,yl:t.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map((n=>({Pl:n.coord})))};this.Xt.ht(e),this.xt=!1}return this.Xt}}class L2{constructor(t){this.$h=new z2(t)}pr(){return this.$h}}const Tf={Bl:4,El:1e-4};function Ps(r,t){const e=100*(r-t)/t;return t<0?-e:e}function B2(r,t){const e=Ps(r.Ze(),t),n=Ps(r.Ge(),t);return new $e(e,n)}function sl(r,t){const e=100*(r-t)/t+100;return t<0?-e:e}function F2(r,t){const e=sl(r.Ze(),t),n=sl(r.Ge(),t);return new $e(e,n)}function pu(r,t){const e=Math.abs(r);if(e<1e-15)return 0;const n=Math.log10(e+t.El)+t.Bl;return r<0?-n:n}function al(r,t){const e=Math.abs(r);if(e<1e-15)return 0;const n=Math.pow(10,e-t.Bl)-t.El;return r<0?-n:n}function qa(r,t){if(r===null)return null;const e=pu(r.Ze(),t),n=pu(r.Ge(),t);return new $e(e,n)}function Is(r,t){if(r===null)return null;const e=al(r.Ze(),t),n=al(r.Ge(),t);return new $e(e,n)}function Af(r){if(r===null)return Tf;const t=Math.abs(r.Ge()-r.Ze());if(t>=1||t<1e-15)return Tf;const e=Math.ceil(Math.abs(Math.log10(t))),n=Tf.Bl+e;return{Bl:n,El:1/Math.pow(10,n)}}class Rf{constructor(t,e){if(this.Al=t,this.Ll=e,(function(n){if(n<0)return!1;if(n>1e18)return!0;for(let a=n;a>1;a/=10)if(a%10!=0)return!1;return!0})(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let n=this.Al;n!==1;){if(n%2==0)this.zl.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),n/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(t,e,n){const a=this.Al===0?0:1/this.Al;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),u=0,c=this.Ll[0];for(;;){const m=Ho(l,a,1e-14)&&l>a+1e-14,y=Ho(l,n*c,1e-14),x=Ho(l,1,1e-14);if(!(m&&y&&x))break;l/=c,c=this.Ll[++u%this.Ll.length]}if(l<=a+1e-14&&(l=a),l=Math.max(1,l),this.zl.length>0&&(f=l,d=1,v=1e-14,Math.abs(f-d)<v))for(u=0,c=this.zl[0];Ho(l,n*c,1e-14)&&l>a+1e-14;)l/=c,c=this.zl[++u%this.zl.length];var f,d,v;return l}}class P0{constructor(t,e,n,a){this.Nl=[],this.Ki=t,this.Al=e,this.Fl=n,this.Wl=a}Ol(t,e){if(t<e)throw new Error("high < low");const n=this.Ki.$t(),a=(t-e)*this.Hl()/n,l=new Rf(this.Al,[2,2.5,2]),u=new Rf(this.Al,[2,2,2.5]),c=new Rf(this.Al,[2.5,2,2]),f=[];return f.push(l.Ol(t,e,a),u.Ol(t,e,a),c.Ol(t,e,a)),(function(d){if(d.length<1)throw Error("array is empty");let v=d[0];for(let m=1;m<d.length;++m)d[m]<v&&(v=d[m]);return v})(f)}Ul(){const t=this.Ki,e=t.Lt();if(e===null)return void(this.Nl=[]);const n=t.$t(),a=this.Fl(n-1,e),l=this.Fl(0,e),u=this.Ki.N().entireTextOnly?this.$l()/2:0,c=u,f=n-1-u,d=Math.max(a,l),v=Math.min(a,l);if(d===v)return void(this.Nl=[]);const m=this.Ol(d,v);if(this.ql(e,m,d,v,c,f),t.jl()&&this.Yl(m,v,d)){const b=this.Ki.Kl();this.Zl(e,m,c,f,b,2*b)}const y=this.Nl.map((b=>b.Gl)),x=this.Ki.Xl(y);for(let b=0;b<this.Nl.length;b++)this.Nl[b].Jl=x[b]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(t,e,n,a,l,u){const c=this.Nl,f=this.Ki;let d=n%e;d+=d<0?e:0;const v=n>=a?1:-1;let m=null,y=0;for(let x=n-d;x>a;x-=e){const b=this.Wl(x,t,!0);m!==null&&Math.abs(b-m)<this.Hl()||b<l||b>u||(y<c.length?(c[y].Pl=b,c[y].Jl=f.Ql(x),c[y].Gl=x):c.push({Pl:b,Jl:f.Ql(x),Gl:x}),y++,m=b,f.io()&&(e=this.Ol(x*v,a)))}c.length=y}Zl(t,e,n,a,l,u){const c=this.Nl,f=this.so(t,n,l,u),d=this.so(t,a,-u,-l),v=this.Wl(0,t,!0)-this.Wl(e,t,!0);c.length>0&&c[0].Pl-f.Pl<v/2&&c.shift(),c.length>0&&d.Pl-c[c.length-1].Pl<v/2&&c.pop(),c.unshift(f),c.push(d)}so(t,e,n,a){const l=(n+a)/2,u=this.Fl(e+n,t),c=this.Fl(e+a,t),f=Math.min(u,c),d=Math.max(u,c),v=Math.max(.1,this.Ol(d,f)),m=this.Fl(e+l,t),y=m-m%v,x=this.Wl(y,t,!0);return{Jl:this.Ki.Ql(y),Pl:x,Gl:y}}Yl(t,e,n){let a=sr(this.Ki.er());return this.Ki.io()&&(a=Is(a,this.Ki.no())),a.Ze()-e<t&&n-a.Ge()<t}}function xx(r){return r.slice().sort(((t,e)=>mt(t._s())-mt(e._s())))}var I0;(function(r){r[r.Normal=0]="Normal",r[r.Logarithmic=1]="Logarithmic",r[r.Percentage=2]="Percentage",r[r.IndexedTo100=3]="IndexedTo100"})(I0||(I0={}));const V0=new vx,U0=new Uu(100,1);class P2{constructor(t,e,n,a,l){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new we,this.fo=new we,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=U0,this.So=Af(null),this.xo=t,this.Ps=e,this.Co=n,this.yo=a,this.ko=l,this.Po=new P0(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(t){if(bi(this.Ps,t),this._l(),t.mode!==void 0&&this.Do({ae:t.mode}),t.scaleMargins!==void 0){const e=ci(t.scaleMargins.top),n=ci(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(e+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+n}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(t){const e=this.ae();let n=null;t.ln!==void 0&&(this.Ps.autoScale=t.ln),t.ae!==void 0&&(this.Ps.mode=t.ae,t.ae!==2&&t.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),e.ae===1&&t.ae!==e.ae&&((function(l,u){if(l===null)return!1;const c=al(l.Ze(),u),f=al(l.Ge(),u);return isFinite(c)&&isFinite(f)})(this.sr,this.So)?(n=Is(this.sr,this.So),n!==null&&this.Lo(n)):this.Ps.autoScale=!0),t.ae===1&&t.ae!==e.ae&&(n=qa(this.sr,this.So),n!==null&&this.Lo(n));const a=e.ae!==this.Ps.mode;a&&(e.ae===2||this.He())&&this._l(),a&&(e.ae===3||this.Eo())&&this._l(),t.Ao!==void 0&&e.Ao!==t.Ao&&(this.Ps.invertScale=t.Ao,this.zo()),this.fo.p(e,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(t){this.eo!==t&&(this.eo=t,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const t=this.$t()-this.Wo()-this.Ho();return this.ro=t,t}er(){return this.Uo(),this.sr}Lo(t,e){const n=this.sr;(e||n===null&&t!==null||n!==null&&!n.Ye(t))&&(this.wo=null,this.sr=t)}$o(t){this.Lo(t),this.qo(t!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(t){return this.Ao()?t:this.$t()-1-t}Nt(t,e){return this.He()?t=Ps(t,e):this.Eo()&&(t=sl(t,e)),this.Ro(t,e)}Yo(t,e,n){this.Uo();const a=this.Ho(),l=mt(this.er()),u=l.Ze(),c=l.Ge(),f=this.Fo()-1,d=this.Ao(),v=f/(c-u),m=n===void 0?0:n.from,y=n===void 0?t.length:n.to,x=this.Ko();for(let b=m;b<y;b++){const w=t[b],S=w.gt;if(isNaN(S))continue;let M=S;x!==null&&(M=x(w.gt,e));const N=a+v*(M-u),T=d?N:this.eo-1-N;w.ut=T}}Zo(t,e,n){this.Uo();const a=this.Ho(),l=mt(this.er()),u=l.Ze(),c=l.Ge(),f=this.Fo()-1,d=this.Ao(),v=f/(c-u),m=n===void 0?0:n.from,y=n===void 0?t.length:n.to,x=this.Ko();for(let b=m;b<y;b++){const w=t[b];let S=w.Hr,M=w.Ur,N=w.$r,T=w.qr;x!==null&&(S=x(w.Hr,e),M=x(w.Ur,e),N=x(w.$r,e),T=x(w.qr,e));let R=a+v*(S-u),C=d?R:this.eo-1-R;w.Go=C,R=a+v*(M-u),C=d?R:this.eo-1-R,w.Xo=C,R=a+v*(N-u),C=d?R:this.eo-1-R,w.Jo=C,R=a+v*(T-u),C=d?R:this.eo-1-R,w.Qo=C}}Ds(t,e){const n=this.To(t,e);return this.t_(n,e)}t_(t,e){let n=t;return this.He()?n=(function(a,l){return l<0&&(a=-a),a/100*l+l})(n,e):this.Eo()&&(n=(function(a,l){return a-=100,l<0&&(a=-a),a/100*l+l})(n,e)),n}Sl(){return this.po}Dt(){return this.mo||(this.mo=xx(this.po)),this.mo}i_(t){this.po.indexOf(t)===-1&&(this.po.push(t),this._l(),this.s_())}n_(t){const e=this.po.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.po.splice(e,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let t=null;for(const e of this.po){const n=e.Lt();n!==null&&(t===null||n.Ea<t.Ea)&&(t=n)}return t===null?null:t.Wt}Ao(){return this.Ps.invertScale}Vl(){const t=this.Lt()===null;if(this.wo!==null&&(t||this.wo.e_===t))return this.wo.Vl;this.Po.Ul();const e=this.Po.Vl();return this.wo={Vl:e,e_:t},this.do.p(),e}r_(){return this.do}h_(t){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-t,this.ho=mt(this.er()).Ke()))}a_(t){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(t=this.eo-t)<0&&(t=0);let e=(this.Mo+.2*(this.eo-1))/(t+.2*(this.eo-1));const n=mt(this.ho).Ke();e=Math.max(e,.1),n.Je(e),this.Lo(n)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(t){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=t,this.ho=mt(this.er()).Ke()))}__(t){if(this.Vo()||this.bo===null)return;const e=mt(this.er()).Xe()/(this.Fo()-1);let n=t-this.bo;this.Ao()&&(n*=-1);const a=n*e,l=mt(this.ho).Ke();l.Qe(a),this.Lo(l,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(t,e){switch(this.Ps.mode){case 2:return this.c_(Ps(t,e));case 3:return this.Xa().format(sl(t,e));default:return this.lr(t)}}Ql(t){switch(this.Ps.mode){case 2:return this.c_(t);case 3:return this.Xa().format(t);default:return this.lr(t)}}Xl(t){switch(this.Ps.mode){case 2:return this.d_(t);case 3:return this.Xa().formatTickmarks(t);default:return this.f_(t)}}Ma(t){return this.lr(t,mt(this.vo).Xa())}ba(t,e){return t=Ps(t,e),this.c_(t,V0)}p_(){return this.po}v_(t){this.ao={oo:t,lo:!1}}Ws(){this.po.forEach((t=>t.Ws()))}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let t=1/0;this.vo=null;for(const n of this.po)n._s()<t&&(t=n._s(),this.vo=n);let e=100;this.vo!==null&&(e=Math.round(this.vo.qh())),this.Ja=U0,this.He()?(this.Ja=V0,e=100):this.Eo()?(this.Ja=new Uu(100,1),e=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new P0(this,e,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(t){this._o=t}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(t,e){if(this.Uo(),this.Gi())return 0;t=this.io()&&t?pu(t,this.So):t;const n=mt(this.er()),a=this.Ho()+(this.Fo()-1)*(t-n.Ze())/n.Xe();return this.jo(a)}To(t,e){if(this.Uo(),this.Gi())return 0;const n=this.jo(t),a=mt(this.er()),l=a.Ze()+a.Xe()*((n-this.Ho())/(this.Fo()-1));return this.io()?al(l,this.So):l}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const t=this.ao.oo;if(t===null)return;let e=null;const n=this.p_();let a=0,l=0;for(const f of n){if(!f.It())continue;const d=f.Lt();if(d===null)continue;const v=f.ra(t.Aa(),t.bi());let m=v&&v.er();if(m!==null){switch(this.Ps.mode){case 1:m=qa(m,this.So);break;case 2:m=B2(m,d.Wt);break;case 3:m=F2(m,d.Wt)}if(e=e===null?m:e.Sn(mt(m)),v!==null){const y=v.rr();y!==null&&(a=Math.max(a,y.above),l=Math.max(l,y.below))}}}if(this.jl()&&(a=Math.max(a,this.Kl()),l=Math.max(l,this.Kl())),a===this.uo&&l===this.co||(this.uo=a,this.co=l,this.wo=null,this.Io()),e!==null){if(e.Ze()===e.Ge()){const f=5*this.m_();this.io()&&(e=Is(e,this.So)),e=new $e(e.Ze()-f,e.Ge()+f),this.io()&&(e=qa(e,this.So))}if(this.io()){const f=Is(e,this.So),d=Af(f);if(u=d,c=this.So,u.Bl!==c.Bl||u.El!==c.El){const v=this.ho!==null?Is(this.ho,this.So):null;this.So=d,e=qa(f,d),v!==null&&(this.ho=qa(v,d))}}this.Lo(e)}else this.sr===null&&(this.Lo(new $e(-.5,.5)),this.So=Af(null));var u,c}Ko(){return this.He()?Ps:this.Eo()?sl:this.io()?t=>pu(t,this.So):null}g_(t,e,n){return e===void 0?(n===void 0&&(n=this.Xa()),n.format(t)):e(t)}M_(t,e,n){return e===void 0?(n===void 0&&(n=this.Xa()),n.formatTickmarks(t)):e(t)}lr(t,e){return this.g_(t,this.yo.priceFormatter,e)}f_(t,e){const n=this.yo.priceFormatter;return this.M_(t,this.yo.tickmarksPriceFormatter??(n?a=>a.map(n):void 0),e)}c_(t,e){return this.g_(t,this.yo.percentageFormatter,e)}d_(t,e){const n=this.yo.percentageFormatter;return this.M_(t,this.yo.tickmarksPercentageFormatter??(n?a=>a.map(n):void 0),e)}}function H0(r){return r instanceof Hu}class Y0{constructor(t,e){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new we,this.ua=[],this.Jh=t,this.ns=e,this.k_=new L2(this);const n=e.N();this.P_=this.T_("left",n.leftPriceScale),this.R_=this.T_("right",n.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(n)}I_(t){if(t.leftPriceScale&&this.P_.cr(t.leftPriceScale),t.rightPriceScale&&this.R_.cr(t.rightPriceScale),t.localization&&(this.P_._l(),this.R_._l()),t.overlayPriceScales){const e=Array.from(this.b_.values());for(const n of e){const a=mt(n[0].Ft());a.cr(t.overlayPriceScales),t.localization&&a._l()}}}V_(t){switch(t){case"left":return this.P_;case"right":return this.R_}return this.b_.has(t)?ci(this.b_.get(t))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach((t=>{t.m&&t.m()})),this.ua=this.ua.filter((t=>{const e=t.Gh();return e.detached&&e.detached(),!1})),this.y_.p()}E_(){return this.x_}A_(t){this.x_=t}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(t){this.S_=t,this.z_()}No(t){this.eo=t,this.P_.No(t),this.R_.No(t),this.po.forEach((e=>{if(this.Zn(e)){const n=e.Ft();n!==null&&n.No(t)}})),this.z_()}O_(t){this.C_=t}N_(){return this.C_}F_(){return this.po.filter(H0)}Sl(){return this.po}Zn(t){const e=t.Ft();return e===null||this.P_!==e&&this.R_!==e}i_(t,e,n){this.W_(t,e,n?t._s():this.po.length)}n_(t,e){const n=this.po.indexOf(t);Ve(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1),e||this.po.forEach(((u,c)=>u.us(c)));const a=mt(t.Ft()).ol();if(this.b_.has(a)){const u=ci(this.b_.get(a)),c=u.indexOf(t);c!==-1&&(u.splice(c,1),u.length===0&&this.b_.delete(a))}const l=t.Ft();l&&l.Sl().indexOf(t)>=0&&(l.n_(t),this.H_(l)),this.mo=null}Xn(t){return t===this.P_?"left":t===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(t,e){t.h_(e)}Y_(t,e){t.a_(e),this.z_()}K_(t){t.l_()}Z_(t,e){t.o_(e)}G_(t,e){t.__(e),this.z_()}X_(t){t.u_()}z_(){this.po.forEach((t=>{t.Ws()}))}Rs(){let t=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?t=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?t=this.P_:this.po.length!==0&&(t=this.po[0].Ft()),t===null&&(t=this.R_),t}Gn(){let t=null;return this.ns.N().rightPriceScale.visible?t=this.R_:this.ns.N().leftPriceScale.visible&&(t=this.P_),t}H_(t){t!==null&&t.Vo()&&this.J_(t)}Q_(t){const e=this.Jh.Ie();t.Do({ln:!0}),e!==null&&t.v_(e),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach((t=>{this.Zn(t)&&this.H_(t.Ft())})),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=xx(this.po)),this.mo}su(t,e){e=Vs(e,0,this.po.length-1);const n=this.po.indexOf(t);Ve(n!==-1,"setSeriesOrder: invalid data source"),this.po.splice(n,1),this.po.splice(e,0,t),this.po.forEach(((a,l)=>a.us(l))),this.mo=null;for(const a of[this.P_,this.R_])a.s_(),a._l();this.ns.dr()}Vt(){return this.Dt().filter(H0)}nu(){return this.y_}eu(){return this.k_}nl(t){this.ua.push(new w2(t))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t)),t.detached&&t.detached(),this.ns.dr()}ru(){return this.ua}Za(t,e){return this.ua.map((n=>n.Qn(t,e))).filter((n=>n!==null))}J_(t){const e=t.p_();if(e&&e.length>0&&!this.Jh.Gi()){const n=this.Jh.Ie();n!==null&&t.v_(n)}t.Ws()}W_(t,e,n){let a=this.V_(e);if(a===null&&(a=this.T_(e,this.ns.N().overlayPriceScales)),this.po.splice(n,0,t),!Vu(e)){const l=this.b_.get(e)||[];l.push(t),this.b_.set(e,l)}t.us(n),a.i_(t),t.cs(a),this.H_(a),this.mo=null}D_(t,e,n){e.ae!==n.ae&&this.J_(t)}T_(t,e){const n={visible:!0,autoScale:!0,...wn(e)},a=new P2(t,n,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return a.No(this.$t()),a}}function Yo(r){return{hu:r.hu,au:{te:r.lu.externalId},ou:r.lu.cursorStyle}}function I2(r,t,e,n){for(const a of r){const l=a.Tt(n);if(l!==null&&l.Qn){const u=l.Qn(t,e);if(u!==null)return{_u:a,au:u}}}return null}function V2(r){return r.Ys!==void 0}function Sx(r,t,e){const n=[r,...r.Dt()],a=(function(l,u,c){let f,d;for(const y of l){const x=y.Za?.(u,c)??[];for(const b of x)v=b.zOrder,m=f?.zOrder,(!m||v==="top"&&m!=="top"||v==="normal"&&m==="bottom")&&(f=b,d=y)}var v,m;return f&&d?{lu:f,hu:d}:null})(n,t,e);if(a?.lu.zOrder==="top")return Yo(a);for(const l of n){if(a&&a.hu===l&&a.lu.zOrder!=="bottom"&&!a.lu.isBackground)return Yo(a);if(V2(l)){const u=I2(l.Ys(r),t,e,r);if(u!==null)return{hu:l,_u:u._u,au:u.au}}if(a&&a.hu===l&&a.lu.zOrder!=="bottom"&&a.lu.isBackground)return Yo(a)}return a?.lu?Yo(a):null}class U2{constructor(t,e,n=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=t,this.cu=e,this.zn=n}du(t){const e=t.time,n=this.cu.cacheKey(e),a=this.Ln.get(n);if(a!==void 0)return a.fu;if(this.Vn===this.zn){const u=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(ci(u)),this.En++,this.Vn--}const l=this.uu(t);return this.Ln.set(n,{fu:l,Wn:this.Bn}),this.An.set(this.Bn,n),this.Vn++,this.Bn++,l}}class Us{constructor(t,e){Ve(t<=e,"right should be >= left"),this.pu=t,this.vu=e}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(t){return this.pu<=t&&t<=this.vu}Ye(t){return this.pu===t.Aa()&&this.vu===t.bi()}}function W0(r,t){return r===null||t===null?r===t:r.Ye(t)}class H2{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(t){this.gu=t,this.Ln=null}bu(t,e){this.Su(e),this.Ln=null;for(let n=e;n<t.length;++n){const a=t[n];let l=this.wu.get(a.timeWeight);l===void 0&&(l=[],this.wu.set(a.timeWeight,l)),l.push({index:n,time:a.time,weight:a.timeWeight,originalTime:a.originalTime})}}xu(t,e,n,a,l){const u=Math.ceil(e/t);return this.Ln!==null&&this.Ln.Cu===u&&l===this.Ln.yu&&n===this.Ln.ku||(this.Ln={yu:l,ku:n,Vl:this.Pu(u,n,a),Cu:u}),this.Ln.Vl}Su(t){if(t===0)return void this.wu.clear();const e=[];this.wu.forEach(((n,a)=>{t<=n[0].index?e.push(a):n.splice(qs(n,t,(l=>l.index<t)),1/0)}));for(const n of e)this.wu.delete(n)}Pu(t,e,n){let a=[];const l=u=>!e||n.has(u.index);for(const u of Array.from(this.wu.keys()).sort(((c,f)=>f-c))){if(!this.wu.get(u))continue;const c=a;a=[];const f=c.length;let d=0;const v=ci(this.wu.get(u)),m=v.length;let y=1/0,x=-1/0;for(let b=0;b<m;b++){const w=v[b],S=w.index;for(;d<f;){const M=c[d],N=M.index;if(!(N<S&&l(M))){y=N;break}d++,a.push(M),x=N,y=1/0}if(y-S>=t&&S-x>=t&&l(w))a.push(w),x=S;else if(this.gu)return c}for(;d<f;d++)l(c[d])&&a.push(c[d])}return a}}class Hs{constructor(t){this.Tu=t}Ru(){return this.Tu===null?null:new Us(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new Hs(null)}}function Y2(r,t){return r.weight>t.weight?r:t}class W2{constructor(t,e,n,a){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new H2,this.Au=new Map,this.Lu=Hs.Iu(),this.zu=!0,this.Ou=new we,this.Nu=new we,this.Fu=new we,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=e,this.yo=n,this.Yu=e.rightOffset,this.Ku=e.barSpacing,this.ns=t,this.Zu(e),this.cu=a,this.Gu(),this.Eu.Mu(e.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(t){bi(this.yo,t),this.tc(),this.Gu()}cr(t,e){bi(this.Ps,t),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),t.barSpacing!==void 0&&this.ns.gn(t.barSpacing),t.rightOffset!==void 0&&this.ns.Mn(t.rightOffset),this.Zu(t),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ns.gn(t.barSpacing??this.Ku),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),t.enableConflation===void 0&&t.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(t){return this.Bu[t]?.time??null}es(t){return this.Bu[t]??null}ec(t,e){if(this.Bu.length<1)return null;if(this.cu.key(t)>this.cu.key(this.Bu[this.Bu.length-1].time))return e?this.Bu.length-1:null;const n=qs(this.Bu,this.cu.key(t),((a,l)=>this.cu.key(a.time)<l));return this.cu.key(t)<this.cu.key(this.Bu[n].time)?e?n:null:n}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const t=this.Ie();if(t===null)return null;const e={from:t.Aa(),to:t.bi()};return this.oc(e)}oc(t){const e=Math.round(t.from),n=Math.round(t.to),a=mt(this._c()),l=mt(this.uc());return{from:mt(this.es(Math.max(a,e))),to:mt(this.es(Math.min(l,n)))}}cc(t){return{from:mt(this.ec(t.from,!0)),to:mt(this.ec(t.to,!0))}}ss(){return this.S_}L_(t){if(!isFinite(t)||t<=0||this.S_===t)return;const e=this.ac(),n=this.S_;if(this.S_=t,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&n!==0){const a=this.Ku*t/n;this.Ku=a}if(this.Ps.fixLeftEdge&&e!==null&&e.Aa()<=0){const a=n-t;this.Yu-=Math.round(a/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(t){if(this.Gi()||!ul(t))return 0;const e=this.vc()+this.Yu-t;return this.S_-(e+.5)*this.Ku-1}mc(t,e){const n=this.vc(),a=e===void 0?0:e.from,l=e===void 0?t.length:e.to;for(let u=a;u<l;u++){const c=t[u].wt,f=n+this.Yu-c,d=this.S_-(f+.5)*this.Ku-1;t[u]._t=d}}wc(t,e){const n=Math.ceil(this.gc(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(n)?this.bc(n):n}Mn(t){this.zu=!0,this.Yu=t,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(t){const e=this.Ku;if(this.xc(t),this.Ps.rightOffsetPixels!==void 0&&e!==0){const n=this.Yu*e/this.Ku;this.Yu=n}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const t=this.Ku,e=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),n=Math.round(e/t),a=mt(this.Ie()),l=Math.max(a.Aa(),a.Aa()-n),u=Math.max(a.bi(),a.bi()-n),c=this.Eu.xu(t,e,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),f=this._c()+n,d=this.uc()-n,v=this.yc(),m=this.Ps.fixLeftEdge||v,y=this.Ps.fixRightEdge||v;let x=0;for(const b of c){if(!(l<=b.index&&b.index<=u))continue;let w;x<this.qu.length?(w=this.qu[x],w.coord=this.qt(b.index),w.label=this.kc(b),w.weight=b.weight):(w={needAlignCoordinate:!1,coord:this.qt(b.index),label:this.kc(b),weight:b.weight},this.qu.push(w)),this.Ku>e/2&&!v?w.needAlignCoordinate=!1:w.needAlignCoordinate=m&&b.index<=f||y&&b.index>=d,x++}return this.qu.length=x,this.Hu=this.qu,this.qu}Pc(){let t;this.zu=!0,this.gn(this.Ps.barSpacing),t=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(t)}Tc(t){this.zu=!0,this.Vu=t,this.fc(),this.sc()}Rc(t,e){const n=this.gc(t),a=this.ul(),l=a+e*(a/10);this.gn(l),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(n-this.gc(t)))}h_(t){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=t,this.Dc()))}a_(t){if(this.Wu===null)return;const e=Vs(this.S_-t,0,this.S_),n=Vs(this.S_-mt(this.Mo),0,this.S_);e!==0&&n!==0&&this.gn(this.Wu.ul*e/n)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(t){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=t,this.Dc()))}__(t){if(this.bo===null)return;const e=(this.bo-t)/this.ul();this.Yu=mt(this.Wu).Cc+e,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.Yu,a=performance.now();this.ns.vn({Ec:l=>(l-a)/e>=1,Ac:l=>{const u=(l-a)/e;return u>=1?t:n+(t-n)*u}})}kt(t,e){this.zu=!0,this.Bu=t,this.Eu.bu(t,e),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(t,e){const n=t.mu(),a=e&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-a)/n),this.Yu=t.bi()-this.vc(),e&&(this.Yu=a?a/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const t=this._c(),e=this.uc();if(t===null||e===null)return;const n=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new Us(t,e+n),!0)}Wc(t){const e=new Us(t.from,t.to);this.Nc(e)}rs(t){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(t.originalTime):this.cu.formatHorzItem(t.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const t=this.ns.tn();for(const e of t)for(const n of e.ll())this.Uu.set(n,!0);this.$u++}Hc(){return this.ju}vl(){const t=1/(window.devicePixelRatio||1),e=this.Ps.minBarSpacing;if(e>=t)return[1];const n=[1];let a=2;for(;a<=512;)e<t/a&&n.push(a),a*=2;return n}yc(){const t=this.ns.N().handleScroll,e=this.ns.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(t){return(this.S_-1-t)/this.Ku}gc(t){const e=this.Uc(t),n=this.vc()+this.Yu-e;return Math.round(1e6*n)/1e6}xc(t){const e=this.Ku;this.Ku=t,this.dc(),e!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(Hs.Iu());const t=this.vc(),e=this.S_/this.Ku,n=this.Yu+t,a=new Us(n-e+1,n);this.qc(new Hs(a))}dc(){const t=Vs(this.Ku,this.jc(),this.Yc());this.Ku!==t&&(this.Ku=t,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const t=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=t)return void(this.ju=1);const e=t/this.Ku,n=Math.pow(2,Math.floor(Math.log2(e)));this.ju=Math.min(n,512)}fc(){const t=this.Kc();t!==null&&this.Yu<t&&(this.Yu=t,this.zu=!0);const e=this.Zc();this.Yu>e&&(this.Yu=e,this.zu=!0)}Kc(){const t=this._c(),e=this.Vu;return t===null||e===null?null:t-e-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(t){let e=this.Au.get(t.weight);return e===void 0&&(e=new U2((n=>this.Gc(n)),this.cu),this.Au.set(t.weight,e)),e.du(t)}Gc(t){return this.cu.formatTickmark(t,this.yo)}qc(t){const e=this.Lu;this.Lu=t,W0(e.Ru(),this.Lu.Ru())||this.Ou.p(),W0(e.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const t=this._c();if(t===null)return;const e=this.Ie();if(e===null)return;const n=e.Aa()-t;if(n<0){const a=this.Yu-n-1;this.Mn(a)}this.dc()}nc(){this.fc(),this.dc()}Mc(t){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(t)||!1}bc(t){const e=(function*(a){const l=Math.round(a),u=l<a;let c=1;for(;;)u?(yield l+c,yield l-c):(yield l-c,yield l+c),c++})(t),n=this.uc();for(;n;){const a=e.next().value;if(this.Uu.get(a))return a;if(a<0||a>n)break}return t}Zu(t){if(t.rightOffsetPixels!==void 0){const e=t.rightOffsetPixels/(t.barSpacing||this.Ku);this.ns.Mn(e)}}}var q0,X0,G0,K0,Q0;(function(r){r[r.OnTouchEnd=0]="OnTouchEnd",r[r.OnNextTap=1]="OnNextTap"})(q0||(q0={}));class q2{constructor(t,e,n){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new we,this.nd=new we,this.ed=null,this.rd=t,this.Ps=e,this.cu=n,this.ko=new HM(this.Ps.layout.colorParsers),this.hd=new UM(this),this.Jh=new W2(this,e.timeScale,this.Ps.localization,n),this.Ct=new t2(this,e.crosshair),this.ad=new k2(e.crosshair),e.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ie.yn())}dr(){this.dd(Ie.Cn())}Ua(){this.dd(new Ie(1))}ya(t){const e=this.fd(t);this.dd(e)}pd(){return this.td}vd(t){if(this.td?.hu===t?.hu&&this.td?.au?.te===t?.au?.te)return;const e=this.td;this.td=t,e!==null&&this.ya(e.hu),t!==null&&t.hu!==e?.hu&&this.ya(t.hu)}N(){return this.Ps}cr(t){bi(this.Ps,t),this.Xc.forEach((e=>e.I_(t))),t.timeScale!==void 0&&this.Jh.cr(t.timeScale),t.localization!==void 0&&this.Jh.Qu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(t,e,n=0){const a=this.Xc[n];if(a===void 0)return;if(t==="left")return bi(this.Ps,{leftPriceScale:e}),a.I_({leftPriceScale:e}),this.sd.p(),void this.Ca();if(t==="right")return bi(this.Ps,{rightPriceScale:e}),a.I_({rightPriceScale:e}),this.sd.p(),void this.Ca();const l=this.wd(t,n);l!==null&&(l.Ft.cr(e),this.sd.p())}wd(t,e){const n=this.Xc[e];if(n===void 0)return null;const a=n.V_(t);return a!==null?{Gs:n,Ft:a}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(t,e){t.No(e),this.Sc()}L_(t){this.S_=t,this.Jh.L_(this.S_),this.Xc.forEach((e=>e.L_(t))),this.Sc()}Sd(t){this.Xc.length!==1&&(Ve(t>=0&&t<this.Xc.length,"Invalid pane index"),this.Xc.splice(t,1),this.Ca())}xd(t,e){if(this.Xc.length<2)return;Ve(t>=0&&t<this.Xc.length,"Invalid pane index");const n=this.Xc[t],a=this.Xc.reduce(((m,y)=>m+y.E_()),0),l=this.Xc.reduce(((m,y)=>m+y.$t()),0),u=l-30*(this.Xc.length-1);e=Math.min(u,Math.max(30,e));const c=a/l,f=n.$t();n.A_(e*c);let d=e-f,v=this.Xc.length-1;for(const m of this.Xc)if(m!==n){const y=Math.min(u,Math.max(30,m.$t()-d/v));d-=m.$t()-y,v-=1;const x=y*c;m.A_(x)}this.Ca()}Cd(t,e){Ve(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index");const n=this.Xc[t],a=this.Xc[e];this.Xc[t]=a,this.Xc[e]=n,this.Ca()}yd(t,e){if(Ve(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index"),t===e)return;const[n]=this.Xc.splice(t,1);this.Xc.splice(e,0,n),this.Ca()}j_(t,e,n){t.j_(e,n)}Y_(t,e,n){t.Y_(e,n),this.ka(),this.dd(this.kd(t,2))}K_(t,e){t.K_(e),this.dd(this.kd(t,2))}Z_(t,e,n){e.Vo()||t.Z_(e,n)}G_(t,e,n){e.Vo()||(t.G_(e,n),this.ka(),this.dd(this.kd(t,2)))}X_(t,e){e.Vo()||(t.X_(e),this.dd(this.kd(t,2)))}Q_(t,e){t.Q_(e),this.dd(this.kd(t,2))}Pd(t){this.Jh.h_(t)}Td(t,e){const n=this.Et();if(n.Gi()||e===0)return;const a=n.ss();t=Math.max(1,Math.min(t,a)),n.Rc(t,e),this.Sc()}Rd(t){this.Dd(0),this.Id(t),this.Vd()}Bd(t){this.Jh.a_(t),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(t){this.Jh.o_(t)}Id(t){this.Jh.__(t),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter((t=>t.It()))),this.Qc}xa(){this.Qc=null}Ad(t,e,n,a,l){this.Ct.Bs(t,e);let u=NaN,c=this.Jh.wc(t,!0);const f=this.Jh.Ie();f!==null&&(c=Math.min(Math.max(f.Aa(),c),f.bi())),c=this.Ct.Hs(c);const d=a.Rs(),v=d.Lt();if(v!==null&&(u=d.Ds(e,v)),u=this.ad.bl(u,c,a),this.Ct.zs(c,u,a),this.Ua(),!l){const m=Sx(a,t,e);this.vd(m&&{hu:m.hu,au:m.au,ou:m.ou||null}),this.nd.p(this.Ct.Bt(),{x:t,y:e},n)}}Ld(t,e,n){const a=n.Rs(),l=a.Lt(),u=a.Nt(t,mt(l)),c=this.Jh.ec(e,!0),f=this.Jh.qt(mt(c));this.Ad(f,u,null,n,!0)}zd(t){this.gd().Ns(),this.Ua(),t||this.nd.p(null,null,null)}ka(){const t=this.Ct.Gs();if(t!==null){const e=this.Ct.As(),n=this.Ct.Ls();this.Ad(e,n,null,t)}this.Ct.Ws()}Od(t,e,n){const a=this.Jh.Is(0);e!==void 0&&n!==void 0&&this.Jh.kt(e,n);const l=this.Jh.Is(0),u=this.Jh.vc(),c=this.Jh.Ie();if(c!==null&&a!==null&&l!==null){const f=c.Ee(u),d=this.cu.key(a)>this.cu.key(l),v=t!==null&&t>u&&!d,m=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,y=f&&(n!==void 0||m)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(v&&!y){const x=t-u;this.Jh.Mn(this.Jh.Cc()-x)}}this.Jh.Tc(t)}Ra(t){t!==null&&t.iu()}Kn(t){if((function(n){return n instanceof Y0})(t))return t;const e=this.Xc.find((n=>n.Dt().includes(t)));return e===void 0?null:e}Sc(){this.Xc.forEach((t=>t.iu())),this.ka()}m(){this.Xc.forEach((t=>t.m())),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(t,e){const n=this.ld(e);this.Wd(t,n),this.Jc.push(t),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(t){const e=this.Kn(t),n=this.Jc.indexOf(t);Ve(n!==-1,"Series not found");const a=mt(e);this.Jc.splice(n,1),a.n_(t),t.m&&t.m(),this.xa(),this.Jh.Ju(),this.Ud(a)}Sa(t,e){const n=mt(this.Kn(t));n.n_(t,!0),n.i_(t,e,!0)}Fc(){const t=Ie.Cn();t.cn(),this.dd(t)}$d(t){const e=Ie.Cn();e.pn(t),this.dd(e)}wn(){const t=Ie.Cn();t.wn(),this.dd(t)}gn(t){const e=Ie.Cn();e.gn(t),this.dd(e)}Mn(t){const e=Ie.Cn();e.Mn(t),this.dd(e)}vn(t){const e=Ie.Cn();e.vn(t),this.dd(e)}dn(){const t=Ie.Cn();t.dn(),this.dd(t)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(t,e){if(Ve(e>=0,"Index should be greater or equal to 0"),e===this.Yd(t))return;const n=mt(this.Kn(t));n.n_(t);const a=this.ld(e);this.Wd(t,a),n.Sl().length===0&&this.Ud(n),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(t){const e=this.ud,n=this.od;if(e===n)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.ed===null||this.ed.eh!==n||this.ed.rh!==e)this.ed={eh:n,rh:e,Zd:new Map};else{const l=this.ed.Zd.get(t);if(l!==void 0)return l}const a=this.ko.tt(n,e,t/100);return this.ed.Zd.set(t,a),a}Gd(t){return this.Xc.indexOf(t)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(t){const e=new Y0(this.Jh,this);this.Xc.push(e);const n=t??this.Xc.length-1,a=Ie.yn();return a.hn(n,{an:0,ln:!0}),this.dd(a),e}ld(t){return Ve(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.Xc.length,t))<this.Xc.length?this.Xc[t]:this.Jd(t)}Yd(t){return this.Xc.findIndex((e=>e.F_().includes(t)))}kd(t,e){const n=new Ie(e);if(t!==null){const a=this.Xc.indexOf(t);n.hn(a,{an:e})}return n}fd(t,e){return e===void 0&&(e=2),this.kd(this.Kn(t),e)}dd(t){this.rd&&this.rd(t),this.Xc.forEach((e=>e.eu().pr().kt()))}Wd(t,e){const n=t.N().priceScaleId,a=n!==void 0?n:this.qd();e.i_(t,a),Vu(a)||t.cr(t.N())}_d(t){const e=this.Ps.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}Ud(t){!t.N_()&&t.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(t),1)}}function _x(r){if(r>=1)return 0;let t=0;for(;t<8;t++){const e=Math.round(r);if(Math.abs(e-r)<1e-8)return t;r*=10}return t}function ed(r){return!Ir(r)&&!Sl(r)}function wx(r){return Ir(r)}(function(r){r[r.Disabled=0]="Disabled",r[r.Continuous=1]="Continuous",r[r.OnDataUpdate=2]="OnDataUpdate"})(X0||(X0={})),(function(r){r[r.LastBar=0]="LastBar",r[r.LastVisible=1]="LastVisible"})(G0||(G0={})),(function(r){r.Solid="solid",r.VerticalGradient="gradient"})(K0||(K0={})),(function(r){r[r.Year=0]="Year",r[r.Month=1]="Month",r[r.DayOfMonth=2]="DayOfMonth",r[r.Time=3]="Time",r[r.TimeWithSeconds=4]="TimeWithSeconds"})(Q0||(Q0={}));const $0=r=>r.getUTCFullYear();function X2(r,t,e){return t.replace(/yyyy/g,(n=>En($0(n),4))(r)).replace(/yy/g,(n=>En($0(n)%100,2))(r)).replace(/MMMM/g,((n,a)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(a,{month:"long"}))(r,e)).replace(/MMM/g,((n,a)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(a,{month:"short"}))(r,e)).replace(/MM/g,(n=>En((a=>a.getUTCMonth()+1)(n),2))(r)).replace(/dd/g,(n=>En((a=>a.getUTCDate())(n),2))(r))}class Ex{constructor(t="yyyy-MM-dd",e="default"){this.Qd=t,this.tf=e}du(t){return X2(t,this.Qd,this.tf)}}class G2{constructor(t){this.if=t||"%h:%m:%s"}du(t){return this.if.replace("%h",En(t.getUTCHours(),2)).replace("%m",En(t.getUTCMinutes(),2)).replace("%s",En(t.getUTCSeconds(),2))}}const K2={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class Q2{constructor(t={}){const e={...K2,...t};this.hf=new Ex(e.sf,e.rf),this.af=new G2(e.nf),this.lf=e.ef}du(t){return`${this.hf.du(t)}${this.lf}${this.af.du(t)}`}}function Wo(r){return 60*r*60*1e3}function Df(r){return 60*r*1e3}const qo=[{_f:(Z0=1,1e3*Z0),uf:10},{_f:Df(1),uf:20},{_f:Df(5),uf:21},{_f:Df(30),uf:22},{_f:Wo(1),uf:30},{_f:Wo(3),uf:31},{_f:Wo(6),uf:32},{_f:Wo(12),uf:33}];var Z0;function J0(r,t){if(r.getUTCFullYear()!==t.getUTCFullYear())return 70;if(r.getUTCMonth()!==t.getUTCMonth())return 60;if(r.getUTCDate()!==t.getUTCDate())return 50;for(let e=qo.length-1;e>=0;--e)if(Math.floor(t.getTime()/qo[e]._f)!==Math.floor(r.getTime()/qo[e]._f))return qo[e].uf;return 0}function Nf(r){let t=r;if(Sl(r)&&(t=Cd(r)),!ed(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{cf:Math.round(e.getTime()/1e3),df:t}}function ty(r){if(!wx(r))throw new Error("time must be of type isUTCTimestamp");return{cf:r}}function Cd(r){const t=new Date(r);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${r}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function ey(r){Sl(r.time)&&(r.time=Cd(r.time))}class iy{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(ey)})(t):ey(t)}createConverterToInternalObj(t){return mt((function(e){return e.length===0?null:ed(e[0].time)||Sl(e[0].time)?Nf:ty})(t))}key(t){return typeof t=="object"&&"cf"in t?t.cf:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.df===void 0?new Date(1e3*e.cf).getTime():new Date(Date.UTC(e.df.year,e.df.month-1,e.df.day)).getTime()}convertHorzItemToInternal(t){return wx(e=t)?ty(e):ed(e)?Nf(e):Nf(Cd(e));var e}updateFormatter(t){if(!this.Ps)return;const e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new Q2({sf:e,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:t.locale}):this.ff=new Ex(e,t.locale)}formatHorzItem(t){const e=t;return this.ff.du(new Date(1e3*e.cf))}formatTickmark(t,e){const n=(function(l,u,c){switch(l){case 0:case 10:return u?c?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return u?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),a=this.Ps.timeScale;if(a.tickMarkFormatter!==void 0){const l=a.tickMarkFormatter(t.originalTime,n,e.locale);if(l!==null)return l}return(function(l,u,c){const f={};switch(u){case 0:f.year="numeric";break;case 1:f.month="short";break;case 2:f.day="numeric";break;case 3:f.hour12=!1,f.hour="2-digit",f.minute="2-digit";break;case 4:f.hour12=!1,f.hour="2-digit",f.minute="2-digit",f.second="2-digit"}const d=l.df===void 0?new Date(1e3*l.cf):new Date(Date.UTC(l.df.year,l.df.month-1,l.df.day));return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()).toLocaleString(c,f)})(t.time,n,e.locale)}maxTickMarkWeight(t){let e=t.reduce(Y2,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(n,a=0){if(n.length===0)return;let l=a===0?null:n[a-1].time.cf,u=l!==null?new Date(1e3*l):null,c=0;for(let f=a;f<n.length;++f){const d=n[f],v=new Date(1e3*d.time.cf);u!==null&&(d.timeWeight=J0(v,u)),c+=d.time.cf-(l||d.time.cf),l=d.time.cf,u=v}if(a===0&&n.length>1){const f=Math.ceil(c/(n.length-1)),d=new Date(1e3*(n[0].time.cf-f));n[0].timeWeight=J0(new Date(1e3*n[0].time.cf),d)}})(t,e)}static pf(t){return bi({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Xs=typeof window<"u";function ny(){return!!Xs&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Of(){return!!Xs&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function id(r){return r+r%2}function $2(r){Xs&&window.chrome!==void 0&&r.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Yu{constructor(t,e,n){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!Of(),this.Uf=a=>{this.$f(a)},this.qf=a=>{if(this.jf(a)){const l=this.Yf(a);if(++this.gf,this.Mf&&this.gf>1){const{Kf:u}=this.Zf(Gi(a),this.bf);u<30&&!this.Tf&&this.Gf(l,this.Jf.Xf),this.Qf()}}else{const l=this.Yf(a);if(++this.vf,this.mf&&this.vf>1){const{Kf:u}=this.Zf(Gi(a),this.wf);u<5&&!this.Pf&&this.tp(l,this.Jf.ip),this.sp()}}},this.np=t,this.Jf=e,this.Ps=n,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(t){this.Vf&&this.Vf();const e=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",e)},this.np.addEventListener("mousemove",e),this.jf(t))return;const n=this.Yf(t);this.tp(n,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(t){if(this.Nf||this.yf!==null||this.jf(t))return;const e=this.Yf(t);this.tp(e,this.Jf.op),this.Hf=!0}_p(t){const e=kf(t.changedTouches,mt(this.Wf));if(e===null||(this.Ff=Xo(t),this.Af!==null)||this.Of)return;this.zf=!0;const n=this.Zf(Gi(e),mt(this.yf)),{up:a,cp:l,Kf:u}=n;if(this.kf||!(u<5)){if(!this.kf){const c=.5*a,f=l>=c&&!this.Ps.dp(),d=c>l&&!this.Ps.fp();f||d||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const c=this.Yf(t,e);this.Gf(c,this.Jf.pp),Os(t)}}}vp(t){if(t.button!==0)return;const e=this.Zf(Gi(t),mt(this.Cf)),{Kf:n}=e;if(n>=5&&(this.Pf=!0,this.sp()),this.Pf){const a=this.Yf(t);this.tp(a,this.Jf.mp)}}Zf(t,e){const n=Math.abs(e._t-t._t),a=Math.abs(e.ut-t.ut);return{up:n,cp:a,Kf:n+a}}wp(t){let e=kf(t.changedTouches,mt(this.Wf));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Wf=null,this.Ff=Xo(t),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const n=this.Yf(t,e);if(this.Gf(n,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:a}=this.Zf(Gi(e),this.bf);a<30&&!this.Tf&&this.Gf(n,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(n,this.Jf.Mp),this.Jf.Mp&&Os(t));this.gf===0&&Os(t),t.touches.length===0&&this.xf&&(this.xf=!1,Os(t))}$f(t){if(t.button!==0)return;const e=this.Yf(t);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),ny()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(t))if(this.tp(e,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:n}=this.Zf(Gi(t),this.wf);n<5&&!this.Pf&&this.tp(e,this.Jf.ip),this.sp()}else this.Pf||this.tp(e,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(t){if(this.Wf!==null)return;const e=t.changedTouches[0];this.Wf=e.identifier,this.Ff=Xo(t);const n=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=Gi(e),this.Ef&&(this.Ef(),this.Ef=null);{const l=this._p.bind(this),u=this.wp.bind(this);this.Ef=()=>{n.removeEventListener("touchmove",l),n.removeEventListener("touchend",u)},n.addEventListener("touchmove",l,{passive:!1}),n.addEventListener("touchend",u,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,t),240)}const a=this.Yf(t,e);this.Gf(a,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=Gi(e))}kp(t){if(t.button!==0)return;const e=this.np.ownerDocument.documentElement;ny()&&e.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=Gi(t),this.Bf&&(this.Bf(),this.Bf=null);{const a=this.vp.bind(this),l=this.$f.bind(this);this.Bf=()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseup",l)},e.addEventListener("mousemove",a),e.addEventListener("mouseup",l)}if(this.Nf=!0,this.jf(t))return;const n=this.Yf(t);this.tp(n,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=Gi(t))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const t=this.np.ownerDocument,e=n=>{this.Jf.Tp&&(n.composed&&this.np.contains(n.composedPath()[0])||n.target&&this.np.contains(n.target)||this.Jf.Tp())};this.Df=()=>{t.removeEventListener("touchstart",e)},this.Rf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Of()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),$2(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",(()=>{}),{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",(t=>this.Ep(t.touches)),{passive:!0}),this.np.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const e=ry(t.touches[0],t.touches[1])/this.Lf;this.Jf.Vp(this.Af,e),Os(t)}}),{passive:!1}),this.np.addEventListener("touchend",(t=>{this.Ep(t.touches)})))}Ep(t){t.length===1&&(this.zf=!1),t.length!==2||this.zf||this.xf?this.Ap():this.Lp(t)}Lp(t){const e=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Lf=ry(t[0],t[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(t){if(this.Vf&&this.Vf(),this.jf(t)||!this.Hf)return;const e=this.Yf(t);this.tp(e,this.Jf.zp),this.Hf=!Of()}Cp(t){const e=kf(t.touches,mt(this.Wf));if(e===null)return;const n=this.Yf(t,e);this.Gf(n,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:Xo(t)<this.Ff+500}Gf(t,e){e&&e.call(this.Jf,t)}tp(t,e){e&&e.call(this.Jf,t)}Yf(t,e){const n=e||t,a=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-a.left,localY:n.clientY-a.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Np:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Fp:t.type,Wp:n.target,_u:t.view,Hp:()=>{t.type!=="touchstart"&&Os(t)}}}}function ry(r,t){const e=r.clientX-t.clientX,n=r.clientY-t.clientY;return Math.sqrt(e*e+n*n)}function Os(r){r.cancelable&&r.preventDefault()}function Gi(r){return{_t:r.pageX,ut:r.pageY}}function Xo(r){return r.timeStamp||performance.now()}function kf(r,t){for(let e=0;e<r.length;++e)if(r[e].identifier===t)return r[e];return null}class Z2{constructor(t,e,n){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=t,this.Kp=t.Zp()[e],this.Gp=t.Zp()[n],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return oe({width:this.Kp.sv().width,height:1})}nv(){return oe({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(t,e,n){const a=this.nv();t.fillStyle=this.Yp.N().layout.panes.separatorColor,t.fillRect(e,n,a.width,a.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Jp.appendChild(t);const n=document.createElement("div"),a=n.style;a.position="absolute",a.zIndex="50",a.top="-4px",a.height="9px",a.width="100%",a.backgroundColor="",a.cursor="row-resize",this.Jp.appendChild(n);const l={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new Yu(n,l,{dp:()=>!1,fp:()=>!0}),this.Up={hv:n,rv:t}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(t){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(t){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(t){if(this.Up===null)return;const e=this.Kp.cv().E_()+this.Gp.cv().E_(),n=e/(this.Kp.sv().height+this.Gp.sv().height),a=30*n;e<=2*a||(this.jp={dv:t.pageY,fv:this.Kp.cv().E_(),pv:e-a,vv:e,mv:n,wv:a},this.Up.rv.style.display="block")}_v(t){const e=this.jp;if(e===null)return;const n=(t.pageY-e.dv)*e.mv,a=Vs(e.fv+n,e.wv,e.pv);this.Kp.cv().A_(a),this.Gp.cv().A_(e.vv-a),this.Yp.Qt().Ca()}uv(t){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function jf(r,t){return r.gv-t.gv}function zf(r,t,e){const n=(r.gv-t.gv)/(r.wt-t.wt);return Math.sign(n)*Math.min(Math.abs(n),e)}class J2{constructor(t,e,n,a){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=t,this.Tv=e,this.Rv=n,this.kn=a}Dv(t,e){if(this.Mv!==null){if(this.Mv.wt===e)return void(this.Mv.gv=t);if(Math.abs(this.Mv.gv-t)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:e,gv:t}}fe(t,e){if(this.Mv===null||this.bv===null||e-this.Mv.wt>50)return;let n=0;const a=zf(this.Mv,this.bv,this.Tv),l=jf(this.Mv,this.bv),u=[a],c=[l];if(n+=l,this.Sv!==null){const d=zf(this.bv,this.Sv,this.Tv);if(Math.sign(d)===Math.sign(a)){const v=jf(this.bv,this.Sv);if(u.push(d),c.push(v),n+=v,this.xv!==null){const m=zf(this.Sv,this.xv,this.Tv);if(Math.sign(m)===Math.sign(a)){const y=jf(this.Sv,this.xv);u.push(m),c.push(y),n+=y}}}}let f=0;for(let d=0;d<u.length;++d)f+=c[d]/n*u[d];Math.abs(f)<this.Pv||(this.Cv={gv:t,wt:e},this.kv=f,this.yv=(function(d,v){const m=Math.log(v);return Math.log(1*m/-d)/m})(Math.abs(f),this.Rv))}Ac(t){const e=mt(this.Cv),n=t-e.wt;return e.gv+this.kv*(Math.pow(this.Rv,n)-1)/Math.log(this.Rv)}Ec(t){return this.Cv===null||this.Iv(t)===this.yv}Iv(t){const e=t-mt(this.Cv).wt;return Math.min(e,this.yv)}}class tT{constructor(t,e){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=t,this.Lv=e,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Vr(r,t){const e=mt(r.ownerDocument).createElement("canvas");r.appendChild(e);const n=FM(e,{options:{allowResizeObserver:!0},transform:(a,l)=>({width:Math.max(a.width,l.width),height:Math.max(a.height,l.height)})});return n.resizeCanvasElement(t),n}function Ur(r){r.width=1,r.height=1,r.getContext("2d")?.clearRect(0,0,1,1)}function nd(r,t,e,n){r.Uh&&r.Uh(t,e,n)}function nu(r,t,e,n){r.nt(t,e,n)}function rd(r,t,e,n){const a=r(e,n);for(const l of a){const u=l.Tt(n);u!==null&&t(u)}}function Lf(r,t){return e=>(function(n){return n.Ft!==void 0})(e)?(e.Ft()?.ol()??"")!==t?[]:e.Ya?.(r)??[]:[]}function sy(r,t,e,n){if(!r.length)return;let a=0;const l=r[0].$t(n,!0);let u=t===1?e/2-(r[0].Hi()-l/2):r[0].Hi()-l/2-e/2;u=Math.max(0,u);for(let c=1;c<r.length;c++){const f=r[c],d=r[c-1],v=d.$t(n,!1),m=f.Hi(),y=d.Hi();if(t===1?m>y-v:m<y+v){const x=y-v*t;f.Ui(x);const b=x-t*v/2;if((t===1?b<0:b>e)&&u>0){const w=t===1?-1-b:b-e,S=Math.min(w,u);for(let M=a;M<r.length;M++)r[M].Ui(r[M].Hi()+t*S);u-=S}}else a=c,u=t===1?y-v-m:m-(y+v)}}class ay{constructor(t,e,n,a){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new fl(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=t,this.Ps=e,this.Co=e.layout,this.hd=n,this.Jv=a==="left",this.Qv=Lf("normal",a),this.tm=Lf("top",a),this.im=Lf("bottom",a),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Vr(this.Jp,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const l=this.sm.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.nm=Vr(this.Jp,oe({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const u=this.nm.canvasElement;u.style.position="absolute",u.style.zIndex="2",u.style.left="0",u.style.top="0";const c={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new Yu(this.nm.canvasElement,c,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ur(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const t=this.hd.N();return this.jv!==t.P&&(this.qv.On(),this.jv=t.P),t}om(){if(this.Ki===null)return 0;let t=0;const e=this.lm(),n=mt(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));n.save();const a=this.Ki.Vl();n.font=this._m(),a.length>0&&(t=Math.max(this.qv.Ii(n,a[0].Jl),this.qv.Ii(n,a[a.length-1].Jl)));const l=this.um();for(let d=l.length;d--;){const v=this.qv.Ii(n,l[d].ri());v>t&&(t=v)}const u=this.Ki.Lt();if(u!==null&&this.Uv!==null&&(c=this.Ps.crosshair).mode!==2&&c.horzLine.visible&&c.horzLine.labelVisible){const d=this.Ki.Ds(1,u),v=this.Ki.Ds(this.Uv.height-2,u);t=Math.max(t,this.qv.Ii(n,this.Ki.Ji(Math.floor(Math.min(d,v))+.11111111111111,u)),this.qv.Ii(n,this.Ki.Ji(Math.ceil(Math.max(d,v))-.11111111111111,u)))}var c;n.restore();const f=t||34;return id(Math.ceil(e.S+e.C+e.V+e.B+5+f))}dm(t){this.Uv!==null&&zr(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`)}fm(){return mt(this.Uv).width}cs(t){this.Ki!==t&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=t,t.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const t=this.yt.cv();this.yt.Gv().Qt().Q_(t,mt(this.Ft()))}pm(t){if(this.Uv===null)return;const e={colorSpace:this.yt.Gv().N().layout.colorSpace};if(t!==1){this.vm(),this.sm.applySuggestedBitmapSize();const a=Pr(this.sm,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this.wm(l),this.gm(l)})),this.yt.Mm(a,this.im),this.bm(a),this.yt.Mm(a,this.Qv),this.Sm(a))}this.nm.applySuggestedBitmapSize();const n=Pr(this.nm,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this.xm(n),this.yt.Mm(n,this.tm))}nv(){return this.sm.bitmapSize}ev(t,e,n,a){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,n),a)){const u=this.nm.canvasElement;t.drawImage(u,e,n)}}kt(){this.Ki?.Vl()}ov(t){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv();this.$v=!0,e.j_(n,this.Ki,t.localY)}_v(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv(),a=this.Ki;e.Y_(n,a,t.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),e=this.yt.cv(),n=this.Ki;this.$v&&(this.$v=!1,t.K_(e,n))}uv(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv();this.$v=!1,e.K_(n,this.Ki)}hm(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(t){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(t){this.Cm(0)}um(){const t=[],e=this.Ki===null?void 0:this.Ki;return(n=>{for(let a=0;a<n.length;++a){const l=n[a].Ks(this.yt.cv(),e);for(let u=0;u<l.length;u++)t.push(l[u])}})(this.yt.cv().Dt()),t}wm({context:t,bitmapSize:e}){const{width:n,height:a}=e,l=this.yt.cv().Qt(),u=l.$(),c=l.Kd();u===c?Pu(t,0,0,n,a,u):cx(t,0,0,n,a,u,c)}gm({context:t,bitmapSize:e,horizontalPixelRatio:n}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;t.fillStyle=this.Ki.N().borderColor;const a=Math.max(1,Math.floor(this.lm().S*n));let l;l=this.Jv?e.width-a:0,t.fillRect(l,0,a,e.height)}bm(t){if(this.Uv===null||this.Ki===null)return;const e=this.Ki.Vl(),n=this.Ki.N(),a=this.lm(),l=this.Jv?this.Uv.width-a.C:0;n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace((({context:u,horizontalPixelRatio:c,verticalPixelRatio:f})=>{u.fillStyle=n.borderColor;const d=Math.max(1,Math.floor(f)),v=Math.floor(.5*f),m=Math.round(a.C*c);u.beginPath();for(const y of e)u.rect(Math.floor(l*c),Math.round(y.Pl*f)-v,m,d);u.fill()})),t.useMediaCoordinateSpace((({context:u})=>{u.font=this._m(),u.fillStyle=n.textColor??this.Co.textColor,u.textAlign=this.Jv?"right":"left",u.textBaseline="middle";const c=this.Jv?Math.round(l-a.V):Math.round(l+a.C+a.V),f=e.map((d=>this.qv.Di(u,d.Jl)));for(let d=e.length;d--;){const v=e[d];u.fillText(v.Jl,c,v.Pl+f[d])}}))}vm(){if(this.Uv===null||this.Ki===null)return;let t=this.Uv.height/2;const e=[],n=this.Ki.Dt().slice(),a=this.yt.cv(),l=this.lm();this.Ki===a.Gn()&&this.yt.cv().Dt().forEach((f=>{a.Zn(f)&&n.push(f)}));const u=this.Ki.Sl()[0],c=this.Ki;n.forEach((f=>{const d=f.Ks(a,c);d.forEach((v=>{v.$i()&&v.Wi()===null&&(v.Ui(null),e.push(v))})),u===f&&d.length>0&&(t=d[0].Ei())})),this.Ki.N().alignLabels&&this.ym(e,l,t)}ym(t,e,n){if(this.Uv===null)return;const a=t.filter((u=>u.Ei()<=n)),l=t.filter((u=>u.Ei()>n));a.sort(((u,c)=>c.Ei()-u.Ei())),a.length&&l.length&&l.push(a[0]),l.sort(((u,c)=>u.Ei()-c.Ei()));for(const u of t){const c=Math.floor(u.$t(e)/2),f=u.Ei();f>-c&&f<c&&u.Ui(c),f>this.Uv.height-c&&f<this.Uv.height+c&&u.Ui(this.Uv.height-c)}sy(a,1,this.Uv.height,e),sy(l,-1,this.Uv.height,e)}Sm(t){if(this.Uv===null)return;const e=this.um(),n=this.lm(),a=this.Jv?"right":"left";e.forEach((l=>{l.qi()&&l.Tt(mt(this.Ki)).nt(t,n,this.qv,a)}))}xm(t){if(this.Uv===null||this.Ki===null)return;const e=this.yt.Gv().Qt(),n=[],a=this.yt.cv(),l=e.gd().Ks(a,this.Ki);l.length&&n.push(l);const u=this.lm(),c=this.Jv?"right":"left";n.forEach((f=>{f.forEach((d=>{d.Tt(mt(this.Ki)).nt(t,u,this.qv,c)}))}))}Cm(t){this.Jp.style.cursor=t===1?"ns-resize":"default"}do(){const t=this.om();this.Yv<t&&this.yt.Gv().Qt().Ca(),this.Yv=t}_m(){return hl(this.Co.fontSize,this.Co.fontFamily)}}function eT(r,t){return r.qa?.(t)??[]}function ly(r,t){return r.Ys?.(t)??[]}function oy(r,t){return r.ds?.(t)??[]}function iT(r,t){return r.Ha?.(t)??[]}class Md{constructor(t,e){this.Uv=oe({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new we,this.Vm=new we,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=t,this.Nm=e,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(n),this.sm=Vr(n,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const a=this.sm.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.nm=Vr(n,oe({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const l=this.nm.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new Yu(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ur(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return mt(this.Nm)}qm(t){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=t,this.Nm!==null&&this.Nm.nu().i(Md.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new tT(this.Wm,this.Lv),this.Tm.kt()):(this.Tm?.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const t=this.Nm.U_();this.km.cs(mt(t))}if(this.Pm!==null){const t=this.Nm.q_();this.Pm.cs(mt(t))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(t){this.Nm&&this.Nm.A_(t)}lp(t){if(!this.Nm)return;this.Km();const e=t.localX,n=t.localY;this.Zm(e,n,t)}Pp(t){this.Km(),this.Gm(),this.Zm(t.localX,t.localY,t)}op(t){if(!this.Nm)return;this.Km();const e=t.localX,n=t.localY;this.Zm(e,n,t)}Sp(t){this.Nm!==null&&(this.Km(),this.Xm(t))}ip(t){this.Nm!==null&&this.Jm(this.Vm,t)}Xf(t){this.ip(t)}mp(t){this.Km(),this.Qm(t),this.Zm(t.localX,t.localY,t)}bp(t){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(t))}Mp(t){this.Nm!==null&&this.Xm(t)}Op(t){if(this.Em=!0,this.Am===null){const e={x:t.localX,y:t.localY};this.iw(e,e,t)}}zp(t){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(t,e){if(!this.Lv.N().handleScale.pinch)return;const n=5*(e-this.Bm);this.Bm=e,this.ns().Td(t._t,n)}yp(t){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const e=this.ns().gd();this.Am!==null&&e.It()&&(this.zm={x:e.si(),y:e.ni()},this.Am={x:t.localX,y:t.localY})}pp(t){if(this.Nm===null)return;const e=t.localX,n=t.localY;if(this.Am===null)this.Qm(t);else{this.Lm=!1;const a=mt(this.zm),l=a.x+(e-this.Am.x),u=a.y+(n-this.Am.y);this.Zm(l,u,t)}}gp(t){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(t)}Qn(t,e){const n=this.Nm;return n===null?null:Sx(n,t,e)}hw(t,e){mt(e==="left"?this.km:this.Pm).dm(oe({width:t,height:this.Uv.height}))}sv(){return this.Uv}dm(t){zr(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Wm.style.width=t.width+"px",this.Wm.style.height=t.height+"px")}aw(){const t=mt(this.Nm);t.H_(t.U_()),t.H_(t.q_());for(const e of t.Sl())if(t.Zn(e)){const n=e.Ft();n!==null&&t.H_(n),e.Ws()}for(const e of t.ru())e.Ws()}nv(){return this.sm.bitmapSize}ev(t,e,n,a){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,n),a)){const u=this.nm.canvasElement;t!==null&&t.drawImage(u,e,n)}}pm(t){if(t===0||this.Nm===null)return;t>1&&this.aw(),this.km!==null&&this.km.pm(t),this.Pm!==null&&this.Pm.pm(t);const e={colorSpace:this.Lv.N().layout.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const a=Pr(this.sm,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this.wm(l)})),this.Nm&&(this.lw(a,eT),this.ow(a),this.lw(a,ly),this.lw(a,oy)))}this.nm.applySuggestedBitmapSize();const n=Pr(this.nm,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this._w(n),this.lw(n,iT),this.lw(n,oy))}uw(){return this.km}cw(){return this.Pm}Mm(t,e){this.lw(t,e)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(t){this.Jm(this.Im,t)}Jm(t,e){const n=e.localX,a=e.localY;t.v()&&t.p(this.ns().Et().wc(n),{x:n,y:a},e)}wm({context:t,bitmapSize:e}){const{width:n,height:a}=e,l=this.ns(),u=l.$(),c=l.Kd();u===c?Pu(t,0,0,n,a,c):cx(t,0,0,n,a,u,c)}ow(t){const e=mt(this.Nm),n=e.eu().pr().Tt(e);n!==null&&n.nt(t,!1)}_w(t){this.dw(t,ly,nu,this.ns().gd())}lw(t,e){const n=mt(this.Nm),a=n.Dt(),l=n.ru();for(const u of l)this.dw(t,e,nd,u);for(const u of a)this.dw(t,e,nd,u);for(const u of l)this.dw(t,e,nu,u);for(const u of a)this.dw(t,e,nu,u)}dw(t,e,n,a){const l=mt(this.Nm),u=l.Qt().pd(),c=u!==null&&u.hu===a,f=u!==null&&c&&u.au!==void 0?u.au.ie:void 0;rd(e,(d=>n(d,t,c,f)),a,l)}jm(){if(this.Nm===null)return;const t=this.Lv,e=this.Nm.U_().N().visible,n=this.Nm.q_().N().visible;e||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),n||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const a=t.Qt().Nd();e&&this.km===null&&(this.km=new ay(this,t.N(),a,"left"),this.Hm.appendChild(this.km.iv())),n&&this.Pm===null&&(this.Pm=new ay(this,t.N(),a,"right"),this.Um.appendChild(this.Pm.iv()))}fw(t){return t.Np&&this.Em||this.Am!==null}Zm(t,e,n){t=Math.max(0,Math.min(t,this.Uv.width-1)),e=Math.max(0,Math.min(e,this.Uv.height-1)),this.ns().Ad(t,e,n,mt(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(t,e,n){this.Am=t,this.Lm=!1,this.Zm(e.x,e.y,n);const a=this.ns().gd();this.zm={x:a.si(),y:a.ni()}}ns(){return this.Lv.Qt()}tw(t){if(!this.Dm)return;const e=this.ns(),n=this.cv();if(e.X_(n,n.Rs()),this.Rm=null,this.Dm=!1,e.Vd(),this.Om!==null){const a=performance.now(),l=e.Et();this.Om.fe(l.Cc(),a),this.Om.Ec(a)||e.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)mt(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(t){if(this.Nm===null)return;const e=this.ns(),n=e.Et();if(n.Gi())return;const a=this.Lv.N(),l=a.handleScroll,u=a.kineticScroll;if((!l.pressedMouseMove||t.Np)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!t.Np))return;const c=this.Nm.Rs(),f=performance.now();if(this.Rm!==null||this.fw(t)||(this.Rm={x:t.clientX,y:t.clientY,cf:f,pw:t.localX,mw:t.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==t.clientX||this.Rm.y!==t.clientY)){if(t.Np&&u.touch||!t.Np&&u.mouse){const d=n.ul();this.Om=new J2(.2/d,7/d,.997,15/d),this.Om.Dv(n.Cc(),this.Rm.cf)}else this.Om=null;c.Gi()||e.Z_(this.Nm,c,t.localY),e.Dd(t.localX),this.Dm=!0}this.Dm&&(c.Gi()||e.G_(this.Nm,c,t.localY),e.Id(t.localX),this.Om!==null&&this.Om.Dv(n.Cc(),f))}}class uy{constructor(t,e,n,a,l){this.xt=!0,this.Uv=oe({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=t==="left",this.hd=n.Nd,this.Ps=e,this.ww=a,this.gw=l,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Vr(this.Jp,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(t){zr(this.Uv,t)||(this.Uv=t,this.sm.resizeCanvasElement(t),this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xt=!0)}pm(t){if(t<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const e=Pr(this.sm,{colorSpace:this.Ps.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace((n=>{this.wm(n),this.gm(n)}))}nv(){return this.sm.bitmapSize}ev(t,e,n){const a=this.nv();a.width>0&&a.height>0&&t.drawImage(this.sm.canvasElement,e,n)}gm({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(!this.ww())return;t.fillStyle=this.Ps.timeScale.borderColor;const l=Math.floor(this.hd.N().S*n),u=Math.floor(this.hd.N().S*a),c=this.Jv?e.width-l:0;t.fillRect(c,0,l,u)}wm({context:t,bitmapSize:e}){Pu(t,0,0,e.width,e.height,this.gw())}}function Td(r){return t=>t.Ka?.(r)??[]}const nT=Td("normal"),rT=Td("top"),sT=Td("bottom");class aT{constructor(t,e){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=oe({width:0,height:0}),this.xw=new we,this.qv=new fl(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=t,this.cu=e,this.Ps=t.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Vr(this.kw,oe({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const n=this.sm.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.nm=Vr(this.kw,oe({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const a=this.nm.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new Yu(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ur(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ur(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(t){if(this.Sw)return;this.Sw=!0;const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Pd(t.localX)}yp(t){this.Pp(t)}Tp(){const t=this.Lv.Qt();!t.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Ed())}mp(t){const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Bd(t.localX)}pp(t){this.mp(t)}bp(){this.Sw=!1;const t=this.Lv.Qt();t.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||t.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(t,e,n){zr(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xw.p(t)),this.Mw!==null&&this.Mw.dm(oe({width:e,height:t.height})),this.bw!==null&&this.bw.dm(oe({width:n,height:t.height}))}Vw(){const t=this.Bw();return Math.ceil(t.S+t.C+t.k+t.A+t.I+t.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(t,e,n,a){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,n),a)){const u=this.nm.canvasElement;t.drawImage(u,e,n)}}pm(t){if(t===0)return;const e={colorSpace:this.Ps.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const a=Pr(this.sm,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this.wm(l),this.gm(l),this.Aw(a,sT)})),this.bm(a),this.Aw(a,nT)),this.Mw!==null&&this.Mw.pm(t),this.bw!==null&&this.bw.pm(t)}this.nm.applySuggestedBitmapSize();const n=Pr(this.nm,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],n),this.Aw(n,rT))}Aw(t,e){const n=this.Lv.Qt().tn();for(const a of n)rd(e,(l=>nd(l,t,!1,void 0)),a,void 0);for(const a of n)rd(e,(l=>nu(l,t,!1,void 0)),a,void 0)}wm({context:t,bitmapSize:e}){Pu(t,0,0,e.width,e.height,this.Lv.Qt().Kd())}gm({context:t,bitmapSize:e,verticalPixelRatio:n}){if(this.Lv.N().timeScale.borderVisible){t.fillStyle=this.zw();const a=Math.max(1,Math.floor(this.Bw().S*n));t.fillRect(0,0,e.width,a)}}bm(t){const e=this.Lv.Qt().Et(),n=e.Vl();if(!n||n.length===0)return;const a=this.cu.maxTickMarkWeight(n),l=this.Bw(),u=e.N();u.borderVisible&&u.ticksVisible&&t.useBitmapCoordinateSpace((({context:c,horizontalPixelRatio:f,verticalPixelRatio:d})=>{c.strokeStyle=this.zw(),c.fillStyle=this.zw();const v=Math.max(1,Math.floor(f)),m=Math.floor(.5*f);c.beginPath();const y=Math.round(l.C*d);for(let x=n.length;x--;){const b=Math.round(n[x].coord*f);c.rect(b-m,0,v,y)}c.fill()})),t.useMediaCoordinateSpace((({context:c})=>{const f=l.S+l.C+l.A+l.k/2;c.textAlign="center",c.textBaseline="middle",c.fillStyle=this.H(),c.font=this._m();for(const d of n)if(d.weight<a){const v=d.needAlignCoordinate?this.Ow(c,d.coord,d.label):d.coord;c.fillText(d.label,v,f)}this.Lv.N().timeScale.allowBoldLabels&&(c.font=this.Nw());for(const d of n)if(d.weight>=a){const v=d.needAlignCoordinate?this.Ow(c,d.coord,d.label):d.coord;c.fillText(d.label,v,f)}}))}Ow(t,e,n){const a=this.qv.Ii(t,n),l=a/2,u=Math.floor(e-l)+.5;return u<0?e+=Math.abs(0-u):u+a>this.Uv.width&&(e-=Math.abs(this.Uv.width-(u+a))),e}Lw(t,e){const n=this.Bw();for(const a of t)for(const l of a.fs())l.Tt().nt(e,n)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return hl(this.F(),this.Ps.fontFamily)}Nw(){return hl(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new fl,Ew:0});const t=this.M,e=this._m();if(t.P!==e){const n=this.F();t.k=n,t.P=e,t.A=3*n/12,t.I=3*n/12,t.ts=9*n/12,t.L=0,t.Ew=4*n/12,t.Qi.On()}return this.M}Cm(t){this.Jp.style.cursor=t===1?"ew-resize":"default"}Pw(){const t=this.Lv.Qt(),e=t.N();e.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),e.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const n={Nd:this.Lv.Qt().Nd()},a=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,l=()=>t.Kd();e.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new uy("left",e,n,a,l),this.Cw.appendChild(this.Mw.iv())),e.rightPriceScale.visible&&this.bw===null&&(this.bw=new uy("right",e,n,a,l),this.yw.appendChild(this.bw.iv()))}}const lT=!!Xs&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((r=>r.brand.includes("Chromium")))&&!!Xs&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class oT{constructor(t,e,n){var a;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new we,this.Vm=new we,this.nd=new we,this.Yw=null,this.Kw=null,this.Av=t,this.Ps=e,this.cu=n,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(a=this.Vv).style.userSelect="none",a.style.webkitUserSelect="none",a.style.msUserSelect="none",a.style.MozUserSelect="none",a.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Bf(this.Ps)&&this.Jw(!0),this.ns=new q2(this.rd.bind(this),this.Ps,n),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new aT(this,this.cu),this.Zw.appendChild(this.tg.iv());const l=e.autoSize&&this.ig();let u=this.Ps.width,c=this.Ps.height;if(l||u===0||c===0){const f=t.getBoundingClientRect();u=u||f.width,c=c||f.height}this.sg(u,c),this.ng(),t.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const t of this.Fw)this.Zw.removeChild(t.iv()),t.nw().u(this),t.ew().u(this),t.m();this.Fw=[];for(const t of this.Ww)this.hg(t);this.Ww=[],mt(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(t,e,n=!1){if(this.eo===e&&this.S_===t)return;const a=(function(c){const f=Math.floor(c.width),d=Math.floor(c.height);return oe({width:f-f%2,height:d-d%2})})(oe({width:t,height:e}));this.eo=a.height,this.S_=a.width;const l=this.eo+"px",u=this.S_+"px";mt(this.Vv).style.height=l,mt(this.Vv).style.width=u,this.Zw.style.height=l,this.Zw.style.width=u,n?this.lg(Ie.yn(),performance.now()):this.ns.Ca()}pm(t){t===void 0&&(t=Ie.yn());for(let e=0;e<this.Fw.length;e++)this.Fw[e].pm(t.un(e).an);this.Ps.timeScale.visible&&this.tg.pm(t._n())}cr(t){const e=Bf(this.Ps);this.ns.cr(t);const n=Bf(this.Ps);n!==e&&this.Jw(n),t.layout?.panes&&this.og(),this.eg(),this._g(t)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(t=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const e=this.cg(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const a=mt(n.getContext("2d"));return this.cg(a,t),n}dg(t){return t==="left"&&!this.fg()||t==="right"&&!this.pg()||this.Fw.length===0?0:mt(t==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(t){this.Kw=t,this.Kw?this.hv().style.setProperty("cursor",t):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(t){return ci(this.Fw[t]).sv()}og(){this.Ww.forEach((t=>{t.kt()}))}_g(t){(t.autoSize!==void 0||!this.Yw||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Yw&&this.ig(),t.autoSize===!1&&this.Yw!==null&&this.ag(),t.autoSize||t.width===void 0&&t.height===void 0||this.sg(t.width||this.S_,t.height||this.eo))}cg(t,e){let n=0,a=0;const l=this.Fw[0],u=(f,d)=>{let v=0;for(let m=0;m<this.Fw.length;m++){const y=this.Fw[m],x=mt(f==="left"?y.uw():y.cw()),b=x.nv();if(t!==null&&x.ev(t,d,v,e),v+=b.height,m<this.Fw.length-1){const w=this.Ww[m],S=w.nv();t!==null&&w.ev(t,d,v),v+=S.height}}};this.fg()&&(u("left",0),n+=mt(l.uw()).nv().width);for(let f=0;f<this.Fw.length;f++){const d=this.Fw[f],v=d.nv();if(t!==null&&d.ev(t,n,a,e),a+=v.height,f<this.Fw.length-1){const m=this.Ww[f],y=m.nv();t!==null&&m.ev(t,n,a),a+=y.height}}n+=l.nv().width,this.pg()&&(u("right",n),n+=mt(l.cw()).nv().width);const c=(f,d,v)=>{mt(f==="left"?this.tg.Tw():this.tg.Rw()).ev(mt(t),d,v)};if(this.Ps.timeScale.visible){const f=this.tg.nv();if(t!==null){let d=0;this.fg()&&(c("left",d,a),d=mt(l.uw()).nv().width),this.tg.ev(t,d,a,e),d+=f.width,this.pg()&&c("right",d,a)}a+=f.height}return oe({width:n,height:a})}Mg(){let t=0,e=0,n=0;for(const S of this.Fw)this.fg()&&(e=Math.max(e,mt(S.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(n=Math.max(n,mt(S.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),t+=S.E_();e=id(e),n=id(n);const a=this.S_,l=this.eo,u=Math.max(a-e-n,0),c=1*this.Ww.length,f=this.Ps.timeScale.visible;let d=f?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var v;d=(v=d)+v%2;const m=c+d,y=l<m?0:l-m,x=y/t;let b=0;const w=window.devicePixelRatio||1;for(let S=0;S<this.Fw.length;++S){const M=this.Fw[S];M.qm(this.ns.Xs()[S]);let N=0,T=0;T=S===this.Fw.length-1?Math.ceil((y-b)*w)/w:Math.round(M.E_()*x*w)/w,N=Math.max(T,2),b+=N,M.dm(oe({width:u,height:N})),this.fg()&&M.hw(e,"left"),this.pg()&&M.hw(n,"right"),M.cv()&&this.ns.bd(M.cv(),N)}this.tg.Iw(oe({width:f?u:0,height:d}),f?e:0,f?n:0),this.ns.L_(u),this.Uw!==e&&(this.Uw=e),this.$w!==n&&(this.$w=n)}Jw(t){t?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return lT?1/window.devicePixelRatio:1}Xw(t){if(!(t.deltaX!==0&&this.Ps.handleScroll.mouseWheel||t.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const e=this.bg(t),n=e*t.deltaX/100,a=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),a!==0&&this.Ps.handleScale.mouseWheel){const l=Math.sign(a)*Math.min(1,Math.abs(a)),u=t.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(u,l)}n!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*n)}lg(t,e){const n=t._n();n===3&&this.Sg(),n!==3&&n!==2||(this.xg(t),this.Cg(t,e),this.tg.kt(),this.Fw.forEach((a=>{a.Ym()})),this.qw?._n()===3&&(this.qw.Sn(t),this.Sg(),this.xg(this.qw),this.Cg(this.qw,e),t=this.qw,this.qw=null)),this.pm(t)}Cg(t,e){for(const n of t.bn())this.xn(n,e)}xg(t){const e=this.ns.Xs();for(let n=0;n<e.length;n++)t.un(n).ln&&e[n].tu()}xn(t,e){const n=this.ns.Et();switch(t.fn){case 0:n.Fc();break;case 1:n.Wc(t.Wt);break;case 2:n.gn(t.Wt);break;case 3:n.Mn(t.Wt);break;case 4:n.Pc();break;case 5:t.Wt.Ec(e)||n.Mn(t.Wt.Ac(e))}}rd(t){this.qw!==null?this.qw.Sn(t):this.qw=t,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame((e=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const n=this.qw;this.qw=null,this.lg(n,e);for(const a of n.bn())if(a.fn===5&&!a.Wt.Ec(e)){this.Qt().vn(a.Wt);break}}})))}Sg(){this.ng()}hg(t){this.Zw.removeChild(t.iv()),t.m()}ng(){const t=this.ns.Xs(),e=t.length,n=this.Fw.length;for(let a=e;a<n;a++){const l=ci(this.Fw.pop());this.Zw.removeChild(l.iv()),l.nw().u(this),l.ew().u(this),l.m();const u=this.Ww.pop();u!==void 0&&this.hg(u)}for(let a=n;a<e;a++){const l=new Md(this,t[a]);if(l.nw().i(this.yg.bind(this,l),this),l.ew().i(this.kg.bind(this,l),this),this.Fw.push(l),a>0){const u=new Z2(this,a-1,a);this.Ww.push(u),this.Zw.insertBefore(u.iv(),this.tg.iv())}this.Zw.insertBefore(l.iv(),this.tg.iv())}for(let a=0;a<e;a++){const l=t[a],u=this.Fw[a];u.cv()!==l?u.qm(l):u.$m()}this.eg(),this.Mg()}Pg(t,e,n,a){const l=new Map;t!==null&&this.ns.tn().forEach((m=>{const y=m.qs().$s(t);y!==null&&l.set(m,y)}));let u;if(t!==null){const m=this.ns.Et().es(t)?.originalTime;m!==void 0&&(u=m)}const c=this.Qt().pd(),f=c!==null&&c.hu instanceof Hu?c.hu:void 0,d=c!==null&&c.au!==void 0?c.au.te:void 0,v=this.Tg(a);return{Gr:u,js:t??void 0,Rg:e??void 0,Dg:v!==-1?v:void 0,Ig:f,Vg:l,Bg:d,Eg:n??void 0}}Tg(t){let e=-1;if(t)e=this.Fw.indexOf(t);else{const n=this.Qt().gd().Gs();n!==null&&(e=this.Qt().Xs().indexOf(n))}return e}yg(t,e,n,a){this.Im.p((()=>this.Pg(e,n,a,t)))}kg(t,e,n,a){this.Vm.p((()=>this.Pg(e,n,a,t)))}Qw(t,e,n){this.mg(this.Qt().pd()?.ou??null),this.nd.p((()=>this.Pg(t,e,n)))}eg(){const t=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=t}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver((t=>{const e=t[t.length-1];e&&this.sg(e.contentRect.width,e.contentRect.height)})),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Bf(r){return!!(r.handleScroll.mouseWheel||r.handleScale.mouseWheel)}function uT(r){return r.open===void 0&&r.value===void 0}function cT(r){return(function(t){return t.open!==void 0})(r)||(function(t){return t.value!==void 0})(r)}function cy(r,t,e,n){const a=e.value,l={js:t,wt:r,Wt:[a,a,a,a],Gr:n};return e.color!==void 0&&(l.R=e.color),l}function hT(r,t,e,n){const a=e.value,l={js:t,wt:r,Wt:[a,a,a,a],Gr:n};return e.lineColor!==void 0&&(l.vt=e.lineColor),e.topColor!==void 0&&(l.eh=e.topColor),e.bottomColor!==void 0&&(l.rh=e.bottomColor),l}function fT(r,t,e,n){const a=e.value,l={js:t,wt:r,Wt:[a,a,a,a],Gr:n};return e.topLineColor!==void 0&&(l.hh=e.topLineColor),e.bottomLineColor!==void 0&&(l.ah=e.bottomLineColor),e.topFillColor1!==void 0&&(l.oh=e.topFillColor1),e.topFillColor2!==void 0&&(l._h=e.topFillColor2),e.bottomFillColor1!==void 0&&(l.uh=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(l.dh=e.bottomFillColor2),l}function dT(r,t,e,n){const a={js:t,wt:r,Wt:[e.open,e.high,e.low,e.close],Gr:n};return e.color!==void 0&&(a.R=e.color),a}function vT(r,t,e,n){const a={js:t,wt:r,Wt:[e.open,e.high,e.low,e.close],Gr:n};return e.color!==void 0&&(a.R=e.color),e.borderColor!==void 0&&(a.Ht=e.borderColor),e.wickColor!==void 0&&(a.nh=e.wickColor),a}function pT(r,t,e,n,a){const l=ci(a)(e),u=Math.max(...l),c=Math.min(...l),f=l[l.length-1],d=[f,u,c,f],{time:v,color:m,...y}=e;return{js:t,wt:r,Wt:d,Gr:n,le:y,R:m}}function ks(r){return r.Wt!==void 0}function hy(r,t){return t.customValues!==void 0&&(r.Ag=t.customValues),r}function Ar(r){return(t,e,n,a,l,u)=>(function(c,f){return f?f(c):uT(c)})(n,u)?hy({wt:t,js:e,Gr:a},n):hy(r(t,e,n,a,l),n)}function fy(r){return{Candlestick:Ar(vT),Bar:Ar(dT),Area:Ar(hT),Baseline:Ar(fT),Histogram:Ar(cy),Line:Ar(cy),Custom:Ar(pT)}[r]}function dy(r){return{js:0,Lg:new Map,Ea:r}}function vy(r,t){if(r!==void 0&&r.length!==0)return{zg:t.key(r[0].wt),Og:t.key(r[r.length-1].wt)}}function py(r){let t;return r.forEach((e=>{t===void 0&&(t=e.Gr)})),ci(t)}class mT{constructor(t){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=t}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(t,e){let n=this.Ng.size!==0,a=!1;const l=this.Fg.get(t);if(l!==void 0)if(this.Fg.size===1)n=!1,a=!0,this.Ng.clear();else for(const f of this.Hg)f.pointData.Lg.delete(t)&&(a=!0);let u=[];if(e.length!==0){const f=e.map((x=>x.time)),d=this.cu.createConverterToInternalObj(e),v=fy(t.wh()),m=t.rl(),y=t.hl();u=e.map(((x,b)=>{const w=d(x.time),S=this.cu.key(w);let M=this.Ng.get(S);M===void 0&&(M=dy(w),this.Ng.set(S,M),a=!0);const N=v(w,M.js,x,f[b],m,y);return M.Lg.set(t,N),N}))}n&&this.$g(),this.qg(t,u);let c=-1;if(a){const f=[];this.Ng.forEach((d=>{f.push({timeWeight:0,time:d.Ea,pointData:d,originalTime:py(d.Lg)})})),f.sort(((d,v)=>this.cu.key(d.time)-this.cu.key(v.time))),c=this.jg(f)}return this.Yg(t,c,(function(f,d,v){const m=vy(f,v),y=vy(d,v);if(m!==void 0&&y!==void 0)return{Kg:!1,Ta:m.Og>=y.Og&&m.zg>=y.zg}})(this.Fg.get(t),l,this.cu))}Hd(t){return this.Ug(t,[])}Zg(t,e,n){if(n&&t.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const a=e;(function(M){M.Gr===void 0&&(M.Gr=M.time)})(a),this.cu.preprocessData(e);const l=this.cu.createConverterToInternalObj([e])(e.time),u=this.Wg.get(t);if(!n&&u!==void 0&&this.cu.key(l)<this.cu.key(u))throw new Error(`Cannot update oldest data, last time=${u}, new time=${l}`);let c=this.Ng.get(this.cu.key(l));if(n&&c===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const f=c===void 0;c===void 0&&(c=dy(l),this.Ng.set(this.cu.key(l),c));const d=fy(t.wh()),v=t.rl(),m=t.hl(),y=d(l,c.js,e,a.Gr,v,m),x=!n&&!f&&u!==void 0&&this.cu.key(l)===this.cu.key(u);c.Lg.set(t,y),n?this.Gg(t,y,c.js):x&&t.La()&&ks(y)?(t.kr(y),this.Xg(t,y)):this.Xg(t,y);const b={Ta:ks(y),Kg:n};if(!f)return this.Yg(t,-1,b);const w={timeWeight:0,time:c.Ea,pointData:c,originalTime:py(c.Lg)},S=qs(this.Hg,this.cu.key(w.time),((M,N)=>this.cu.key(M.time)<N));this.Hg.splice(S,0,w);for(let M=S;M<this.Hg.length;++M)Go(this.Hg[M].pointData,M);return this.cu.fillWeightsForPoints(this.Hg,S),this.Yg(t,S,b)}Jg(t,e){const n=this.Fg.get(t);if(n===void 0||e<=0)return[[],this.Qg()];e=Math.min(e,n.length);const a=n.splice(-e).reverse();n.length===0?this.Wg.delete(t):this.Wg.set(t,n[n.length-1].wt);for(const l of a){const u=this.Ng.get(this.cu.key(l.wt));if(u&&(u.Lg.delete(t),u.Lg.size===0)){this.Ng.delete(this.cu.key(u.Ea)),this.Hg.splice(u.js,1);for(let c=u.js;c<this.Hg.length;++c)Go(this.Hg[c].pointData,c)}}return[a,this.Yg(t,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(t,e){let n=this.Fg.get(t);n===void 0&&(n=[],this.Fg.set(t,n));const a=n.length!==0?n[n.length-1]:null;a===null||this.cu.key(e.wt)>this.cu.key(a.wt)?ks(e)&&n.push(e):ks(e)?n[n.length-1]=e:n.splice(-1,1),this.Wg.set(t,e.wt)}Gg(t,e,n){const a=this.Fg.get(t);if(a===void 0)return;const l=qs(a,n,((u,c)=>u.js<c));ks(e)?a[l]=e:a.splice(l,1)}qg(t,e){e.length!==0?(this.Fg.set(t,e.filter(ks)),this.Wg.set(t,e[e.length-1].wt)):(this.Fg.delete(t),this.Wg.delete(t))}$g(){for(const t of this.Hg)t.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(t.time))}jg(t){let e=-1;for(let n=0;n<this.Hg.length&&n<t.length;++n){const a=this.Hg[n],l=t[n];if(this.cu.key(a.time)!==this.cu.key(l.time)){e=n;break}l.timeWeight=a.timeWeight,Go(l.pointData,n)}if(e===-1&&this.Hg.length!==t.length&&(e=Math.min(this.Hg.length,t.length)),e===-1)return-1;for(let n=e;n<t.length;++n)Go(t[n].pointData,n);return this.cu.fillWeightsForPoints(t,e),this.Hg=t,e}tM(){if(this.Fg.size===0)return null;let t=0;return this.Fg.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].js))})),t}Yg(t,e,n){const a=this.Qg();if(e!==-1)this.Fg.forEach(((l,u)=>{a.F_.set(u,{le:l,iM:u===t?n:void 0})})),this.Fg.has(t)||a.F_.set(t,{le:[],iM:n}),a.Et.sM=this.Hg,a.Et.nM=e;else{const l=this.Fg.get(t);a.F_.set(t,{le:l||[],iM:n})}return a}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function Go(r,t){r.js=t,r.Lg.forEach((e=>{e.js=t}))}function gT(r,t){return r.wt<t}function yT(r,t){return t<r.wt}function Cx(r,t,e){const n=t.Aa(),a=t.bi(),l=qs(r,n,gT),u=gx(r,a,yT);if(!e)return{from:l,to:u};let c=l,f=u;return l>0&&l<r.length&&r[l].wt>=n&&(c=l-1),u>0&&u<r.length&&r[u-1].wt<=a&&(f=u+1),{from:c,to:f}}class Ad{constructor(t,e,n){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=t,this.re=e,this._M=n}kt(t){this.eM=!0,t==="data"&&(this.rM=!0),t==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map((t=>({...t,...this.ee.ga().gh(t.wt)})))}fM(){this.lM=null}uM(){const t=this.re.Et(),e=t.N().enableConflation?t.Hc():0;e!==this.oM&&(this.rM=!0,this.oM=e),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const t=this.ee.Ft(),e=this.re.Et();if(this.fM(),e.Gi()||t.Gi())return;const n=e.Ie();if(n===null||this.ee.qs().yh()===0)return;const a=this.ee.Lt();a!==null&&(this.lM=Cx(this.aM,n,this._M),this.mM(t,e,a.Wt),this.wM())}}class bT{constructor(t,e){this.gM=t,this.Ki=e}nt(t,e,n){this.gM.draw(t,this.Ki,e,n)}}class xT extends Ad{constructor(t,e,n){super(t,e,!1),this.$h=n,this.cM=new bT(this.$h.renderer(),(a=>{const l=t.Lt();return l===null?null:t.Ft().Nt(a,l.Wt)}))}get ma(){return this.$h.conflationReducer}Oa(t){return this.$h.priceValueBuilder(t)}al(t){return this.$h.isWhitespace(t)}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>({wt:e.js,_t:NaN,...t.gh(e.js),MM:e.le})))}mM(t,e){e.mc(this.aM,cl(this.lM))}wM(){this.$h.update({bars:this.aM.map(ST),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function ST(r){return{x:r._t,time:r.wt,originalData:r.MM,barColor:r.th}}const _T={color:"#2196f3"},wT=(r,t,e)=>{const n=sr(e);return new xT(r,t,n)};function Rd(r){const t={value:r.Wt[3],time:r.Gr};return r.Ag!==void 0&&(t.customValues=r.Ag),t}function my(r){const t=Rd(r);return r.R!==void 0&&(t.color=r.R),t}function ET(r){const t=Rd(r);return r.vt!==void 0&&(t.lineColor=r.vt),r.eh!==void 0&&(t.topColor=r.eh),r.rh!==void 0&&(t.bottomColor=r.rh),t}function CT(r){const t=Rd(r);return r.hh!==void 0&&(t.topLineColor=r.hh),r.ah!==void 0&&(t.bottomLineColor=r.ah),r.oh!==void 0&&(t.topFillColor1=r.oh),r._h!==void 0&&(t.topFillColor2=r._h),r.uh!==void 0&&(t.bottomFillColor1=r.uh),r.dh!==void 0&&(t.bottomFillColor2=r.dh),t}function Mx(r){const t={open:r.Wt[0],high:r.Wt[1],low:r.Wt[2],close:r.Wt[3],time:r.Gr};return r.Ag!==void 0&&(t.customValues=r.Ag),t}function MT(r){const t=Mx(r);return r.R!==void 0&&(t.color=r.R),t}function TT(r){const t=Mx(r),{R:e,Ht:n,nh:a}=r;return e!==void 0&&(t.color=e),n!==void 0&&(t.borderColor=n),a!==void 0&&(t.wickColor=a),t}function ru(r){return{Area:ET,Line:my,Baseline:CT,Histogram:my,Bar:MT,Candlestick:TT,Custom:AT}[r]}function AT(r){const t=r.Gr;return{...r.le,time:t}}const RT={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},DT={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},NT={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:ox,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Ff={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},OT={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function gy(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:NT,crosshair:RT,grid:DT,overlayPriceScales:{...Ff},leftPriceScale:{...Ff,visible:!1},rightPriceScale:{...Ff,visible:!0},timeScale:OT,localization:{locale:Xs?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Tx{constructor(t,e,n){this.Yp=t,this.bM=e,this.SM=n??0}applyOptions(t){this.Yp.Qt().md(this.bM,t,this.SM)}options(){return this.Ki().N()}width(){return Vu(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(t){this.setAutoScale(!1),this.Ki().$o(new $e(t.from,t.to))}getVisibleRange(){let t,e,n=this.Ki().er();if(n===null)return null;if(this.Ki().io()){const a=this.Ki().m_(),l=_x(a);n=Is(n,this.Ki().no()),t=Number((Math.round(n.Ze()/a)*a).toFixed(l)),e=Number((Math.round(n.Ge()/a)*a).toFixed(l))}else t=n.Ze(),e=n.Ge();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Ki(){return mt(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class kT{constructor(t,e,n,a){this.Yp=t,this.yt=n,this.xM=e,this.CM=a}getHeight(){return this.yt.$t()}setHeight(t){const e=this.Yp.Qt(),n=e.Gd(this.yt);e.xd(n,t)}getStretchFactor(){return this.yt.E_()}setStretchFactor(t){this.yt.A_(t),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(t){const e=this.paneIndex();e!==t&&(Ve(t>=0&&t<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(e,t))}getSeries(){return this.yt.F_().map((t=>this.xM(t)))??[]}getHTMLElement(){const t=this.Yp.Zp();return t&&t.length!==0&&t[this.paneIndex()]?t[this.paneIndex()].iv():null}attachPrimitive(t){this.yt.nl(t),t.attached&&t.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(t){this.yt.el(t)}priceScale(t){if(this.yt.V_(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new Tx(this.Yp,t,this.paneIndex())}setPreserveEmptyPane(t){this.yt.O_(t)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(t,e={},n=0){return this.CM.addCustomSeries(t,e,n)}addSeries(t,e={}){return this.CM.addSeries(t,e,this.paneIndex())}}const jT={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class yy{constructor(t){this.hr=t}applyOptions(t){this.hr.cr(t)}options(){return this.hr.N()}yM(){return this.hr}}class zT{constructor(t,e,n,a,l,u){this.kM=new we,this.ee=t,this.PM=e,this.TM=n,this.cu=l,this.CM=a,this.RM=u}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Nt(t,e.Wt)}coordinateToPrice(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Ds(t,e.Wt)}barsInLogicalRange(t){if(t===null)return null;const e=new Hs(new Us(t.from,t.to)).Ru(),n=this.ee.qs();if(n.Gi())return null;const a=n.$s(e.Aa(),1),l=n.$s(e.bi(),-1),u=mt(n.kh()),c=mt(n.sn());if(a!==null&&l!==null&&a.js>l.js)return{barsBefore:t.from-u,barsAfter:c-t.to};const f={barsBefore:a===null||a.js===u?t.from-u:a.js-u,barsAfter:l===null||l.js===c?c-t.to:c-l.js};return a!==null&&l!==null&&(f.from=a.Gr,f.to=l.Gr),f}setData(t){this.cu,this.ee.wh(),this.PM.DM(this.ee,t),this.IM("full")}update(t,e=!1){this.ee.wh(),this.PM.VM(this.ee,t,e),this.IM("update")}pop(t=1){const e=this.PM.BM(this.ee,t);e.length!==0&&this.IM("update");const n=ru(this.seriesType());return e.map((a=>n(a)))}dataByIndex(t,e){const n=this.ee.qs().$s(t,e);return n===null?null:ru(this.seriesType())(n)}data(){const t=ru(this.seriesType());return this.ee.qs().Dh().map((e=>t(e)))}subscribeDataChanged(t){this.kM.i(t)}unsubscribeDataChanged(t){this.kM._(t)}applyOptions(t){this.ee.cr(t)}options(){return wn(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(t){const e=bi(wn(jT),t),n=this.ee.Da(e);return new yy(n)}removePriceLine(t){this.ee.Ia(t.yM())}priceLines(){return this.ee.Va().map((t=>new yy(t)))}seriesType(){return this.ee.wh()}lastValueData(t){const e=this.ee.Ve(t);return e.Be?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.ee.nl(t),t.attached&&t.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(t){this.ee.el(t),t.detached&&t.detached(),this.ee.Qt().Ca()}getPane(){const t=this.ee,e=mt(this.ee.Qt().Kn(t));return this.RM(e)}moveToPane(t){this.ee.Qt().jd(this.ee,t)}seriesOrder(){const t=this.ee.Qt().Kn(this.ee);return t===null?-1:t.F_().indexOf(this.ee)}setSeriesOrder(t){const e=this.ee.Qt().Kn(this.ee);e!==null&&e.su(this.ee,t)}IM(t){this.kM.v()&&this.kM.p(t)}}class LT{constructor(t,e,n){this.EM=new we,this.Nu=new we,this.xw=new we,this.ns=t,this.Jh=t.Et(),this.tg=e,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=n}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(t,e){e?this.Jh.Bc(t,1e3):this.ns.Mn(t)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const t=this.Jh.lc();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.cu.convertHorzItemToInternal(t.from),to:this.cu.convertHorzItemToInternal(t.to)},n=this.Jh.cc(e);this.ns.$d(n)}getVisibleLogicalRange(){const t=this.Jh.ac();return t===null?null:{from:t.Aa(),to:t.bi()}}setVisibleLogicalRange(t){Ve(t.from<=t.to,"The from index cannot be after the to index."),this.ns.$d(t)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(t){const e=this.ns.Et();return e.Gi()?null:e.qt(t)}coordinateToLogical(t){return this.Jh.Gi()?null:this.Jh.wc(t)}timeToIndex(t,e){const n=this.cu.convertHorzItemToInternal(t);return this.Jh.ec(n,e)}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return e===null?null:this.Jh.qt(e)}coordinateToTime(t){const e=this.ns.Et(),n=e.wc(t),a=e.es(n);return a===null?null:a.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(t){this.EM.i(t)}unsubscribeVisibleTimeRangeChange(t){this.EM._(t)}subscribeVisibleLogicalRangeChange(t){this.Nu.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.Nu._(t)}subscribeSizeChange(t){this.xw.i(t)}unsubscribeSizeChange(t){this.xw._(t)}applyOptions(t){this.Jh.cr(t)}options(){return{...wn(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(t){this.xw.p(t.width,t.height)}}function by(r){return(function(t){if(Vo(t.handleScale)){const n=t.handleScale;t.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:a}=t.handleScale;Vo(n)&&(t.handleScale.axisPressedMouseMove={time:n,price:n}),Vo(a)&&(t.handleScale.axisDoubleClickReset={time:a,price:a})}const e=t.handleScroll;Vo(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(r),r}class BT{constructor(t,e,n){this.OM=new Map,this.NM=new Map,this.FM=new we,this.WM=new we,this.HM=new we,this.Xc=new WeakMap,this.UM=new mT(e);const a=n===void 0?wn(gy()):bi(wn(gy()),by(n));this.$M=e,this.Yp=new oT(t,a,e),this.Yp.nw().i((u=>{this.FM.v()&&this.FM.p(this.qM(u()))}),this),this.Yp.ew().i((u=>{this.WM.v()&&this.WM.p(this.qM(u()))}),this),this.Yp.Md().i((u=>{this.HM.v()&&this.HM.p(this.qM(u()))}),this);const l=this.Yp.Qt();this.jM=new LT(l,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(t,e,n){this.autoSizeActive()||this.Yp.sg(t,e,n)}addCustomSeries(t,e={},n=0){const a=(l=>({type:"Custom",isBuiltIn:!1,defaultOptions:{..._T,...l.defaultOptions()},YM:wT,KM:l}))(sr(t));return this.ZM(a,e,n)}addSeries(t,e={},n=0){return this.ZM(t,e,n)}removeSeries(t){const e=ci(this.OM.get(t)),n=this.UM.Hd(e);this.Yp.Qt().Hd(e),this.GM(n),this.OM.delete(t),this.NM.delete(e)}DM(t,e){this.GM(this.UM.Ug(t,e))}VM(t,e,n){this.GM(this.UM.Zg(t,e,n))}BM(t,e){const[n,a]=this.UM.Jg(t,e);return n.length!==0&&this.GM(a),n}subscribeClick(t){this.FM.i(t)}unsubscribeClick(t){this.FM._(t)}subscribeCrosshairMove(t){this.HM.i(t)}unsubscribeCrosshairMove(t){this.HM._(t)}subscribeDblClick(t){this.WM.i(t)}unsubscribeDblClick(t){this.WM._(t)}priceScale(t,e=0){return new Tx(this.Yp,t,e)}timeScale(){return this.jM}applyOptions(t){this.Yp.cr(by(t))}options(){return this.Yp.N()}takeScreenshot(t=!1,e=!1){let n,a;try{e||(n=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),a=this.Yp.ug(t)}finally{e||n===void 0||this.Yp.Qt().cr({crosshair:{mode:n}})}return a}addPane(t=!1){const e=this.Yp.Qt().Xd();return e.O_(t),this.XM(e)}removePane(t){this.Yp.Qt().Sd(t)}swapPanes(t,e){this.Yp.Qt().Cd(t,e)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map((t=>this.XM(t)))}paneSize(t=0){const e=this.Yp.gg(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,n){const a=this.OM.get(n);if(a===void 0)return;const l=this.Yp.Qt().Kn(a);l!==null&&this.Yp.Qt().Ld(t,e,l)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(t,e={},n=0){Ve(t.YM!==void 0),(function(f){if(f===void 0||f.type==="custom")return;const d=f;d.minMove!==void 0&&d.precision===void 0&&(d.precision=_x(d.minMove))})(e.priceFormat),t.type==="Candlestick"&&(function(f){f.borderColor!==void 0&&(f.borderUpColor=f.borderColor,f.borderDownColor=f.borderColor),f.wickColor!==void 0&&(f.wickUpColor=f.wickColor,f.wickDownColor=f.wickColor)})(e);const a=bi(wn(ax),wn(t.defaultOptions),e),l=t.YM,u=new Hu(this.Yp.Qt(),t.type,a,l,t.KM);this.Yp.Qt().Fd(u,n);const c=new zT(u,this,this,this,this.$M,(f=>this.XM(f)));return this.OM.set(c,u),this.NM.set(u,c),c}GM(t){const e=this.Yp.Qt();e.Od(t.Et.vc,t.Et.sM,t.Et.nM),t.F_.forEach(((n,a)=>a.ht(n.le,n.iM))),e.Et().Ju(),e.Sc()}JM(t){return ci(this.NM.get(t))}qM(t){const e=new Map;t.Vg.forEach(((a,l)=>{const u=l.wh(),c=ru(u)(a);if(u!=="Custom")Ve(cT(c));else{const f=l.hl();Ve(!f||f(c)===!1)}e.set(this.JM(l),c)}));const n=t.Ig!==void 0&&this.NM.has(t.Ig)?this.JM(t.Ig):void 0;return{time:t.Gr,logical:t.js,point:t.Rg,paneIndex:t.Dg,hoveredSeries:n,hoveredObjectId:t.Bg,seriesData:e,sourceEvent:t.Eg}}XM(t){let e=this.Xc.get(t);return e||(e=new kT(this.Yp,(n=>this.JM(n)),t,this),this.Xc.set(t,e)),e}}function FT(r){if(Sl(r)){const t=document.getElementById(r);return Ve(t!==null,`Cannot find element in DOM with id=${r}`),t}return r}function PT(r,t,e){const n=FT(r),a=new BT(n,t,e);return t.setOptions(a.options()),a}function Ax(r,t){return PT(r,new iy,iy.pf(t))}class Dd extends Ad{constructor(t,e){super(t,e,!0)}mM(t,e,n){e.mc(this.aM,cl(this.lM)),t.Yo(this.aM,n,cl(this.lM))}QM(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>{let n;if((e.jr??1)>1){const a=e.Wt[1],l=e.Wt[2],u=e.Wt[3];n=Math.abs(a-u)>Math.abs(l-u)?a:l}else n=e.Wt[3];return this.tb(e.js,n,t)}))}}function Rx(r,t,e,n,a,l,u){if(t.length===0||n.from>=t.length||n.to<=0)return;const{context:c,horizontalPixelRatio:f,verticalPixelRatio:d}=r,v=t[n.from];let m=l(r,v),y=v;if(n.to-n.from<2){const x=a/2;c.beginPath();const b={_t:v._t-x,ut:v.ut},w={_t:v._t+x,ut:v.ut};c.moveTo(b._t*f,b.ut*d),c.lineTo(w._t*f,w.ut*d),u(r,m,b,w)}else{const x=(w,S)=>{u(r,m,y,S),c.beginPath(),m=w,y=S};let b=y;c.beginPath(),c.moveTo(v._t*f,v.ut*d);for(let w=n.from+1;w<n.to;++w){b=t[w];const S=l(r,b);switch(e){case 0:c.lineTo(b._t*f,b.ut*d);break;case 1:c.lineTo(b._t*f,t[w-1].ut*d),S!==m&&(x(S,b),c.lineTo(b._t*f,t[w-1].ut*d)),c.lineTo(b._t*f,b.ut*d);break;case 2:{const[M,N]=IT(t,w-1,w);c.bezierCurveTo(M._t*f,M.ut*d,N._t*f,N.ut*d,b._t*f,b.ut*d);break}}e!==1&&S!==m&&(x(S,b),c.moveTo(b._t*f,b.ut*d))}(y!==b||y===b&&e===1)&&u(r,m,y,b)}}const xy=6;function Pf(r,t){return{_t:r._t-t._t,ut:r.ut-t.ut}}function Sy(r,t){return{_t:r._t/t,ut:r.ut/t}}function IT(r,t,e){const n=Math.max(0,t-1),a=Math.min(r.length-1,e+1);var l,u;return[(l=r[t],u=Sy(Pf(r[e],r[n]),xy),{_t:l._t+u._t,ut:l.ut+u.ut}),Pf(r[e],Sy(Pf(r[a],r[t]),xy))]}function VT(r,t){const e=r.context;e.strokeStyle=t,e.stroke()}class UT extends Dn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:n,ib:a,sb:l,ct:u,Zt:c,nb:f}=this.rt;if(n===null)return;const d=t.context;d.lineCap="butt",d.lineWidth=u*t.verticalPixelRatio,ur(d,c),d.lineJoin="round";const v=this.eb.bind(this);l!==void 0&&Rx(t,e,l,n,a,v,VT),f&&(function(m,y,x,b,w){if(b.to-b.from<=0)return;const{horizontalPixelRatio:S,verticalPixelRatio:M,context:N}=m;let T=null;const R=Math.max(1,Math.floor(S))%2/2,C=x*M+R;for(let z=b.to-1;z>=b.from;--z){const D=y[z];if(D){const I=w(m,D);I!==T&&(N.beginPath(),T!==null&&N.fill(),N.fillStyle=I,T=I);const B=Math.round(D._t*S)+R,V=D.ut*M;N.moveTo(B,V),N.arc(B,V,C,0,2*Math.PI)}}N.fill()})(t,e,f,n,v)}}class Dx extends UT{eb(t,e){return e.vt}}class HT extends Dd{constructor(){super(...arguments),this.cM=new Dx}tb(t,e,n){return{...this.QM(t,e),...n.gh(t)}}wM(){const t=this.ee.N(),e={ot:this.aM,Zt:t.lineStyle,sb:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(e)}}const mu={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(r,t)=>new HT(r,t)};function YT(r,t,e,n,a){const{context:l,horizontalPixelRatio:u,verticalPixelRatio:c}=t;l.lineTo(a._t*u,r*c),l.lineTo(n._t*u,r*c),l.closePath(),l.fillStyle=e,l.fill()}class WT extends Dn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:n,ib:a,ct:l,Zt:u,sb:c}=this.rt,f=this.rt.ub??(this.rt.cb?0:t.mediaSize.height);if(n===null)return;const d=t.context;d.lineCap="butt",d.lineJoin="round",d.lineWidth=l,ur(d,u),d.lineWidth=1,Rx(t,e,c,n,a,this.fb.bind(this),YT.bind(null,f))}}class qT{pb(t,e){const n=this.mb,{wb:a,gb:l,Mb:u,bb:c,ub:f,Sb:d,xb:v}=e;if(this.Cb===void 0||n===void 0||n.wb!==a||n.gb!==l||n.Mb!==u||n.bb!==c||n.ub!==f||n.Sb!==d||n.xb!==v){const{verticalPixelRatio:m}=t,y=f||d>0?m:1,x=d*y,b=v===t.bitmapSize.height?v:v*y,w=(f??0)*y,S=t.context.createLinearGradient(0,x,0,b);if(S.addColorStop(0,a),f!=null){const M=Vs((w-x)/(b-x),0,1);S.addColorStop(M,l),S.addColorStop(M,u)}S.addColorStop(1,c),this.Cb=S,this.mb=e}return this.Cb}}class XT extends WT{constructor(){super(...arguments),this.yb=new qT}fb(t,e){return this.yb.pb(t,{wb:e.eh,gb:"",Mb:"",bb:e.rh,Sb:this.rt?.Sb??0,xb:t.bitmapSize.height})}}class GT extends Dd{constructor(t,e){super(t,e),this.cM=new ux,this.Rb=new XT,this.Db=new Dx,this.cM.st([this.Rb,this.Db])}tb(t,e,n){return{...this.QM(t,e),...n.gh(t)}}wM(){const t=this.ee.N();if(this.lM===null||this.aM.length===0)return;let e;if(t.relativeGradient){e=this.aM[this.lM.from].ut;for(let n=this.lM.from;n<this.lM.to;n++){const a=this.aM[n];a.ut<e&&(e=a.ut)}}this.Rb.ht({sb:t.lineType,ot:this.aM,Zt:t.lineStyle,ct:t.lineWidth,ub:null,Sb:e,cb:t.invertFilledArea,lt:this.lM,ib:this.re.Et().ul()}),this.Db.ht({sb:t.lineVisible?t.lineType:void 0,ot:this.aM,Zt:t.lineStyle,ct:t.lineWidth,lt:this.lM,ib:this.re.Et().ul(),nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}const Nx={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(r,t)=>new GT(r,t)};class KT extends Ad{constructor(t,e){super(t,e,!1)}mM(t,e,n){e.mc(this.aM,cl(this.lM)),t.Zo(this.aM,n,cl(this.lM))}Lb(t,e,n){return{wt:t,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>this.tb(e.js,e,t)))}}class QT extends Dn{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(t){this.jt=t}et(t){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:e}=t;this.Ib=(function(l,u){if(l>=2.5&&l<=4)return Math.floor(3*u);const c=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),f=Math.floor(l*c*u),d=Math.floor(l*u),v=Math.min(f,d);return Math.max(Math.floor(u),v)})(this.jt.ul,e),this.Ib>=2&&Math.floor(e)%2!=this.Ib%2&&this.Ib--;const n=this.jt.qs;this.jt.zb&&this.Ob(t,n,this.jt.lt),this.jt.Mi&&this.gm(t,n,this.jt.lt);const a=this.Nb(e);(!this.jt.Mi||this.Ib>2*a)&&this.Fb(t,n,this.jt.lt)}Ob(t,e,n){if(this.jt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let c="",f=Math.min(Math.floor(l),Math.floor(this.jt.ul*l));f=Math.max(Math.floor(l),Math.min(f,this.Ib));const d=Math.floor(.5*f);let v=null;for(let m=n.from;m<n.to;m++){const y=e[m];y.sh!==c&&(a.fillStyle=y.sh,c=y.sh);const x=Math.round(Math.min(y.Go,y.Qo)*u),b=Math.round(Math.max(y.Go,y.Qo)*u),w=Math.round(y.Xo*u),S=Math.round(y.Jo*u);let M=Math.round(l*y._t)-d;const N=M+f-1;v!==null&&(M=Math.max(v+1,M),M=Math.min(M,N));const T=N-M+1;a.fillRect(M,w,T,x-w),a.fillRect(M,b+1,T,S-b),v=N}}Nb(t){let e=Math.floor(1*t);this.Ib<=2*e&&(e=Math.floor(.5*(this.Ib-1)));const n=Math.max(Math.floor(t),e);return this.Ib<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n}gm(t,e,n){if(this.jt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let c="";const f=this.Nb(l);let d=null;for(let v=n.from;v<n.to;v++){const m=e[v];m.ih!==c&&(a.fillStyle=m.ih,c=m.ih);let y=Math.round(m._t*l)-Math.floor(.5*this.Ib);const x=y+this.Ib-1,b=Math.round(Math.min(m.Go,m.Qo)*u),w=Math.round(Math.max(m.Go,m.Qo)*u);if(d!==null&&(y=Math.max(d+1,y),y=Math.min(y,x)),this.jt.ul*l>2*f)QM(a,y,b,x-y+1,w-b+1,f);else{const S=x-y+1;a.fillRect(y,b,S,w-b+1)}d=x}}Fb(t,e,n){if(this.jt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let c="";const f=this.Nb(l);for(let d=n.from;d<n.to;d++){const v=e[d];let m=Math.round(Math.min(v.Go,v.Qo)*u),y=Math.round(Math.max(v.Go,v.Qo)*u),x=Math.round(v._t*l)-Math.floor(.5*this.Ib),b=x+this.Ib-1;if(v.th!==c){const w=v.th;a.fillStyle=w,c=w}this.jt.Mi&&(x+=f,m+=f,b-=f,y-=f),m>y||a.fillRect(x,m,b-x+1,y-m+1)}}}class $T extends KT{constructor(){super(...arguments),this.cM=new QT}tb(t,e,n){return{...this.Lb(t,e,n),...n.gh(t)}}wM(){const t=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:t.wickVisible,Mi:t.borderVisible,lt:this.lM})}}const Ox={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(r,t)=>new $T(r,t)};class ZT extends Dn{constructor(){super(...arguments),this.jt=null,this.Wb=[]}ht(t){this.jt=t,this.Wb=[]}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return;this.Wb.length||this.Hb(e);const a=Math.max(1,Math.floor(n)),l=Math.round(this.jt.Ub*n)-Math.floor(a/2),u=l+a;for(let c=this.jt.lt.from;c<this.jt.lt.to;c++){const f=this.jt.ot[c],d=this.Wb[c-this.jt.lt.from],v=Math.round(f.ut*n);let m,y;t.fillStyle=f.th,v<=l?(m=v,y=u):(m=l,y=v-Math.floor(a/2)+a),t.fillRect(d.Aa,m,d.bi-d.Aa+1,y-m)}}Hb(t){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return void(this.Wb=[]);const e=Math.ceil(this.jt.ul*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.jt.ul*t)-e;this.Wb=new Array(this.jt.lt.to-this.jt.lt.from);for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const u=this.jt.ot[l],c=Math.round(u._t*t);let f,d;if(n%2){const v=(n-1)/2;f=c-v,d=c+v}else{const v=n/2;f=c-v,d=c+v-1}this.Wb[l-this.jt.lt.from]={Aa:f,bi:d,$b:c,oe:u._t*t,wt:u.wt}}for(let l=this.jt.lt.from+1;l<this.jt.lt.to;l++){const u=this.Wb[l-this.jt.lt.from],c=this.Wb[l-this.jt.lt.from-1];u.wt===c.wt+1&&u.Aa-c.bi!==e+1&&(c.$b>c.oe?c.bi=u.Aa-e-1:u.Aa=c.bi+e+1)}let a=Math.ceil(this.jt.ul*t);for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const u=this.Wb[l-this.jt.lt.from];u.bi<u.Aa&&(u.bi=u.Aa);const c=u.bi-u.Aa+1;a=Math.min(c,a)}if(e>0&&a<4)for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const u=this.Wb[l-this.jt.lt.from];u.bi-u.Aa+1>a&&(u.$b>u.oe?u.bi-=1:u.Aa+=1)}}}class JT extends Dd{constructor(){super(...arguments),this.cM=new ZT}tb(t,e,n){return{...this.QM(t,e),...n.gh(t)}}wM(){const t={ot:this.aM,ul:this.re.Et().ul(),lt:this.lM,Ub:this.ee.Ft().Nt(this.ee.N().base,mt(this.ee.Lt()).Wt)};this.cM.ht(t)}}const kx={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},YM:(r,t)=>new JT(r,t)};class tA{constructor(t,e){this.yt=t,this.qb=e,this.jb()}detach(){this.yt.detachPrimitive(this.qb)}getPane(){return this.yt}applyOptions(t){this.qb.cr?.(t)}jb(){this.yt.attachPrimitive(this.qb)}}const eA={alpha:1,padding:0};class iA{constructor(t){this.jt=t}draw(t){t.useMediaCoordinateSpace((e=>{const n=e.context,a=this.Qb(this.jt,e.mediaSize);a&&this.jt.tS&&(n.globalAlpha=this.jt.alpha??1,n.drawImage(this.jt.tS,a._t,a.ut,a.ss,a.$t))}))}Qb(t,e){const{maxHeight:n,maxWidth:a,iS:l,sS:u,padding:c}=t,f=Math.round(e.width/2),d=Math.round(e.height/2),v=c??0;let m=e.width-2*v,y=e.height-2*v;n&&(y=Math.min(y,n)),a&&(m=Math.min(m,a));const x=m/u,b=y/l,w=Math.min(x,b),S=u*w,M=l*w;return{_t:f-.5*S,ut:d-.5*M,$t:M,ss:S}}}class nA{constructor(t){this.nS=null,this.eS=0,this.rS=0,this.Ps=t,this.M=_y(this.Ps,this.nS,this.eS,this.rS)}hS(t){t.aS!==void 0&&(this.eS=t.aS),t.lS!==void 0&&(this.rS=t.lS),t.oS!==void 0&&(this.nS=t.oS),this.kt()}_S(t){this.Ps=t,this.kt()}zOrder(){return"bottom"}kt(){this.M=_y(this.Ps,this.nS,this.eS,this.rS)}renderer(){return new iA(this.M)}}function _y(r,t,e,n){return{...r,tS:t,sS:e,iS:n}}function wy(r){return{...eA,...r}}class rA{constructor(t,e){this.uS=null,this.cS=t,this.Ps=wy(e),this.Xb=[new nA(this.Ps)]}updateAllViews(){this.Xb.forEach((t=>t.kt()))}paneViews(){return this.Xb}attached(t){const{requestUpdate:e}=t;this.dS=e,this.uS=new Image,this.uS.onload=()=>{const n=this.uS?.naturalHeight??1,a=this.uS?.naturalWidth??1;this.Xb.forEach((l=>l.hS({lS:n,aS:a,oS:this.uS}))),this.dS&&this.dS()},this.uS.src=this.cS}detached(){this.dS=void 0,this.uS=null}cr(t){this.Ps=wy({...this.Ps,...t}),this.fS(),this.Jb&&this.Jb()}Jb(){this.dS&&this.dS()}fS(){this.Xb.forEach((t=>t._S(this.Ps)))}}function jx(r,t,e){return new tA(r,new rA(t,e))}class sA{constructor(t,e){this.ee=t,this.Zh=e,this.jb()}detach(){this.ee.detachPrimitive(this.Zh)}getSeries(){return this.ee}applyOptions(t){this.Zh&&this.Zh.cr&&this.Zh.cr(t)}jb(){this.ee.attachPrimitive(this.Zh)}}const aA={autoScale:!0,zOrder:"normal"};function ll(r,t){return Ed(Math.min(Math.max(r,12),30)*t)}function Gs(r,t){switch(r){case"arrowDown":case"arrowUp":return ll(t,1);case"circle":return ll(t,.8);case"square":return ll(t,.7)}}function zx(r){return(function(t){const e=Math.ceil(t);return e%2!=0?e-1:e})(ll(r,1))}function Lx(r){return Math.max(ll(r,.1),3)}function Ey(r,t,e){return t?r:e?Math.ceil(r/2):0}function Cy(r,t,e,n){const a=(Gs("arrowUp",n)-1)/2*e.pS,l=(Ed(n/2)-1)/2*e.pS;t.beginPath(),r?(t.moveTo(e._t-a,e.ut),t.lineTo(e._t,e.ut-a),t.lineTo(e._t+a,e.ut),t.lineTo(e._t+l,e.ut),t.lineTo(e._t+l,e.ut+a),t.lineTo(e._t-l,e.ut+a),t.lineTo(e._t-l,e.ut)):(t.moveTo(e._t-a,e.ut),t.lineTo(e._t,e.ut+a),t.lineTo(e._t+a,e.ut),t.lineTo(e._t+l,e.ut),t.lineTo(e._t+l,e.ut-a),t.lineTo(e._t-l,e.ut-a),t.lineTo(e._t-l,e.ut)),t.fill()}function My(r,t,e,n,a,l){const u=(Gs("arrowUp",n)-1)/2,c=(Ed(n/2)-1)/2;return a>=t-c-2&&a<=t+c+2&&l>=(r?e:e-u)-2&&l<=(r?e+u:e)+2?!0:(()=>{if(a<t-u-3||a>t+u+3||l<(r?e-u-3:e)||l>(r?e:e+u+3))return!1;const f=Math.abs(a-t);return Math.abs(l-e)+3>=f/2})()}class lA{constructor(){this.jt=null,this.$n=new fl,this.F=-1,this.W="",this.jv="",this.vS="normal"}ht(t){this.jt=t}qn(t,e,n){this.F===t&&this.W===e||(this.F=t,this.W=e,this.jv=hl(t,e),this.$n.On()),this.vS=n}Qn(t,e){if(this.jt===null||this.jt.lt===null)return null;for(let n=this.jt.lt.from;n<this.jt.lt.to;n++){const a=this.jt.ot[n];if(a&&uA(a,t,e))return{zOrder:"normal",externalId:a.te??""}}return null}draw(t){this.vS!=="aboveSeries"&&t.useBitmapCoordinateSpace((e=>{this.et(e)}))}drawBackground(t){this.vS==="aboveSeries"&&t.useBitmapCoordinateSpace((e=>{this.et(e)}))}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.jt!==null&&this.jt.lt!==null){t.textBaseline="middle",t.font=this.jv;for(let a=this.jt.lt.from;a<this.jt.lt.to;a++){const l=this.jt.ot[a];l.ri!==void 0&&(l.ri.ss=this.$n.Ii(t,l.ri.mS),l.ri.$t=this.F,l.ri._t=l._t-l.ri.ss/2),oA(l,t,e,n)}}}}function oA(r,t,e,n){t.fillStyle=r.R,r.ri!==void 0&&(function(a,l,u,c,f,d){a.save(),a.scale(f,d),a.fillText(l,u,c),a.restore()})(t,r.ri.mS,r.ri._t,r.ri.ut,e,n),(function(a,l,u){if(a.yh!==0){switch(a.wS){case"arrowDown":return void Cy(!1,l,u,a.yh);case"arrowUp":return void Cy(!0,l,u,a.yh);case"circle":return void(function(c,f,d){const v=(Gs("circle",d)-1)/2;c.beginPath(),c.arc(f._t,f.ut,v*f.pS,0,2*Math.PI,!1),c.fill()})(l,u,a.yh);case"square":return void(function(c,f,d){const v=Gs("square",d),m=(v-1)*f.pS/2,y=f._t-m,x=f.ut-m;c.fillRect(y,x,v*f.pS,v*f.pS)})(l,u,a.yh)}a.wS}})(r,t,(function(a,l,u){const c=Math.max(1,Math.floor(l))%2/2;return{_t:Math.round(a._t*l)+c,ut:a.ut*u,pS:l}})(r,e,n))}function uA(r,t,e){return!(r.ri===void 0||!(function(n,a,l,u,c,f){const d=u/2;return c>=n&&c<=n+l&&f>=a-d&&f<=a+d})(r.ri._t,r.ri.ut,r.ri.ss,r.ri.$t,t,e))||(function(n,a,l){if(n.yh===0)return!1;switch(n.wS){case"arrowDown":return My(!0,n._t,n.ut,n.yh,a,l);case"arrowUp":return My(!1,n._t,n.ut,n.yh,a,l);case"circle":return(function(u,c,f,d,v){const m=2+Gs("circle",f)/2,y=u-d,x=c-v;return Math.sqrt(y*y+x*x)<=m})(n._t,n.ut,n.yh,a,l);case"square":return(function(u,c,f,d,v){const m=Gs("square",f),y=(m-1)/2,x=u-y,b=c-y;return d>=x&&d<=x+m&&v>=b&&v<=b+m})(n._t,n.ut,n.yh,a,l)}})(r,t,e)}function Ty(r){return r==="atPriceTop"||r==="atPriceBottom"||r==="atPriceMiddle"}function cA(r,t,e,n,a,l,u,c){const f=(function(b,w,S){if(Ty(w.position)&&w.price!==void 0)return w.price;if("value"in(M=b)&&typeof M.value=="number")return b.value;var M;if((function(N){return"open"in N&&"high"in N&&"low"in N&&"close"in N})(b)){if(w.position==="inBar")return b.close;if(w.position==="aboveBar")return S?b.low:b.high;if(w.position==="belowBar")return S?b.high:b.low}})(e,t,u.priceScale().options().invertScale);if(f===void 0)return;const d=Ty(t.position),v=c.timeScale(),m=Ir(t.size)?Math.max(t.size,0):1,y=zx(v.options().barSpacing)*m,x=y/2;switch(r.yh=y,t.position){case"inBar":case"atPriceMiddle":return r.ut=mt(u.priceToCoordinate(f)),void(r.ri!==void 0&&(r.ri.ut=r.ut+x+l+.6*a));case"aboveBar":case"atPriceTop":{const b=d?0:n.gS;return r.ut=mt(u.priceToCoordinate(f))-x-b,r.ri!==void 0&&(r.ri.ut=r.ut-x-.6*a,n.gS+=1.2*a),void(d||(n.gS+=y+l))}case"belowBar":case"atPriceBottom":{const b=d?0:n.MS;return r.ut=mt(u.priceToCoordinate(f))+x+b,r.ri!==void 0&&(r.ri.ut=r.ut+x+l+.6*a,n.MS+=1.2*a),void(d||(n.MS+=y+l))}}}class hA{constructor(t,e,n){this.bS=[],this.xt=!0,this.SS=!0,this.Xt=new lA,this.ye=t,this.Lv=e,this.jt={ot:[],lt:null},this.Ps=n}renderer(){if(!this.ye.options().visible)return null;this.xt&&this.xS();const t=this.Lv.options().layout;return this.Xt.qn(t.fontSize,t.fontFamily,this.Ps.zOrder),this.Xt.ht(this.jt),this.Xt}CS(t){this.bS=t,this.kt("data")}kt(t){this.xt=!0,t==="data"&&(this.SS=!0)}yS(t){this.xt=!0,this.Ps=t}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}xS(){const t=this.Lv.timeScale(),e=this.bS;this.SS&&(this.jt.ot=e.map((d=>({wt:d.time,_t:0,ut:0,yh:0,wS:d.shape,R:d.color,te:d.id,kS:d.kS,ri:void 0}))),this.SS=!1);const n=this.Lv.options().layout;this.jt.lt=null;const a=t.getVisibleLogicalRange();if(a===null)return;const l=new Us(Math.floor(a.from),Math.ceil(a.to));if(this.ye.data()[0]===null||this.jt.ot.length===0)return;let u=NaN;const c=Lx(t.options().barSpacing),f={gS:c,MS:c};this.jt.lt=Cx(this.jt.ot,l,!0);for(let d=this.jt.lt.from;d<this.jt.lt.to;d++){const v=e[d];v.time!==u&&(f.gS=c,f.MS=c,u=v.time);const m=this.jt.ot[d];m._t=mt(t.logicalToCoordinate(v.time)),v.text!==void 0&&v.text.length>0&&(m.ri={mS:v.text,_t:0,ut:0,ss:0,$t:0});const y=this.ye.dataByIndex(v.time,0);y!==null&&cA(m,v,y,f,n.fontSize,c,this.ye,this.Lv)}this.xt=!1}}function Ay(r){return{...aA,...r}}class fA{constructor(t){this.$h=null,this.bS=[],this.PS=[],this.TS=null,this.ye=null,this.Lv=null,this.RS=!0,this.DS=null,this.IS=null,this.VS=null,this.BS=!0,this.Ps=Ay(t)}attached(t){this.ES(),this.Lv=t.chart,this.ye=t.series,this.$h=new hA(this.ye,mt(this.Lv),this.Ps),this.dS=t.requestUpdate,this.ye.subscribeDataChanged((e=>this.IM(e))),this.BS=!0,this.Jb()}Jb(){this.dS&&this.dS()}detached(){this.ye&&this.TS&&this.ye.unsubscribeDataChanged(this.TS),this.Lv=null,this.ye=null,this.$h=null,this.TS=null}CS(t){this.BS=!0,this.bS=t,this.ES(),this.RS=!0,this.IS=null,this.Jb()}AS(){return this.bS}paneViews(){return this.$h?[this.$h]:[]}updateAllViews(){this.LS()}hitTest(t,e){return this.$h?this.$h.renderer()?.Qn(t,e)??null:null}autoscaleInfo(t,e){if(this.Ps.autoScale&&this.$h){const n=this.zS();if(n)return{priceRange:null,margins:n}}return null}cr(t){this.Ps=Ay({...this.Ps,...t}),this.Jb&&this.Jb()}zS(){const t=mt(this.Lv).timeScale().options().barSpacing;if(this.RS||t!==this.VS){if(this.VS=t,this.bS.length>0){const e=Lx(t),n=1.5*zx(t)+2*e,a=this.OS();this.DS={above:Ey(n,a.aboveBar,a.inBar),below:Ey(n,a.belowBar,a.inBar)}}else this.DS=null;this.RS=!1}return this.DS}OS(){return this.IS===null&&(this.IS=this.bS.reduce(((t,e)=>(t[e.position]||(t[e.position]=!0),t)),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.IS}ES(){if(!this.BS||!this.Lv||!this.ye)return;const t=this.Lv.timeScale(),e=this.ye?.data();if(t.getVisibleLogicalRange()==null||!this.ye||e.length===0)return void(this.PS=[]);const n=t.timeToIndex(mt(e[0].time),!0);this.PS=this.bS.map(((a,l)=>{const u=t.timeToIndex(a.time,!0),c=u<n?1:-1,f=mt(this.ye).dataByIndex(u,c),d={time:t.timeToIndex(mt(f).time,!1),position:a.position,shape:a.shape,color:a.color,id:a.id,kS:l,text:a.text,size:a.size,price:a.price,Gr:a.time};if(a.position==="atPriceTop"||a.position==="atPriceBottom"||a.position==="atPriceMiddle"){if(a.price===void 0)throw new Error(`Price is required for position ${a.position}`);return{...d,position:a.position,price:a.price}}return{...d,position:a.position,price:a.price}})),this.BS=!1}LS(t){this.$h&&(this.ES(),this.$h.CS(this.PS),this.$h.yS(this.Ps),this.$h.kt(t))}IM(t){this.BS=!0,this.Jb()}}class dA extends sA{constructor(t,e,n){super(t,e),n&&this.setMarkers(n)}setMarkers(t){this.Zh.CS(t)}markers(){return this.Zh.AS()}}function Bx(r,t,e){const n=new dA(r,new fA({}));return t&&n.setMarkers(t),n}({...ax});const js=[{period:5,color:"#FF6D00",label:"MA5"},{period:10,color:"#2196F3",label:"MA10"},{period:20,color:"#9C27B0",label:"MA20"},{period:30,color:"#00BCD4",label:"MA30"}],Ko=[{period:5,color:"#FF6D00",label:"VOL MA5"},{period:10,color:"#2196F3",label:"VOL MA10"}];function Ry({isFullscreen:r=!1}){const t=O.useRef(null),e=O.useRef(null),n=O.useRef(!1),a=O.useRef(null),l=O.useRef(null),u=O.useRef(new Map),c=O.useRef(new Map),f=Wt(rt=>rt.symbol),d=Wt(rt=>rt.interval),v=Yr(),[m,y]=O.useState(null),[x,b]=O.useState(null),[w,S]=O.useState(.2),M=O.useRef(!1),N=O.useRef(!1),T=O.useRef([]),R=O.useRef([]),C=O.useRef(null),z=O.useRef(!0),D=O.useRef(!1),I=O.useRef(null),B=O.useRef(null),V=O.useRef([]),W=d==="time",Z=W?"1m":d,it=O.useCallback(async()=>{if(n.current||!z.current||D.current||!C.current)return;D.current=!0;const rt=C.current-1;try{const k=await xe.getKlines(f,Z,500,rt);if(console.log(" API:",k?.length),!Array.isArray(k)||k.length===0){console.log(" "),z.current=!1;return}const L=[...k].reverse(),F=L.map(ut=>({time:Math.floor(ut[0]/1e3),open:parseFloat(String(ut[2])),high:parseFloat(String(ut[3])),low:parseFloat(String(ut[4])),close:parseFloat(String(ut[5]))})),q=L.map(ut=>{const dt=parseFloat(String(ut[5])),St=parseFloat(String(ut[2]));return{time:Math.floor(ut[0]/1e3),value:parseFloat(String(ut[6])),color:dt>=St?"#0ECB8166":"#F6465D66"}}),$=new Set(T.current.map(ut=>ut.time)),J=F.filter(ut=>!$.has(ut.time)),tt=q.filter(ut=>!$.has(ut.time));if(console.log(" :",F.length,", :",J.length,""),J.length===0){console.log(" "),z.current=!1;return}const vt=e.current?.timeScale().getVisibleLogicalRange(),pt=J.length;if(T.current=[...J,...T.current].sort((ut,dt)=>ut.time-dt.time).filter((ut,dt,St)=>dt===0||ut.time!==St[dt-1].time),R.current=[...tt,...R.current].sort((ut,dt)=>ut.time-dt.time).filter((ut,dt,St)=>dt===0||ut.time!==St[dt-1].time),T.current.length>0&&(C.current=T.current[0].time*1e3,console.log(" :",new Date(C.current).toLocaleString())),W){const ut=J.map(dt=>({time:dt.time,value:dt.close}));V.current=[...ut,...V.current].sort((dt,St)=>dt.time-St.time).filter((dt,St,yt)=>St===0||dt.time!==yt[St-1].time),B.current?.setData(V.current)}else a.current?.setData(T.current);l.current?.setData(R.current),vt&&pt>0&&e.current?.timeScale().setVisibleLogicalRange({from:vt.from+pt,to:vt.to+pt}),console.log(" :",F.length,":",T.current.length,"",W?"()":"")}catch(k){console.error(" :",k)}finally{D.current=!1}},[f,Z,W]),X=O.useCallback((rt,k)=>{const L=[];for(let F=0;F<rt.length;F++){if(F<k-1)continue;let q=0;for(let $=0;$<k;$++)q+=rt[F-$].close;L.push({time:rt[F].time,value:q/k})}return L},[]),ot=O.useCallback((rt,k)=>{const L=[];for(let F=0;F<rt.length;F++){if(F<k-1)continue;let q=0;for(let $=0;$<k;$++)q+=rt[F-$].value;L.push({time:rt[F].time,value:q/k})}return L},[]),j=O.useCallback(()=>{T.current.length!==0&&js.forEach(({period:rt})=>{const k=u.current.get(rt);if(k){const L=X(T.current,rt);k.setData(L),k.applyOptions({visible:!0})}})},[X]),U=O.useCallback(()=>{R.current.length!==0&&Ko.forEach(({period:rt})=>{const k=c.current.get(rt);if(k){const L=ot(R.current,rt);k.setData(L),k.applyOptions({visible:!0})}})},[ot]),st=O.useCallback(()=>{if(n.current||!a.current||!e.current||T.current.length===0)return;if(I.current){try{I.current.detach()}catch{}I.current=null}const rt=e.current.timeScale().getVisibleRange();if(!rt)return;let k=-1/0,L=1/0,F=null,q=null;T.current.forEach(J=>{const tt=typeof J.time=="number"?J.time:J.time.timestamp||0,vt=typeof rt.from=="number"?rt.from:rt.from.timestamp||0,pt=typeof rt.to=="number"?rt.to:rt.to.timestamp||0;tt>=vt&&tt<=pt&&(J.high>k&&(k=J.high,F=J.time),J.low<L&&(L=J.low,q=J.time))});const $=[];F!==null&&k!==-1/0&&$.push({time:F,position:"aboveBar",color:"#089981",shape:"arrowDown",text:` ${k.toFixed(2)}`}),q!==null&&L!==1/0&&$.push({time:q,position:"belowBar",color:"#f23645",shape:"arrowUp",text:` ${L.toFixed(2)}`}),$.length>0&&(I.current=Bx(a.current,$))},[]);O.useEffect(()=>{const rt=t.current;if(!rt)return;n.current=!1,T.current=[],R.current=[],V.current=[],C.current=null,z.current=!0,D.current=!1,I.current=null;const k=Ax(rt,{layout:{background:{color:"#181a20"},textColor:"#d1d4dc"},grid:{vertLines:{color:"rgba(43, 49, 57, 0.5)"},horzLines:{color:"rgba(43, 49, 57, 0.5)"}},width:rt.clientWidth,height:rt.clientHeight,timeScale:{borderColor:"#2b3139",visible:!0,timeVisible:!0,secondsVisible:!1,barSpacing:16,minBarSpacing:8,rightOffset:5,fixLeftEdge:!1,fixRightEdge:!1,tickMarkMaxCharacterLength:10},localization:{timeFormatter:xt=>new Date(xt*1e3).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},rightPriceScale:{borderColor:"#2b3139",autoScale:!1,mode:0},leftPriceScale:{visible:!0,borderColor:"#2b3139",autoScale:!0},crosshair:{mode:1,vertLine:{labelBackgroundColor:"#2b3139"},horzLine:{labelBackgroundColor:"#2b3139"}},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0}});let L=null,F=null;W?(F=k.addSeries(Nx,{topColor:"rgba(33, 150, 243, 0.4)",bottomColor:"rgba(33, 150, 243, 0.0)",lineColor:"#2196F3",lineWidth:1,priceLineVisible:!0,lastValueVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}),F.priceScale().applyOptions({scaleMargins:{top:.02,bottom:w+.05}}),B.current=F):(L=k.addSeries(Ox,{upColor:"#0ECB81",downColor:"#F6465D",borderUpColor:"#0ECB81",borderDownColor:"#F6465D",wickUpColor:"#0ECB81",wickDownColor:"#F6465D",priceLineVisible:!0,lastValueVisible:!0,priceLineWidth:1,priceLineStyle:2}),L.priceScale().applyOptions({scaleMargins:{top:.02,bottom:w+.05}}));const q=k.addSeries(kx,{color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:"left"});q.priceScale().applyOptions({scaleMargins:{top:1-w+.02,bottom:0},visible:!1}),js.forEach(({period:xt,color:Mt})=>{const jt=k.addSeries(mu,{color:Mt,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1});u.current.set(xt,jt)}),Ko.forEach(({period:xt,color:Mt})=>{const jt=k.addSeries(mu,{color:Mt,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,priceScaleId:"left"});c.current.set(xt,jt)}),e.current=k,a.current=L,l.current=q;const $=k.panes()[0];$&&jx($,"/watermark.svg",{alpha:.5,padding:v?10:20,maxWidth:v?150:300,maxHeight:v?75:150});let J=!1,tt=0,vt=null;const pt=xt=>{const Mt=t.current;if(!Mt)return;const jt=Mt.getBoundingClientRect(),gt=xt.clientX-jt.left,At=jt.width;if(gt>At-60){J=!0,tt=xt.clientY;const wt=T.current;if(wt.length>0){const Nt=wt.flatMap(Lt=>[Lt.high,Lt.low]);vt={from:Math.min(...Nt),to:Math.max(...Nt)}}xt.preventDefault()}},ut=xt=>{if(!J||!vt)return;const Mt=xt.clientY-tt,jt=t.current?.clientHeight||500,gt=vt.to-vt.from,At=Mt/jt*gt,wt=W?F:L;wt&&(wt.priceScale().applyOptions({autoScale:!1}),wt.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:vt.from+At,maxValue:vt.to+At}})}))},dt=()=>{J=!1,vt=null},St=xt=>{const Mt=t.current;if(!Mt)return;const jt=Mt.getBoundingClientRect(),gt=xt.clientX-jt.left,At=jt.width;if(gt>At-60){const wt=W?F:L;wt&&(wt.priceScale().applyOptions({autoScale:!0}),wt.applyOptions({autoscaleInfoProvider:void 0}))}};rt.addEventListener("mousedown",pt),rt.addEventListener("mousemove",ut),rt.addEventListener("mouseup",dt),rt.addEventListener("mouseleave",dt),rt.addEventListener("dblclick",St),k.subscribeCrosshairMove(xt=>{if(!xt.time||!xt.seriesData){M.current=!1;const wt=T.current;if(wt.length>0){const Nt=wt[wt.length-1],Lt=R.current[R.current.length-1],ae=X(wt,5),Qt=X(wt,10),me=X(wt,20),Xe=X(wt,30),ce=ot(R.current,5),ge=ot(R.current,10);y({time:new Date(Nt.time*1e3).toLocaleString(),open:Nt.open,high:Nt.high,low:Nt.low,close:Nt.close,volume:Lt?.value||0,change:Nt.close-Nt.open,changePercent:(Nt.close-Nt.open)/Nt.open*100,ma5:ae[ae.length-1]?.value,ma10:Qt[Qt.length-1]?.value,ma20:me[me.length-1]?.value,ma30:Xe[Xe.length-1]?.value,volMa5:ce[ce.length-1]?.value,volMa10:ge[ge.length-1]?.value}),b({volume:Lt?.value||0,volMa5:ce[ce.length-1]?.value,volMa10:ge[ge.length-1]?.value})}return}M.current=!0;const Mt=xt.seriesData.get(q);if(!(W?F:L))return;const gt=xt.time,At=T.current.find(wt=>wt.time===gt);if(At){const wt=u.current.get(5),Nt=u.current.get(10),Lt=u.current.get(20),ae=u.current.get(30),Qt=wt?xt.seriesData.get(wt):void 0,me=Nt?xt.seriesData.get(Nt):void 0,Xe=Lt?xt.seriesData.get(Lt):void 0,ce=ae?xt.seriesData.get(ae):void 0,ge=c.current.get(5),He=c.current.get(10),Ge=ge?xt.seriesData.get(ge):void 0,tn=He?xt.seriesData.get(He):void 0;y({time:new Date(gt*1e3).toLocaleString(),open:At.open,high:At.high,low:At.low,close:At.close,volume:Mt?.value||0,change:At.close-At.open,changePercent:(At.close-At.open)/At.open*100,ma5:Qt?.value,ma10:me?.value,ma20:Xe?.value,ma30:ce?.value,volMa5:Ge?.value,volMa10:tn?.value}),b({volume:Mt?.value||0,volMa5:Ge?.value,volMa10:tn?.value})}}),k.timeScale().subscribeVisibleTimeRangeChange(()=>{n.current||st()});const yt=()=>{t.current&&e.current&&e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight})},_t=new ResizeObserver(yt);if(_t.observe(rt),window.addEventListener("resize",yt),setTimeout(yt,100),T.current.length>0){W?F?.setData(V.current):L?.setData(T.current),q.setData(R.current),j(),U(),T.current.length>50?k.timeScale().fitContent():k.timeScale().scrollToRealTime();const xt=T.current[T.current.length-1],Mt=R.current[R.current.length-1],jt=X(T.current,5),gt=X(T.current,10),At=X(T.current,20),wt=X(T.current,30),Nt=ot(R.current,5),Lt=ot(R.current,10);y({time:new Date(xt.time*1e3).toLocaleString(),open:xt.open,high:xt.high,low:xt.low,close:xt.close,volume:Mt?.value||0,change:xt.close-xt.open,changePercent:(xt.close-xt.open)/xt.open*100,ma5:jt[jt.length-1]?.value,ma10:gt[gt.length-1]?.value,ma20:At[At.length-1]?.value,ma30:wt[wt.length-1]?.value,volMa5:Nt[Nt.length-1]?.value,volMa10:Lt[Lt.length-1]?.value}),b({volume:Mt?.value||0,volMa5:Nt[Nt.length-1]?.value,volMa10:Lt[Lt.length-1]?.value})}return()=>{if(n.current=!0,_t.disconnect(),window.removeEventListener("resize",yt),rt&&(rt.removeEventListener("mousedown",pt),rt.removeEventListener("mousemove",ut),rt.removeEventListener("mouseup",dt),rt.removeEventListener("mouseleave",dt),rt.removeEventListener("dblclick",St)),I.current){try{I.current.detach()}catch{}I.current=null}B.current=null,a.current=null,l.current=null,u.current.clear(),c.current.clear(),k.remove()}},[w,v,W]),O.useEffect(()=>{l.current&&l.current.priceScale().applyOptions({scaleMargins:{top:1-w+.02,bottom:0}}),a.current&&a.current.priceScale().applyOptions({scaleMargins:{top:.02,bottom:w+.05}})},[w]),O.useEffect(()=>{!e.current||!t.current||setTimeout(()=>{t.current&&e.current&&(e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight}),e.current.timeScale().scrollToRealTime())},100)},[r]),O.useEffect(()=>{if(!e.current)return;const rt=k=>{k&&k.from<10&&z.current&&!D.current&&it()};return e.current.timeScale().subscribeVisibleLogicalRangeChange(rt),()=>{e.current?.timeScale().unsubscribeVisibleLogicalRangeChange(rt)}},[it]),O.useEffect(()=>{if(z.current=!0,D.current=!1,T.current=[],R.current=[],V.current=[],C.current=null,W){if(!B.current||!l.current)return}else if(!a.current||!l.current)return;(async()=>{if(!n.current)try{const k=await xe.getKlines(f,Z,500);if(console.log(" K:",f,Z,":",k?.length,W?"()":""),!Array.isArray(k)||k.length===0){console.warn(" K");return}const L=[...k].reverse(),F=L.map(tt=>({time:Math.floor(tt[0]/1e3),open:parseFloat(String(tt[2])),high:parseFloat(String(tt[3])),low:parseFloat(String(tt[4])),close:parseFloat(String(tt[5]))}));if(T.current=F.filter((tt,vt,pt)=>vt===0||tt.time!==pt[vt-1].time),W){const tt=T.current.map(vt=>({time:vt.time,value:vt.close}));V.current=tt,B.current?.setData(V.current),j()}else a.current?.setData(T.current),j(),st();const q=L.map(tt=>{const vt=parseFloat(String(tt[5])),pt=parseFloat(String(tt[2])),ut=parseFloat(String(tt[6]));return{time:Math.floor(tt[0]/1e3),value:isNaN(ut)||!isFinite(ut)?0:ut,color:vt>=pt?"#0ECB8166":"#F6465D66"}});if(R.current=q.filter((tt,vt,pt)=>vt===0||tt.time!==pt[vt-1].time),R.current.length>0&&(C.current=R.current[0].time*1e3),l.current?.setData(R.current),U(),T.current.length>0){const tt=T.current[T.current.length-1],vt=R.current[R.current.length-1],pt=X(T.current,5),ut=X(T.current,10),dt=X(T.current,20),St=X(T.current,30),yt=ot(R.current,5),_t=ot(R.current,10);y({time:new Date(tt.time*1e3).toLocaleString(),open:tt.open,high:tt.high,low:tt.low,close:tt.close,volume:vt?.value||0,change:tt.close-tt.open,changePercent:(tt.close-tt.open)/tt.open*100,ma5:pt[pt.length-1]?.value,ma10:ut[ut.length-1]?.value,ma20:dt[dt.length-1]?.value,ma30:St[St.length-1]?.value,volMa5:yt[yt.length-1]?.value,volMa10:_t[_t.length-1]?.value}),b({volume:vt?.value||0,volMa5:yt[yt.length-1]?.value,volMa10:_t[_t.length-1]?.value})}const $=W?B.current:a.current,J=T.current.length;if(J>50){e.current?.timeScale().fitContent();try{const tt=$?.priceScale();tt&&(tt.applyOptions({autoScale:!0}),setTimeout(()=>{tt.applyOptions({autoScale:!1})},100))}catch{}}else{e.current?.timeScale().scrollToRealTime();try{const tt=$?.priceScale();tt&&(tt.applyOptions({autoScale:!0}),setTimeout(()=>{tt.applyOptions({autoScale:!1})},100))}catch{}}console.log(" :",J,"",W?"()":"(K)")}catch(k){console.error(" :",k)}})()},[f,d,W]),O.useEffect(()=>{j(),U()},[j,U]),O.useEffect(()=>{const rt=`kline@${f},${Z}`;return console.log(" K:",rt,W?"()":""),se.connect().then(()=>{se.subscribe(rt,(k,L)=>{if(n.current)return;const F=L,q=Math.floor(F.ot/1e3),$=parseFloat(F.c),J=parseFloat(F.o),tt=parseFloat(F.v),vt={time:q,value:isNaN(tt)||!isFinite(tt)?0:tt,color:$>=J?"#0ECB8166":"#F6465D66"};l.current?.update(vt);const pt=R.current.findIndex(ut=>ut.time===q);if(pt>=0?R.current[pt]=vt:R.current.push(vt),W){const ut={time:q,open:J,high:parseFloat(F.h),low:parseFloat(F.l),close:$},dt=T.current.findIndex(_t=>_t.time===q);dt>=0?T.current[dt]=ut:T.current.push(ut);const St={time:q,value:$};B.current?.update(St);const yt=V.current.findIndex(_t=>_t.time===q);if(yt>=0?V.current[yt]=St:V.current.push(St),j(),U(),!M.current){const _t=T.current,xt=X(_t,5),Mt=X(_t,10),jt=X(_t,20),gt=X(_t,30),At=ot(R.current,5),wt=ot(R.current,10);y({time:new Date(F.ot).toLocaleString(),open:ut.open,high:ut.high,low:ut.low,close:ut.close,volume:vt.value,change:ut.close-ut.open,changePercent:(ut.close-ut.open)/ut.open*100,ma5:xt[xt.length-1]?.value,ma10:Mt[Mt.length-1]?.value,ma20:jt[jt.length-1]?.value,ma30:gt[gt.length-1]?.value,volMa5:At[At.length-1]?.value,volMa10:wt[wt.length-1]?.value}),b({volume:vt.value,volMa5:At[At.length-1]?.value,volMa10:wt[wt.length-1]?.value})}}else{const ut={time:q,open:J,high:parseFloat(F.h),low:parseFloat(F.l),close:$};a.current?.update(ut);const dt=T.current.findIndex(St=>St.time===ut.time);if(dt>=0?T.current[dt]=ut:T.current.push(ut),j(),U(),!M.current){const St=T.current,yt=X(St,5),_t=X(St,10),xt=X(St,20),Mt=X(St,30),jt=ot(R.current,5),gt=ot(R.current,10);y({time:new Date(F.ot).toLocaleString(),open:ut.open,high:ut.high,low:ut.low,close:ut.close,volume:vt.value,change:ut.close-ut.open,changePercent:(ut.close-ut.open)/ut.open*100,ma5:yt[yt.length-1]?.value,ma10:_t[_t.length-1]?.value,ma20:xt[xt.length-1]?.value,ma30:Mt[Mt.length-1]?.value,volMa5:jt[jt.length-1]?.value,volMa10:gt[gt.length-1]?.value}),b({volume:vt.value,volMa5:jt[jt.length-1]?.value,volMa10:gt[gt.length-1]?.value})}}})}).catch(()=>{}),()=>{console.log(" K:",rt),se.unsubscribeAll(rt)}},[f,Z,W,X,ot,j,U]);const ft=m?m.change>=0:!0;return _.jsxs("div",{className:"flex flex-col h-full bg-[#181a20]",children:[!r&&_.jsx("div",{className:"flex items-center justify-end border-b border-[#2b3139] flex-shrink-0",style:{padding:v?"4px 8px":"8px 16px"},children:_.jsx("div",{className:"flex items-center gap-2 flex-shrink-0"})}),!r&&!v&&m&&_.jsx("div",{className:"px-3 py-1.5 text-xs flex-shrink-0 border-b border-[#2b3139]",style:{fontSize:"11px"},children:_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex items-center gap-3 mb-0.5",children:[_.jsx("span",{className:"text-[#848e9c]",children:m.time}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.open.toFixed(2)})]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.high.toFixed(2)})]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.low.toFixed(2)})]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:m.close.toFixed(2)})]}),_.jsxs("span",{className:ft?"text-[#0ECB81]":"text-[#F6465D]",children:[ft?"+":"",m.change.toFixed(2)," (",ft?"+":"",m.changePercent.toFixed(2),"%)"]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:"text-white",children:m.volume.toFixed(4)})]})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{style:{color:js[0].color},children:["MA(5,",m.ma5?.toFixed(2)??"--",")"]}),_.jsxs("span",{style:{color:js[1].color},children:["MA(10,",m.ma10?.toFixed(2)??"--",")"]}),_.jsxs("span",{style:{color:js[2].color},children:["MA(20,",m.ma20?.toFixed(2)??"--",")"]}),_.jsxs("span",{style:{color:js[3].color},children:["MA(30,",m.ma30?.toFixed(2)??"--",")"]})]})]})}),_.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[_.jsx("div",{ref:t,className:"absolute inset-0"}),!r&&!v&&x&&_.jsx("div",{className:"absolute left-0 px-3 py-1 text-xs pointer-events-none z-10",style:{fontSize:"11px",top:`calc(${(1-w)*100}% + 4px)`},children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-[#848e9c] font-semibold",children:"VOL"}),_.jsx("span",{className:"text-white",children:x.volume.toFixed(4)}),_.jsxs("span",{style:{color:Ko[0].color},children:["MA(5): ",x.volMa5?.toFixed(4)??"--"]}),_.jsxs("span",{style:{color:Ko[1].color},children:["MA(10): ",x.volMa10?.toFixed(4)??"--"]})]})}),_.jsxs("div",{style:{position:"absolute",left:0,right:0,top:`${(1-w)*100}%`,height:"4px",cursor:"ns-resize",transform:"translateY(-2px)",pointerEvents:"auto"},onMouseDown:rt=>{rt.preventDefault(),N.current=!0;const k=F=>{if(!N.current||!t.current)return;const q=t.current.getBoundingClientRect(),J=1-(F.clientY-q.top)/q.height,tt=Math.max(.2,Math.min(.5,J));S(tt)},L=()=>{N.current=!1,window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",L)};window.addEventListener("mousemove",k),window.addEventListener("mouseup",L)},children:[_.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(240, 185, 11, 0.5)",position:"absolute",top:"50%",transform:"translateY(-50%)"}}),_.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"4px",backgroundColor:"#f0b90b",borderRadius:"2px",opacity:.7}})]})]})]})}const zs=[{period:5,color:"#FF6D00",label:"MA5"},{period:10,color:"#2196F3",label:"MA10"},{period:20,color:"#9C27B0",label:"MA20"},{period:30,color:"#00BCD4",label:"MA30"}],Qo=[{period:5,color:"#FF6D00",label:"VOL MA5"},{period:10,color:"#2196F3",label:"VOL MA10"}];function Dy({isFullscreen:r=!1}){const t=O.useRef(null),e=O.useRef(null),n=O.useRef(null),a=O.useRef(null),l=O.useRef(null),u=O.useRef(new Map),c=O.useRef(new Map),f=Wt(L=>L.symbol),d=Wt(L=>L.interval),v=Yr(),m=d==="time",y=m?"1m":d,[x,b]=O.useState(null),[w,S]=O.useState(null),[M,N]=O.useState(.3),T=O.useRef(!1),R=O.useRef(!1),C=O.useRef([]),z=O.useRef([]),D=O.useRef([]),I=O.useRef(null),B=O.useRef(!0),V=O.useRef(!1),W=O.useRef(null),Z=O.useRef(!1),it=O.useRef(0),X=O.useRef(0),ot=O.useCallback(async()=>{if(!B.current||V.current||!I.current||Z.current)return;const L=X.current;V.current=!0;const F=I.current-1;console.log(" , endTime:",new Date(F).toLocaleString());try{const q=await xe.getKlines(f,y,500,F);if(Z.current||X.current!==L)return;if(console.log(" API:",q?.length),!Array.isArray(q)||q.length===0){console.log(" "),B.current=!1;return}const $=[...q].reverse(),J=$.map(yt=>({time:Math.floor(yt[0]/1e3),open:parseFloat(String(yt[2])),high:parseFloat(String(yt[3])),low:parseFloat(String(yt[4])),close:parseFloat(String(yt[5]))})),tt=$.map(yt=>{const _t=parseFloat(String(yt[5])),xt=parseFloat(String(yt[2]));return{time:Math.floor(yt[0]/1e3),value:parseFloat(String(yt[6])),color:_t>=xt?"#0ECB8166":"#F6465D66"}}),vt=new Set(C.current.map(yt=>yt.time)),pt=J.filter(yt=>!vt.has(yt.time)),ut=tt.filter(yt=>!vt.has(yt.time));if(console.log(" :",J.length,", :",pt.length,""),pt.length===0){console.log(" "),B.current=!1;return}const dt=e.current?.timeScale().getVisibleLogicalRange(),St=pt.length;if(C.current=[...pt,...C.current].sort((yt,_t)=>yt.time-_t.time).filter((yt,_t,xt)=>_t===0||yt.time!==xt[_t-1].time),z.current=[...ut,...z.current].sort((yt,_t)=>yt.time-_t.time).filter((yt,_t,xt)=>_t===0||yt.time!==xt[_t-1].time),C.current.length>0&&(I.current=C.current[0].time*1e3,console.log(" :",new Date(I.current).toLocaleString())),Z.current)return;if(m){const yt=pt.map(_t=>({time:_t.time,value:_t.close}));D.current=[...yt,...D.current].sort((_t,xt)=>_t.time-xt.time).filter((_t,xt,Mt)=>xt===0||_t.time!==Mt[xt-1].time);try{a.current?.setData(D.current)}catch{}}else try{n.current?.setData(C.current)}catch{}try{l.current?.setData(z.current)}catch{}dt&&St>0&&e.current?.timeScale().setVisibleLogicalRange({from:dt.from+St,to:dt.to+St}),console.log(" :",J.length,":",C.current.length,"")}catch(q){console.error(" :",q)}finally{V.current=!1}},[f,y,m]),j=O.useCallback((L,F)=>{const q=[];for(let $=0;$<L.length;$++){if($<F-1)continue;let J=0;for(let tt=0;tt<F;tt++)J+=L[$-tt].close;q.push({time:L[$].time,value:J/F})}return q},[]),U=O.useCallback((L,F)=>{const q=[];for(let $=0;$<L.length;$++){if($<F-1)continue;let J=0;for(let tt=0;tt<F;tt++)J+=L[$-tt].value;q.push({time:L[$].time,value:J/F})}return q},[]),st=O.useCallback(()=>{if(C.current.length===0||Z.current)return;const L=[...C.current];zs.forEach(({period:F})=>{const q=u.current.get(F);if(q&&!Z.current)try{const $=j(L,F);q.setData($),q.applyOptions({visible:!0})}catch{}})},[j]),ft=O.useCallback(()=>{if(z.current.length===0||Z.current)return;const L=[...z.current];Qo.forEach(({period:F})=>{const q=c.current.get(F);if(q&&!Z.current)try{const $=U(L,F);q.setData($),q.applyOptions({visible:!0})}catch{}})},[U]),rt=O.useCallback(()=>{const L=n.current,F=e.current,q=C.current;if(!L||!F||q.length===0||Z.current)return;if(W.current){try{W.current.detach()}catch{}W.current=null}if(Z.current)return;let $;try{$=F.timeScale().getVisibleRange()}catch{return}if(!$)return;let J=-1/0,tt=1/0,vt=null,pt=null;q.forEach(dt=>{const St=typeof dt.time=="number"?dt.time:dt.time.timestamp||0,yt=typeof $.from=="number"?$.from:$.from.timestamp||0,_t=typeof $.to=="number"?$.to:$.to.timestamp||0;St>=yt&&St<=_t&&(dt.high>J&&(J=dt.high,vt=dt.time),dt.low<tt&&(tt=dt.low,pt=dt.time))});const ut=[];if(vt!==null&&J!==-1/0&&ut.push({time:vt,position:"aboveBar",color:"#089981",shape:"arrowDown",text:` ${J.toFixed(2)}`}),pt!==null&&tt!==1/0&&ut.push({time:pt,position:"belowBar",color:"#f23645",shape:"arrowUp",text:` ${tt.toFixed(2)}`}),ut.length>0&&!Z.current&&n.current===L)try{W.current=Bx(L,ut)}catch{}},[]);O.useEffect(()=>{const L=t.current;if(!L)return;++X.current,Z.current=!1,W.current=null,C.current=[],z.current=[],D.current=[],I.current=null,B.current=!0,V.current=!1;const F=Ax(L,{layout:{background:{color:"#181a20"},textColor:"#d1d4dc",panes:{separatorColor:"#2b3139",separatorHoverColor:"rgba(43, 49, 57, 0.8)"}},grid:{vertLines:{color:"rgba(43, 49, 57, 0.5)"},horzLines:{color:"rgba(43, 49, 57, 0.5)"}},width:L.clientWidth,height:L.clientHeight,timeScale:{borderColor:"#2b3139",visible:!0,timeVisible:!0,secondsVisible:!1,barSpacing:16,minBarSpacing:8,rightOffset:5,fixLeftEdge:!1,fixRightEdge:!1,tickMarkMaxCharacterLength:10},localization:{timeFormatter:gt=>new Date(gt*1e3).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},rightPriceScale:{borderColor:"#2b3139",autoScale:!1,mode:0},crosshair:{mode:0,vertLine:{labelBackgroundColor:"#2b3139",labelVisible:!0},horzLine:{labelBackgroundColor:"#2b3139",labelVisible:!0}},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0}});let q=null,$=null;m?($=F.addSeries(Nx,{lineColor:"#2196F3",topColor:"rgba(33, 150, 243, 0.4)",bottomColor:"rgba(33, 150, 243, 0.05)",lineWidth:2,priceLineVisible:!0,lastValueVisible:!0,priceLineWidth:1,priceLineStyle:2,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},0),$.priceScale().applyOptions({scaleMargins:{top:.02,bottom:.02}})):(q=F.addSeries(Ox,{upColor:"#0ECB81",downColor:"#F6465D",borderUpColor:"#0ECB81",borderDownColor:"#F6465D",wickUpColor:"#0ECB81",wickDownColor:"#F6465D",priceLineVisible:!0,lastValueVisible:!0,priceLineWidth:1,priceLineStyle:2},0),q.priceScale().applyOptions({scaleMargins:{top:.02,bottom:.02}}));const J=F.addSeries(kx,{color:"#26a69a",priceFormat:{type:"custom",formatter:gt=>gt>=1e6?(gt/1e6).toFixed(2)+"M":gt>=1e3?(gt/1e3).toFixed(2)+"K":gt>=1?gt.toFixed(2):gt>=.01?gt.toFixed(4):gt.toFixed(8),minMove:1e-8},priceScaleId:"right",lastValueVisible:!0,priceLineVisible:!1},1);zs.forEach(({period:gt,color:At})=>{const wt=F.addSeries(mu,{color:At,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1},0);u.current.set(gt,wt)}),Qo.forEach(({period:gt,color:At})=>{const wt=F.addSeries(mu,{color:At,lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,priceScaleId:"right"},1);c.current.set(gt,wt)}),e.current=F,n.current=q,a.current=$,l.current=J;const tt=F.panes();tt.length>=2&&(tt[0].setStretchFactor(4),tt[1].setStretchFactor(1)),tt.length>0&&jx(tt[0],"/watermark.svg",{alpha:.5,padding:v?10:20,maxWidth:v?150:300,maxHeight:v?75:150}),J.priceScale().applyOptions({visible:!0,autoScale:!0,mode:0,borderColor:"#2b3139",ticksVisible:!0,scaleMargins:{top:.1,bottom:.1}});let vt=!1,pt=0,ut=null;const dt=gt=>{const At=t.current;if(!At)return;const wt=At.getBoundingClientRect(),Nt=gt.clientX-wt.left,Lt=wt.width;if(Nt>Lt-60){vt=!0,pt=gt.clientY;const ae=C.current;if(ae.length>0){const Qt=ae.flatMap(me=>[me.high,me.low]);ut={from:Math.min(...Qt),to:Math.max(...Qt)}}gt.preventDefault()}},St=gt=>{if(!vt||!ut)return;const At=gt.clientY-pt,wt=t.current?.clientHeight||500,Nt=ut.to-ut.from,Lt=At/wt*Nt,ae=m?$:q;ae?.priceScale().applyOptions({autoScale:!1}),ae?.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:ut.from+Lt,maxValue:ut.to+Lt}})})},yt=()=>{vt=!1,ut=null},_t=gt=>{const At=t.current;if(!At)return;const wt=At.getBoundingClientRect(),Nt=gt.clientX-wt.left,Lt=wt.width;if(Nt>Lt-60){const ae=m?$:q;ae?.priceScale().applyOptions({autoScale:!0}),ae?.applyOptions({autoscaleInfoProvider:void 0})}};L.addEventListener("mousedown",dt),L.addEventListener("mousemove",St),L.addEventListener("mouseup",yt),L.addEventListener("mouseleave",yt),L.addEventListener("dblclick",_t),F.subscribeCrosshairMove(gt=>{if(!gt.time||!gt.seriesData){T.current=!1;const Nt=C.current;if(Nt.length>0){const Lt=Nt[Nt.length-1],ae=z.current[z.current.length-1],Qt=j(Nt,5),me=j(Nt,10),Xe=j(Nt,20),ce=j(Nt,30),ge=U(z.current,5),He=U(z.current,10);b({time:new Date(Lt.time*1e3).toLocaleString(),open:Lt.open,high:Lt.high,low:Lt.low,close:Lt.close,volume:ae?.value||0,change:Lt.close-Lt.open,changePercent:(Lt.close-Lt.open)/Lt.open*100,ma5:Qt[Qt.length-1]?.value,ma10:me[me.length-1]?.value,ma20:Xe[Xe.length-1]?.value,ma30:ce[ce.length-1]?.value,volMa5:ge[ge.length-1]?.value,volMa10:He[He.length-1]?.value}),S({volume:ae?.value||0,volMa5:ge[ge.length-1]?.value,volMa10:He[He.length-1]?.value})}return}T.current=!0;const At=gt.seriesData.get(J),wt=C.current.find(Nt=>Nt.time===gt.time);if(wt){const Nt=u.current.get(5),Lt=u.current.get(10),ae=u.current.get(20),Qt=u.current.get(30),me=gt.seriesData.get(Nt),Xe=gt.seriesData.get(Lt),ce=gt.seriesData.get(ae),ge=gt.seriesData.get(Qt),He=c.current.get(5),Ge=c.current.get(10),tn=gt.seriesData.get(He),qr=gt.seriesData.get(Ge);b({time:new Date(gt.time*1e3).toLocaleString(),open:wt.open,high:wt.high,low:wt.low,close:wt.close,volume:At?.value||0,change:wt.close-wt.open,changePercent:(wt.close-wt.open)/wt.open*100,ma5:me?.value,ma10:Xe?.value,ma20:ce?.value,ma30:ge?.value,volMa5:tn?.value,volMa10:qr?.value}),S({volume:At?.value||0,volMa5:tn?.value,volMa10:qr?.value})}});const xt=X.current;F.timeScale().subscribeVisibleTimeRangeChange(()=>{Z.current||X.current!==xt||m||setTimeout(()=>{Z.current||X.current!==xt||rt()},0)});const Mt=()=>{t.current&&e.current&&e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight})},jt=new ResizeObserver(Mt);if(jt.observe(L),window.addEventListener("resize",Mt),setTimeout(Mt,100),C.current.length>0){m?$?.setData(D.current):q?.setData(C.current),J.setData(z.current),st(),ft(),C.current.length>50?F.timeScale().fitContent():F.timeScale().scrollToRealTime();const gt=C.current[C.current.length-1],At=z.current[z.current.length-1],wt=j(C.current,5),Nt=j(C.current,10),Lt=j(C.current,20),ae=j(C.current,30),Qt=U(z.current,5),me=U(z.current,10);b({time:new Date(gt.time*1e3).toLocaleString(),open:gt.open,high:gt.high,low:gt.low,close:gt.close,volume:At?.value||0,change:gt.close-gt.open,changePercent:(gt.close-gt.open)/gt.open*100,ma5:wt[wt.length-1]?.value,ma10:Nt[Nt.length-1]?.value,ma20:Lt[Lt.length-1]?.value,ma30:ae[ae.length-1]?.value,volMa5:Qt[Qt.length-1]?.value,volMa10:me[me.length-1]?.value}),S({volume:At?.value||0,volMa5:Qt[Qt.length-1]?.value,volMa10:me[me.length-1]?.value})}return()=>{if(Z.current=!0,jt.disconnect(),window.removeEventListener("resize",Mt),L&&(L.removeEventListener("mousedown",dt),L.removeEventListener("mousemove",St),L.removeEventListener("mouseup",yt),L.removeEventListener("mouseleave",yt),L.removeEventListener("dblclick",_t)),W.current){try{W.current.detach()}catch{}W.current=null}a.current=null,n.current=null,l.current=null,u.current.clear(),c.current.clear(),F.remove()}},[M,v,m]),O.useEffect(()=>{!e.current||!t.current||setTimeout(()=>{t.current&&e.current&&(e.current.applyOptions({width:t.current.clientWidth,height:t.current.clientHeight}),e.current.timeScale().scrollToRealTime())},100)},[r]),O.useEffect(()=>{if(!e.current)return;const L=F=>{F&&F.from<10&&B.current&&!V.current&&ot()};return e.current.timeScale().subscribeVisibleLogicalRangeChange(L),()=>{e.current?.timeScale().unsubscribeVisibleLogicalRangeChange(L)}},[ot]),O.useEffect(()=>{const L=++it.current,F=X.current;if(B.current=!0,V.current=!1,C.current=[],z.current=[],D.current=[],I.current=null,W.current){try{W.current.detach()}catch{}W.current=null}if(m){if(!a.current||!l.current)return}else if(!n.current||!l.current)return;(async()=>{try{const $=await xe.getKlines(f,y,500);if(L!==it.current||F!==X.current){console.log(" ");return}if(Z.current){console.log(" ");return}if(console.log(" K:",f,y,":",$?.length,m?"()":""),!Array.isArray($)||$.length===0){console.warn(" K");return}const J=[...$].reverse(),tt=J.map(dt=>({time:Math.floor(dt[0]/1e3),open:parseFloat(String(dt[2])),high:parseFloat(String(dt[3])),low:parseFloat(String(dt[4])),close:parseFloat(String(dt[5]))})),vt=J.map(dt=>{const St=parseFloat(String(dt[5])),yt=parseFloat(String(dt[2])),_t=parseFloat(String(dt[6]));return{time:Math.floor(dt[0]/1e3),value:isNaN(_t)||!isFinite(_t)?0:_t,color:St>=yt?"#0ECB8166":"#F6465D66"}});if(C.current=tt.filter((dt,St,yt)=>St===0||dt.time!==yt[St-1].time),z.current=vt.filter((dt,St,yt)=>St===0||dt.time!==yt[St-1].time),m&&(D.current=C.current.map(dt=>({time:dt.time,value:dt.close}))),C.current.length>0&&(I.current=C.current[0].time*1e3),L!==it.current||F!==X.current||Z.current)return;if(!(m?a.current:n.current)||!l.current){console.log(" Series refs ");return}try{if(W.current){try{W.current.detach()}catch{}W.current=null}m?a.current?.setData(D.current):n.current?.setData(C.current),l.current?.setData(z.current),st(),ft(),!m&&L===it.current&&F===X.current&&!Z.current&&n.current&&rt()}catch(dt){L===it.current&&F===X.current&&!Z.current&&console.error(":",dt);return}if(C.current.length>0){const dt=C.current[C.current.length-1],St=z.current[z.current.length-1],yt=j(C.current,5),_t=j(C.current,10),xt=j(C.current,20),Mt=j(C.current,30),jt=U(z.current,5),gt=U(z.current,10);b({time:new Date(dt.time*1e3).toLocaleString(),open:dt.open,high:dt.high,low:dt.low,close:dt.close,volume:St?.value||0,change:dt.close-dt.open,changePercent:(dt.close-dt.open)/dt.open*100,ma5:yt[yt.length-1]?.value,ma10:_t[_t.length-1]?.value,ma20:xt[xt.length-1]?.value,ma30:Mt[Mt.length-1]?.value,volMa5:jt[jt.length-1]?.value,volMa10:gt[gt.length-1]?.value}),S({volume:St?.value||0,volMa5:jt[jt.length-1]?.value,volMa10:gt[gt.length-1]?.value})}if(L!==it.current||F!==X.current||Z.current)return;const ut=m?a.current:n.current;C.current.length>50?(e.current?.timeScale().fitContent(),ut?.priceScale().applyOptions({autoScale:!0}),setTimeout(()=>{L===it.current&&F===X.current&&!Z.current&&ut?.priceScale().applyOptions({autoScale:!1})},100)):(e.current?.timeScale().scrollToRealTime(),ut?.priceScale().applyOptions({autoScale:!0}),setTimeout(()=>{L===it.current&&F===X.current&&!Z.current&&ut?.priceScale().applyOptions({autoScale:!1})},100)),console.log(" K:",C.current.length,"",m?"()":"")}catch($){L===it.current&&F===X.current&&!Z.current&&console.error(" K:",$)}})()},[f,d,m]),O.useEffect(()=>{st(),ft()},[st,ft]),O.useEffect(()=>{const L=`kline@${f},${y}`;return console.log(" K:",L,m?"()":""),se.connect().then(()=>{se.subscribe(L,(F,q)=>{if(Z.current)return;const $=q,J={time:Math.floor($.ot/1e3),open:parseFloat($.o),high:parseFloat($.h),low:parseFloat($.l),close:parseFloat($.c)},tt=parseFloat($.v),vt={time:Math.floor($.ot/1e3),value:isNaN(tt)||!isFinite(tt)?0:tt,color:parseFloat($.c)>=parseFloat($.o)?"#0ECB8166":"#F6465D66"};try{if(m){const ut={time:J.time,value:J.close};a.current?.update(ut)}else n.current?.update(J);l.current?.update(vt)}catch{return}const pt=C.current.findIndex(ut=>ut.time===J.time);if(pt>=0?(C.current[pt]=J,z.current[pt]=vt,m&&(D.current[pt]={time:J.time,value:J.close})):(C.current.push(J),z.current.push(vt),m&&D.current.push({time:J.time,value:J.close})),st(),ft(),!T.current){const ut=C.current,dt=j(ut,5),St=j(ut,10),yt=j(ut,20),_t=j(ut,30),xt=U(z.current,5),Mt=U(z.current,10);b({time:new Date($.ot).toLocaleString(),open:J.open,high:J.high,low:J.low,close:J.close,volume:vt.value,change:J.close-J.open,changePercent:(J.close-J.open)/J.open*100,ma5:dt[dt.length-1]?.value,ma10:St[St.length-1]?.value,ma20:yt[yt.length-1]?.value,ma30:_t[_t.length-1]?.value,volMa5:xt[xt.length-1]?.value,volMa10:Mt[Mt.length-1]?.value}),S({volume:vt.value,volMa5:xt[xt.length-1]?.value,volMa10:Mt[Mt.length-1]?.value})}})}).catch(()=>{}),()=>{console.log(" K:",L),se.unsubscribeAll(L)}},[f,y,m,j,U,st,ft]);const k=x?x.change>=0:!0;return _.jsxs("div",{className:"flex flex-col h-full bg-[#181a20]",children:[!r&&_.jsx("div",{className:"flex items-center justify-end border-b border-[#2b3139] flex-shrink-0",style:{padding:v?"4px 8px":"8px 16px"},children:_.jsx("div",{className:"flex items-center gap-2 flex-shrink-0"})}),!r&&!v&&x&&_.jsxs("div",{className:"px-3 py-1.5 text-xs flex-shrink-0 border-b border-[#2b3139]",style:{fontSize:"11px"},children:[_.jsxs("div",{className:"flex items-center gap-3 mb-0.5",children:[_.jsx("span",{className:"text-[#848e9c]",children:x.time}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:k?"text-[#0ECB81]":"text-[#F6465D]",children:x.open.toFixed(2)})]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:k?"text-[#0ECB81]":"text-[#F6465D]",children:x.high.toFixed(2)})]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:k?"text-[#0ECB81]":"text-[#F6465D]",children:x.low.toFixed(2)})]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:k?"text-[#0ECB81]":"text-[#F6465D]",children:x.close.toFixed(2)})]}),_.jsxs("span",{className:k?"text-[#0ECB81]":"text-[#F6465D]",children:[k?"+":"",x.change.toFixed(2)," (",k?"+":"",x.changePercent.toFixed(2),"%)"]}),_.jsxs("span",{className:"text-[#848e9c]",children:[": ",_.jsx("span",{className:"text-white",children:x.volume.toFixed(4)})]})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{style:{color:zs[0].color},children:["MA(5,",x.ma5?.toFixed(2)??"--",")"]}),_.jsxs("span",{style:{color:zs[1].color},children:["MA(10,",x.ma10?.toFixed(2)??"--",")"]}),_.jsxs("span",{style:{color:zs[2].color},children:["MA(20,",x.ma20?.toFixed(2)??"--",")"]}),_.jsxs("span",{style:{color:zs[3].color},children:["MA(30,",x.ma30?.toFixed(2)??"--",")"]})]})]}),_.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[_.jsx("div",{ref:t,className:"absolute inset-0"}),!r&&!v&&w&&_.jsx("div",{className:"absolute left-0 px-3 py-1 text-xs pointer-events-none z-10",style:{fontSize:"11px",top:`calc(${(1-M)*100}% + 4px)`},children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-[#848e9c] font-semibold",children:"VOL"}),_.jsx("span",{className:"text-white",children:w.volume.toFixed(4)}),_.jsxs("span",{style:{color:Qo[0].color},children:["MA(5): ",w.volMa5?.toFixed(4)??"--"]}),_.jsxs("span",{style:{color:Qo[1].color},children:["MA(10): ",w.volMa10?.toFixed(4)??"--"]})]})}),_.jsxs("div",{style:{position:"absolute",left:0,right:0,top:`${(1-M)*100}%`,height:"4px",cursor:"ns-resize",transform:"translateY(-2px)",pointerEvents:"auto"},onMouseDown:L=>{L.preventDefault(),R.current=!0;const F=$=>{if(!R.current||!t.current)return;const J=t.current.getBoundingClientRect(),vt=1-($.clientY-J.top)/J.height,pt=Math.max(.2,Math.min(.5,vt));N(pt)},q=()=>{R.current=!1,window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",q)};window.addEventListener("mousemove",F),window.addEventListener("mouseup",q)},children:[_.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(240, 185, 11, 0.5)",position:"absolute",top:"50%",transform:"translateY(-50%)"}}),_.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"4px",backgroundColor:"#f0b90b",borderRadius:"2px",opacity:.7}})]})]})]})}function Re(r,t){if(!(!Qi(r)&&!Qi(t))){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=r[e],a=t[e];Qi(a)&&Qi(n)?Re(n,a):r[e]=dl(a)}}}function dl(r){if(!Qi(r))return r;var t=null;Cn(r)?t=[]:t={};for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=r[e];Qi(n)?t[e]=dl(n):t[e]=n}return t}function Cn(r){return Object.prototype.toString.call(r)==="[object Array]"}function xi(r){return typeof r=="function"}function Qi(r){return typeof r=="object"&&at(r)}function Dt(r){return typeof r=="number"&&Number.isFinite(r)}function at(r){return r!=null}function gu(r){return typeof r=="boolean"}function Kt(r){return typeof r=="string"}var vA=/\\(\\)?/g,pA=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function je(r,t,e){if(at(r)){var n=[];t.replace(pA,function(c){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];var v=c;return at(f[1])?v=f[2].replace(vA,"$1"):at(f[0])&&(v=f[0].trim()),n.push(v),""});for(var a=r,l=0,u=n.length;at(a)&&l<u;)a=a?.[n[l++]];return at(a)?a:e??"--"}return e??"--"}function mA(r,t){var e={};return r.formatToParts(new Date(t)).forEach(function(n){var a=n.type,l=n.value;switch(a){case"year":{e.YYYY=l;break}case"month":{e.MM=l;break}case"day":{e.DD=l;break}case"hour":{e.HH=l==="24"?"00":l;break}case"minute":{e.mm=l;break}case"second":{e.ss=l;break}}}),e}function gA(r,t,e){var n=mA(r,t);return e.replace(/YYYY|MM|DD|HH|mm|ss/g,function(a){return n[a]})}function We(r,t){var e=+r;return Dt(e)?e.toFixed(t??2):"".concat(r)}function yA(r){var t=+r;if(Dt(t)){if(t>1e9)return"".concat(+(t/1e9).toFixed(3),"B");if(t>1e6)return"".concat(+(t/1e6).toFixed(3),"M");if(t>1e3)return"".concat(+(t/1e3).toFixed(3),"K")}return"".concat(r)}function bA(r,t){var e="".concat(r);if(t.length===0)return e;if(e.includes(".")){var n=e.split(".");return"".concat(n[0].replace(/(\d)(?=(\d{3})+$)/g,function(a){return"".concat(a).concat(t)}),".").concat(n[1])}return e.replace(/(\d)(?=(\d{3})+$)/g,function(a){return"".concat(a).concat(t)})}function xA(r,t){var e="".concat(r),n=new RegExp("\\.0{"+t+",}[1-9][0-9]*$");if(n.test(e)){var a=e.split("."),l=a.length-1,u=a[l],c=/0*/.exec(u);if(at(c)){var f=c[0].length;return a[l]=u.replace(/0*/,"0{".concat(f,"}")),a.join(".")}}return e}function Ny(r,t){return r.replace(/\{(\w+)\}/g,function(e,n){var a=t[n];return at(a)?a:"{".concat(n,"}")})}var Xa=null;function lr(r){var t,e;return(e=(t=r.ownerDocument.defaultView)===null||t===void 0?void 0:t.devicePixelRatio)!==null&&e!==void 0?e:1}function Hr(r,t,e){return"".concat(t??"normal"," ").concat(r??12,"px ").concat(e??"Helvetica Neue")}function $i(r,t,e,n){if(!at(Xa)){var a=document.createElement("canvas"),l=lr(a);Xa=a.getContext("2d"),Xa.scale(l,l)}return Xa.font=Hr(t,e,n),Math.round(Xa.measureText(r).width)}var sd=function(r,t){return sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},sd(r,t)};function Pt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");sd(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var bt=function(){return bt=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l])}return t},bt.apply(this,arguments)};function yu(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e}function Nd(r,t,e,n){function a(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function c(v){try{d(n.next(v))}catch(m){u(m)}}function f(v){try{d(n.throw(v))}catch(m){u(m)}}function d(v){v.done?l(v.value):a(v.value).then(c,f)}d((n=n.apply(r,[])).next())})}function Od(r,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=c(0),u.throw=c(1),u.return=c(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(d){return function(v){return f([d,v])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(e=0)),e;)try{if(n=1,a&&(l=d[0]&2?a.return:d[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,d[1])).done)return l;switch(a=0,l&&(d=[d[0]&2,l.value]),d[0]){case 0:case 1:l=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!l||d[1]>l[0]&&d[1]<l[3])){e.label=d[1];break}if(d[0]===6&&e.label<l[1]){e.label=l[1],l=d;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(d);break}l[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(r,e)}catch(v){d=[6,v],a=0}finally{n=l=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Vi(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _l(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),a,l=[],u;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)l.push(a.value)}catch(c){u={error:c}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return l}function Wu(r,t,e){if(arguments.length===2)for(var n=0,a=t.length,l;n<a;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return r.concat(l||Array.prototype.slice.call(t))}function bu(r){var t={width:0,height:0,left:0,right:0,top:0,bottom:0};return at(r)&&Re(t,r),t}var If=-1;function xu(r){return xi(window.requestAnimationFrame)?window.requestAnimationFrame(r):window.setTimeout(r,20)}function Oy(r){xi(window.cancelAnimationFrame)?window.cancelAnimationFrame(r):window.clearTimeout(r)}var ad=(function(){function r(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,Re(this._options,t)}return r.prototype._loop=function(){var t=this;this._running=!0;var e=function(){var n;if(t._running){var a=new Date().getTime()-t._time;a<t._options.duration?((n=t._doFrameCallback)===null||n===void 0||n.call(t,a),xu(e)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};xu(e)},r.prototype.doFrame=function(t){return this._doFrameCallback=t,this},r.prototype.setDuration=function(t){return this._options.duration=t,this},r.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},r.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},r.prototype.stop=function(){var t;this._running&&((t=this._doFrameCallback)===null||t===void 0||t.call(this,this._options.duration)),this._running=!1},r})(),Vf=1,ky=new Date().getTime();function su(r){var t=new Date().getTime();return t===ky?++Vf:Vf=1,ky=t,"".concat(r??"").concat(t,"_").concat(Vf)}function An(r,t){var e,n=document.createElement(r),a=t??{};for(var l in a)n.style[l]=(e=a[l])!==null&&e!==void 0?e:"";return n}function ld(r,t,e){var n=0,a=0;for(a=r.length-1;n!==a;){var l=Math.floor((a+n)/2),u=a-n,c=r[l][t];if(e===r[n][t])return n;if(e===r[a][t])return a;if(e===c)return l;if(e>c?n=l:a=l,u<=2)break}return n}function SA(r){var t=Math.floor(Sn(r)),e=Nr(t),n=r/e,a=0;return n<1.5?a=1:n<2.5?a=2:n<3.5?a=3:n<4.5?a=4:n<5.5?a=5:n<6.5?a=6:a=8,r=a*e,+r.toFixed(Math.abs(t))}function jy(r,t){t=Math.max(0,t??0);var e=Math.pow(10,t);return Math.round(r*e)/e}function _A(r){var t=r.toString(),e=t.indexOf("e");if(e>0){var n=+t.slice(e+1);return n<0?-n:0}var a=t.indexOf(".");return a<0?0:t.length-1-a}function Fx(r,t,e){for(var n,a,l=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],u=r.length,c=0;c<u;){var f=r[c];l[0]=Math.max((n=f[t])!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,l[0]),l[1]=Math.min((a=f[e])!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER,l[1]),++c}return l}function Sn(r){return r===0?0:Math.log10(r)}function Nr(r){return Math.pow(10,r)}function zy(){return{from:0,to:0,realFrom:0,realTo:0}}var wA=(function(){function r(t){this._holdingTasks=null,this._running=!1,this._callback=t}return r.prototype.add=function(t){this._running?at(this._holdingTasks)?this._holdingTasks=bt(bt({},this._holdingTasks),t):this._holdingTasks=t:this._runTask(t)},r.prototype._runTask=function(t){return Nd(this,void 0,void 0,function(){var e,n;return Od(this,function(a){switch(a.label){case 0:this._running=!0,a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.all(Object.values(t))];case 2:return a.sent(),[3,4];case 3:return this._running=!1,(n=this._callback)===null||n===void 0||n.call(this),at(this._holdingTasks)&&(e=this._holdingTasks,this._runTask(e),this._holdingTasks=null),[7];case 4:return[2]}})})},r.prototype.clear=function(){this._holdingTasks=null},r})(),Ue={PRICE:2,VOLUME:0},EA=(function(){function r(){this._callbacks=[]}return r.prototype.subscribe=function(t){var e=this._callbacks.indexOf(t);e<0&&this._callbacks.push(t)},r.prototype.unsubscribe=function(t){if(xi(t)){var e=this._callbacks.indexOf(t);e>-1&&this._callbacks.splice(e,1)}else this._callbacks=[]},r.prototype.execute=function(t){this._callbacks.forEach(function(e){e(t)})},r.prototype.isEmpty=function(){return this._callbacks.length===0},r})();function Ks(r){return r==="transparent"||r==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(r)||/^[hH][Ss][Ll][Aa]\(([\s]*(3603[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(r)}function or(r,t){var e=r.replace(/^#/,""),n=parseInt(e,16),a=n>>16&255,l=n>>8&255,u=n&255;return"rgba(".concat(a,", ").concat(l,", ").concat(u,", ").concat(t??1,")")}var Rt={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function CA(){return{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]}}}function MA(){var r={show:!0,color:Rt.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:"candle_solid",bar:{compareRule:"current_open",upColor:Rt.GREEN,downColor:Rt.RED,noChangeColor:Rt.GREY,upBorderColor:Rt.GREEN,downBorderColor:Rt.RED,noChangeBorderColor:Rt.GREY,upWickColor:Rt.GREEN,downWickColor:Rt.RED,noChangeWickColor:Rt.GREY},area:{lineSize:2,lineColor:Rt.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:or(Rt.BLUE,.01)},{offset:1,color:or(Rt.BLUE,.2)}],point:{show:!0,color:Rt.BLUE,radius:4,rippleColor:or(Rt.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:bt({},r),low:bt({},r),last:{show:!0,compareRule:"current_open",upColor:Rt.GREEN,downColor:Rt.RED,noChangeColor:Rt.GREY,line:{show:!0,style:"dashed",dashedValue:[4,4],size:1},text:{show:!0,style:"fill",size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:"solid",borderSize:0,borderDashedValue:[2,2],color:Rt.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2},extendTexts:[]}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",rect:{position:"fixed",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},title:{show:!0,size:14,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,template:"{ticker}  {period}"},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a",template:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]},features:[]}}}function TA(){var r=or(Rt.GREEN,.7),t=or(Rt.RED,.7);return{ohlc:{compareRule:"current_open",upColor:r,downColor:t,noChangeColor:Rt.GREY},bars:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:r,downColor:t,noChangeColor:Rt.GREY}],lines:["#FF9600","#935EBD",Rt.BLUE,"#E11D74","#01C5C4"].map(function(e){return{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:e}}),circles:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:r,downColor:t,noChangeColor:Rt.GREY}],lastValueMark:{show:!1,text:{show:!1,style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",title:{show:!0,showName:!0,showParams:!0,size:12,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:Rt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a"},features:[]}}}function Ly(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:Rt.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function AA(){return{show:!0,horizontal:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:Rt.GREY},text:{show:!0,style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:Rt.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Rt.GREY},features:[]},vertical:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:Rt.GREY},text:{show:!0,style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:Rt.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Rt.GREY}}}}function RA(){var r=or(Rt.BLUE,.35),t=or(Rt.BLUE,.25);function e(){return{style:"fill",color:Rt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:Rt.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:Rt.BLUE}}return{point:{color:Rt.BLUE,borderColor:r,borderSize:1,radius:5,activeColor:Rt.BLUE,activeBorderColor:r,activeBorderSize:3,activeRadius:5},line:{style:"solid",smooth:!1,color:Rt.BLUE,size:1,dashedValue:[2,2]},rect:{style:"fill",color:t,borderColor:Rt.BLUE,borderSize:1,borderRadius:0,borderStyle:"solid",borderDashedValue:[2,2]},polygon:{style:"fill",color:Rt.BLUE,borderColor:Rt.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},circle:{style:"fill",color:t,borderColor:Rt.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},arc:{style:"solid",color:Rt.BLUE,size:1,dashedValue:[2,2]},text:e()}}function DA(){return{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:or(Rt.BLUE,.08)}}function NA(){return{grid:CA(),candle:MA(),indicator:TA(),xAxis:Ly(),yAxis:Ly(),separator:DA(),crosshair:AA(),overlay:RA()}}function kd(r,t,e,n){var a=r.result,l=r.figures,u=r.styles,c=je(u,"circles",e.circles),f=c.length,d=je(u,"bars",e.bars),v=d.length,m=je(u,"lines",e.lines),y=m.length,x=0,b=0,w=0,S,M=0;l.forEach(function(N){var T;switch(N.type){case"circle":{M=x;var R=c[x%f];S=bt(bt({},R),{color:R.noChangeColor}),x++;break}case"bar":{M=b;var C=d[b%v];S=bt(bt({},C),{color:C.noChangeColor}),b++;break}case"line":{M=w,S=m[w%y],w++;break}}if(at(N.type)){var z=(T=N.styles)===null||T===void 0?void 0:T.call(N,{data:{prev:a[t-1],current:a[t],next:a[t+1]},indicator:r,defaultStyles:e});n(N,bt(bt({},S),z),M)}})}var OA=(function(){function r(t){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series="normal",this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(e,n){var a=JSON.stringify(e.calcParams)!==JSON.stringify(n.calcParams)||e.figures!==n.figures||e.calc!==n.calc,l=a||e.shortName!==n.shortName||e.series!==n.series||e.minValue!==n.minValue||e.maxValue!==n.maxValue||e.precision!==n.precision||e.shouldOhlc!==n.shouldOhlc||e.shouldFormatBigNumber!==n.shouldFormatBigNumber||e.visible!==n.visible||e.zLevel!==n.zLevel||e.extendData!==n.extendData||e.regenerateFigures!==n.regenerateFigures||e.createTooltipDataSource!==n.createTooltipDataSource||e.draw!==n.draw;return{calc:a,draw:l}},this.calc=function(){return[]},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.result=[],this._lockSeriesPrecision=!1,this.override(t),this._lockSeriesPrecision=!1}return r.prototype.override=function(t){var e,n,a=this,l=a.result,u=yu(a,["result"]);this._prevIndicator=bt(bt({},dl(u)),{result:l});var c=t.id,f=t.name,d=t.shortName,v=t.precision,m=t.styles,y=t.figures,x=t.calcParams,b=yu(t,["id","name","shortName","precision","styles","figures","calcParams"]);!Kt(this.id)&&Kt(c)&&(this.id=c),Kt(this.name)||(this.name=f??""),this.shortName=(e=d??this.shortName)!==null&&e!==void 0?e:this.name,Dt(v)&&(this.precision=v,this._lockSeriesPrecision=!0),at(m)&&((n=this.styles)!==null&&n!==void 0||(this.styles={}),Re(this.styles,m)),Re(this,b),at(x)&&(this.calcParams=x,xi(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=y??this.figures},r.prototype.setSeriesPrecision=function(t){this._lockSeriesPrecision||(this.precision=t)},r.prototype.shouldUpdateImp=function(){var t=this._prevIndicator.zLevel!==this.zLevel,e=this.shouldUpdate(this._prevIndicator,this);return gu(e)?{calc:e,draw:e,sort:t}:bt(bt({},e),{sort:t})},r.prototype.calcImp=function(t){return Nd(this,void 0,void 0,function(){var e;return Od(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return e=n.sent(),this.result=e,[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})},r.extend=function(t){var e=(function(n){Pt(a,n);function a(){return n.call(this,t)||this}return a})(r);return e},r})(),kA={name:"AVP",shortName:"AVP",series:"price",precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(r){var t=0,e=0;return r.map(function(n){var a,l,u={},c=(a=n.turnover)!==null&&a!==void 0?a:0,f=(l=n.volume)!==null&&l!==void 0?l:0;return t+=c,e+=f,e!==0&&(u.avp=t/e),u})}},jA={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(r){var t,e,n=r.data,a=r.indicator,l=r.defaultStyles,u=n.prev,c=n.current,f=(t=u?.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,d=(e=c?.ao)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,v="";d>f?v=je(a.styles,"bars[0].upColor",l.bars[0].upColor):v=je(a.styles,"bars[0].downColor",l.bars[0].downColor);var m=d>f?"stroke":"fill";return{color:v,style:m,borderColor:v}}}],calc:function(r,t){var e=t.calcParams,n=Math.max(e[0],e[1]),a=0,l=0,u=0,c=0;return r.map(function(f,d){var v={},m=(f.low+f.high)/2;if(a+=m,l+=m,d>=e[0]-1){u=a/e[0];var y=r[d-(e[0]-1)];a-=(y.low+y.high)/2}if(d>=e[1]-1){c=l/e[1];var y=r[d-(e[1]-1)];l-=(y.low+y.high)/2}return d>=n-1&&(v.ao=u-c),v})}},zA={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"bias".concat(e+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[];return r.map(function(l,u){var c={},f=l.close;return e.forEach(function(d,v){var m;if(a[v]=((m=a[v])!==null&&m!==void 0?m:0)+f,u>=d-1){var y=a[v]/e[v];c[n[v].key]=(f-y)/y*100,a[v]-=r[u-(d-1)].close}}),c})}};function LA(r,t){var e=r.length,n=0;return r.forEach(function(a){var l=a.close-t;n+=l*l}),n=Math.abs(n),Math.sqrt(n/e)}var BA={name:"BOLL",shortName:"BOLL",series:"price",calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=e[0]-1,a=0;return r.map(function(l,u){var c=l.close,f={};if(a+=c,u>=n){f.mid=a/e[0];var d=LA(r.slice(u-n,u+1),f.mid);f.up=f.mid+e[1]*d,f.dn=f.mid-e[1]*d,a-=r[u-n].close}return f})}},FA={name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0;return r.map(function(c,f){var d,v,m={},y=c.high,x=c.low,b=c.open,w=((d=r[f-1])!==null&&d!==void 0?d:c).close;if(l+=y-b,u+=b-x,n+=y-w,a+=w-x,f>=e[0]-1){u!==0?m.ar=l/u*100:m.ar=0,a!==0?m.br=n/a*100:m.br=0;var S=r[f-(e[0]-1)],M=S.high,N=S.low,T=S.open,R=((v=r[f-e[0]])!==null&&v!==void 0?v:r[f-(e[0]-1)]).close;n-=M-R,a-=R-N,l-=M-T,u-=T-N}return m})}},PA={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=Math.max.apply(Math,Wu([],_l(e),!1)),a=[],l=[];return r.map(function(u,c){var f={},d=u.close;if(e.forEach(function(m,y){var x;a[y]=((x=a[y])!==null&&x!==void 0?x:0)+d,c>=m-1&&(l[y]=a[y]/m,a[y]-=r[c-(m-1)].close)}),c>=n-1){var v=0;l.forEach(function(m){v+=m}),f.bbi=v/4}return f})}},IA={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=e[0]-1,a=0,l=[];return r.map(function(u,c){var f={},d=(u.high+u.low+u.close)/3;if(a+=d,l.push(d),c>=n){var v=a/e[0],m=l.slice(c-n,c+1),y=0;m.forEach(function(w){y+=Math.abs(w-v)});var x=y/e[0];f.cci=x!==0?(d-v)/x/.015:0;var b=(r[c-n].high+r[c-n].low+r[c-n].close)/3;a-=b}return f})}},VA={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=Math.ceil(e[1]/2.5+1),a=Math.ceil(e[2]/2.5+1),l=Math.ceil(e[3]/2.5+1),u=Math.ceil(e[4]/2.5+1),c=0,f=[],d=0,v=[],m=0,y=[],x=0,b=[],w=[];return r.forEach(function(S,M){var N,T,R,C,z,D={},I=(N=r[M-1])!==null&&N!==void 0?N:S,B=(I.high+I.close+I.low+I.open)/4,V=Math.max(0,S.high-B),W=Math.max(0,B-S.low);M>=e[0]-1&&(W!==0?D.cr=V/W*100:D.cr=0,c+=D.cr,d+=D.cr,m+=D.cr,x+=D.cr,M>=e[0]+e[1]-2&&(f.push(c/e[1]),M>=e[0]+e[1]+n-3&&(D.ma1=f[f.length-1-n]),c-=(T=w[M-(e[1]-1)].cr)!==null&&T!==void 0?T:0),M>=e[0]+e[2]-2&&(v.push(d/e[2]),M>=e[0]+e[2]+a-3&&(D.ma2=v[v.length-1-a]),d-=(R=w[M-(e[2]-1)].cr)!==null&&R!==void 0?R:0),M>=e[0]+e[3]-2&&(y.push(m/e[3]),M>=e[0]+e[3]+l-3&&(D.ma3=y[y.length-1-l]),m-=(C=w[M-(e[3]-1)].cr)!==null&&C!==void 0?C:0),M>=e[0]+e[4]-2&&(b.push(x/e[4]),M>=e[0]+e[4]+u-3&&(D.ma4=b[b.length-1-u]),x-=(z=w[M-(e[4]-1)].cr)!==null&&z!==void 0?z:0)),w.push(D)}),w}},UA={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=Math.max(e[0],e[1]),a=0,l=0,u=0,c=[];return r.forEach(function(f,d){var v,m={},y=f.close;a+=y,l+=y;var x=0,b=0;if(d>=e[0]-1&&(x=a/e[0],a-=r[d-(e[0]-1)].close),d>=e[1]-1&&(b=l/e[1],l-=r[d-(e[1]-1)].close),d>=n-1){var w=x-b;m.dma=w,u+=w,d>=n+e[2]-2&&(m.ama=u/e[2],u-=(v=c[d-(e[2]-1)].dma)!==null&&v!==void 0?v:0)}c.push(m)}),c}},HA={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,c=0,f=0,d=0,v=0,m=[];return r.forEach(function(y,x){var b,w,S={},M=(b=r[x-1])!==null&&b!==void 0?b:y,N=M.close,T=y.high,R=y.low,C=T-R,z=Math.abs(T-N),D=Math.abs(N-R),I=T-M.high,B=M.low-R,V=Math.max(Math.max(C,z),D),W=I>0&&I>B?I:0,Z=B>0&&B>I?B:0;if(n+=V,a+=W,l+=Z,x>=e[0]-1){x>e[0]-1?(u=u-u/e[0]+V,c=c-c/e[0]+W,f=f-f/e[0]+Z):(u=n,c=a,f=l);var it=0,X=0;u!==0&&(it=c*100/u,X=f*100/u),S.pdi=it,S.mdi=X;var ot=0;X+it!==0&&(ot=Math.abs(X-it)/(X+it)*100),d+=ot,x>=e[0]*2-2&&(x>e[0]*2-2?v=(v*(e[0]-1)+ot)/e[0]:v=d/e[0],S.adx=v,x>=e[0]*2+e[1]-3&&(S.adxr=(((w=m[x-(e[1]-1)].adx)!==null&&w!==void 0?w:0)+v)/2))}m.push(S)}),m}},YA={name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=[];return r.map(function(l,u){var c,f={};if(u>0){var d=r[u-1],v=l.high,m=l.low,y=(c=l.volume)!==null&&c!==void 0?c:0,x=(v+m)/2-(d.high+d.low)/2;if(y===0||v-m===0)f.emv=0;else{var b=y/1e8/(v-m);f.emv=x/b}n+=f.emv,a.push(f.emv),u>=e[0]&&(f.maEmv=n/e[0],n-=a[u-e[0]])}return f})}},WA={name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"ema".concat(e+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=0,l=[];return r.map(function(u,c){var f={},d=u.close;return a+=d,e.forEach(function(v,m){c>=v-1&&(c>v-1?l[m]=(2*d+(v-1)*l[m])/(v+1):l[m]=a/v,f[n[m].key]=l[m])}),f})}},qA={name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=[];return r.forEach(function(l,u){var c,f={};if(u>=e[0]){var d=l.close,v=r[u-e[0]].close;f.mtm=d-v,n+=f.mtm,u>=e[0]+e[1]-1&&(f.maMtm=n/e[1],n-=(c=a[u-(e[1]-1)].mtm)!==null&&c!==void 0?c:0)}a.push(f)}),a}},XA={name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"ma".concat(e+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[];return r.map(function(l,u){var c={},f=l.close;return e.forEach(function(d,v){var m;a[v]=((m=a[v])!==null&&m!==void 0?m:0)+f,u>=d-1&&(c[n[v].key]=a[v]/d,a[v]-=r[u-(d-1)].close)}),c})}},GA={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(r){var t,e,n=r.data,a=r.indicator,l=r.defaultStyles,u=n.prev,c=n.current,f=(t=u?.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,d=(e=c?.macd)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER,v="";d>0?v=je(a.styles,"bars[0].upColor",l.bars[0].upColor):d<0?v=je(a.styles,"bars[0].downColor",l.bars[0].downColor):v=je(a.styles,"bars[0].noChangeColor",l.bars[0].noChangeColor);var m=f<d?"stroke":"fill";return{style:m,color:v,borderColor:v}}}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,c=0,f=0,d=Math.max(e[0],e[1]);return r.map(function(v,m){var y={},x=v.close;return n+=x,m>=e[0]-1&&(m>e[0]-1?a=(2*x+(e[0]-1)*a)/(e[0]+1):a=n/e[0]),m>=e[1]-1&&(m>e[1]-1?l=(2*x+(e[1]-1)*l)/(e[1]+1):l=n/e[1]),m>=d-1&&(u=a-l,y.dif=u,c+=u,m>=d+e[2]-2&&(m>d+e[2]-2?f=(u*2+f*(e[2]-1))/(e[2]+1):f=c/e[2],y.macd=(u-f)*2,y.dea=f)),y})}},KA={name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=[];return r.forEach(function(u,c){var f,d,v,m,y=(f=r[c-1])!==null&&f!==void 0?f:u;u.close<y.close?a-=(d=u.volume)!==null&&d!==void 0?d:0:u.close>y.close&&(a+=(v=u.volume)!==null&&v!==void 0?v:0);var x={obv:a};n+=a,c>=e[0]-1&&(x.maObv=n/e[0],n-=(m=l[c-(e[0]-1)].obv)!==null&&m!==void 0?m:0),l.push(x)}),l}},QA={name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(r){var t=0;return r.map(function(e,n){var a,l,u={},c=e.close,f=(a=e.volume)!==null&&a!==void 0?a:1,d=((l=r[n-1])!==null&&l!==void 0?l:e).close,v=0,m=d*f;return m!==0&&(v=(c-d)/m),t+=v,u.pvt=t,u})}},$A={name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=[],u=[];return r.forEach(function(c,f){var d,v,m={},y=((d=r[f-1])!==null&&d!==void 0?d:c).close,x=c.close-y>0?1:0;l.push(x),n+=x,f>=e[0]-1&&(m.psy=n/e[0]*100,a+=m.psy,f>=e[0]+e[1]-2&&(m.maPsy=a/e[1],a-=(v=u[f-(e[1]-1)].psy)!==null&&v!==void 0?v:0),n-=l[f-(e[0]-1)]),u.push(m)}),u}},ZA={name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=[],a=0;return r.forEach(function(l,u){var c,f,d={};if(u>=e[0]-1){var v=l.close,m=((c=r[u-e[0]])!==null&&c!==void 0?c:r[u-(e[0]-1)]).close;m!==0?d.roc=(v-m)/m*100:d.roc=0,a+=d.roc,u>=e[0]-1+e[1]-1&&(d.maRoc=a/e[1],a-=(f=n[u-(e[1]-1)].roc)!==null&&f!==void 0?f:0)}n.push(d)}),n}},JA={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){var n=e+1;return{key:"rsi".concat(n),title:"RSI".concat(n,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[],l=[];return r.map(function(u,c){var f,d={},v=((f=r[c-1])!==null&&f!==void 0?f:u).close,m=u.close-v;return e.forEach(function(y,x){var b,w,S;if(m>0?a[x]=((b=a[x])!==null&&b!==void 0?b:0)+m:l[x]=((w=l[x])!==null&&w!==void 0?w:0)+Math.abs(m),c>=y-1){l[x]!==0?d[n[x].key]=100-100/(1+a[x]/l[x]):d[n[x].key]=0;var M=r[c-(y-1)],N=(S=r[c-y])!==null&&S!==void 0?S:M,T=M.close-N.close;T>0?a[x]-=T:l[x]-=Math.abs(T)}}),d})}},tR={name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(r,t){var e=t.calcParams,n=0,a=0;return r.map(function(l,u){var c={},f=l.close;return n+=f,u>=e[0]-1&&(u>e[0]-1?a=(f*e[1]+a*(e[0]-e[1]+1))/(e[0]+1):a=n/e[0],c.sma=a),c})}},eR={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=[];return r.forEach(function(a,l){var u,c,f,d,v={},m=a.close;if(l>=e[0]-1){var y=Fx(r.slice(l-(e[0]-1),l+1),"high","low"),x=y[0],b=y[1],w=x-b,S=(m-b)/(w===0?1:w)*100;v.k=((e[1]-1)*((c=(u=n[l-1])===null||u===void 0?void 0:u.k)!==null&&c!==void 0?c:50)+S)/e[1],v.d=((e[2]-1)*((d=(f=n[l-1])===null||f===void 0?void 0:f.d)!==null&&d!==void 0?d:50)+v.k)/e[2],v.j=3*v.k-2*v.d}n.push(v)}),n}},iR={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(r){var t,e,n,a=r.data,l=r.indicator,u=r.defaultStyles,c=a.current,f=(t=c?.sar)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,d=(((e=c?.high)!==null&&e!==void 0?e:0)+((n=c?.low)!==null&&n!==void 0?n:0))/2,v=f<d?je(l.styles,"circles[0].upColor",u.circles[0].upColor):je(l.styles,"circles[0].downColor",u.circles[0].downColor);return{color:v}}}],calc:function(r,t){var e=t.calcParams,n=e[0]/100,a=e[1]/100,l=e[2]/100,u=n,c=-100,f=!1,d=0;return r.map(function(v,m){var y=d,x=v.high,b=v.low;if(f){(c===-100||c<x)&&(c=x,u=Math.min(u+a,l)),d=y+u*(c-y);var w=Math.min(r[Math.max(1,m)-1].low,b);d>v.low?(d=c,u=n,c=-100,f=!f):d>w&&(d=w)}else{(c===-100||c>b)&&(c=b,u=Math.min(u+a,l)),d=y+u*(c-y);var S=Math.max(r[Math.max(1,m)-1].high,x);d<v.high?(d=c,u=0,c=-100,f=!f):d<S&&(d=S)}return{high:x,low:b,sar:d}})}},nR={name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,c=0,f=0,d=0,v=[];return r.forEach(function(m,y){var x,b={},w=m.close;if(n+=w,y>=e[0]-1&&(y>e[0]-1?a=(2*w+(e[0]-1)*a)/(e[0]+1):a=n/e[0],c+=a,y>=e[0]*2-2&&(y>e[0]*2-2?l=(2*a+(e[0]-1)*l)/(e[0]+1):l=c/e[0],f+=l,y>=e[0]*3-3))){var S=0,M=0;y>e[0]*3-3?(S=(2*l+(e[0]-1)*u)/(e[0]+1),M=(S-u)/u*100):S=f/e[0],u=S,b.trix=M,d+=M,y>=e[0]*3+e[1]-4&&(b.maTrix=d/e[1],d-=(x=v[y-(e[1]-1)].trix)!==null&&x!==void 0?x:0)}v.push(b)}),v}};function By(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(r){var t=r.data,e=r.indicator,n=r.defaultStyles,a=t.current,l=je(e.styles,"bars[0].noChangeColor",n.bars[0].noChangeColor);return at(a)&&(a.close>a.open?l=je(e.styles,"bars[0].upColor",n.bars[0].upColor):a.close<a.open&&(l=je(e.styles,"bars[0].downColor",n.bars[0].downColor))),{color:l}}}}var rR={name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},By()],regenerateFigures:function(r){var t=r.map(function(e,n){return{key:"ma".concat(n+1),title:"MA".concat(e,": "),type:"line"}});return t.push(By()),t},calc:function(r,t){var e=t.calcParams,n=t.figures,a=[];return r.map(function(l,u){var c,f=(c=l.volume)!==null&&c!==void 0?c:0,d={volume:f,open:l.open,close:l.close};return e.forEach(function(v,m){var y,x;a[m]=((y=a[m])!==null&&y!==void 0?y:0)+f,u>=v-1&&(d[n[m].key]=a[m]/v,a[m]-=(x=r[u-(v-1)].volume)!==null&&x!==void 0?x:0)}),d})}},sR={name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(r,t){var e=t.calcParams,n=0,a=0,l=0,u=0,c=[];return r.forEach(function(f,d){var v,m,y,x,b,w={},S=f.close,M=((v=r[d-1])!==null&&v!==void 0?v:f).close,N=(m=f.volume)!==null&&m!==void 0?m:0;if(S>M?n+=N:S<M?a+=N:l+=N,d>=e[0]-1){var T=l/2;a+T===0?w.vr=0:w.vr=(n+T)/(a+T)*100,u+=w.vr,d>=e[0]+e[1]-2&&(w.maVr=u/e[1],u-=(y=c[d-(e[1]-1)].vr)!==null&&y!==void 0?y:0);var R=r[d-(e[0]-1)],C=(x=r[d-e[0]])!==null&&x!==void 0?x:R,z=R.close,D=(b=R.volume)!==null&&b!==void 0?b:0;z>C.close?n-=D:z<C.close?a-=D:l-=D}c.push(w)}),c}},aR={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(r){return r.map(function(t,e){return{key:"wr".concat(e+1),title:"WR".concat(e+1,": "),type:"line"}})},calc:function(r,t){var e=t.calcParams,n=t.figures;return r.map(function(a,l){var u={},c=a.close;return e.forEach(function(f,d){var v=f-1;if(l>=v){var m=Fx(r.slice(l-v,l+1),"high","low"),y=m[0],x=m[1],b=y-x;u[n[d].key]=b===0?0:(c-y)/b*100}}),u})}},Px={},lR=[kA,jA,zA,BA,FA,PA,IA,VA,UA,HA,YA,WA,qA,XA,GA,KA,QA,$A,ZA,JA,tR,eR,iR,nR,rR,sR,aR];lR.forEach(function(r){Px[r.name]=OA.extend(r)});function Ix(r){var t;return(t=Px[r])!==null&&t!==void 0?t:null}function Pi(r,t){var e,n=(e=t?.ignoreEvent)!==null&&e!==void 0?e:!1;return gu(n)?!n:!n.includes(r)}var Fy=1,Ga=-1,oR="overlay_",Ls="overlay_figure_",uR=(function(){function r(t){this.groupId="",this.totalStep=1,this.currentStep=Fy,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode="normal",this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseMove=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(t)}return r.prototype.override=function(t){var e,n;this._prevOverlay=dl(bt(bt({},this),{_prevOverlay:null}));var a=t.id,l=t.name;t.currentStep;var u=t.points,c=t.styles,f=yu(t,["id","name","currentStep","points","styles"]);if(Re(this,f),Kt(this.name)||(this.name=l??""),!Kt(this.id)&&Kt(a)&&(this.id=a),at(c)&&((e=this.styles)!==null&&e!==void 0||(this.styles={}),Re(this.styles,c)),Cn(u)&&u.length>0){var d=0;if(this.points=Wu([],_l(u),!1),u.length>=this.totalStep-1?(this.currentStep=Ga,d=this.totalStep-1):(this.currentStep=u.length+1,d=u.length),xi(this.performEventMoveForDrawing))for(var v=0;v<d;v++)this.performEventMoveForDrawing({currentStep:v+2,mode:this.mode,points:this.points,performPointIndex:v,performPoint:this.points[v]});this.currentStep===Ga&&((n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},r.prototype.getPrevZLevel=function(){return this._prevZLevel},r.prototype.setPrevZLevel=function(t){this._prevZLevel=t},r.prototype.shouldUpdate=function(){var t=this._prevOverlay.zLevel!==this.zLevel,e=t||JSON.stringify(this._prevOverlay.points)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles;return{sort:t,draw:e}},r.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=Ga:this.currentStep++},r.prototype.forceComplete=function(){this.currentStep=Ga},r.prototype.isDrawing=function(){return this.currentStep!==Ga},r.prototype.isStart=function(){return this.currentStep===Fy},r.prototype.eventMoveForDrawing=function(t){var e,n=this.currentStep-1,a={};Dt(t.timestamp)&&(a.timestamp=t.timestamp),Dt(t.dataIndex)&&(a.dataIndex=t.dataIndex),Dt(t.value)&&(a.value=t.value),this.points[n]=a,(e=this.performEventMoveForDrawing)===null||e===void 0||e.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:n,performPoint:a})},r.prototype.eventPressedPointMove=function(t,e){var n;this.points[e].timestamp=t.timestamp,Dt(t.value)&&(this.points[e].value=t.value),(n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:e,performPoint:this.points[e]})},r.prototype.startPressedMove=function(t){this._prevPressedPoint=bt({},t),this._prevPressedPoints=dl(this.points)},r.prototype.eventPressedOtherMove=function(t,e){if(this._prevPressedPoint!==null){var n=null;Dt(t.dataIndex)&&Dt(this._prevPressedPoint.dataIndex)&&(n=t.dataIndex-this._prevPressedPoint.dataIndex);var a=null;Dt(t.value)&&Dt(this._prevPressedPoint.value)&&(a=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(l){var u;Dt(l.timestamp)&&(l.dataIndex=e.timestampToDataIndex(l.timestamp));var c=bt({},l);return Dt(n)&&Dt(l.dataIndex)&&(c.dataIndex=l.dataIndex+n,c.timestamp=(u=e.dataIndexToTimestamp(c.dataIndex))!==null&&u!==void 0?u:void 0),Dt(a)&&Dt(l.value)&&(c.value=l.value+a),c})}},r.extend=function(t){var e=(function(n){Pt(a,n);function a(){return n.call(this,t)||this}return a})(r);return e},r})(),cR={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t,e,n,a=r.chart,l=r.coordinates,u=r.bounding,c=r.overlay,f=r.yAxis,d=c.points;if(l.length>0){var v=0;if(!((t=f?.isInCandle())!==null&&t!==void 0)||t)v=(n=(e=a.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE;else{var m=a.getIndicators({paneId:c.paneId});m.forEach(function(T){v=Math.max(v,T.precision)})}var y=[],x=[],b=0,w=u.width;if(l.length>1&&Dt(d[0].value)&&Dt(d[1].value)){var S=[1,.786,.618,.5,.382,.236,0],M=l[0].y-l[1].y,N=d[0].value-d[1].value;S.forEach(function(T){var R,C=l[1].y+M*T,z=a.getDecimalFold().format(a.getThousandsSeparator().format((((R=d[1].value)!==null&&R!==void 0?R:0)+N*T).toFixed(v)));y.push({coordinates:[{x:b,y:C},{x:w,y:C}]}),x.push({x:b,y:C,text:"".concat(z," (").concat((T*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:y},{type:"text",isCheckEvent:!1,attrs:x}]}return[]}},hR={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding,n={x:0,y:t[0].y};return at(t[1])&&t[0].x<t[1].x&&(n.x=e.width),[{type:"line",attrs:{coordinates:[t[0],n]}}]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].value=e.value,t[1].value=e.value},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].value=n.value)}},fR={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=[];return t.length===2&&e.push({coordinates:t}),[{type:"line",attrs:e}]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].value=e.value,t[1].value=e.value},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].value=n.value)}},dR={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]}}]}},jd=(function(){function r(){this._children=[],this._callbacks=new Map}return r.prototype.registerEvent=function(t,e){return this._callbacks.set(t,e),this},r.prototype.onEvent=function(t,e){var n=this._callbacks.get(t);return at(n)&&this.checkEventOn(e)?n(e):!1},r.prototype.dispatchEventToChildren=function(t,e){var n=this._children.length-1;if(n>-1){for(var a=n;a>-1;a--)if(this._children[a].dispatchEvent(t,e))return!0}return!1},r.prototype.dispatchEvent=function(t,e){return this.dispatchEventToChildren(t,e)?!0:this.onEvent(t,e)},r.prototype.addChild=function(t){return this._children.push(t),this},r.prototype.clear=function(){this._children=[]},r})(),ke=2,vR=(function(r){Pt(t,r);function t(e){var n=r.call(this)||this;return n.attrs=e.attrs,n.styles=e.styles,n}return t.prototype.checkEventOn=function(e){return this.checkEventOnImp(e,this.attrs,this.styles)},t.prototype.setAttrs=function(e){return this.attrs=e,this},t.prototype.setStyles=function(e){return this.styles=e,this},t.prototype.draw=function(e){this.drawImp(e,this.attrs,this.styles)},t.extend=function(e){var n=(function(a){Pt(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype.checkEventOnImp=function(u,c,f){return e.checkEventOn(u,c,f)},l.prototype.drawImp=function(u,c,f){e.draw(u,c,f)},l})(t);return n},t})(jd);function pR(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var c=u.value,f=c.coordinates;if(f.length>1)for(var d=1;d<f.length;d++){var v=f[d-1],m=f[d];if(v.x===m.x){if(Math.abs(v.y-r.y)+Math.abs(m.y-r.y)-Math.abs(v.y-m.y)<ke+ke&&Math.abs(r.x-v.x)<ke)return!0}else{var y=zd(v,m),x=Vx(y,r),b=Math.abs(x-r.y);if(Math.abs(v.x-r.x)+Math.abs(m.x-r.x)-Math.abs(v.x-m.x)<ke+ke&&b*b/(y[0]*y[0]+1)<ke*ke)return!0}}}}catch(w){e={error:w}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function Vx(r,t){return r!==null?t.x*r[0]+r[1]:t.y}function Su(r,t,e){var n=zd(r,t);return Vx(n,e)}function zd(r,t){var e=r.x-t.x;if(e!==0){var n=(r.y-t.y)/e,a=r.y-n*r.x;return[n,a]}return null}function Ux(r,t,e){var n=t.length,a=Dt(e)?e>0&&e<1?e:0:e?.5:0;if(a>0&&n>2){for(var l=t[0].x,u=t[0].y,c=1;c<n-1;c++){var f=t[c-1],d=t[c],v=t[c+1],m=d.x-f.x,y=d.y-f.y,x=v.x-d.x,b=v.y-d.y,w=v.x-f.x,S=v.y-f.y,M=Math.sqrt(m*m+y*y),N=Math.sqrt(x*x+b*b),T=N/(N+M),R=d.x+w*a*T,C=d.y+S*a*T;R=Math.min(R,Math.max(v.x,d.x)),C=Math.min(C,Math.max(v.y,d.y)),R=Math.max(R,Math.min(v.x,d.x)),C=Math.max(C,Math.min(v.y,d.y)),w=R-d.x,S=C-d.y;var z=d.x-w*M/N,D=d.y-S*M/N;z=Math.min(z,Math.max(f.x,d.x)),D=Math.min(D,Math.max(f.y,d.y)),z=Math.max(z,Math.min(f.x,d.x)),D=Math.max(D,Math.min(f.y,d.y)),w=d.x-z,S=d.y-D,R=d.x+w*N/M,C=d.y+S*N/M,r.bezierCurveTo(l,u,z,D,d.x,d.y),l=R,u=C}var I=t[n-1];r.bezierCurveTo(l,u,I.x,I.y,I.x,I.y)}else for(var c=1;c<n;c++)r.lineTo(t[c].x,t[c].y)}function mR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"solid":a,u=e.smooth,c=u===void 0?!1:u,f=e.size,d=f===void 0?1:f,v=e.color,m=v===void 0?"currentColor":v,y=e.dashedValue,x=y===void 0?[2,2]:y;r.lineWidth=d,r.strokeStyle=m,l==="dashed"?r.setLineDash(x):r.setLineDash([]);var b=d%2===1?.5:0;n.forEach(function(w){var S=w.coordinates;S.length>1&&(S.length===2&&(S[0].x===S[1].x||S[0].y===S[1].y)?(r.beginPath(),S[0].x===S[1].x?(r.moveTo(S[0].x+b,S[0].y),r.lineTo(S[1].x+b,S[1].y)):(r.moveTo(S[0].x,S[0].y+b),r.lineTo(S[1].x,S[1].y+b)),r.stroke(),r.closePath()):(r.save(),d%2===1&&r.translate(.5,.5),r.beginPath(),r.moveTo(S[0].x,S[0].y),Ux(r,S,c),r.stroke(),r.closePath(),r.restore()))})}var gR={name:"line",checkEventOn:pR,draw:function(r,t,e){mR(r,t,e)}};function Hx(r,t,e){var n=e??0,a=[];if(r.length>1)if(r[0].x===r[1].x){var l=0,u=t.height;if(a.push({coordinates:[{x:r[0].x,y:l},{x:r[0].x,y:u}]}),r.length>2){a.push({coordinates:[{x:r[2].x,y:l},{x:r[2].x,y:u}]});for(var c=r[0].x-r[2].x,f=0;f<n;f++){var d=c*(f+1);a.push({coordinates:[{x:r[0].x+d,y:l},{x:r[0].x+d,y:u}]})}}}else{var v=0,m=t.width,y=zd(r[0],r[1]),x=y[0],b=y[1];if(a.push({coordinates:[{x:v,y:v*x+b},{x:m,y:m*x+b}]}),r.length>2){var w=r[2].y-x*r[2].x;a.push({coordinates:[{x:v,y:v*x+w},{x:m,y:m*x+w}]});for(var c=b-w,f=0;f<n;f++){var S=b+c*(f+1);a.push({coordinates:[{x:v,y:v*x+S},{x:m,y:m*x+S}]})}}}return a}var yR={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:Hx(t,e)}]}},bR={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:Hx(t,e,1)}]}},xR={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t,e,n,a=r.chart,l=r.coordinates,u=r.bounding,c=r.overlay,f=r.yAxis,d=0;if(!((t=f?.isInCandle())!==null&&t!==void 0)||t)d=(n=(e=a.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE;else{var v=a.getIndicators({paneId:c.paneId});v.forEach(function(x){d=Math.max(d,x.precision)})}var m=c.points[0].value,y=m===void 0?0:m;return[{type:"line",attrs:{coordinates:[l[0],{x:u.width,y:l[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:l[0].x,y:l[0].y,text:a.getDecimalFold().format(a.getThousandsSeparator().format(y.toFixed(d))),baseline:"bottom"}}]}};function SR(r,t){if(r.length>1){var e={x:0,y:0};return r[0].x===r[1].x&&r[0].y!==r[1].y?r[0].y<r[1].y?e={x:r[0].x,y:t.height}:e={x:r[0].x,y:0}:r[0].x>r[1].x?e={x:0,y:Su(r[0],r[1],{x:0,y:r[0].y})}:e={x:t.width,y:Su(r[0],r[1],{x:t.width,y:r[0].y})},{coordinates:[r[0],e]}}return[]}var _R={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:SR(t,e)}]}},wR={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]}},ER={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return t.length===2?t[0].x===t[1].x?[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:e.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:Su(t[0],t[1],{x:0,y:t[0].y})},{x:e.width,y:Su(t[0],t[1],{x:e.width,y:t[0].y})}]}}]:[]}},CR={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;if(t.length===2){var n={x:t[0].x,y:0};return t[0].y<t[1].y&&(n.y=e.height),[{type:"line",attrs:{coordinates:[t[0],n]}}]}return[]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].timestamp=e.timestamp,t[0].dataIndex=e.dataIndex,t[1].timestamp=e.timestamp,t[1].dataIndex=e.dataIndex},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].timestamp=n.timestamp,e[0].dataIndex=n.dataIndex)}},MR={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]},performEventPressedMove:function(r){var t=r.points,e=r.performPoint;t[0].timestamp=e.timestamp,t[0].dataIndex=e.dataIndex,t[1].timestamp=e.timestamp,t[1].dataIndex=e.dataIndex},performEventMoveForDrawing:function(r){var t=r.currentStep,e=r.points,n=r.performPoint;t===2&&(e[0].timestamp=n.timestamp,e[0].dataIndex=n.dataIndex)}},TR={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(r){var t=r.coordinates,e=r.bounding;return[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:e.height}]}}]}},AR={name:"simpleAnnotation",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(r){var t,e=r.overlay,n=r.coordinates,a="";at(e.extendData)&&(xi(e.extendData)?a=e.extendData(e):a=(t=e.extendData)!==null&&t!==void 0?t:"");var l=n[0].x,u=n[0].y-6,c=u-50,f=c-5;return[{type:"line",attrs:{coordinates:[{x:l,y:u},{x:l,y:c}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:l,y:c},{x:l-4,y:f},{x:l+4,y:f}]},ignoreEvent:!0},{type:"text",attrs:{x:l,y:f,text:a,align:"center",baseline:"bottom"},ignoreEvent:!0}]}},RR={name:"simpleTag",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(r){var t=r.bounding,e=r.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:e[0].y},{x:t.width,y:e[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(r){var t,e,n,a,l=r.chart,u=r.overlay,c=r.coordinates,f=r.bounding,d=r.yAxis,v=(t=d?.isFromZero())!==null&&t!==void 0?t:!1,m="left",y=0;v?(m="left",y=0):(m="right",y=f.width);var x="";return at(u.extendData)&&(xi(u.extendData)?x=u.extendData(u):x=(e=u.extendData)!==null&&e!==void 0?e:""),!at(x)&&Dt(u.points[0].value)&&(x=We(u.points[0].value,(a=(n=l.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&a!==void 0?a:Ue.PRICE)),{type:"text",attrs:{x:y,y:c[0].y,text:x,align:m,baseline:"middle"}}}},Yx={},DR=[cR,hR,fR,dR,yR,bR,xR,_R,wR,ER,CR,MR,TR,AR,RR];DR.forEach(function(r){Yx[r.name]=uR.extend(r)});function NR(r){var t;return(t=Yx[r])!==null&&t!==void 0?t:null}var OR={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},title:{color:"#76808F"},legend:{color:"#76808F"}}},indicator:{tooltip:{title:{color:"#76808F"},legend:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},kR={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},title:{color:"#929AA5"},legend:{color:"#929AA5"}}},indicator:{tooltip:{title:{color:"#929AA5"},legend:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},jR={light:OR,dark:kR};function zR(r){var t;return(t=jR[r])!==null&&t!==void 0?t:null}var au=30,Wx=100,Vt={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},Py={MIN:1,MAX:50},LR=10,BR=80,FR=.2,od=10,PR=(function(){function r(t,e){var n=this;this._styles=NA(),this._formatter={formatDate:function(y){var x=y.dateTimeFormat,b=y.timestamp,w=y.template;return gA(x,b,w)},formatBigNumber:yA,formatExtendText:function(y){return""}},this._innerFormatter={formatDate:function(y,x,b){return n._formatter.formatDate({dateTimeFormat:n._dateTimeFormat,timestamp:y,template:x,type:b})},formatBigNumber:function(y){return n._formatter.formatBigNumber(y)},formatExtendText:function(y){return n._formatter.formatExtendText(y)}},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(y){return bA(y,n._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(y){return xA(y,n._decimalFold.threshold)}},this._symbol=null,this._period=null,this._dataList=[],this._dataLoader=null,this._loading=!1,this._dataLoadMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._zoomAnchor={main:"cursor",xAxis:"cursor"},this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=LR,this._offsetRightDistance=BR,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole="bar_count",this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=zy(),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._actions=new Map,this._indicators=new Map,this._overlays=new Map,this._progressOverlayInfo=null,this._lastPriceMarkExtendTextUpdateTimers=[],this._pressedOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._chart=t,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var a=e??{},l=a.styles,u=a.locale,c=a.timezone,f=a.formatter,d=a.thousandsSeparator,v=a.decimalFold,m=a.zoomAnchor;at(l)&&this.setStyles(l),Kt(u)&&this.setLocale(u),this.setTimezone(c??""),at(f)&&this.setFormatter(f),at(d)&&this.setThousandsSeparator(d),at(v)&&this.setDecimalFold(v),at(m)&&this.setZoomAnchor(m),this._taskScheduler=new wA(function(){n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})})}return r.prototype.setStyles=function(t){var e=this,n,a,l,u,c,f,d=null;if(Kt(t)?d=zR(t):d=t,Re(this._styles,d),Cn((l=(a=(n=d?.candle)===null||n===void 0?void 0:n.tooltip)===null||a===void 0?void 0:a.legend)===null||l===void 0?void 0:l.template)&&(this._styles.candle.tooltip.legend.template=d.candle.tooltip.legend.template),at((f=(c=(u=d?.candle)===null||u===void 0?void 0:u.priceMark)===null||c===void 0?void 0:c.last)===null||f===void 0?void 0:f.extendTexts)){this._clearLastPriceMarkExtendTextUpdateTimer();var v=[];this._styles.candle.priceMark.last.extendTexts.forEach(function(m){var y=m.updateInterval;if(m.show&&y>0&&!v.includes(y)){v.push(y);var x=setInterval(function(){e._chart.updatePane(0,Vt.CANDLE)},y);e._lastPriceMarkExtendTextUpdateTimers.push(x)}})}},r.prototype.getStyles=function(){return this._styles},r.prototype.setFormatter=function(t){Re(this._formatter,t)},r.prototype.getFormatter=function(){return this._formatter},r.prototype.getInnerFormatter=function(){return this._innerFormatter},r.prototype.setLocale=function(t){this._locale=t},r.prototype.getLocale=function(){return this._locale},r.prototype.setTimezone=function(t){if(!at(this._dateTimeFormat)||this.getTimezone()!==t){var e={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};t.length>0&&(e.timeZone=t);var n=null;try{n=new Intl.DateTimeFormat("en",e)}catch{}n!==null&&(this._dateTimeFormat=n)}},r.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},r.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},r.prototype.setThousandsSeparator=function(t){Re(this._thousandsSeparator,t)},r.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},r.prototype.setDecimalFold=function(t){Re(this._decimalFold,t)},r.prototype.getDecimalFold=function(){return this._decimalFold},r.prototype.setSymbol=function(t){var e=this;this.resetData(function(){e._symbol=bt(bt({pricePrecision:Ue.PRICE,volumePrecision:Ue.VOLUME},e._symbol),t),e._synchronizeIndicatorSeriesPrecision()})},r.prototype.getSymbol=function(){return this._symbol},r.prototype.setPeriod=function(t){var e=this;this.resetData(function(){e._period=t})},r.prototype.getPeriod=function(){return this._period},r.prototype.getDataList=function(){return this._dataList},r.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},r.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},r.prototype._addData=function(t,e,n){var a,l,u=!1,c=!1,f=0;if(Cn(t)){var d={backward:!1,forward:!1};switch(gu(n)?(d.backward=n,d.forward=n):(d.backward=(a=n?.backward)!==null&&a!==void 0?a:!1,d.forward=(l=n?.forward)!==null&&l!==void 0?l:!1),f=t.length,e){case"init":{this._clearData(),this._dataList=t,this._dataLoadMore.backward=d.backward,this._dataLoadMore.forward=d.forward,this.setOffsetRightDistance(this._offsetRightDistance),c=!0;break}case"backward":{this._dataList=this._dataList.concat(t),this._dataLoadMore.backward=d.backward,this._lastBarRightSideDiffBarCount-=f,c=f>0;break}case"forward":{this._dataList=t.concat(this._dataList),this._dataLoadMore.forward=d.forward,c=f>0;break}}u=!0}else{var v=this._dataList.length,m=t.timestamp,y=je(this._dataList[v-1],"timestamp",0);if(m>y){this._dataList.push(t);var x=this.getLastBarRightSideDiffBarCount();x<0&&this.setLastBarRightSideDiffBarCount(--x),f=1,u=!0,c=!0}else m===y&&(this._dataList[v-1]=t,u=!0,c=!0)}if(u&&c){this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0});var b=this.getIndicatorsByFilter({});b.length>0?this._calcIndicator(b):this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:e!=="init"})}},r.prototype.setDataLoader=function(t){var e=this;this.resetData(function(){e._dataLoader=t})},r.prototype._calcOptimalBarSpace=function(){var t=4,e=1-FR*Math.atan(Math.max(t,this._barSpace)-t)/(Math.PI*.5),n=Math.min(Math.floor(this._barSpace*e),Math.floor(this._barSpace));n%2===0&&n+2>=this._barSpace&&--n,this._gapBarSpace=Math.max(1,n)},r.prototype._adjustVisibleRange=function(){var t,e,n=this._dataList.length,a=this._totalBarSpace/this._barSpace,l=0,u=0;this._scrollLimitRole==="distance"?(l=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,u=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(l=this._minVisibleBarCount.left,u=this._minVisibleBarCount.right),l=Math.max(0,l),u=Math.max(0,u);var c=a-Math.min(l,n);this._lastBarRightSideDiffBarCount>c&&(this._lastBarRightSideDiffBarCount=c);var f=-n+Math.min(u,n);this._lastBarRightSideDiffBarCount<f&&(this._lastBarRightSideDiffBarCount=f);var d=Math.round(this._lastBarRightSideDiffBarCount+n+.5),v=d;d>n&&(d=n);var m=Math.round(d-a)-1;m<0&&(m=0);var y=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-a)-1:m;this._visibleRange={from:m,to:d,realFrom:y,realTo:v},this.executeAction("onVisibleRangeChange",this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var x=y;x<v;x++){var b=this._dataList[x],w=this.dataIndexToCoordinate(x);this._visibleRangeDataList.push({dataIndex:x,x:w,data:{prev:(t=this._dataList[x-1])!==null&&t!==void 0?t:b,current:b,next:(e=this._dataList[x+1])!==null&&e!==void 0?e:b}}),at(b)&&(this._visibleRangeHighLowPrice[0].price<b.high&&(this._visibleRangeHighLowPrice[0].price=b.high,this._visibleRangeHighLowPrice[0].x=w),this._visibleRangeHighLowPrice[1].price>b.low&&(this._visibleRangeHighLowPrice[1].price=b.low,this._visibleRangeHighLowPrice[1].x=w))}m===0?this._dataLoadMore.forward&&this._processDataLoad("forward"):d===n&&this._dataLoadMore.backward&&this._processDataLoad("backward")},r.prototype._processDataLoad=function(t){var e=this,n,a,l,u;if(!this._loading&&at(this._dataLoader)&&at(this._symbol)&&at(this._period)){this._loading=!0;var c={type:t,symbol:this._symbol,period:this._period,timestamp:null,callback:function(f,d){var v,m;e._loading=!1,e._addData(f,t,d),t==="init"&&((m=(v=e._dataLoader)===null||v===void 0?void 0:v.subscribeBar)===null||m===void 0||m.call(v,{symbol:e._symbol,period:e._period,callback:function(y){e._addData(y,"update")}}))}};switch(t){case"backward":{c.timestamp=(a=(n=this._dataList[this._dataList.length-1])===null||n===void 0?void 0:n.timestamp)!==null&&a!==void 0?a:null;break}case"forward":{c.timestamp=(u=(l=this._dataList[0])===null||l===void 0?void 0:l.timestamp)!==null&&u!==void 0?u:null;break}}this._dataLoader.getBars(c)}},r.prototype._processDataUnsubscribe=function(){var t,e;at(this._dataLoader)&&at(this._symbol)&&at(this._period)&&((e=(t=this._dataLoader).unsubscribeBar)===null||e===void 0||e.call(t,{symbol:this._symbol,period:this._period}))},r.prototype.resetData=function(t){this._processDataUnsubscribe(),t?.(),this._loading=!1,this._processDataLoad("init")},r.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},r.prototype.setBarSpace=function(t,e){t<Py.MIN||t>Py.MAX||this._barSpace===t||(this._barSpace=t,this._calcOptimalBarSpace(),e?.(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0}))},r.prototype.setTotalBarSpace=function(t){this._totalBarSpace!==t&&(this._totalBarSpace=t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},r.prototype.setOffsetRightDistance=function(t,e){return this._offsetRightDistance=this._scrollLimitRole==="distance"?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(e??!1)&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0})),this},r.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},r.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},r.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},r.prototype.setLastBarRightSideDiffBarCount=function(t){this._lastBarRightSideDiffBarCount=t},r.prototype.setMaxOffsetLeftDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.left=t},r.prototype.setMaxOffsetRightDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.right=t},r.prototype.setLeftMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.left=t},r.prototype.setRightMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.right=t},r.prototype.getVisibleRange=function(){return this._visibleRange},r.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},r.prototype.scroll=function(t){if(this._scrollEnabled){var e=t/this._barSpace,n=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-e,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0});var a=Math.round(n-this._lastBarRightSideDiffBarCount*this._barSpace);a!==0&&this.executeAction("onScroll",{distance:a})}},r.prototype.getDataByDataIndex=function(t){var e;return(e=this._dataList[t])!==null&&e!==void 0?e:null},r.prototype.coordinateToFloatIndex=function(t){var e=this._dataList.length,n=(this._totalBarSpace-t)/this._barSpace,a=e+this._lastBarRightSideDiffBarCount-n;return Math.round(a*1e6)/1e6},r.prototype.dataIndexToTimestamp=function(t){var e=this._dataList.length;if(e===0)return null;var n=this.getDataByDataIndex(t);if(at(n))return n.timestamp;if(at(this._period)){var a=e-1,l=null,u=0;if(t>a?(l=this._dataList[a].timestamp,u=t-a):t<0&&(l=this._dataList[0].timestamp,u=t),Dt(l)){var c=this._period,f=c.type,d=c.span;switch(f){case"second":return l+d*1e3*u;case"minute":return l+d*60*1e3*u;case"hour":return l+d*60*60*1e3*u;case"day":return l+d*24*60*60*1e3*u;case"week":return l+d*7*24*60*60*1e3*u;case"month":{var v=new Date(l),m=v.getDate();v.setDate(1),v.setMonth(v.getMonth()+d*u);var y=new Date(v.getFullYear(),v.getMonth()+1,0).getDate();return v.setDate(Math.min(m,y)),v.getTime()}case"year":{var v=new Date(l);return v.setFullYear(v.getFullYear()+d*u),v.getTime()}}}}return null},r.prototype.timestampToDataIndex=function(t){var e=this._dataList.length;if(e===0)return 0;if(at(this._period)){var n=null,a=0,l=e-1,u=this._dataList[l].timestamp;t>u&&(n=u,a=l);var c=this._dataList[0].timestamp;if(t<c&&(n=c,a=0),Dt(n)){var f=this._period,d=f.type,v=f.span;switch(d){case"second":return a+Math.floor((t-n)/(v*1e3));case"minute":return a+Math.floor((t-n)/(v*60*1e3));case"hour":return a+Math.floor((t-n)/(v*60*60*1e3));case"day":return a+Math.floor((t-n)/(v*24*60*60*1e3));case"week":return a+Math.floor((t-n)/(v*7*24*60*60*1e3));case"month":{var m=new Date(n),y=new Date(t),x=m.getFullYear(),b=y.getFullYear(),w=m.getMonth(),S=y.getMonth();return a+Math.floor(((b-x)*12+(S-w))/v)}case"year":{var x=new Date(n).getFullYear(),b=new Date(t).getFullYear();return a+Math.floor((b-x)/v)}}}}return ld(this._dataList,"timestamp",t)},r.prototype.dataIndexToCoordinate=function(t){var e=this._dataList.length,n=e+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(n-.5)*this._barSpace+.5)},r.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},r.prototype.zoom=function(t,e,n){var a=this,l;if(this._zoomEnabled){var u=e??{x:(l=this._crosshair.x)!==null&&l!==void 0?l:this._totalBarSpace/2};n==="xAxis"?this._zoomAnchor.xAxis==="last_bar"&&(u.x=this.dataIndexToCoordinate(this._dataList.length-1)):this._zoomAnchor.main==="last_bar"&&(u.x=this.dataIndexToCoordinate(this._dataList.length-1));var c=u.x,f=this.coordinateToFloatIndex(c),d=this._barSpace,v=this._barSpace+t*(this._barSpace/od);this.setBarSpace(v,function(){a._lastBarRightSideDiffBarCount+=f-a.coordinateToFloatIndex(c)});var m=this._barSpace/d;m!==1&&this.executeAction("onZoom",{scale:m})}},r.prototype.setZoomEnabled=function(t){this._zoomEnabled=t},r.prototype.isZoomEnabled=function(){return this._zoomEnabled},r.prototype.setZoomAnchor=function(t){Kt(t)?(this._zoomAnchor.main=t,this._zoomAnchor.xAxis=t):(Kt(t.main)&&(this._zoomAnchor.main=t.main),Kt(t.xAxis)&&(this._zoomAnchor.xAxis=t.xAxis))},r.prototype.getZoomAnchor=function(){return bt({},this._zoomAnchor)},r.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},r.prototype.isScrollEnabled=function(){return this._scrollEnabled},r.prototype.setCrosshair=function(t,e){var n,a=e??{},l=a.notInvalidate,u=a.notExecuteAction,c=a.forceInvalidate,f=t??{},d=0,v=0;Dt(f.x)?(d=this.coordinateToDataIndex(f.x),d<0?v=0:d>this._dataList.length-1?v=this._dataList.length-1:v=d):(d=this._dataList.length-1,v=d);var m=this._dataList[v],y=this.dataIndexToCoordinate(d),x={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=bt(bt({},f),{realX:y,kLineData:m,realDataIndex:d,dataIndex:v,timestamp:(n=this.dataIndexToTimestamp(d))!==null&&n!==void 0?n:void 0}),(x.x!==f.x||x.y!==f.y||x.paneId!==f.paneId||(c??!1))&&(at(m)&&!(u??!1)&&this.hasAction("onCrosshairChange")&&Kt(this._crosshair.paneId)&&this.executeAction("onCrosshairChange",t),(l??!1)||this._chart.updatePane(1))},r.prototype.getCrosshair=function(){return this._crosshair},r.prototype.executeAction=function(t,e){var n;(n=this._actions.get(t))===null||n===void 0||n.execute(e)},r.prototype.subscribeAction=function(t,e){var n;this._actions.has(t)||this._actions.set(t,new EA),(n=this._actions.get(t))===null||n===void 0||n.subscribe(e)},r.prototype.unsubscribeAction=function(t,e){var n=this._actions.get(t);at(n)&&(n.unsubscribe(e),n.isEmpty()&&this._actions.delete(t))},r.prototype.hasAction=function(t){var e=this._actions.get(t);return at(e)&&!e.isEmpty()},r.prototype._sortIndicators=function(t){var e;Kt(t)?(e=this._indicators.get(t))===null||e===void 0||e.sort(function(n,a){return n.zLevel-a.zLevel}):this._indicators.forEach(function(n){n.sort(function(a,l){return a.zLevel-l.zLevel})})},r.prototype._calcIndicator=function(t){var e=this,n=[];if(n=n.concat(t),n.length>0){var a={};n.forEach(function(l){a[l.id]=l.calcImp(e._dataList)}),this._taskScheduler.add(a)}},r.prototype.addIndicator=function(t,e,n){var a=t.name,l=this.getIndicatorsByFilter(t);if(l.length>0)return!1;var u=this.getIndicatorsByPaneId(e),c=Ix(a),f=new c;return this._synchronizeIndicatorSeriesPrecision(f),f.paneId=e,f.override(t),n||(this.removeIndicator({paneId:e}),u=[]),u.push(f),this._indicators.set(e,u),this._sortIndicators(e),this._calcIndicator(f),!0},r.prototype.getIndicatorsByPaneId=function(t){var e;return(e=this._indicators.get(t))!==null&&e!==void 0?e:[]},r.prototype.getIndicatorsByFilter=function(t){var e=t.paneId,n=t.name,a=t.id,l=function(c){return at(a)?c.id===a:!at(n)||c.name===n},u=[];return at(e)?u=u.concat(this.getIndicatorsByPaneId(e).filter(l)):this._indicators.forEach(function(c){u=u.concat(c.filter(l))}),u},r.prototype.removeIndicator=function(t){var e=this,n=!1,a=this.getIndicatorsByFilter(t);return a.forEach(function(l){var u=e.getIndicatorsByPaneId(l.paneId),c=u.findIndex(function(f){return f.id===l.id});c>-1&&(u.splice(c,1),n=!0),u.length===0&&e._indicators.delete(l.paneId)}),n},r.prototype.hasIndicators=function(t){return this._indicators.has(t)},r.prototype._synchronizeIndicatorSeriesPrecision=function(t){if(at(this._symbol)){var e=this._symbol,n=e.pricePrecision,a=n===void 0?Ue.PRICE:n,l=e.volumePrecision,u=l===void 0?Ue.VOLUME:l,c=function(f){switch(f.series){case"price":{f.setSeriesPrecision(a);break}case"volume":{f.setSeriesPrecision(u);break}}};at(t)?c(t):this._indicators.forEach(function(f){f.forEach(function(d){c(d)})})}},r.prototype.overrideIndicator=function(t){var e=this,n=!1,a=!1,l=this.getIndicatorsByFilter(t);return l.forEach(function(u){u.override(t);var c=u.shouldUpdateImp(),f=c.calc,d=c.draw,v=c.sort;v&&(a=!0),f?e._calcIndicator(u):d&&(n=!0)}),a&&this._sortIndicators(),n?(this._chart.layout({update:!0}),!0):!1},r.prototype.getOverlaysByFilter=function(t){var e,n=t.id,a=t.groupId,l=t.paneId,u=t.name,c=function(v){return at(n)?v.id===n:at(a)?v.groupId===a&&(!at(u)||v.name===u):!at(u)||v.name===u},f=[];at(l)?f=f.concat(this.getOverlaysByPaneId(l).filter(c)):this._overlays.forEach(function(v){f=f.concat(v.filter(c))});var d=(e=this._progressOverlayInfo)===null||e===void 0?void 0:e.overlay;return at(d)&&c(d)&&f.push(d),f},r.prototype.getOverlaysByPaneId=function(t){var e;if(!Kt(t)){var n=[];return this._overlays.forEach(function(a){n=n.concat(a)}),n}return(e=this._overlays.get(t))!==null&&e!==void 0?e:[]},r.prototype._sortOverlays=function(t){var e;Kt(t)?(e=this._overlays.get(t))===null||e===void 0||e.sort(function(n,a){return n.zLevel-a.zLevel}):this._overlays.forEach(function(n){n.sort(function(a,l){return a.zLevel-l.zLevel})})},r.prototype.addOverlays=function(t,e){var n=this,a=[],l=t.map(function(u,c){var f,d,v,m,y,x,b,w;if(at(u.id)){var S=null;try{for(var M=Vi(n._overlays),N=M.next();!N.done;N=M.next()){var T=N.value,R=T[1],C=R.find(function(V){return V.id===u.id});if(at(C)){S=C;break}}}catch(V){f={error:V}}finally{try{N&&!N.done&&(d=M.return)&&d.call(M)}finally{if(f)throw f.error}}if(at(S))return u.id}var z=NR(u.name);if(at(z)){var D=(v=u.id)!==null&&v!==void 0?v:su(oR),C=new z,I=(m=u.paneId)!==null&&m!==void 0?m:Vt.CANDLE;u.id=D,(y=u.groupId)!==null&&y!==void 0||(u.groupId=D);var B=n.getOverlaysByPaneId(I).length;return(x=u.zLevel)!==null&&x!==void 0||(u.zLevel=B),C.override(u),a.includes(I)||a.push(I),C.isDrawing()?n._progressOverlayInfo={paneId:I,overlay:C,appointPaneFlag:e[c]}:(n._overlays.has(I)||n._overlays.set(I,[]),(b=n._overlays.get(I))===null||b===void 0||b.push(C)),C.isStart()&&((w=C.onDrawStart)===null||w===void 0||w.call(C,{overlay:C,chart:n._chart})),D}return null});return a.length>0&&(this._sortOverlays(),a.forEach(function(u){n._chart.updatePane(1,u)}),this._chart.updatePane(1,Vt.X_AXIS)),l},r.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},r.prototype.progressOverlayComplete=function(){var t;if(this._progressOverlayInfo!==null){var e=this._progressOverlayInfo,n=e.overlay,a=e.paneId;n.isDrawing()||(this._overlays.has(a)||this._overlays.set(a,[]),(t=this._overlays.get(a))===null||t===void 0||t.push(n),this._sortOverlays(a),this._progressOverlayInfo=null)}},r.prototype.updateProgressOverlayInfo=function(t,e){this._progressOverlayInfo!==null&&(gu(e)&&e&&(this._progressOverlayInfo.appointPaneFlag=e),this._progressOverlayInfo.paneId=t,this._progressOverlayInfo.overlay.override({paneId:t}))},r.prototype.overrideOverlay=function(t){var e=this,n=!1,a=[],l=this.getOverlaysByFilter(t);return l.forEach(function(u){u.override(t);var c=u.shouldUpdate(),f=c.sort,d=c.draw;f&&(n=!0),(f||d)&&(a.includes(u.paneId)||a.push(u.paneId))}),n&&this._sortOverlays(),a.length>0?(a.forEach(function(u){e._chart.updatePane(1,u)}),this._chart.updatePane(1,Vt.X_AXIS),!0):!1},r.prototype.removeOverlay=function(t){var e=this,n=[],a=this.getOverlaysByFilter(t);return a.forEach(function(l){var u,c=l.paneId,f=e.getOverlaysByPaneId(l.paneId);if((u=l.onRemoved)===null||u===void 0||u.call(l,{overlay:l,chart:e._chart}),n.includes(c)||n.push(c),l.isDrawing())e._progressOverlayInfo=null;else{var d=f.findIndex(function(v){return v.id===l.id});d>-1&&f.splice(d,1)}f.length===0&&e._overlays.delete(c)}),n.length>0?(n.forEach(function(l){e._chart.updatePane(1,l)}),this._chart.updatePane(1,Vt.X_AXIS),!0):!1},r.prototype.setPressedOverlayInfo=function(t){this._pressedOverlayInfo=t},r.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},r.prototype.setHoverOverlayInfo=function(t,e,n){var a=this._hoverOverlayInfo,l=a.overlay,u=a.figureType,c=a.figureIndex,f=a.figure,d=t.overlay;if((l?.id!==d?.id||u!==t.figureType||c!==t.figureIndex)&&(this._hoverOverlayInfo=t,l?.id!==d?.id)){var v=!1,m=!1;l!==null&&(l.override({zLevel:l.getPrevZLevel()}),m=!0,n(l,f)&&(v=!0)),d!==null&&(d.setPrevZLevel(d.zLevel),d.override({zLevel:Number.MAX_SAFE_INTEGER}),m=!0,e(d,t.figure)&&(v=!0)),m&&this._sortOverlays(),v||this._chart.updatePane(1)}},r.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},r.prototype.setClickOverlayInfo=function(t,e,n){var a=this._clickOverlayInfo,l=a.paneId,u=a.overlay,c=a.figureType,f=a.figure,d=a.figureIndex,v=t.overlay;(u?.id!==v?.id||c!==t.figureType||d!==t.figureIndex)&&(this._clickOverlayInfo=t,u?.id!==v?.id&&(at(u)&&n(u,f),at(v)&&e(v,t.figure),this._chart.updatePane(1,t.paneId),l!==t.paneId&&this._chart.updatePane(1,l),this._chart.updatePane(1,Vt.X_AXIS)))},r.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},r.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},r.prototype.isOverlayDrawing=function(){var t,e;return(e=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay.isDrawing())!==null&&e!==void 0?e:!1},r.prototype._clearLastPriceMarkExtendTextUpdateTimer=function(){this._lastPriceMarkExtendTextUpdateTimers.forEach(function(t){clearInterval(t)}),this._lastPriceMarkExtendTextUpdateTimers=[]},r.prototype._clearData=function(){this._dataLoadMore.backward=!1,this._dataLoadMore.forward=!1,this._loading=!1,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange=zy(),this._crosshair={}},r.prototype.getChart=function(){return this._chart},r.prototype.destroy=function(){this._clearData(),this._clearLastPriceMarkExtendTextUpdateTimer(),this._taskScheduler.clear(),this._overlays.clear(),this._indicators.clear(),this._actions.clear()},r})(),Ut={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},ol=7;function IR(){return Nd(this,void 0,void 0,function(){return Od(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(a){return"devicePixelContentBoxSize"in a})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,r.sent()]}})})}var Iy=(function(){function r(t,e){var n=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=If,this._mediaQueryListener=function(){var a=lr(n._element);n._nextPixelWidth=Math.round(n._element.clientWidth*a),n._nextPixelHeight=Math.round(n._element.clientHeight*a),n._resetPixelRatio()},this._listener=e,this._element=An("canvas",t),this._ctx=this._element.getContext("2d"),IR().then(function(a){n._supportedDevicePixelContentBox=a,a?(n._resizeObserver=new ResizeObserver(function(l){var u=l.find(function(f){return f.target===n._element}),c=u?.devicePixelContentBoxSize[0];at(c)&&(n._nextPixelWidth=c.inlineSize,n._nextPixelHeight=c.blockSize,(n._pixelWidth!==n._nextPixelWidth||n._pixelHeight!==n._nextPixelHeight)&&n._resetPixelRatio())}),n._resizeObserver.observe(n._element,{box:"device-pixel-content-box"})):(n._mediaQueryList=window.matchMedia("(resolution: ".concat(lr(n._element),"dppx)")),n._mediaQueryList.addListener(n._mediaQueryListener))}).catch(function(a){return!1})}return r.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var e=t._element.clientWidth,n=t._element.clientHeight;t._width=e,t._height=n,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight;var a=t._nextPixelWidth/e,l=t._nextPixelHeight/n;t._ctx.scale(a,l)})},r.prototype._executeListener=function(t){var e=this;this._requestAnimationId===If&&(this._requestAnimationId=xu(function(){e._ctx.clearRect(0,0,e._width,e._height),t?.(),e._listener(),e._requestAnimationId=If}))},r.prototype.update=function(t,e){if(this._width!==t||this._height!==e){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(e,"px"),!this._supportedDevicePixelContentBox){var n=lr(this._element);this._nextPixelWidth=Math.round(t*n),this._nextPixelHeight=Math.round(e*n),this._resetPixelRatio()}}else this._executeListener()},r.prototype.getElement=function(){return this._element},r.prototype.getContext=function(){return this._ctx},r.prototype.destroy=function(){at(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),at(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},r})(),qx=(function(r){Pt(t,r);function t(e,n){var a=r.call(this)||this;return a._bounding=bu(),a._cursor="crosshair",a._forceCursor=null,a._pane=n,a._rootContainer=e,a._container=a.createContainer(),e.appendChild(a._container),a}return t.prototype.setBounding=function(e){return Re(this._bounding,e),this},t.prototype.getContainer=function(){return this._container},t.prototype.getBounding=function(){return this._bounding},t.prototype.getPane=function(){return this._pane},t.prototype.checkEventOn=function(e){return!0},t.prototype.setCursor=function(e){Kt(this._forceCursor)||e!==this._cursor&&(this._cursor=e,this._container.style.cursor=this._cursor)},t.prototype.setForceCursor=function(e){var n;e!==this._forceCursor&&(this._forceCursor=e,this._container.style.cursor=(n=this._forceCursor)!==null&&n!==void 0?n:this._cursor)},t.prototype.getForceCursor=function(){return this._forceCursor},t.prototype.update=function(e){this.updateImp(this._container,this._bounding,e??3)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t})(jd),Ld=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;a._mainCanvas=new Iy({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){a.updateMain(a._mainCanvas.getContext())}),a._overlayCanvas=new Iy({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){a.updateOverlay(a._overlayCanvas.getContext())});var l=a.getContainer();return l.appendChild(a._mainCanvas.getElement()),l.appendChild(a._overlayCanvas.getElement()),a}return t.prototype.createContainer=function(){return An("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},t.prototype.updateImp=function(e,n,a){var l=n.width,u=n.height,c=n.left;e.style.left="".concat(c,"px");var f=a,d=e.clientWidth,v=e.clientHeight;switch((l!==d||u!==v)&&(e.style.width="".concat(l,"px"),e.style.height="".concat(u,"px"),f=3),f){case 0:{this._mainCanvas.update(l,u);break}case 1:{this._overlayCanvas.update(l,u);break}case 3:case 4:{this._mainCanvas.update(l,u),this._overlayCanvas.update(l,u);break}}},t.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},t.prototype.getImage=function(e){var n=this.getBounding(),a=n.width,l=n.height,u=An("canvas",{width:"".concat(a,"px"),height:"".concat(l,"px"),boxSizing:"border-box"}),c=u.getContext("2d"),f=lr(u);return u.width=a*f,u.height=l*f,c.scale(f,f),c.drawImage(this._mainCanvas.getElement(),0,0,a,l),e&&c.drawImage(this._overlayCanvas.getElement(),0,0,a,l),u},t})(qx);function VR(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var c=u.value,f=c.x,d=c.y,v=c.r,m=r.x-f,y=r.y-d;if(!(m*m+y*y>v*v))return!0}}catch(x){e={error:x}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function UR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"fill":a,u=e.color,c=u===void 0?"currentColor":u,f=e.borderSize,d=f===void 0?1:f,v=e.borderColor,m=v===void 0?"currentColor":v,y=e.borderStyle,x=y===void 0?"solid":y,b=e.borderDashedValue,w=b===void 0?[2,2]:b,S=(l==="fill"||e.style==="stroke_fill")&&(!Kt(c)||!Ks(c));S&&(r.fillStyle=c,n.forEach(function(M){var N=M.x,T=M.y,R=M.r;r.beginPath(),r.arc(N,T,R,0,Math.PI*2),r.closePath(),r.fill()})),(l==="stroke"||e.style==="stroke_fill")&&d>0&&!Ks(m)&&(r.strokeStyle=m,r.lineWidth=d,x==="dashed"?r.setLineDash(w):r.setLineDash([]),n.forEach(function(M){var N=M.x,T=M.y,R=M.r;(!S||R>d)&&(r.beginPath(),r.arc(N,T,R,0,Math.PI*2),r.closePath(),r.stroke())}))}var HR={name:"circle",checkEventOn:VR,draw:function(r,t,e){UR(r,t,e)}};function YR(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){for(var c=u.value,f=!1,d=c.coordinates,v=0,m=d.length-1;v<d.length;m=v++)d[v].y>r.y!=d[m].y>r.y&&r.x<(d[m].x-d[v].x)*(r.y-d[v].y)/(d[m].y-d[v].y)+d[v].x&&(f=!f);if(f)return!0}}catch(y){e={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function WR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"fill":a,u=e.color,c=u===void 0?"currentColor":u,f=e.borderSize,d=f===void 0?1:f,v=e.borderColor,m=v===void 0?"currentColor":v,y=e.borderStyle,x=y===void 0?"solid":y,b=e.borderDashedValue,w=b===void 0?[2,2]:b;(l==="fill"||e.style==="stroke_fill")&&(!Kt(c)||!Ks(c))&&(r.fillStyle=c,n.forEach(function(S){var M=S.coordinates;r.beginPath(),r.moveTo(M[0].x,M[0].y);for(var N=1;N<M.length;N++)r.lineTo(M[N].x,M[N].y);r.closePath(),r.fill()})),(l==="stroke"||e.style==="stroke_fill")&&d>0&&!Ks(m)&&(r.strokeStyle=m,r.lineWidth=d,x==="dashed"?r.setLineDash(w):r.setLineDash([]),n.forEach(function(S){var M=S.coordinates;r.beginPath(),r.moveTo(M[0].x,M[0].y);for(var N=1;N<M.length;N++)r.lineTo(M[N].x,M[N].y);r.closePath(),r.stroke()}))}var qR={name:"polygon",checkEventOn:YR,draw:function(r,t,e){WR(r,t,e)}};function Xx(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var c=u.value,f=c.x,d=c.width;d<ke*2&&(f-=ke,d=ke*2);var v=c.y,m=c.height;if(m<ke*2&&(v-=ke,m=ke*2),r.x>=f&&r.x<=f+d&&r.y>=v&&r.y<=v+m)return!0}}catch(y){e={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function Gx(r,t,e){var n,a=[];a=a.concat(t);var l=e.style,u=l===void 0?"fill":l,c=e.color,f=c===void 0?"transparent":c,d=e.borderSize,v=d===void 0?1:d,m=e.borderColor,y=m===void 0?"transparent":m,x=e.borderStyle,b=x===void 0?"solid":x,w=e.borderRadius,S=w===void 0?0:w,M=e.borderDashedValue,N=M===void 0?[2,2]:M,T=(n=r.roundRect)!==null&&n!==void 0?n:r.rect,R=(u==="fill"||e.style==="stroke_fill")&&(!Kt(f)||!Ks(f));if(R&&(r.fillStyle=f,a.forEach(function(D){var I=D.x,B=D.y,V=D.width,W=D.height;r.beginPath(),T.call(r,I,B,V,W,S),r.closePath(),r.fill()})),(u==="stroke"||e.style==="stroke_fill")&&v>0&&!Ks(y)){r.strokeStyle=y,r.fillStyle=y,r.lineWidth=v,b==="dashed"?r.setLineDash(N):r.setLineDash([]);var C=v%2===1?.5:0,z=Math.round(C*2);a.forEach(function(D){var I=D.x,B=D.y,V=D.width,W=D.height;V>v*2&&W>v*2?(r.beginPath(),T.call(r,I+C,B+C,V-z,W-z,S),r.closePath(),r.stroke()):R||r.fillRect(I,B,V,W)})}}var XR={name:"rect",checkEventOn:Xx,draw:function(r,t,e){Gx(r,t,e)}};function Kx(r,t){var e=t.size,n=e===void 0?12:e,a=t.paddingLeft,l=a===void 0?0:a,u=t.paddingTop,c=u===void 0?0:u,f=t.paddingRight,d=f===void 0?0:f,v=t.paddingBottom,m=v===void 0?0:v,y=t.weight,x=y===void 0?"normal":y,b=t.family,w=r.x,S=r.y,M=r.text,N=r.align,T=N===void 0?"left":N,R=r.baseline,C=R===void 0?"top":R,z=r.width,D=r.height,I=z??l+$i(M,n,x,b)+d,B=D??c+n+m,V=0;switch(T){case"left":case"start":{V=w;break}case"right":case"end":{V=w-I;break}default:{V=w-I/2;break}}var W=0;switch(C){case"top":case"hanging":{W=S;break}case"bottom":case"ideographic":case"alphabetic":{W=S-B;break}default:{W=S-B/2;break}}return{x:V,y:W,width:I,height:B}}function GR(r,t,e){var n,a,l=[];l=l.concat(t);try{for(var u=Vi(l),c=u.next();!c.done;c=u.next()){var f=c.value,d=Kx(f,e),v=d.x,m=d.y,y=d.width,x=d.height;if(r.x>=v&&r.x<=v+y&&r.y>=m&&r.y<=m+x)return!0}}catch(b){n={error:b}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return!1}function KR(r,t,e){var n=[];n=n.concat(t);var a=e.color,l=a===void 0?"currentColor":a,u=e.size,c=u===void 0?12:u,f=e.family,d=e.weight,v=e.paddingLeft,m=v===void 0?0:v,y=e.paddingTop,x=y===void 0?0:y,b=e.paddingRight,w=b===void 0?0:b,S=n.map(function(M){return Kx(M,e)});Gx(r,S,bt(bt({},e),{color:e.backgroundColor})),r.textAlign="left",r.textBaseline="top",r.font=Hr(c,d,f),r.fillStyle=l,n.forEach(function(M,N){var T=S[N];r.fillText(M.text,T.x+m,T.y+x,T.width-m-w)})}var QR={name:"text",checkEventOn:GR,draw:function(r,t,e){KR(r,t,e)}};function $R(r,t){var e=r.x-t.x,n=r.y-t.y;return Math.sqrt(e*e+n*n)}function ZR(r,t){var e,n,a=[];a=a.concat(t);try{for(var l=Vi(a),u=l.next();!u.done;u=l.next()){var c=u.value;if(Math.abs($R(r,c)-c.r)<ke){var f=c.r,d=c.startAngle,v=c.endAngle,m=f*Math.cos(d)+c.x,y=f*Math.sin(d)+c.y,x=f*Math.cos(v)+c.x,b=f*Math.sin(v)+c.y;if(r.x<=Math.max(m,x)+ke&&r.x>=Math.min(m,x)-ke&&r.y<=Math.max(y,b)+ke&&r.y>=Math.min(y,b)-ke)return!0}}}catch(w){e={error:w}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return!1}function JR(r,t,e){var n=[];n=n.concat(t);var a=e.style,l=a===void 0?"solid":a,u=e.size,c=u===void 0?1:u,f=e.color,d=f===void 0?"currentColor":f,v=e.dashedValue,m=v===void 0?[2,2]:v;r.lineWidth=c,r.strokeStyle=d,l==="dashed"?r.setLineDash(m):r.setLineDash([]),n.forEach(function(y){var x=y.x,b=y.y,w=y.r,S=y.startAngle,M=y.endAngle;r.beginPath(),r.arc(x,b,w,S,M),r.stroke(),r.closePath()})}var tD={name:"arc",checkEventOn:ZR,draw:function(r,t,e){JR(r,t,e)}};function Vy(r,t,e,n,a,l,u){var c=_l(n,7),f=c[0],d=c[1],v=c[2],m=c[3],y=c[4],x=c[5],b=c[6],w=u?t+x:x+a,S=u?e+b:b+l,M=eD(t,e,f,d,v,m,y,w,S);M.forEach(function(N){r.bezierCurveTo(N[0],N[1],N[2],N[3],N[4],N[5])})}function eD(r,t,e,n,a,l,u,c,f){for(var d=iD(r,t,e,n,a,l,u,c,f),v=d.cx,m=d.cy,y=d.startAngle,x=d.deltaAngle,b=[],w=Math.ceil(Math.abs(x)/(Math.PI/2)),S=0;S<w;S++){var M=y+S*x/w,N=y+(S+1)*x/w,T=nD(v,m,e,n,a,M,N);b.push(T)}return b}function iD(r,t,e,n,a,l,u,c,f){var d=a*Math.PI/180,v=(r-c)/2,m=(t-f)/2,y=Math.cos(d)*v+Math.sin(d)*m,x=-Math.sin(d)*v+Math.cos(d)*m,b=Math.pow(y,2)/Math.pow(e,2)+Math.pow(x,2)/Math.pow(n,2);b>1&&(e*=Math.sqrt(b),n*=Math.sqrt(b));var w=l===u?-1:1,S=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(x,2)-Math.pow(n,2)*Math.pow(y,2),M=Math.pow(e,2)*Math.pow(x,2)+Math.pow(n,2)*Math.pow(y,2),N=w*Math.sqrt(Math.abs(S/M))*(e*x/n),T=w*Math.sqrt(Math.abs(S/M))*(-n*y/e),R=Math.cos(d)*N-Math.sin(d)*T+(r+c)/2,C=Math.sin(d)*N+Math.cos(d)*T+(t+f)/2,z=Math.atan2((x-T)/n,(y-N)/e),D=Math.atan2((-x-T)/n,(-y-N)/e)-z;return D<0&&u===1?D+=2*Math.PI:D>0&&u===0&&(D-=2*Math.PI),{cx:R,cy:C,startAngle:z,deltaAngle:D}}function nD(r,t,e,n,a,l,u){var c=Math.sin(u-l)*(Math.sqrt(4+3*Math.pow(Math.tan((u-l)/2),2))-1)/3,f=Math.cos(a),d=Math.sin(a),v=r+e*Math.cos(l)*f-n*Math.sin(l)*d,m=t+e*Math.cos(l)*d+n*Math.sin(l)*f,y=r+e*Math.cos(u)*f-n*Math.sin(u)*d,x=t+e*Math.cos(u)*d+n*Math.sin(u)*f,b=v+c*(-e*Math.sin(l)*f-n*Math.cos(l)*d),w=m+c*(-e*Math.sin(l)*d+n*Math.cos(l)*f),S=y-c*(-e*Math.sin(u)*f-n*Math.cos(u)*d),M=x-c*(-e*Math.sin(u)*d+n*Math.cos(u)*f);return[b,w,S,M,y,x]}function rD(r,t,e){var n=[];n=n.concat(t);var a=e.lineWidth,l=a===void 0?1:a,u=e.color,c=u===void 0?"currentColor":u;r.lineWidth=l,r.strokeStyle=c,r.setLineDash([]),n.forEach(function(f){var d=f.x,v=f.y,m=f.path,y=m.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);if(at(y)){var x=d,b=v;r.beginPath(),y.forEach(function(w){var S=0,M=0,N=0,T=0,R=w[0],C=w.slice(1).trim().split(/[\s,]+/).map(Number);switch(R){case"M":S=C[0]+x,M=C[1]+b,r.moveTo(S,M),N=S,T=M;break;case"m":S+=C[0],M+=C[1],r.moveTo(S,M),N=S,T=M;break;case"L":S=C[0]+x,M=C[1]+b,r.lineTo(S,M);break;case"l":S+=C[0],M+=C[1],r.lineTo(S,M);break;case"H":S=C[0]+x,r.lineTo(S,M);break;case"h":S+=C[0],r.lineTo(S,M);break;case"V":M=C[0]+b,r.lineTo(S,M);break;case"v":M+=C[0],r.lineTo(S,M);break;case"C":r.bezierCurveTo(C[0]+x,C[1]+b,C[2]+x,C[3]+b,C[4]+x,C[5]+b),S=C[4]+x,M=C[5]+b;break;case"c":r.bezierCurveTo(S+C[0],M+C[1],S+C[2],M+C[3],S+C[4],M+C[5]),S+=C[4],M+=C[5];break;case"S":r.bezierCurveTo(S,M,C[0]+x,C[1]+b,C[2]+x,C[3]+b),S=C[2]+x,M=C[3]+b;break;case"s":r.bezierCurveTo(S,M,S+C[0],M+C[1],S+C[2],M+C[3]),S+=C[2],M+=C[3];break;case"Q":r.quadraticCurveTo(C[0]+x,C[1]+b,C[2]+x,C[3]+b),S=C[2]+x,M=C[3]+b;break;case"q":r.quadraticCurveTo(S+C[0],M+C[1],S+C[2],M+C[3]),S+=C[2],M+=C[3];break;case"T":r.quadraticCurveTo(S,M,C[0]+x,C[1]+b),S=C[0]+x,M=C[1]+b;break;case"t":r.quadraticCurveTo(S,M,S+C[0],M+C[1]),S+=C[0],M+=C[1];break;case"A":Vy(r,S,M,C,x,b,!1),S=C[5]+x,M=C[6]+b;break;case"a":Vy(r,S,M,C,x,b,!0),S+=C[5],M+=C[6];break;case"Z":case"z":r.closePath(),S=N,M=T;break}}),e.style==="fill"?r.fill():r.stroke()}})}var sD={name:"path",checkEventOn:Xx,draw:function(r,t,e){rD(r,t,e)}},Qx={},aD=[HR,gR,qR,XR,QR,tD,sD];aD.forEach(function(r){Qx[r.name]=vR.extend(r)});function lD(r){var t;return(t=Qx[r])!==null&&t!==void 0?t:null}var ji=(function(r){Pt(t,r);function t(e){var n=r.call(this)||this;return n._widget=e,n}return t.prototype.getWidget=function(){return this._widget},t.prototype.createFigure=function(e,n){var a=lD(e.name);if(a!==null){var l=new a(e);if(at(n)){for(var u in n)n.hasOwnProperty(u)&&l.registerEvent(u,n[u]);this.addChild(l)}return l}return null},t.prototype.draw=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];this.clear(),this.drawImp(e,n)},t.prototype.checkEventOn=function(e){return!0},t})(jd),oD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a,l=this.getWidget(),u=this.getWidget().getPane(),c=u.getChart(),f=l.getBounding(),d=c.getStyles().grid,v=d.show;if(v){e.save(),e.globalCompositeOperation="destination-over";var m=d.horizontal,y=m.show;if(y){var x=u.getAxisComponent(),b=x.getTicks().map(function(N){return{coordinates:[{x:0,y:N.coord},{x:f.width,y:N.coord}]}});(n=this.createFigure({name:"line",attrs:b,styles:m}))===null||n===void 0||n.draw(e)}var w=d.vertical,S=w.show;if(S){var M=c.getXAxisPane().getAxisComponent(),b=M.getTicks().map(function(T){return{coordinates:[{x:T.coord,y:0},{x:T.coord,y:f.height}]}});(a=this.createFigure({name:"line",attrs:b,styles:w}))===null||a===void 0||a.draw(e)}e.restore()}},t})(ji),$x=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.eachChildren=function(e){for(var n=this.getWidget().getPane(),a=n.getChart().getChartStore(),l=a.getVisibleRangeDataList(),u=a.getBarSpace(),c=l.length,f=0;f<c;)e(l[f],u,f),++f},t})(ji),Zx=(function(r){Pt(t,r);function t(){var e=r.apply(this,Wu([],_l(arguments),!1))||this;return e._boundCandleBarClickEvent=function(n){return function(){return e.getWidget().getPane().getChart().getChartStore().executeAction("onCandleBarClick",n),!1}},e}return t.prototype.drawImp=function(e){var n=this,a=this.getWidget().getPane(),l=a.getId()===Vt.CANDLE,u=a.getChart().getChartStore(),c=this.getCandleBarOptions();if(c!==null){var f=c.type,d=c.styles,v=0,m=0;if(c.type==="ohlc"){var y=u.getBarSpace().gapBar;v=Math.min(Math.max(Math.round(y*.2),1),8),v>2&&v%2===1&&v--,m=Math.floor(v/2)}var x=a.getAxisComponent();this.eachChildren(function(b,w){var S,M=b.x,N=b.data,T=N.current,R=N.prev;if(at(T)){var C=T.open,z=T.high,D=T.low,I=T.close,B=d.compareRule==="current_open"?C:(S=R?.close)!==null&&S!==void 0?S:I,V=[];I>B?(V[0]=d.upColor,V[1]=d.upBorderColor,V[2]=d.upWickColor):I<B?(V[0]=d.downColor,V[1]=d.downBorderColor,V[2]=d.downWickColor):(V[0]=d.noChangeColor,V[1]=d.noChangeBorderColor,V[2]=d.noChangeWickColor);var W=x.convertToPixel(C),Z=x.convertToPixel(I),it=[W,Z,x.convertToPixel(z),x.convertToPixel(D)];it.sort(function(j,U){return j-U});var X=w.gapBar%2===0?1:0,ot=[];switch(f){case"candle_solid":{ot=n._createSolidBar(M,it,w,V,X);break}case"candle_stroke":{ot=n._createStrokeBar(M,it,w,V,X);break}case"candle_up_stroke":{I>C?ot=n._createStrokeBar(M,it,w,V,X):ot=n._createSolidBar(M,it,w,V,X);break}case"candle_down_stroke":{C>I?ot=n._createStrokeBar(M,it,w,V,X):ot=n._createSolidBar(M,it,w,V,X);break}case"ohlc":{ot=[{name:"rect",attrs:[{x:M-m,y:it[0],width:v,height:it[3]-it[0]},{x:M-w.halfGapBar,y:W+v>it[3]?it[3]-v:W,width:w.halfGapBar-m,height:v},{x:M+m,y:Z+v>it[3]?it[3]-v:Z,width:w.halfGapBar-m,height:v}],styles:{color:V[0]}}];break}}ot.forEach(function(j){var U,st=null;l&&(st={mouseClickEvent:n._boundCandleBarClickEvent(b)}),(U=n.createFigure(j,st??void 0))===null||U===void 0||U.draw(e)})}})}},t.prototype.getCandleBarOptions=function(){var e=this.getWidget().getPane().getChart().getStyles().candle;return{type:e.type,styles:e.bar}},t.prototype._createSolidBar=function(e,n,a,l,u){return[{name:"rect",attrs:{x:e,y:n[0],width:1,height:n[3]-n[0]},styles:{color:l[2]}},{name:"rect",attrs:{x:e-a.halfGapBar,y:n[1],width:a.gapBar+u,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke_fill",color:l[0],borderColor:l[1]}}]},t.prototype._createStrokeBar=function(e,n,a,l,u){return[{name:"rect",attrs:[{x:e,y:n[0],width:1,height:n[1]-n[0]},{x:e,y:n[2],width:1,height:n[3]-n[2]}],styles:{color:l[2]}},{name:"rect",attrs:{x:e-a.halfGapBar,y:n[1],width:a.gapBar+u,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke",borderColor:l[1]}}]},t})($x),uD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCandleBarOptions=function(){var e,n,a=this.getWidget().getPane(),l=a.getAxisComponent();if(!l.isInCandle()){var u=a.getChart().getChartStore(),c=u.getIndicatorsByPaneId(a.getId());try{for(var f=Vi(c),d=f.next();!d.done;d=f.next()){var v=d.value;if(v.shouldOhlc&&v.visible){var m=v.styles,y=u.getStyles().indicator,x=je(m,"ohlc.compareRule",y.ohlc.compareRule),b=je(m,"ohlc.upColor",y.ohlc.upColor),w=je(m,"ohlc.downColor",y.ohlc.downColor),S=je(m,"ohlc.noChangeColor",y.ohlc.noChangeColor);return{type:"ohlc",styles:{compareRule:x,upColor:b,downColor:w,noChangeColor:S,upBorderColor:b,downBorderColor:w,noChangeBorderColor:S,upWickColor:b,downWickColor:w,noChangeWickColor:S}}}}}catch(M){e={error:M}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}}return null},t.prototype.drawImp=function(e){var n=this;r.prototype.drawImp.call(this,e);var a=this.getWidget(),l=a.getPane(),u=l.getChart(),c=a.getBounding(),f=u.getXAxisPane().getAxisComponent(),d=l.getAxisComponent(),v=u.getChartStore(),m=v.getIndicatorsByPaneId(l.getId()),y=v.getStyles().indicator;e.save(),m.forEach(function(x){if(x.visible){x.zLevel<0?e.globalCompositeOperation="destination-over":e.globalCompositeOperation="source-over";var b=!1;if(x.draw!==null&&(e.save(),b=x.draw({ctx:e,chart:u,indicator:x,bounding:c,xAxis:f,yAxis:d}),e.restore()),!b){var w=x.result,S=[];n.eachChildren(function(M,N){var T,R,C,z=N.halfGapBar,D=M.dataIndex,I=M.x,B=f.convertToPixel(D-1),V=f.convertToPixel(D+1),W=(T=w[D-1])!==null&&T!==void 0?T:null,Z=(R=w[D])!==null&&R!==void 0?R:null,it=(C=w[D+1])!==null&&C!==void 0?C:null,X={x:B},ot={x:I},j={x:V};x.figures.forEach(function(U){var st=U.key,ft=W?.[st];Dt(ft)&&(X[st]=d.convertToPixel(ft));var rt=Z?.[st];Dt(rt)&&(ot[st]=d.convertToPixel(rt));var k=it?.[st];Dt(k)&&(j[st]=d.convertToPixel(k))}),kd(x,D,y,function(U,st,ft){var rt,k,L;if(at(Z?.[U.key])){var F=ot[U.key],q=(rt=U.attrs)===null||rt===void 0?void 0:rt.call(U,{data:{prev:W,current:Z,next:it},coordinate:{prev:X,current:ot,next:j},bounding:c,barSpace:N,xAxis:f,yAxis:d});if(!at(q))switch(U.type){case"circle":{q={x:I,y:F,r:Math.max(1,z)};break}case"rect":case"bar":{var $=(k=U.baseValue)!==null&&k!==void 0?k:d.getRange().from,J=d.convertToPixel($),tt=Math.abs(J-F);$!==Z?.[U.key]&&(tt=Math.max(1,tt));var vt=0;F>J?vt=J:vt=F,q={x:I-z,y:vt,width:Math.max(1,z*2),height:tt};break}case"line":{at(S[ft])||(S[ft]=[]),Dt(ot[U.key])&&Dt(j[U.key])&&S[ft].push({coordinates:[{x:ot.x,y:ot[U.key]},{x:j.x,y:j[U.key]}],styles:st});break}}var pt=U.type;at(q)&&pt!=="line"&&((L=n.createFigure({name:pt==="bar"?"rect":pt,attrs:q,styles:st}))===null||L===void 0||L.draw(e))}})}),S.forEach(function(M){var N,T,R,C;if(M.length>1){for(var z=[{coordinates:[M[0].coordinates[0],M[0].coordinates[1]],styles:M[0].styles}],D=1;D<M.length;D++){var I=z[z.length-1],B=M[D],V=I.coordinates[I.coordinates.length-1];V.x===B.coordinates[0].x&&V.y===B.coordinates[0].y&&I.styles.style===B.styles.style&&I.styles.color===B.styles.color&&I.styles.size===B.styles.size&&I.styles.smooth===B.styles.smooth&&((N=I.styles.dashedValue)===null||N===void 0?void 0:N[0])===((T=B.styles.dashedValue)===null||T===void 0?void 0:T[0])&&((R=I.styles.dashedValue)===null||R===void 0?void 0:R[1])===((C=B.styles.dashedValue)===null||C===void 0?void 0:C[1])?I.coordinates.push(B.coordinates[1]):z.push({coordinates:[B.coordinates[0],B.coordinates[1]],styles:B.styles})}z.forEach(function(W){var Z,it=W.coordinates,X=W.styles;(Z=n.createFigure({name:"line",attrs:{coordinates:it},styles:X}))===null||Z===void 0||Z.draw(e)})}})}}}),e.restore()},t})(Zx),cD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this.getWidget(),a=n.getPane(),l=n.getBounding(),u=n.getPane().getChart().getChartStore(),c=u.getCrosshair(),f=u.getStyles().crosshair;if(Kt(c.paneId)&&f.show){if(c.paneId===a.getId()){var d=c.y;this._drawLine(e,[{x:0,y:d},{x:l.width,y:d}],f.horizontal)}var v=c.realX;this._drawLine(e,[{x:v,y:0},{x:v,y:l.height}],f.vertical)}},t.prototype._drawLine=function(e,n,a){var l;if(a.show){var u=a.line;u.show&&((l=this.createFigure({name:"line",attrs:{coordinates:n},styles:u}))===null||l===void 0||l.draw(e))}},t})(ji),Jx=(function(r){Pt(t,r);function t(e){var n=r.call(this,e)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(a,l){return function(){var u=n.getWidget().getPane();return u.getChart().getChartStore().executeAction(a,l),!0}},n._featureMouseMoveEvent=function(a){return function(){return n._activeFeatureInfo=a,!0}},n.registerEvent("mouseMoveEvent",function(a){return n._activeFeatureInfo=null,!1}),n}return t.prototype.drawImp=function(e){var n=this.getWidget(),a=n.getPane(),l=a.getChart().getChartStore(),u=l.getCrosshair();if(at(u.kLineData)){var c=n.getBounding(),f=l.getStyles().indicator.tooltip,d=f.offsetLeft,v=f.offsetTop,m=f.offsetRight;this.drawIndicatorTooltip(e,d,v,c.width-m)}},t.prototype.drawIndicatorTooltip=function(e,n,a,l){var u=this,c=this.getWidget().getPane(),f=c.getChart().getChartStore(),d=f.getStyles().indicator,v=d.tooltip;if(this.isDrawTooltip(f.getCrosshair(),v)){var m=f.getIndicatorsByPaneId(c.getId()),y=v.title,x=v.legend;m.forEach(function(b){var w=0,S={x:n,y:a},M=u.getIndicatorTooltipData(b),N=M.name,T=M.calcParamsText,R=M.legends,C=M.features,z=N.length>0,D=R.length>0;if(z||D){var I=u.classifyTooltipFeatures(C);if(w=u.drawStandardTooltipFeatures(e,I[0],S,b,n,w,l),z){var B=N;T.length>0&&(B="".concat(B).concat(T));var V=y.color;w=u.drawStandardTooltipLegends(e,[{title:{text:"",color:V},value:{text:B,color:V}}],S,n,w,l,y)}w=u.drawStandardTooltipFeatures(e,I[1],S,b,n,w,l),D&&(w=u.drawStandardTooltipLegends(e,R,S,n,w,l,x)),w=u.drawStandardTooltipFeatures(e,I[2],S,b,n,w,l),a=S.y+w}})}return a},t.prototype.drawStandardTooltipFeatures=function(e,n,a,l,u,c,f){var d=this;if(n.length>0){var v=0,m=0;n.forEach(function(b){var w=b.marginLeft,S=w===void 0?0:w,M=b.marginTop,N=M===void 0?0:M,T=b.marginRight,R=T===void 0?0:T,C=b.marginBottom,z=C===void 0?0:C,D=b.paddingLeft,I=D===void 0?0:D,B=b.paddingTop,V=B===void 0?0:B,W=b.paddingRight,Z=W===void 0?0:W,it=b.paddingBottom,X=it===void 0?0:it,ot=b.size,j=ot===void 0?0:ot,U=b.type,st=b.content,ft=0;if(U==="icon_font"){var rt=st;e.font=Hr(j,"normal",rt.family),ft=e.measureText(rt.code).width}else ft=j;v+=S+I+ft+Z+R,m=Math.max(m,N+V+j+X+z)}),a.x+v>f?(a.x=u,a.y+=c,c=m):c=Math.max(c,m);var y=this.getWidget().getPane(),x=y.getId();n.forEach(function(b){var w,S,M,N,T,R=b.marginLeft,C=R===void 0?0:R,z=b.marginTop,D=z===void 0?0:z,I=b.marginRight,B=I===void 0?0:I,V=b.paddingLeft,W=V===void 0?0:V,Z=b.paddingTop,it=Z===void 0?0:Z,X=b.paddingRight,ot=X===void 0?0:X,j=b.paddingBottom,U=j===void 0?0:j,st=b.backgroundColor,ft=b.activeBackgroundColor,rt=b.borderRadius,k=b.size,L=k===void 0?0:k,F=b.color,q=b.activeColor,$=b.type,J=b.content,tt=F,vt=st;((w=d._activeFeatureInfo)===null||w===void 0?void 0:w.paneId)===x&&((S=d._activeFeatureInfo.indicator)===null||S===void 0?void 0:S.id)===l?.id&&d._activeFeatureInfo.feature.id===b.id&&(tt=q??F,vt=ft??st);var pt="onCandleTooltipFeatureClick",ut={paneId:x,feature:b};at(l)&&(pt="onIndicatorTooltipFeatureClick",ut.indicator=l);var dt={mouseDownEvent:d._featureClickEvent(pt,ut),mouseMoveEvent:d._featureMouseMoveEvent(ut)},St=0;if($==="icon_font"){var yt=J;(M=d.createFigure({name:"text",attrs:{text:yt.code,x:a.x+C,y:a.y+D},styles:{paddingLeft:W,paddingTop:it,paddingRight:ot,paddingBottom:U,borderRadius:rt,size:L,family:yt.family,color:tt,backgroundColor:vt}},dt))===null||M===void 0||M.draw(e),St=e.measureText(yt.code).width}else{(N=d.createFigure({name:"rect",attrs:{x:a.x+C,y:a.y+D,width:L,height:L},styles:{paddingLeft:W,paddingTop:it,paddingRight:ot,paddingBottom:U,color:vt}},dt))===null||N===void 0||N.draw(e);var _t=J;(T=d.createFigure({name:"path",attrs:{path:_t.path,x:a.x+C+W,y:a.y+D+it,width:L,height:L},styles:{style:_t.style,lineWidth:_t.lineWidth,color:tt}}))===null||T===void 0||T.draw(e),St=L}a.x+=C+W+St+ot+B})}return c},t.prototype.drawStandardTooltipLegends=function(e,n,a,l,u,c,f){var d=this;if(n.length>0){var v=f.marginLeft,m=f.marginTop,y=f.marginRight,x=f.marginBottom,b=f.size,w=f.family,S=f.weight;e.font=Hr(b,S,w),n.forEach(function(M){var N,T,R=M.title,C=M.value,z=e.measureText(R.text).width,D=e.measureText(C.text).width,I=z+D,B=m+b+x;a.x+v+I+y>c?(a.x=l,a.y+=u,u=B):u=Math.max(u,B),R.text.length>0&&((N=d.createFigure({name:"text",attrs:{x:a.x+v,y:a.y+m,text:R.text},styles:{color:R.color,size:b,family:w,weight:S}}))===null||N===void 0||N.draw(e)),(T=d.createFigure({name:"text",attrs:{x:a.x+v+z,y:a.y+m,text:C.text},styles:{color:C.color,size:b,family:w,weight:S}}))===null||T===void 0||T.draw(e),a.x+=v+I+y})}return u},t.prototype.isDrawTooltip=function(e,n){var a=n.showRule;return a==="always"||a==="follow_cross"&&Kt(e.paneId)},t.prototype.getIndicatorTooltipData=function(e){var n,a=this.getWidget().getPane().getChart().getChartStore(),l=a.getStyles().indicator,u=l.tooltip,c=u.title,f="",d="";if(c.show&&(c.showName&&(f=e.shortName),c.showParams)){var v=e.calcParams;v.length>0&&(d="(".concat(v.join(","),")"))}var m={name:f,calcParamsText:d,legends:[],features:u.features},y=a.getCrosshair().dataIndex,x=e.result,b=a.getInnerFormatter(),w=a.getDecimalFold(),S=a.getThousandsSeparator(),M=[];if(e.visible){var N=(n=x[y])!==null&&n!==void 0?n:{},T=u.legend.defaultValue;kd(e,y,l,function(X,ot){if(Kt(X.title)){var j=ot.color,U=N[X.key];Dt(U)&&(U=We(U,e.precision),e.shouldFormatBigNumber&&(U=b.formatBigNumber(U)),U=w.format(S.format(U))),M.push({title:{text:X.title,color:j},value:{text:U??T,color:j}})}}),m.legends=M}if(xi(e.createTooltipDataSource)){var R=this.getWidget(),C=R.getPane(),z=C.getChart(),D=e.createTooltipDataSource({chart:z,indicator:e,crosshair:a.getCrosshair(),bounding:R.getBounding(),xAxis:C.getChart().getXAxisPane().getAxisComponent(),yAxis:C.getAxisComponent()}),I=D.name,B=D.calcParamsText,V=D.legends,W=D.features;if(c.show&&(Kt(I)&&c.showName&&(m.name=I),Kt(B)&&c.showParams&&(m.calcParamsText=B)),at(W)&&(m.features=W),at(V)&&e.visible){var Z=[],it=l.tooltip.legend.color;V.forEach(function(X){var ot={text:"",color:it};Qi(X.title)?ot=X.title:ot.text=X.title;var j={text:"",color:it};Qi(X.value)?j=X.value:j.text=X.value,Dt(Number(j.text))&&(j.text=w.format(S.format(j.text))),Z.push({title:ot,value:j})}),m.legends=Z}}return m},t.prototype.classifyTooltipFeatures=function(e){var n=[],a=[],l=[];return e.forEach(function(u){switch(u.position){case"left":{n.push(u);break}case"middle":{a.push(u);break}case"right":{l.push(u);break}}}),[n,a,l]},t})(ji),tS=(function(r){Pt(t,r);function t(e){var n=r.call(this,e)||this;return n._initEvent(),n}return t.prototype._initEvent=function(){var e=this,n=this.getWidget(),a=n.getPane(),l=a.getId(),u=a.getChart(),c=u.getChartStore();this.registerEvent("mouseMoveEvent",function(f){var d,v=c.getProgressOverlayInfo();if(v!==null){var m=v.overlay,y=v.paneId;m.isStart()&&(c.updateProgressOverlayInfo(l),y=l);var x=m.points.length-1;return m.isDrawing()&&y===l&&(m.eventMoveForDrawing(e._coordinateToPoint(m,f)),(d=m.onDrawing)===null||d===void 0||d.call(m,bt({chart:u,overlay:m},f))),e._figureMouseMoveEvent(m,"point",x,{key:"".concat(Ls,"point_").concat(x),type:"circle",attrs:{}})(f)}return c.setHoverOverlayInfo({paneId:l,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(b,w){return e._processOverlayMouseEnterEvent(b,w,f)},function(b,w){return e._processOverlayMouseLeaveEvent(b,w,f)}),n.setForceCursor(null),!1}).registerEvent("mouseClickEvent",function(f){var d,v,m=c.getProgressOverlayInfo();if(m!==null){var y=m.overlay,x=m.paneId;y.isStart()&&(c.updateProgressOverlayInfo(l,!0),x=l);var b=y.points.length-1;return y.isDrawing()&&x===l&&(y.eventMoveForDrawing(e._coordinateToPoint(y,f)),(d=y.onDrawing)===null||d===void 0||d.call(y,bt({chart:u,overlay:y},f)),y.nextStep(),y.isDrawing()||(c.progressOverlayComplete(),(v=y.onDrawEnd)===null||v===void 0||v.call(y,bt({chart:u,overlay:y},f)))),e._figureMouseClickEvent(y,"point",b,{key:"".concat(Ls,"point_").concat(b),type:"circle",attrs:{}})(f)}return c.setClickOverlayInfo({paneId:l,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(w,S){return e._processOverlaySelectedEvent(w,S,f)},function(w,S){return e._processOverlayDeselectedEvent(w,S,f)}),!1}).registerEvent("mouseDoubleClickEvent",function(f){var d,v=c.getProgressOverlayInfo();if(v!==null){var m=v.overlay,y=v.paneId;m.isDrawing()&&y===l&&(m.forceComplete(),m.isDrawing()||(c.progressOverlayComplete(),(d=m.onDrawEnd)===null||d===void 0||d.call(m,bt({chart:u,overlay:m},f))));var x=m.points.length-1;return e._figureMouseClickEvent(m,"point",x,{key:"".concat(Ls,"point_").concat(x),type:"circle",attrs:{}})(f)}return!1}).registerEvent("mouseRightClickEvent",function(f){var d=c.getProgressOverlayInfo();if(d!==null){var v=d.overlay;if(v.isDrawing()){var m=v.points.length-1;return e._figureMouseRightClickEvent(v,"point",m,{key:"".concat(Ls,"point_").concat(m),type:"circle",attrs:{}})(f)}}return!1}).registerEvent("mouseUpEvent",function(f){var d,v=c.getPressedOverlayInfo(),m=v.overlay,y=v.figure;return m!==null&&Pi("onPressedMoveEnd",y)&&((d=m.onPressedMoveEnd)===null||d===void 0||d.call(m,bt({chart:u,overlay:m,figure:y??void 0},f))),c.setPressedOverlayInfo({paneId:l,overlay:null,figureType:"none",figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(f){var d,v=c.getPressedOverlayInfo(),m=v.overlay,y=v.figureType,x=v.figureIndex,b=v.figure;if(m!==null&&Pi("onPressedMoving",b)){if(!m.lock){var w=e._coordinateToPoint(m,f);y==="point"?m.eventPressedPointMove(w,x):m.eventPressedOtherMove(w,e.getWidget().getPane().getChart().getChartStore());var S=!1;(d=m.onPressedMoving)===null||d===void 0||d.call(m,bt(bt({chart:u,overlay:m,figure:b??void 0},f),{preventDefault:function(){S=!0}})),S?e.getWidget().setForceCursor(null):e.getWidget().setForceCursor("pointer")}return!0}return e.getWidget().setForceCursor(null),!1})},t.prototype._createFigureEvents=function(e,n,a,l){return e.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(e,n,a,l),mouseDownEvent:this._figureMouseDownEvent(e,n,a,l),mouseClickEvent:this._figureMouseClickEvent(e,n,a,l),mouseRightClickEvent:this._figureMouseRightClickEvent(e,n,a,l),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(e,n,a,l)}},t.prototype._processOverlayMouseEnterEvent=function(e,n,a){return xi(e.onMouseEnter)&&Pi("onMouseEnter",n)?(e.onMouseEnter(bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._processOverlayMouseLeaveEvent=function(e,n,a){return xi(e.onMouseLeave)&&Pi("onMouseLeave",n)?(e.onMouseLeave(bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._processOverlaySelectedEvent=function(e,n,a){var l;return Pi("onSelected",n)?((l=e.onSelected)===null||l===void 0||l.call(e,bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._processOverlayDeselectedEvent=function(e,n,a){var l;return Pi("onDeselected",n)?((l=e.onDeselected)===null||l===void 0||l.call(e,bt({chart:this.getWidget().getPane().getChart(),overlay:e,figure:n??void 0},a)),!0):!1},t.prototype._figureMouseMoveEvent=function(e,n,a,l){var u=this;return function(c){var f,d=u.getWidget().getPane(),v=!e.isDrawing()&&Pi("onMouseMove",l);if(v){var m=!1;(f=e.onMouseMove)===null||f===void 0||f.call(e,bt(bt({chart:d.getChart(),overlay:e,figure:l},c),{preventDefault:function(){m=!0}})),m?u.getWidget().setForceCursor(null):u.getWidget().setForceCursor("pointer")}return d.getChart().getChartStore().setHoverOverlayInfo({paneId:d.getId(),overlay:e,figureType:n,figure:l,figureIndex:a},function(y,x){return u._processOverlayMouseEnterEvent(y,x,c)},function(y,x){return u._processOverlayMouseLeaveEvent(y,x,c)}),v}},t.prototype._figureMouseDownEvent=function(e,n,a,l){var u=this;return function(c){var f,d=u.getWidget().getPane(),v=d.getId();return e.startPressedMove(u._coordinateToPoint(e,c)),Pi("onPressedMoveStart",l)?((f=e.onPressedMoveStart)===null||f===void 0||f.call(e,bt({chart:d.getChart(),overlay:e,figure:l},c)),d.getChart().getChartStore().setPressedOverlayInfo({paneId:v,overlay:e,figureType:n,figureIndex:a,figure:l}),!e.isDrawing()):!1}},t.prototype._figureMouseClickEvent=function(e,n,a,l){var u=this;return function(c){var f,d=u.getWidget().getPane(),v=d.getId(),m=!e.isDrawing()&&Pi("onClick",l);return m&&((f=e.onClick)===null||f===void 0||f.call(e,bt({chart:u.getWidget().getPane().getChart(),overlay:e,figure:l},c))),d.getChart().getChartStore().setClickOverlayInfo({paneId:v,overlay:e,figureType:n,figureIndex:a,figure:l},function(y,x){return u._processOverlaySelectedEvent(y,x,c)},function(y,x){return u._processOverlayDeselectedEvent(y,x,c)}),m}},t.prototype._figureMouseDoubleClickEvent=function(e,n,a,l){var u=this;return function(c){var f;return Pi("onDoubleClick",l)?((f=e.onDoubleClick)===null||f===void 0||f.call(e,bt(bt({},c),{chart:u.getWidget().getPane().getChart(),figure:l,overlay:e})),!e.isDrawing()):!1}},t.prototype._figureMouseRightClickEvent=function(e,n,a,l){var u=this;return function(c){var f;if(Pi("onRightClick",l)){var d=!1;return(f=e.onRightClick)===null||f===void 0||f.call(e,bt(bt({chart:u.getWidget().getPane().getChart(),overlay:e,figure:l},c),{preventDefault:function(){d=!0}})),d||u.getWidget().getPane().getChart().getChartStore().removeOverlay(e),!e.isDrawing()}return!1}},t.prototype._coordinateToPoint=function(e,n){var a,l={},u=this.getWidget().getPane(),c=u.getChart(),f=u.getId(),d=c.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var v=c.getXAxisPane().getAxisComponent(),m=v.convertFromPixel(n.x),y=(a=d.dataIndexToTimestamp(m))!==null&&a!==void 0?a:void 0;l.timestamp=y,l.dataIndex=m}if(this.coordinateToPointValueFlag()){var x=u.getAxisComponent(),b=x.convertFromPixel(n.y);if(e.mode!=="normal"&&f===Vt.CANDLE&&Dt(l.dataIndex)){var w=d.getDataByDataIndex(l.dataIndex);if(w!==null){var S=e.modeSensitivity;if(b>w.high)if(e.mode==="weak_magnet"){var M=x.convertToPixel(w.high),N=x.convertFromPixel(M-S);b<N&&(b=w.high)}else b=w.high;else if(b<w.low)if(e.mode==="weak_magnet"){var T=x.convertToPixel(w.low),N=x.convertFromPixel(T-S);b>N&&(b=w.low)}else b=w.low;else{var R=Math.max(w.open,w.close),C=Math.min(w.open,w.close);b>R?b-R<w.high-b?b=R:b=w.high:b<C?b-w.low<C-b?b=w.low:b=C:R-b<b-C?b=R:b=C}}}l.value=b}return l},t.prototype.coordinateToPointValueFlag=function(){return!0},t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.dispatchEvent=function(e,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(e,n):r.prototype.dispatchEvent.call(this,e,n)},t.prototype.drawImp=function(e){var n=this,a=this.getCompleteOverlays();a.forEach(function(u){u.visible&&n._drawOverlay(e,u)});var l=this.getProgressOverlay();at(l)&&l.visible&&this._drawOverlay(e,l)},t.prototype._drawOverlay=function(e,n){var a=n.points,l=this.getWidget().getPane(),u=l.getChart(),c=u.getChartStore(),f=l.getAxisComponent(),d=u.getXAxisPane().getAxisComponent(),v=a.map(function(y){var x,b=null;Dt(y.timestamp)&&(b=c.timestampToDataIndex(y.timestamp));var w={x:0,y:0};return Dt(b)&&(w.x=d.convertToPixel(b)),Dt(y.value)&&(w.y=(x=f?.convertToPixel(y.value))!==null&&x!==void 0?x:0),w});if(v.length>0){var m=[].concat(this.getFigures(n,v));this.drawFigures(e,n,m)}this.drawDefaultFigures(e,n,v)},t.prototype.drawFigures=function(e,n,a){var l=this,u=this.getWidget().getPane().getChart().getStyles().overlay;a.forEach(function(c,f){var d=c.type,v=c.styles,m=c.attrs,y=[].concat(m);y.forEach(function(x){var b,w,S=l._createFigureEvents(n,"other",f,c),M=bt(bt(bt({},u[d]),(b=n.styles)===null||b===void 0?void 0:b[d]),v);(w=l.createFigure({name:d,attrs:x,styles:M},S??void 0))===null||w===void 0||w.draw(e)})})},t.prototype.getCompleteOverlays=function(){var e=this.getWidget().getPane();return e.getChart().getChartStore().getOverlaysByPaneId(e.getId())},t.prototype.getProgressOverlay=function(){var e=this.getWidget().getPane(),n=e.getChart().getChartStore().getProgressOverlayInfo();return at(n)&&n.paneId===e.getId()?n.overlay:null},t.prototype.getFigures=function(e,n){var a,l,u=this.getWidget(),c=u.getPane(),f=c.getChart(),d=c.getAxisComponent(),v=f.getXAxisPane().getAxisComponent(),m=u.getBounding();return(l=(a=e.createPointFigures)===null||a===void 0?void 0:a.call(e,{chart:f,overlay:e,coordinates:n,bounding:m,xAxis:v,yAxis:d}))!==null&&l!==void 0?l:[]},t.prototype.drawDefaultFigures=function(e,n,a){var l=this,u,c;if(n.needDefaultPointFigure){var f=this.getWidget().getPane().getChart().getChartStore(),d=f.getHoverOverlayInfo(),v=f.getClickOverlayInfo();if(((u=d.overlay)===null||u===void 0?void 0:u.id)===n.id&&d.figureType!=="none"||((c=v.overlay)===null||c===void 0?void 0:c.id)===n.id&&v.figureType!=="none"){var m=f.getStyles().overlay,y=n.styles,x=bt(bt({},m.point),y?.point);a.forEach(function(b,w){var S,M,N,T,R,C=b.x,z=b.y,D=x.radius,I=x.color,B=x.borderColor,V=x.borderSize;((S=d.overlay)===null||S===void 0?void 0:S.id)===n.id&&d.figureType==="point"&&((M=d.figure)===null||M===void 0?void 0:M.key)==="".concat(Ls,"point_").concat(w)&&(D=x.activeRadius,I=x.activeColor,B=x.activeBorderColor,V=x.activeBorderSize),(T=l.createFigure({name:"circle",attrs:{x:C,y:z,r:D+V},styles:{color:B}},(N=l._createFigureEvents(n,"point",w,{key:"".concat(Ls,"point_").concat(w),type:"circle",attrs:{x:C,y:z,r:D+V},styles:{color:B}}))!==null&&N!==void 0?N:void 0))===null||T===void 0||T.draw(e),(R=l.createFigure({name:"circle",attrs:{x:C,y:z,r:D},styles:{color:I}}))===null||R===void 0||R.draw(e)})}}},t})(ji),eS=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._gridView=new oD(a),a._indicatorView=new uD(a),a._crosshairLineView=new cD(a),a._tooltipView=a.createTooltipView(),a._overlayView=new tS(a),a.addChild(a._tooltipView),a.addChild(a._overlayView),a}return t.prototype.getName=function(){return Ut.MAIN},t.prototype.updateMain=function(e){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(e),this._indicatorView.draw(e),this._gridView.draw(e))},t.prototype.createTooltipView=function(){return new Jx(this)},t.prototype.updateMainContent=function(e){},t.prototype.updateOverlayContent=function(e){},t.prototype.updateOverlay=function(e){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(e),this._crosshairLineView.draw(e),this.updateOverlayContent(e)),this._tooltipView.draw(e)},t})(Ld),hD=(function(r){Pt(t,r);function t(){var e=r.apply(this,Wu([],_l(arguments),!1))||this;return e._ripplePoint=e.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),e._animationFrameTime=0,e._animation=new ad({iterationCount:1/0}).doFrame(function(n){e._animationFrameTime=n;var a=e.getWidget().getPane();a.getChart().updatePane(0,a.getId())}),e}return t.prototype.drawImp=function(e){var n,a,l,u=this.getWidget(),c=u.getPane(),f=c.getChart(),d=f.getDataList(),v=d.length-1,m=u.getBounding(),y=c.getAxisComponent(),x=f.getStyles().candle.area,b=[],w=Number.MAX_SAFE_INTEGER,S=Number.MIN_SAFE_INTEGER,M=null;if(this.eachChildren(function(D){var I=D.x,B=D.data.current,V=B?.[x.value];if(Dt(V)){var W=y.convertToPixel(V);S===Number.MIN_SAFE_INTEGER&&(S=I),b.push({x:I,y:W}),w=Math.min(w,W),D.dataIndex===v&&(M={x:I,y:W})}}),b.length>0){(n=this.createFigure({name:"line",attrs:{coordinates:b},styles:{color:x.lineColor,size:x.lineSize,smooth:x.smooth}}))===null||n===void 0||n.draw(e);var N=x.backgroundColor,T="";if(Cn(N)){var R=e.createLinearGradient(0,m.height,0,w);try{N.forEach(function(D){var I=D.offset,B=D.color;R.addColorStop(I,B)})}catch{}T=R}else T=N;e.fillStyle=T,e.beginPath(),e.moveTo(S,m.height),e.lineTo(b[0].x,b[0].y),Ux(e,b,x.smooth),e.lineTo(b[b.length-1].x,m.height),e.closePath(),e.fill()}var C=x.point;if(C.show&&at(M)){(a=this.createFigure({name:"circle",attrs:{x:M.x,y:M.y,r:C.radius},styles:{style:"fill",color:C.color}}))===null||a===void 0||a.draw(e);var z=C.rippleRadius;C.animation&&(z=C.radius+this._animationFrameTime/C.animationDuration*(C.rippleRadius-C.radius),this._animation.setDuration(C.animationDuration).start()),(l=this._ripplePoint)===null||l===void 0||l.setAttrs({x:M.x,y:M.y,r:z}).setStyles({style:"fill",color:C.rippleColor}).draw(e)}else this.stopAnimation()},t.prototype.stopAnimation=function(){this._animation.stop()},t})($x),fD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a,l=this.getWidget(),u=l.getPane(),c=u.getChart().getChartStore(),f=c.getStyles().candle.priceMark,d=f.high,v=f.low;if(f.show&&(d.show||v.show)){var m=c.getVisibleRangeHighLowPrice(),y=(a=(n=c.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&a!==void 0?a:Ue.PRICE,x=u.getAxisComponent(),b=m[0],w=b.price,S=b.x,M=m[1],N=M.price,T=M.x,R=x.convertToPixel(w),C=x.convertToPixel(N),z=c.getDecimalFold(),D=c.getThousandsSeparator();d.show&&w!==Number.MIN_SAFE_INTEGER&&this._drawMark(e,z.format(D.format(We(w,y))),{x:S,y:R},R<C?[-2,-5]:[2,5],d),v.show&&N!==Number.MAX_SAFE_INTEGER&&this._drawMark(e,z.format(D.format(We(N,y))),{x:T,y:C},R<C?[2,5]:[-2,-5],v)}},t.prototype._drawMark=function(e,n,a,l,u){var c,f,d,v=a.x,m=a.y+l[0];(c=this.createFigure({name:"line",attrs:{coordinates:[{x:v-2,y:m+l[0]},{x:v,y:m},{x:v+2,y:m+l[0]}]},styles:{color:u.color}}))===null||c===void 0||c.draw(e);var y=0,x=0,b="left",w=this.getWidget().getBounding().width;v>w/2?(y=v-5,x=y-u.textOffset,b="right"):(y=v+5,b="left",x=y+u.textOffset);var S=m+l[1];(f=this.createFigure({name:"line",attrs:{coordinates:[{x:v,y:m},{x:v,y:S},{x:y,y:S}]},styles:{color:u.color}}))===null||f===void 0||f.draw(e),(d=this.createFigure({name:"text",attrs:{x,y:S,text:n,align:b,baseline:"middle"},styles:{color:u.color,size:u.textSize,family:u.textFamily,weight:u.textWeight}}))===null||d===void 0||d.draw(e)},t})(ji),dD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a,l,u=this.getWidget(),c=u.getPane(),f=u.getBounding(),d=c.getChart().getChartStore(),v=d.getStyles().candle.priceMark,m=v.last,y=m.line;if(v.show&&m.show&&y.show){var x=c.getAxisComponent(),b=d.getDataList(),w=b[b.length-1];if(at(w)){var S=w.close,M=w.open,N=m.compareRule==="current_open"?M:(a=(n=b[b.length-2])===null||n===void 0?void 0:n.close)!==null&&a!==void 0?a:S,T=x.convertToNicePixel(S),R="";S>N?R=m.upColor:S<N?R=m.downColor:R=m.noChangeColor,(l=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:T},{x:f.width,y:T}]},styles:{style:y.style,color:R,size:y.size,dashedValue:y.dashedValue}}))===null||l===void 0||l.draw(e)}}},t})(ji),vD={second:"HH:mm:ss",minute:"HH:mm",hour:"MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},iS={second:"HH:mm:ss",minute:"YYYY-MM-DD HH:mm",hour:"YYYY-MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},pD={time:"",open:"",high:"",low:"",close:"",volume:"",turnover:"",change:"",second:"",minute:"",hour:"",day:"",week:"",month:"",year:""},mD={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: ",second:"S",minute:"",hour:"H",day:"D",week:"W",month:"M",year:"Y"},gD={"zh-CN":pD,"en-US":mD};function Uy(r,t){var e;return(e=gD[t][r])!==null&&e!==void 0?e:r}var yD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this.getWidget(),a=n.getPane().getChart().getChartStore(),l=a.getCrosshair();if(at(l.kLineData)){var u=n.getBounding(),c=a.getStyles(),f=c.candle,d=c.indicator;if(f.tooltip.showType==="rect"&&d.tooltip.showType==="rect"){var v=this.isDrawTooltip(l,f.tooltip),m=this.isDrawTooltip(l,d.tooltip);this._drawRectTooltip(e,v,m,f.tooltip.offsetTop)}else if(f.tooltip.showType==="standard"&&d.tooltip.showType==="standard"){var y=f.tooltip,x=y.offsetLeft,b=y.offsetTop,w=y.offsetRight,S=u.width-w,M=this._drawCandleStandardTooltip(e,x,b,S);this.drawIndicatorTooltip(e,x,M,S)}else if(f.tooltip.showType==="rect"&&d.tooltip.showType==="standard"){var N=f.tooltip,x=N.offsetLeft,b=N.offsetTop,w=N.offsetRight,S=u.width-w,T=this.drawIndicatorTooltip(e,x,b,S),v=this.isDrawTooltip(l,f.tooltip);this._drawRectTooltip(e,v,!1,T)}else{var R=f.tooltip,x=R.offsetLeft,b=R.offsetTop,w=R.offsetRight,S=u.width-w,C=this._drawCandleStandardTooltip(e,x,b,S),m=this.isDrawTooltip(l,d.tooltip);this._drawRectTooltip(e,!1,m,C)}}},t.prototype._drawCandleStandardTooltip=function(e,n,a,l){var u,c=this.getWidget().getPane().getChart().getChartStore(),f=c.getStyles().candle,d=f.tooltip,v=d.legend,m=0,y={x:n,y:a},x=c.getCrosshair();if(this.isDrawTooltip(x,d)){var b=d.title;if(b.show){var w=(u=c.getPeriod())!==null&&u!==void 0?u:{},S=w.type,M=S===void 0?"":S,N=w.span,T=N===void 0?"":N,R=Ny(b.template,bt(bt({},c.getSymbol()),{period:"".concat(T).concat(Uy(M,c.getLocale()))})),C=b.color,z=this.drawStandardTooltipLegends(e,[{title:{text:"",color:C},value:{text:R,color:C}}],{x:n,y:a},n,0,l,b);y.y=y.y+z}var D=this._getCandleTooltipLegends(),I=this.classifyTooltipFeatures(d.features);m=this.drawStandardTooltipFeatures(e,I[0],y,null,n,m,l),m=this.drawStandardTooltipFeatures(e,I[1],y,null,n,m,l),D.length>0&&(m=this.drawStandardTooltipLegends(e,D,y,n,m,l,v)),m=this.drawStandardTooltipFeatures(e,I[2],y,null,n,m,l)}return y.y+m},t.prototype._drawRectTooltip=function(e,n,a,l){var u=this,c,f,d=this.getWidget(),v=d.getPane(),m=v.getChart().getChartStore(),y=m.getStyles(),x=y.candle,b=y.indicator,w=x.tooltip,S=b.tooltip;if(n||a){var M=this._getCandleTooltipLegends(),N=w.offsetLeft,T=w.offsetTop,R=w.offsetRight,C=w.offsetBottom,z=w.legend,D=z.marginLeft,I=z.marginRight,B=z.marginTop,V=z.marginBottom,W=z.size,Z=z.weight,it=z.family,X=w.rect,ot=X.position,j=X.paddingLeft,U=X.paddingRight,st=X.paddingTop,ft=X.paddingBottom,rt=X.offsetLeft,k=X.offsetRight,L=X.offsetTop,F=X.offsetBottom,q=X.borderSize,$=X.borderRadius,J=X.borderColor,tt=X.color,vt=0,pt=0,ut=0;n&&(e.font=Hr(W,Z,it),M.forEach(function(De){var he=De.title,Je=De.value,Si="".concat(he.text).concat(Je.text),zi=e.measureText(Si).width+D+I;vt=Math.max(vt,zi)}),ut+=(V+B+W)*M.length);var dt=S.legend,St=dt.marginLeft,yt=dt.marginRight,_t=dt.marginTop,xt=dt.marginBottom,Mt=dt.size,jt=dt.weight,gt=dt.family,At=[];if(a){var wt=m.getIndicatorsByPaneId(v.getId());e.font=Hr(Mt,jt,gt),wt.forEach(function(De){var he=u.getIndicatorTooltipData(De).legends;At.push(he),he.forEach(function(Je){var Si=Je.title,zi=Je.value,en="".concat(Si.text).concat(zi.text),Xr=e.measureText(en).width+St+yt;vt=Math.max(vt,Xr),ut+=_t+xt+Mt})})}if(pt+=vt,pt!==0&&ut!==0){var Nt=m.getCrosshair(),Lt=d.getBounding(),ae=v.getYAxisWidget().getBounding();pt+=q*2+j+U,ut+=q*2+st+ft;var Qt=Lt.width/2,me=ot==="pointer"&&Nt.paneId===Vt.CANDLE,Xe=((c=Nt.realX)!==null&&c!==void 0?c:0)>Qt,ce=0;if(me){var ge=Nt.realX;Xe?ce=ge-k-pt:ce=ge+rt}else{var He=this.getWidget().getPane().getAxisComponent();Xe?(ce=rt+N,He.inside&&He.position==="left"&&(ce+=ae.width)):(ce=Lt.width-k-pt-R,He.inside&&He.position==="right"&&(ce-=ae.width))}var Ge=l+L;if(me){var tn=Nt.y;Ge=tn-ut/2,Ge+ut>Lt.height-F-C&&(Ge=Lt.height-F-ut-C),Ge<l+L&&(Ge=l+L+T)}(f=this.createFigure({name:"rect",attrs:{x:ce,y:Ge,width:pt,height:ut},styles:{style:"stroke_fill",color:tt,borderColor:J,borderSize:q,borderRadius:$}}))===null||f===void 0||f.draw(e);var qr=ce+q+j+D,Ze=Ge+q+st;if(n&&M.forEach(function(De){var he,Je;Ze+=B;var Si=De.title;(he=u.createFigure({name:"text",attrs:{x:qr,y:Ze,text:Si.text},styles:{color:Si.color,size:W,family:it,weight:Z}}))===null||he===void 0||he.draw(e);var zi=De.value;(Je=u.createFigure({name:"text",attrs:{x:ce+pt-q-I-U,y:Ze,text:zi.text,align:"right"},styles:{color:zi.color,size:W,family:it,weight:Z}}))===null||Je===void 0||Je.draw(e),Ze+=W+V}),a){var Ke=ce+q+j+St;At.forEach(function(De){De.forEach(function(he){var Je,Si;Ze+=_t;var zi=he.title,en=he.value;(Je=u.createFigure({name:"text",attrs:{x:Ke,y:Ze,text:zi.text},styles:{color:zi.color,size:Mt,family:gt,weight:jt}}))===null||Je===void 0||Je.draw(e),(Si=u.createFigure({name:"text",attrs:{x:ce+pt-q-yt-U,y:Ze,text:en.text,align:"right"},styles:{color:en.color,size:Mt,family:gt,weight:jt}}))===null||Si===void 0||Si.draw(e),Ze+=Mt+xt})})}}}},t.prototype._getCandleTooltipLegends=function(){var e,n,a,l,u,c,f,d,v=this.getWidget().getPane().getChart().getChartStore(),m=v.getStyles().candle,y=v.getDataList(),x=v.getInnerFormatter(),b=v.getDecimalFold(),w=v.getThousandsSeparator(),S=v.getLocale(),M=(e=v.getSymbol())!==null&&e!==void 0?e:{},N=M.pricePrecision,T=N===void 0?Ue.PRICE:N,R=M.volumePrecision,C=R===void 0?Ue.VOLUME:R,z=v.getPeriod(),D=(n=v.getCrosshair().dataIndex)!==null&&n!==void 0?n:0,I=m.tooltip,B=I.legend,V=B.color,W=B.defaultValue,Z=B.template,it=(a=y[D-1])!==null&&a!==void 0?a:null,X=y[D],ot=(l=it?.close)!==null&&l!==void 0?l:X.close,j=X.close-ot,U=bt(bt({},X),{time:x.formatDate(X.timestamp,iS[(u=z?.type)!==null&&u!==void 0?u:"day"],"tooltip"),open:b.format(w.format(We(X.open,T))),high:b.format(w.format(We(X.high,T))),low:b.format(w.format(We(X.low,T))),close:b.format(w.format(We(X.close,T))),volume:b.format(w.format(x.formatBigNumber(We((c=X.volume)!==null&&c!==void 0?c:W,C)))),turnover:b.format(w.format(We((f=X.turnover)!==null&&f!==void 0?f:W,T))),change:ot===0?W:"".concat(w.format(We(j/ot*100)),"%")}),st=xi(Z)?Z({prev:it,current:X,next:(d=y[D+1])!==null&&d!==void 0?d:null},m):Z;return st.map(function(ft){var rt=ft.title,k=ft.value,L={text:"",color:V};Qi(rt)?L=bt({},rt):L.text=rt,L.text=Uy(L.text,S);var F={text:W,color:V};return Qi(k)?F=bt({},k):F.text=k,at(/{change}/.exec(F.text))&&(F.color=j===0?m.priceMark.last.noChangeColor:j>0?m.priceMark.last.upColor:m.priceMark.last.downColor),F.text=Ny(F.text,U),{title:L,value:F}})},t})(Jx),bD=(function(r){Pt(t,r);function t(e){var n=r.call(this,e)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(a){return function(){var l=n.getWidget().getPane();return l.getChart().getChartStore().executeAction("onCrosshairFeatureClick",a),!0}},n._featureMouseMoveEvent=function(a){return function(){return n._activeFeatureInfo=a,n.getWidget().setForceCursor("pointer"),!0}},n.registerEvent("mouseMoveEvent",function(a){return n._activeFeatureInfo=null,n.getWidget().setForceCursor(null),!1}),n}return t.prototype.drawImp=function(e){var n=this,a,l,u=this.getWidget(),c=u.getPane(),f=u.getPane().getChart().getChartStore(),d=f.getCrosshair(),v=this.getWidget(),m=v.getPane().getAxisComponent();if(Kt(d.paneId)&&d.paneId===c.getId()&&m.isInCandle()){var y=f.getStyles().crosshair,x=y.horizontal.features;if(y.show&&y.horizontal.show&&x.length>0){var b=m.position==="right",w=v.getBounding(),S=0,M=y.horizontal.text;if(m.inside&&M.show){var N=m.convertFromPixel(d.y),T=m.getRange(),R=m.displayValueToText(m.realValueToDisplayValue(m.valueToRealValue(N,{range:T}),{range:T}),(l=(a=f.getSymbol())===null||a===void 0?void 0:a.pricePrecision)!==null&&l!==void 0?l:Ue.PRICE);R=f.getDecimalFold().format(f.getThousandsSeparator().format(R)),S=M.paddingLeft+$i(R,M.size,M.weight,M.family)+M.paddingRight}var C=S;b&&(C=w.width-S);var z=d.y;x.forEach(function(D){var I,B,V,W,Z=D.marginLeft,it=Z===void 0?0:Z,X=D.marginTop,ot=X===void 0?0:X,j=D.marginRight,U=j===void 0?0:j,st=D.paddingLeft,ft=st===void 0?0:st,rt=D.paddingTop,k=rt===void 0?0:rt,L=D.paddingRight,F=L===void 0?0:L,q=D.paddingBottom,$=q===void 0?0:q,J=D.color,tt=D.activeColor,vt=D.backgroundColor,pt=D.activeBackgroundColor,ut=D.borderRadius,dt=D.size,St=dt===void 0?0:dt,yt=D.type,_t=D.content,xt=St;if(yt==="icon_font"){var Mt=_t;xt=ft+$i(Mt.code,St,"normal",Mt.family)+F}b?C-=xt+U:C+=it;var jt=J,gt=vt;((I=n._activeFeatureInfo)===null||I===void 0?void 0:I.feature.id)===D.id&&(jt=tt??J,gt=pt??vt);var At={mouseDownEvent:n._featureClickEvent({crosshair:d,feature:D}),mouseMoveEvent:n._featureMouseMoveEvent({crosshair:d,feature:D})};if(yt==="icon_font"){var Mt=_t;(B=n.createFigure({name:"text",attrs:{text:Mt.code,x:C,y:z+ot,baseline:"middle"},styles:{paddingLeft:ft,paddingTop:k,paddingRight:F,paddingBottom:$,borderRadius:ut,size:St,family:Mt.family,color:jt,backgroundColor:gt}},At))===null||B===void 0||B.draw(e)}else{(V=n.createFigure({name:"rect",attrs:{x:C,y:z+ot-St/2,width:St,height:St},styles:{paddingLeft:ft,paddingTop:k,paddingRight:F,paddingBottom:$,color:gt}},At))===null||V===void 0||V.draw(e);var wt=_t;(W=n.createFigure({name:"path",attrs:{path:wt.path,x:C,y:z+ot+k-St/2,width:St,height:St},styles:{style:wt.style,lineWidth:wt.lineWidth,color:jt}}))===null||W===void 0||W.draw(e)}b?C-=it:C+=xt+U})}}},t})(ji),xD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._candleBarView=new Zx(a),a._candleAreaView=new hD(a),a._candleHighLowPriceView=new fD(a),a._candleLastPriceLineView=new dD(a),a._crosshairFeatureView=new bD(a),a.addChild(a._candleBarView),a.addChild(a._crosshairFeatureView),a}return t.prototype.updateMainContent=function(e){var n=this.getPane().getChart().getStyles().candle;n.type!=="area"?(this._candleBarView.draw(e),this._candleHighLowPriceView.draw(e),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(e),this._candleLastPriceLineView.draw(e)},t.prototype.updateOverlayContent=function(e){this._crosshairFeatureView.draw(e)},t.prototype.createTooltipView=function(){return new yD(this)},t})(eS),nS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e,n){var a=this,l,u,c=this.getWidget(),f=c.getPane(),d=c.getBounding(),v=f.getAxisComponent(),m=this.getAxisStyles(f.getChart().getStyles());if(m.show&&(m.axisLine.show&&((l=this.createFigure({name:"line",attrs:this.createAxisLine(d,m),styles:m.axisLine}))===null||l===void 0||l.draw(e)),!n[0])){var y=v.getTicks();if(m.tickLine.show){var x=this.createTickLines(y,d,m);x.forEach(function(w){var S;(S=a.createFigure({name:"line",attrs:w,styles:m.tickLine}))===null||S===void 0||S.draw(e)})}if(m.tickText.show){var b=this.createTickTexts(y,d,m);(u=this.createFigure({name:"text",attrs:b,styles:m.tickText}))===null||u===void 0||u.draw(e)}}},t})(ji),SD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(e){return e.yAxis},t.prototype.createAxisLine=function(e,n){var a=this.getWidget().getPane().getAxisComponent(),l=n.axisLine.size,u=0;return a.isFromZero()?u=0:u=e.width-l,{coordinates:[{x:u,y:0},{x:u,y:e.height}]}},t.prototype.createTickLines=function(e,n,a){var l=this.getWidget().getPane().getAxisComponent(),u=a.axisLine,c=a.tickLine,f=0,d=0;return l.isFromZero()?(f=0,u.show&&(f+=u.size),d=f+c.length):(f=n.width,u.show&&(f-=u.size),d=f-c.length),e.map(function(v){return{coordinates:[{x:f,y:v.coord},{x:d,y:v.coord}]}})},t.prototype.createTickTexts=function(e,n,a){var l=this.getWidget().getPane().getAxisComponent(),u=a.axisLine,c=a.tickLine,f=a.tickText,d=0;l.isFromZero()?(d=f.marginStart,u.show&&(d+=u.size),c.show&&(d+=c.length)):(d=n.width-f.marginEnd,u.show&&(d-=u.size),c.show&&(d-=c.length));var v=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return e.map(function(m){return{x:d,y:m.coord,text:m.text,align:v,baseline:"middle"}})},t})(nS),_D=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this,a,l,u,c,f=this.getWidget(),d=f.getPane(),v=f.getBounding(),m=d.getChart().getChartStore(),y=m.getStyles().candle.priceMark,x=y.last,b=x.text;if(y.show&&x.show&&b.show){var w=(l=(a=m.getSymbol())===null||a===void 0?void 0:a.pricePrecision)!==null&&l!==void 0?l:Ue.PRICE,S=d.getAxisComponent(),M=m.getDataList(),N=M[M.length-1];if(at(N)){var T=N.close,R=N.open,C=x.compareRule==="current_open"?R:(c=(u=M[M.length-2])===null||u===void 0?void 0:u.close)!==null&&c!==void 0?c:T,z=S.convertToNicePixel(T),D="";T>C?D=x.upColor:T<C?D=x.downColor:D=x.noChangeColor;var I=0,B="left";S.isFromZero()?(I=0,B="left"):(I=v.width,B="right");var V=[],W=S.getRange(),Z=S.displayValueToText(S.realValueToDisplayValue(S.valueToRealValue(T,{range:W}),{range:W}),w);Z=m.getDecimalFold().format(m.getThousandsSeparator().format(Z));var it=b.paddingLeft,X=b.paddingRight,ot=b.paddingTop,j=b.paddingBottom,U=b.size,st=b.family,ft=b.weight,rt=it+$i(Z,U,ft,st)+X,k=ot+U+j;V.push({name:"text",attrs:{x:I,y:z,width:rt,height:k,text:Z,align:B,baseline:"middle"},styles:bt(bt({},b),{backgroundColor:D})});var L=m.getInnerFormatter().formatExtendText,F=U/2,q=z-F-ot,$=z+F+j;x.extendTexts.forEach(function(J,tt){var vt=L({type:"last_price",data:N,index:tt});if(vt.length>0&&J.show){var pt=J.size/2,ut=0;J.position==="above_price"?(q-=J.paddingBottom+pt,ut=q,q-=pt+J.paddingTop):($+=J.paddingTop+pt,ut=$,$+=pt+J.paddingBottom),rt=Math.max(rt,J.paddingLeft+$i(vt,J.size,J.weight,J.family)+J.paddingRight),V.push({name:"text",attrs:{x:I,y:ut,width:rt,height:J.paddingTop+J.size+J.paddingBottom,text:vt,align:B,baseline:"middle"},styles:bt(bt({},J),{backgroundColor:D})})}}),V.forEach(function(J){var tt;J.attrs.width=rt,(tt=n.createFigure(J))===null||tt===void 0||tt.draw(e)})}}},t})(ji),wD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n=this,a=this.getWidget(),l=a.getPane(),u=a.getBounding(),c=l.getChart().getChartStore(),f=c.getStyles().indicator,d=f.lastValueMark,v=d.text;if(d.show){var m=l.getAxisComponent(),y=m.getRange(),x=c.getDataList(),b=x.length-1,w=c.getIndicatorsByPaneId(l.getId()),S=c.getInnerFormatter(),M=c.getDecimalFold(),N=c.getThousandsSeparator();w.forEach(function(T){var R,C=T.result,z=(R=C[b])!==null&&R!==void 0?R:{};if(at(z)&&T.visible){var D=T.precision;kd(T,b,f,function(I,B){var V,W=z[I.key];if(Dt(W)){var Z=m.convertToNicePixel(W),it=m.displayValueToText(m.realValueToDisplayValue(m.valueToRealValue(W,{range:y}),{range:y}),D);T.shouldFormatBigNumber&&(it=S.formatBigNumber(it)),it=M.format(N.format(it));var X=0,ot="left";m.isFromZero()?(X=0,ot="left"):(X=u.width,ot="right"),(V=n.createFigure({name:"text",attrs:{x:X,y:Z,text:it,align:ot,baseline:"middle"},styles:bt(bt({},v),{backgroundColor:B.color})}))===null||V===void 0||V.draw(e)}})}})}},t})(ji),rS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},t.prototype.drawDefaultFigures=function(e,n,a){this.drawFigures(e,n,this.getDefaultFigures(n,a))},t.prototype.getDefaultFigures=function(e,n){var a,l=this.getWidget(),u=l.getPane(),c=u.getChart().getChartStore(),f=c.getClickOverlayInfo(),d=[];if(e.needDefaultYAxisFigure&&e.id===((a=f.overlay)===null||a===void 0?void 0:a.id)&&f.paneId===u.getId()){var v=u.getAxisComponent(),m=l.getBounding(),y=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,b=v.isFromZero(),w="left",S=0;b?(w="left",S=0):(w="right",S=m.width);var M=c.getDecimalFold(),N=c.getThousandsSeparator();n.forEach(function(T,R){var C,z,D=e.points[R];if(Dt(D.value)){y=Math.min(y,T.y),x=Math.max(x,T.y);var I=M.format(N.format(We(D.value,(z=(C=c.getSymbol())===null||C===void 0?void 0:C.pricePrecision)!==null&&z!==void 0?z:Ue.PRICE)));d.push({type:"text",attrs:{x:S,y:T.y,text:I,align:w,baseline:"middle"},ignoreEvent:!0})}}),n.length>1&&d.unshift({type:"rect",attrs:{x:0,y,width:m.width,height:x-y},ignoreEvent:!0})}return d},t.prototype.getFigures=function(e,n){var a,l,u=this.getWidget(),c=u.getPane(),f=c.getChart(),d=c.getAxisComponent(),v=f.getXAxisPane().getAxisComponent(),m=u.getBounding();return(l=(a=e.createYAxisFigures)===null||a===void 0?void 0:a.call(e,{chart:f,overlay:e,coordinates:n,bounding:m,xAxis:v,yAxis:d}))!==null&&l!==void 0?l:[]},t})(tS),sS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.drawImp=function(e){var n,a=this.getWidget(),l=a.getPane(),u=a.getPane().getChart().getChartStore(),c=u.getCrosshair();if(Kt(c.paneId)&&this.compare(c,l.getId())){var f=u.getStyles().crosshair;if(f.show){var d=this.getDirectionStyles(f),v=d.text;if(d.show&&v.show){var m=a.getBounding(),y=l.getAxisComponent(),x=this.getText(c,u,y);e.font=Hr(v.size,v.weight,v.family),(n=this.createFigure({name:"text",attrs:this.getTextAttrs(x,e.measureText(x).width,c,m,y,v),styles:v}))===null||n===void 0||n.draw(e)}}}},t.prototype.compare=function(e,n){return e.paneId===n},t.prototype.getDirectionStyles=function(e){return e.horizontal},t.prototype.getText=function(e,n,a){var l,u,c=a,f=a.convertFromPixel(e.y),d=0,v=!1;if(c.isInCandle())d=(u=(l=n.getSymbol())===null||l===void 0?void 0:l.pricePrecision)!==null&&u!==void 0?u:Ue.PRICE;else{var m=n.getIndicatorsByPaneId(e.paneId);m.forEach(function(b){d=Math.max(b.precision,d),v||(v=b.shouldFormatBigNumber)})}var y=c.getRange(),x=c.displayValueToText(c.realValueToDisplayValue(c.valueToRealValue(f,{range:y}),{range:y}),d);return v&&(x=n.getInnerFormatter().formatBigNumber(x)),n.getDecimalFold().format(n.getThousandsSeparator().format(x))},t.prototype.getTextAttrs=function(e,n,a,l,u,c){var f=u,d=0,v="left";return f.isFromZero()?(d=0,v="left"):(d=l.width,v="right"),{x:d,y:a.y,text:e,align:v,baseline:"middle"}},t})(ji),ED=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._yAxisView=new SD(a),a._candleLastPriceLabelView=new _D(a),a._indicatorLastValueView=new wD(a),a._overlayYAxisView=new rS(a),a._crosshairHorizontalLabelView=new sS(a),a.setCursor("ns-resize"),a.addChild(a._overlayYAxisView),a}return t.prototype.getName=function(){return Ut.Y_AXIS},t.prototype.updateMain=function(e){var n=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(e,n),n||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(e),this._indicatorLastValueView.draw(e))},t.prototype.updateOverlay=function(e){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(e),this._crosshairHorizontalLabelView.draw(e))},t})(Ld);function Hy(){return{from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0}}var aS=(function(){function r(t){this.scrollZoomEnabled=!0,this._range=Hy(),this._prevRange=Hy(),this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return r.prototype.getParent=function(){return this._parent},r.prototype.buildTicks=function(t){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t?(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0):!1},r.prototype.getTicks=function(){return this._ticks},r.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},r.prototype.getRange=function(){return this._range},r.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},r.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},r})(),$o=8,lu=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e)||this;return a.reverse=!1,a.inside=!1,a.position="right",a.gap={top:.2,bottom:.1},a.createRange=function(l){return l.defaultRange},a.minSpan=function(l){return Nr(-l)},a.valueToRealValue=function(l){return l},a.realValueToDisplayValue=function(l){return l},a.displayValueToRealValue=function(l){return l},a.realValueToValue=function(l){return l},a.displayValueToText=function(l,u){return We(l,u)},a.override(n),a}return t.prototype.override=function(e){var n=e.name,a=e.gap,l=yu(e,["name","gap"]);Kt(this.name)||(this.name=n),Re(this.gap,a),Re(this,l)},t.prototype.createRangeImp=function(){var e,n,a=this.getParent(),l=a.getChart(),u=l.getChartStore(),c=a.getId(),f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,v=!1,m=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,x=Number.MAX_SAFE_INTEGER,b=u.getIndicatorsByPaneId(c);b.forEach(function(tt){v||(v=tt.shouldOhlc),x=Math.min(x,tt.precision),Dt(tt.minValue)&&(m=Math.min(m,tt.minValue)),Dt(tt.maxValue)&&(y=Math.max(y,tt.maxValue))});var w=4,S=this.isInCandle();if(S){var M=(n=(e=u.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE;x!==Number.MAX_SAFE_INTEGER?w=Math.min(x,M):w=M}else x!==Number.MAX_SAFE_INTEGER&&(w=x);var N=u.getVisibleRangeDataList(),T=l.getStyles().candle,R=T.type==="area",C=T.area.value,z=S&&!R||!S&&v;N.forEach(function(tt){var vt=tt.dataIndex,pt=tt.data.current;if(at(pt)&&(z&&(f=Math.min(f,pt.low),d=Math.max(d,pt.high)),S&&R)){var ut=pt[C];Dt(ut)&&(f=Math.min(f,ut),d=Math.max(d,ut))}b.forEach(function(dt){var St,yt=dt.result,_t=dt.figures,xt=(St=yt[vt])!==null&&St!==void 0?St:{};_t.forEach(function(Mt){var jt=xt[Mt.key];Dt(jt)&&(f=Math.min(f,jt),d=Math.max(d,jt))})})}),f!==Number.MAX_SAFE_INTEGER&&d!==Number.MIN_SAFE_INTEGER?(f=Math.min(m,f),d=Math.max(y,d)):(f=0,d=10);var D=d-f,I={from:f,to:d,range:D,realFrom:f,realTo:d,realRange:D,displayFrom:f,displayTo:d,displayRange:D},B=this.createRange({chart:l,paneId:c,defaultRange:I}),V=B.realFrom,W=B.realTo,Z=B.realRange,it=this.minSpan(w);if(V===W||Z<it){var X=m===V,ot=y===W,j=$o/2;V=X?V:ot?V-$o*it:V-j*it,W=ot?W:X?W+$o*it:W+j*it}var U=this.getBounding().height,st=this.gap,ft=st.top,rt=st.bottom,k=ft;k>=1&&(k=k/U);var L=rt;L>=1&&(L=L/U),Z=W-V,V=V-Z*L,W=W+Z*k;var F=this.realValueToValue(V,{range:B}),q=this.realValueToValue(W,{range:B}),$=this.realValueToDisplayValue(V,{range:B}),J=this.realValueToDisplayValue(W,{range:B});return{from:F,to:q,range:q-F,realFrom:V,realTo:W,realRange:W-V,displayFrom:$,displayTo:J,displayRange:J-$}},t.prototype.isInCandle=function(){return this.getParent().getId()===Vt.CANDLE},t.prototype.isFromZero=function(){return this.position==="left"&&this.inside||this.position==="right"&&!this.inside},t.prototype.createTicksImp=function(){var e=this,n,a,l,u,c=this.getRange(),f=c.displayFrom,d=c.displayTo,v=c.displayRange,m=[];if(v>=0){var y=SA(v/$o),x=_A(y),b=jy(Math.ceil(f/y)*y,x),w=jy(Math.floor(d/y)*y,x),S=0,M=b;if(y!==0)for(;M<=w;){var N=M.toFixed(x);m[S]={text:N,coord:0,value:N},++S,M+=y}}var T=this.getParent(),R=(a=(n=T.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&a!==void 0?a:0,C=T.getChart().getChartStore(),z=[],D=C.getIndicatorsByPaneId(T.getId()),I=C.getStyles(),B=0,V=!1;this.isInCandle()?B=(u=(l=C.getSymbol())===null||l===void 0?void 0:l.pricePrecision)!==null&&u!==void 0?u:Ue.PRICE:D.forEach(function(j){B=Math.max(B,j.precision),V||(V=j.shouldFormatBigNumber)});var W=C.getInnerFormatter(),Z=C.getThousandsSeparator(),it=C.getDecimalFold(),X=I.xAxis.tickText.size,ot=NaN;return m.forEach(function(j){var U=j.value,st=e.displayValueToText(+U,B),ft=e.convertToPixel(e.realValueToValue(e.displayValueToRealValue(+U,{range:c}),{range:c}));V&&(st=W.formatBigNumber(U)),st=it.format(Z.format(st));var rt=Dt(ot);ft>X&&ft<R-X&&(rt&&Math.abs(ot-ft)>X*2||!rt)&&(z.push({text:st,coord:ft,value:U}),ot=ft)}),xi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:z}):z},t.prototype.getAutoSize=function(){var e,n,a=this.getParent(),l=a.getChart(),u=l.getChartStore(),c=u.getStyles(),f=c.yAxis,d=f.size;if(d!=="auto")return d;var v=0;if(f.show&&(f.axisLine.show&&(v+=f.axisLine.size),f.tickLine.show&&(v+=f.tickLine.length),f.tickText.show)){var m=0;this.getTicks().forEach(function(ft){m=Math.max(m,$i(ft.text,f.tickText.size,f.tickText.weight,f.tickText.family))}),v+=f.tickText.marginStart+f.tickText.marginEnd+m}var y=c.candle.priceMark,x=y.show&&y.last.show&&y.last.text.show,b=0,w=c.crosshair,S=w.show&&w.horizontal.show&&w.horizontal.text.show,M=0;if(x||S){var N=(n=(e=u.getSymbol())===null||e===void 0?void 0:e.pricePrecision)!==null&&n!==void 0?n:Ue.PRICE,T=this.getRange().displayTo;if(x){var R=u.getDataList(),C=R[R.length-1];if(at(C)){var z=y.last.text,D=z.paddingLeft,I=z.paddingRight,B=z.size,V=z.family,W=z.weight;b=D+$i(We(C.close,N),B,W,V)+I;var Z=u.getInnerFormatter().formatExtendText;y.last.extendTexts.forEach(function(ft,rt){var k=Z({type:"last_price",data:C,index:rt});k.length>0&&ft.show&&(b=Math.max(b,ft.paddingLeft+$i(k,ft.size,ft.weight,ft.family)+ft.paddingRight))})}}if(S){var it=u.getIndicatorsByPaneId(a.getId()),X=0,ot=!1;it.forEach(function(ft){X=Math.max(ft.precision,X),ot||(ot=ft.shouldFormatBigNumber)});var j=2;if(this.isInCandle()){var U=c.indicator.lastValueMark;U.show&&U.text.show?j=Math.max(X,N):j=N}else j=X;var st=We(T,j);ot&&(st=u.getInnerFormatter().formatBigNumber(st)),st=u.getDecimalFold().format(st),M+=w.horizontal.text.paddingLeft+w.horizontal.text.paddingRight+w.horizontal.text.borderSize*2+$i(st,w.horizontal.text.size,w.horizontal.text.weight,w.horizontal.text.family)}}return Math.max(v,b,M)},t.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},t.prototype.convertFromPixel=function(e){var n=this.getBounding().height,a=this.getRange(),l=a.realFrom,u=a.realRange,c=this.reverse?e/n:1-e/n,f=c*u+l;return this.realValueToValue(f,{range:a})},t.prototype.convertToPixel=function(e){var n,a,l=this.getRange(),u=this.valueToRealValue(e,{range:l}),c=(a=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&a!==void 0?a:0,f=l.realFrom,d=l.realRange,v=(u-f)/d;return this.reverse?Math.round(v*c):Math.round((1-v)*c)},t.prototype.convertToNicePixel=function(e){var n,a,l=(a=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&a!==void 0?a:0,u=this.convertToPixel(e);return Math.round(Math.max(l*.05,Math.min(u,l*.98)))},t.extend=function(e){var n=(function(a){Pt(l,a);function l(u){return a.call(this,u,e)||this}return l})(t);return n},t})(aS),CD={name:"normal"},MD={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(r){return"".concat(We(r,2),"%")},valueToRealValue:function(r,t){var e=t.range;return(r-e.from)/e.range*e.realRange+e.realFrom},realValueToValue:function(r,t){var e=t.range;return(r-e.realFrom)/e.realRange*e.range+e.from},createRange:function(r){var t=r.chart,e=r.defaultRange,n=t.getDataList(),a=t.getVisibleRange(),l=n[a.from];if(at(l)){var u=e.from,c=e.to,f=e.range,d=(e.from-l.close)/l.close*100,v=(e.to-l.close)/l.close*100,m=v-d;return{from:u,to:c,range:f,realFrom:d,realTo:v,realRange:m,displayFrom:d,displayTo:v,displayRange:m}}return e}},TD={name:"logarithm",minSpan:function(r){return .05*Nr(-r)},valueToRealValue:function(r){return r<0?-Sn(Math.abs(r)):Sn(r)},realValueToDisplayValue:function(r){return r<0?-Nr(Math.abs(r)):Nr(r)},displayValueToRealValue:function(r){return r<0?-Sn(Math.abs(r)):Sn(r)},realValueToValue:function(r){return r<0?-Nr(Math.abs(r)):Nr(r)},createRange:function(r){var t=r.defaultRange,e=t.from,n=t.to,a=t.range,l=e<0?-Sn(Math.abs(e)):Sn(e),u=n<0?-Sn(Math.abs(n)):Sn(n);return{from:e,to:n,range:a,realFrom:l,realTo:u,realRange:u-l,displayFrom:e,displayTo:n,displayRange:a}}},Yy={normal:lu.extend(CD),percentage:lu.extend(MD),logarithm:lu.extend(TD)};function AD(r){var t;return(t=Yy[r])!==null&&t!==void 0?t:Yy.normal}var lS=(function(){function r(t,e){this._bounding=bu(),this._originalBounding=bu(),this._visible=!0,this._chart=t,this._id=e,this._container=An("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return r.prototype.getContainer=function(){return this._container},r.prototype.setVisible=function(t){this._visible!==t&&(this._container.style.display=t?"block":"none",this._visible=t)},r.prototype.getVisible=function(){return this._visible},r.prototype.getId=function(){return this._id},r.prototype.getChart=function(){return this._chart},r.prototype.getBounding=function(){return this._bounding},r.prototype.setOriginalBounding=function(t){Re(this._originalBounding,t)},r.prototype.getOriginalBounding=function(){return this._originalBounding},r.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(t??3,this._container,this._bounding)},r})(),oS=(function(r){Pt(t,r);function t(e,n,a){var l=r.call(this,e,n)||this;l._yAxisWidget=null,l._options={id:"",minHeight:au,dragEnabled:!0,order:0,height:Wx,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var u=l.getContainer();return l._mainWidget=l.createMainWidget(u),l._yAxisWidget=l.createYAxisWidget(u),l.setOptions(a),l}return t.prototype.setOptions=function(e){var n,a,l,u,c,f=this.getId();if(f===Vt.CANDLE||f===Vt.X_AXIS){var d=(n=e.axis)===null||n===void 0?void 0:n.name;(!at(this._axis)||at(d)&&this._options.axis.name!==d)&&(this._axis=this.createAxisComponent(d??"normal"))}else at(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof lu&&this._axis.setAutoCalcTickFlag(!0),Re(this._options,e),this._axis.override(bt(bt({},this._options.axis),{name:(l=(a=e.axis)===null||a===void 0?void 0:a.name)!==null&&l!==void 0?l:"normal"}));var v=null,m="default";return this.getId()===Vt.X_AXIS?(v=this.getMainWidget().getContainer(),m="ew-resize"):(v=this.getYAxisWidget().getContainer(),m="ns-resize"),!((c=(u=e.axis)===null||u===void 0?void 0:u.scrollZoomEnabled)!==null&&c!==void 0)||c?v.style.cursor=m:v.style.cursor="default",this},t.prototype.getOptions=function(){return this._options},t.prototype.getAxisComponent=function(){return this._axis},t.prototype.setBounding=function(e,n,a,l){var u,c,f,d;Re(this.getBounding(),e);var v={};at(e.height)&&(v.height=e.height),at(e.top)&&(v.top=e.top),this._mainWidget.setBounding(v);var m=at(n);if(m&&this._mainWidget.setBounding(n),at(this._yAxisWidget)){this._yAxisWidget.setBounding(v);var y=this._axis;y.position==="left"?at(a)&&this._yAxisWidget.setBounding(bt(bt({},a),{left:0})):at(l)&&(this._yAxisWidget.setBounding(l),m&&this._yAxisWidget.setBounding({left:((u=n.left)!==null&&u!==void 0?u:0)+((c=n.width)!==null&&c!==void 0?c:0)+((f=n.right)!==null&&f!==void 0?f:0)-((d=l.width)!==null&&d!==void 0?d:0)}))}return this},t.prototype.getMainWidget=function(){return this._mainWidget},t.prototype.getYAxisWidget=function(){return this._yAxisWidget},t.prototype.updateImp=function(e){var n;this._mainWidget.update(e),(n=this._yAxisWidget)===null||n===void 0||n.update(e)},t.prototype.destroy=function(){var e;this._mainWidget.destroy(),(e=this._yAxisWidget)===null||e===void 0||e.destroy()},t.prototype.getImage=function(e){var n=this.getBounding(),a=n.width,l=n.height,u=An("canvas",{width:"".concat(a,"px"),height:"".concat(l,"px"),boxSizing:"border-box"}),c=u.getContext("2d"),f=lr(u);u.width=a*f,u.height=l*f,c.scale(f,f);var d=this._mainWidget.getBounding();if(c.drawImage(this._mainWidget.getImage(e),d.left,0,d.width,d.height),this._yAxisWidget!==null){var v=this._yAxisWidget.getBounding();c.drawImage(this._yAxisWidget.getImage(e),v.left,0,v.width,v.height)}return u},t.prototype.createYAxisWidget=function(e){return null},t})(lS),uS=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(e){var n=AD(e??"default");return new n(this)},t.prototype.createMainWidget=function(e){return new eS(e,this)},t.prototype.createYAxisWidget=function(e){return new ED(e,this)},t})(oS),RD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createMainWidget=function(e){return new xD(e,this)},t})(uS),DD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(e){return e.xAxis},t.prototype.createAxisLine=function(e){return{coordinates:[{x:0,y:0},{x:e.width,y:0}]}},t.prototype.createTickLines=function(e,n,a){var l=a.tickLine,u=a.axisLine.size;return e.map(function(c){return{coordinates:[{x:c.coord,y:0},{x:c.coord,y:u+l.length}]}})},t.prototype.createTickTexts=function(e,n,a){var l=a.tickText,u=a.axisLine.size,c=a.tickLine.length;return e.map(function(f){return{x:f.coord,y:u+c+l.marginStart,text:f.text,align:"center",baseline:"top"}})},t})(nS),ND=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.coordinateToPointValueFlag=function(){return!1},t.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},t.prototype.getProgressOverlay=function(){var e,n;return(n=(e=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||e===void 0?void 0:e.overlay)!==null&&n!==void 0?n:null},t.prototype.getDefaultFigures=function(e,n){var a,l=[],u=this.getWidget(),c=u.getPane(),f=c.getChart().getChartStore(),d=f.getClickOverlayInfo();if(e.needDefaultXAxisFigure&&e.id===((a=d.overlay)===null||a===void 0?void 0:a.id)){var v=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;n.forEach(function(y,x){v=Math.min(v,y.x),m=Math.max(m,y.x);var b=e.points[x];if(Dt(b.timestamp)){var w=f.getInnerFormatter().formatDate(b.timestamp,"YYYY-MM-DD HH:mm","crosshair");l.push({type:"text",attrs:{x:y.x,y:0,text:w,align:"center"},ignoreEvent:!0})}}),n.length>1&&l.unshift({type:"rect",attrs:{x:v,y:0,width:m-v,height:u.getBounding().height},ignoreEvent:!0})}return l},t.prototype.getFigures=function(e,n){var a,l,u=this.getWidget(),c=u.getPane(),f=c.getChart(),d=c.getAxisComponent(),v=f.getXAxisPane().getAxisComponent(),m=u.getBounding();return(l=(a=e.createXAxisFigures)===null||a===void 0?void 0:a.call(e,{chart:f,overlay:e,coordinates:n,bounding:m,xAxis:v,yAxis:d}))!==null&&l!==void 0?l:[]},t})(rS),OD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.compare=function(e){return at(e.timestamp)},t.prototype.getDirectionStyles=function(e){return e.vertical},t.prototype.getText=function(e,n){var a,l,u=e.timestamp;return n.getInnerFormatter().formatDate(u,iS[(l=(a=n.getPeriod())===null||a===void 0?void 0:a.type)!==null&&l!==void 0?l:"day"],"crosshair")},t.prototype.getTextAttrs=function(e,n,a,l,u,c){var f=a.realX,d=0,v="center";return f-n/2-c.paddingLeft<0?(d=0,v="left"):f+n/2+c.paddingRight>l.width?(d=l.width,v="right"):d=f,{x:d,y:0,text:e,align:v,baseline:"top"}},t})(sS),kD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._xAxisView=new DD(a),a._overlayXAxisView=new ND(a),a._crosshairVerticalLabelView=new OD(a),a.setCursor("ew-resize"),a.addChild(a._overlayXAxisView),a}return t.prototype.getName=function(){return Ut.X_AXIS},t.prototype.updateMain=function(e){this._xAxisView.draw(e)},t.prototype.updateOverlay=function(e){this._overlayXAxisView.draw(e),this._crosshairVerticalLabelView.draw(e)},t})(Ld),jD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e)||this;return a.override(n),a}return t.prototype.override=function(e){var n=e.name,a=e.scrollZoomEnabled,l=e.createTicks;Kt(this.name)||(this.name=n),this.scrollZoomEnabled=a??this.scrollZoomEnabled,this.createTicks=l??this.createTicks},t.prototype.createRangeImp=function(){var e=this.getParent().getChart().getChartStore(),n=e.getVisibleRange(),a=n.realFrom,l=n.realTo,u=a,c=l,f=l-a+1,d={from:u,to:c,range:f,realFrom:u,realTo:c,realRange:f,displayFrom:u,displayTo:c,displayRange:f};return d},t.prototype.createTicksImp=function(){var e,n=this.getRange(),a=n.realFrom,l=n.realTo,u=n.from,c=this.getParent().getChart().getChartStore(),f=c.getInnerFormatter().formatDate,d=c.getPeriod(),v=[],m=c.getBarSpace().bar,y=c.getStyles().xAxis.tickText,x=Math.max($i("YYYY-MM-DD HH:mm:ss",y.size,y.weight,y.family),this.getBounding().width/8),b=Math.ceil(x/m);b%2!==0&&(b+=1);for(var w=Math.max(0,Math.floor(a/b)*b),S=w;S<l;S+=b)if(S>=u){var M=c.dataIndexToTimestamp(S);Dt(M)&&v.push({coord:this.convertToPixel(S),value:M,text:f(M,vD[(e=d?.type)!==null&&e!==void 0?e:"day"],"xAxis")})}return xi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:v}):v},t.prototype.getAutoSize=function(){var e=this.getParent().getChart().getStyles(),n=e.xAxis,a=n.size;if(a!=="auto")return a;var l=e.crosshair,u=0;n.show&&(n.axisLine.show&&(u+=n.axisLine.size),n.tickLine.show&&(u+=n.tickLine.length),n.tickText.show&&(u+=n.tickText.marginStart+n.tickText.marginEnd+n.tickText.size));var c=0;return l.show&&l.vertical.show&&l.vertical.text.show&&(c+=l.vertical.text.paddingTop+l.vertical.text.paddingBottom+l.vertical.text.borderSize*2+l.vertical.text.size),Math.max(u,c)},t.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},t.prototype.convertTimestampFromPixel=function(e){var n=this.getParent().getChart().getChartStore(),a=n.coordinateToDataIndex(e);return n.dataIndexToTimestamp(a)},t.prototype.convertTimestampToPixel=function(e){var n=this.getParent().getChart().getChartStore(),a=n.timestampToDataIndex(e);return n.dataIndexToCoordinate(a)},t.prototype.convertFromPixel=function(e){return this.getParent().getChart().getChartStore().coordinateToDataIndex(e)},t.prototype.convertToPixel=function(e){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(e)},t.extend=function(e){var n=(function(a){Pt(l,a);function l(u){return a.call(this,u,e)||this}return l})(t);return n},t})(aS),zD={name:"normal"},Wy={normal:jD.extend(zD)};function LD(r){var t;return(t=Wy[r])!==null&&t!==void 0?t:Wy.normal}var BD=(function(r){Pt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(e){var n=LD(e);return new n(this)},t.prototype.createMainWidget=function(e){return new kD(e,this)},t})(oS);function FD(r,t){var e=0;return function(){var n=Date.now();n-e>t&&(r.apply(this,arguments),e=n)}}var PD=(function(r){Pt(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a._dragFlag=!1,a._dragStartY=0,a._topPaneHeight=0,a._bottomPaneHeight=0,a._topPane=null,a._bottomPane=null,a._pressedMouseMoveEvent=FD(a._pressedTouchMouseMoveEvent,20),a.registerEvent("touchStartEvent",a._mouseDownEvent.bind(a)).registerEvent("touchMoveEvent",a._pressedMouseMoveEvent.bind(a)).registerEvent("touchEndEvent",a._mouseUpEvent.bind(a)).registerEvent("mouseDownEvent",a._mouseDownEvent.bind(a)).registerEvent("mouseUpEvent",a._mouseUpEvent.bind(a)).registerEvent("pressedMouseMoveEvent",a._pressedMouseMoveEvent.bind(a)).registerEvent("mouseEnterEvent",a._mouseEnterEvent.bind(a)).registerEvent("mouseLeaveEvent",a._mouseLeaveEvent.bind(a)),a}return t.prototype.getName=function(){return Ut.SEPARATOR},t.prototype._mouseDownEvent=function(e){var n=this;this._dragFlag=!0,this._dragStartY=e.pageY;var a=this.getPane(),l=a.getChart();this._topPane=a.getTopPane(),this._bottomPane=a.getBottomPane();var u=l.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var c=u.findIndex(function(m){var y;return m.getId()===((y=n._topPane)===null||y===void 0?void 0:y.getId())}),f=c-1;f>-1;f--){var d=u[f];if(d.getOptions().state!=="minimize"){this._topPane=d;break}}if(this._bottomPane.getOptions().state==="minimize")for(var c=u.findIndex(function(y){var x;return y.getId()===((x=n._bottomPane)===null||x===void 0?void 0:x.getId())}),f=c+1;f<u.length;f++){var v=u[f];if(v.getOptions().state!=="minimize"){this._bottomPane=v;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},t.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},t.prototype._pressedTouchMouseMoveEvent=function(e){var n=e.pageY-this._dragStartY,a=n<0;if(at(this._topPane)&&at(this._bottomPane)){var l=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&l.state!=="minimize"&&l.dragEnabled){var u=null,c=null,f=0,d=0;a?(u=this._topPane,c=this._bottomPane,f=this._topPaneHeight,d=this._bottomPaneHeight):(u=this._bottomPane,c=this._topPane,f=this._bottomPaneHeight,d=this._topPaneHeight);var v=u.getOptions().minHeight;if(f>v){var m=Math.max(f-Math.abs(n),v),y=f-m;u.setBounding({height:m}),c.setBounding({height:d+y});var x=this.getPane(),b=x.getChart();b.getChartStore().executeAction("onPaneDrag",{paneId:x.getId()}),b.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},t.prototype._mouseEnterEvent=function(){var e=this.getPane(),n=e.getBottomPane();if(n.getOptions().dragEnabled){var a=e.getChart(),l=a.getStyles().separator;return this.getContainer().style.background=l.activeBackgroundColor,!0}return!1},t.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="transparent",!0)},t.prototype.createContainer=function(){return An("div",{width:"100%",height:"".concat(ol,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},t.prototype.updateImp=function(e,n,a){if(a===4||a===2){var l=this.getPane().getChart().getStyles().separator;e.style.top="".concat(-Math.floor((ol-l.size)/2),"px"),e.style.height="".concat(ol,"px")}},t})(qx),ID=(function(r){Pt(t,r);function t(e,n,a,l){var u=r.call(this,e,n)||this;return u.getContainer().style.overflow="",u._topPane=a,u._bottomPane=l,u._separatorWidget=new PD(u.getContainer(),u),u}return t.prototype.setBounding=function(e){return Re(this.getBounding(),e),this},t.prototype.getTopPane=function(){return this._topPane},t.prototype.setTopPane=function(e){return this._topPane=e,this},t.prototype.getBottomPane=function(){return this._bottomPane},t.prototype.setBottomPane=function(e){return this._bottomPane=e,this},t.prototype.getWidget=function(){return this._separatorWidget},t.prototype.getImage=function(e){var n=this.getBounding(),a=n.width,l=n.height,u=this.getChart().getStyles().separator,c=An("canvas",{width:"".concat(a,"px"),height:"".concat(l,"px"),boxSizing:"border-box"}),f=c.getContext("2d"),d=lr(c);return c.width=a*d,c.height=l*d,f.scale(d,d),f.fillStyle=u.color,f.fillRect(0,0,a,l),c},t.prototype.updateImp=function(e,n,a){if(e===4||e===2){var l=this.getChart().getStyles().separator;n.style.backgroundColor=l.color,n.style.height="".concat(a.height,"px"),n.style.marginLeft="".concat(a.left,"px"),n.style.width="".concat(a.width,"px"),this._separatorWidget.update(e)}},t})(lS);function qy(){return typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("firefox")}function Uf(){return typeof window>"u"?!1:/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var Zo={ResetClick:500,LongTap:500,PreventFiresTouchEvents:500},Bs={CancelClick:5,CancelTap:5,DoubleClick:5,DoubleTap:30},Ka={Left:0,Middle:1,Right:2},VD=10,UD=(function(){function r(t,e,n){var a=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Uf(),this._onFirefoxOutsideMouseUp=function(l){a._mouseUpHandler(l)},this._onMobileSafariDoubleClick=function(l){if(a._firesTouchEvents(l)){if(++a._tapCount,a._tapTimeoutId!==null&&a._tapCount>1){var u=a._mouseTouchMoveWithDownInfo(a._getCoordinate(l),a._tapCoordinate).manhattanDistance;u<Bs.DoubleTap&&!a._cancelTap&&a._processEvent(a._makeCompatEvent(l),a._handler.doubleTapEvent),a._resetTapTimeout()}}else if(++a._clickCount,a._clickTimeoutId!==null&&a._clickCount>1){var u=a._mouseTouchMoveWithDownInfo(a._getCoordinate(l),a._clickCoordinate).manhattanDistance;u<Bs.DoubleClick&&!a._cancelClick&&a._processEvent(a._makeCompatEvent(l),a._handler.mouseDoubleClickEvent),a._resetClickTimeout()}},this._target=t,this._handler=e,this._options=n,this._init()}return r.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},r.prototype._mouseEnterHandler=function(t){var e=this,n,a,l;(n=this._unsubscribeMousemove)===null||n===void 0||n.call(this),(a=this._unsubscribeMouseWheel)===null||a===void 0||a.call(this),(l=this._unsubscribeContextMenu)===null||l===void 0||l.call(this);var u=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){e._target.removeEventListener("mousemove",u)},this._target.addEventListener("mousemove",u);var c=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){e._target.removeEventListener("wheel",c)},this._target.addEventListener("wheel",c,{passive:!1});var f=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){e._target.removeEventListener("contextmenu",f)},this._target.addEventListener("contextmenu",f,{passive:!1}),!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},r.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},r.prototype._mouseMoveHandler=function(t){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},r.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!at(this._handler.mouseWheelHortEvent)||(this._preventDefault(t),Math.abs(t.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!at(this._handler.mouseWheelVertEvent))return;var e=-(t.deltaY/100);if(e===0)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:{e*=120;break}case t.DOM_DELTA_LINE:{e*=32;break}}if(e!==0){var n=Math.sign(e)*Math.min(1,Math.abs(e));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),n)}}},r.prototype._contextMenuHandler=function(t){this._preventDefault(t)},r.prototype._touchMoveHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(e!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._touchMoveStartCoordinate),a=n.xOffset,l=n.yOffset,u=n.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&u<Bs.CancelTap)){if(!this._touchMoveExceededManhattanDistance){var c=a*.5,f=l>=c&&!this._options.treatVertDragAsPageScroll(),d=c>l&&!this._options.treatHorzDragAsPageScroll();!f&&!d&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,e),this._handler.touchMoveEvent)}}},r.prototype._mouseMoveWithDownHandler=function(t){if(t.button===Ka.Left){var e=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),n=e.manhattanDistance;n>=Bs.CancelClick&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},r.prototype._mouseTouchMoveWithDownInfo=function(t,e){var n=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y),l=n+a;return{xOffset:n,yOffset:a,manhattanDistance:l}},r.prototype._touchEndHandler=function(t){var e=this._touchWithId(t.changedTouches,this._activeTouchId);if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._makeCompatEvent(t,e);if(this._processEvent(n,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var a=this._mouseTouchMoveWithDownInfo(this._getCoordinate(e),this._tapCoordinate).manhattanDistance;a<Bs.DoubleTap&&!this._cancelTap&&this._processEvent(n,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(n,this._handler.tapEvent),at(this._handler.tapEvent)&&this._preventDefault(t));this._tapCount===0&&this._preventDefault(t),t.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},r.prototype._mouseUpHandler=function(t){if(t.button===Ka.Left){var e=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),qy()){var n=this._target.ownerDocument.documentElement;n.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(e,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var a=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;a<Bs.DoubleClick&&!this._cancelClick&&this._processEvent(e,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(e,this._handler.mouseClickEvent)}},r.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},r.prototype._touchStartHandler=function(t){if(this._activeTouchId===null){var e=t.changedTouches[0];this._activeTouchId=e.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var n=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(e),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var a=this._touchMoveHandler.bind(this),l=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){n.removeEventListener("touchmove",a),n.removeEventListener("touchend",l)},n.addEventListener("touchmove",a,{passive:!1}),n.addEventListener("touchend",l,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),Zo.LongTap)}this._processEvent(this._makeCompatEvent(t,e),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),Zo.ResetClick),this._tapCoordinate=this._getCoordinate(e))}},r.prototype._mouseDownHandler=function(t){if(t.button===Ka.Right){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===Ka.Left){var e=this._target.ownerDocument.documentElement;qy()&&e.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var n=this._mouseMoveWithDownHandler.bind(this),a=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",a)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",a)}this._mousePressed=!0,!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),Zo.ResetClick),this._clickCoordinate=this._getCoordinate(t)))}},r.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var e=this._target.ownerDocument,n=function(a){t._handler.mouseDownOutsideEvent!=null&&(a.composed&&t._target.contains(a.composedPath()[0])||a.target!==null&&t._target.contains(a.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){e.removeEventListener("touchstart",n)},this._unsubscribeOutsideMouseEvents=function(){e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Uf()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(a){if(a.button===Ka.Middle)return a.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},r.prototype._initPinch=function(){var t=this;!at(this._handler.pinchStartEvent)&&!at(this._handler.pinchEvent)&&!at(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(e){t._checkPinchState(e.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(e){if(!(e.touches.length!==2||t._startPinchMiddleCoordinate===null)&&at(t._handler.pinchEvent)){var n=t._getTouchDistance(e.touches[0],e.touches[1]),a=n/t._startPinchDistance;t._handler.pinchEvent(bt(bt({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),a),t._preventDefault(e)}},{passive:!1}),this._target.addEventListener("touchend",function(e){t._checkPinchState(e.touches)}))},r.prototype._checkPinchState=function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},r.prototype._startPinch=function(t){var e=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,y:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),at(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},r.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,at(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},r.prototype._mouseLeaveHandler=function(t){var e,n,a;(e=this._unsubscribeMousemove)===null||e===void 0||e.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(a=this._unsubscribeContextMenu)===null||a===void 0||a.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Uf())},r.prototype._longTapHandler=function(t){var e=this._touchWithId(t.touches,this._activeTouchId);e!==null&&(this._processEvent(this._makeCompatEvent(t,e),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},r.prototype._firesTouchEvents=function(t){var e;return at((e=t.sourceCapabilities)===null||e===void 0?void 0:e.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+Zo.PreventFiresTouchEvents},r.prototype._processEvent=function(t,e){e?.call(this._handler,t)},r.prototype._makeCompatEvent=function(t,e){var n=this,a=e??t,l=this._target.getBoundingClientRect();return{x:a.clientX-l.left,y:a.clientY-l.top,pageX:a.pageX,pageY:a.pageY,isTouch:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click"&&t.type!=="wheel",preventDefault:function(){t.type!=="touchstart"&&n._preventDefault(t)}}},r.prototype._getTouchDistance=function(t,e){var n=t.clientX-e.clientX,a=t.clientY-e.clientY;return Math.sqrt(n*n+a*a)},r.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},r.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},r.prototype._eventTimeStamp=function(t){var e;return(e=t.timeStamp)!==null&&e!==void 0?e:performance.now()},r.prototype._touchWithId=function(t,e){for(var n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null},r})(),HD=(function(){function r(t,e){var n=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(a){if(a.shiftKey)switch(a.code){case"Equal":{n._chart.getChartStore().zoom(.5,null,"main");break}case"Minus":{n._chart.getChartStore().zoom(-.5,null,"main");break}case"ArrowLeft":{var l=n._chart.getChartStore();l.startScroll(),l.scroll(-3*l.getBarSpace().bar);break}case"ArrowRight":{var l=n._chart.getChartStore();l.startScroll(),l.scroll(3*l.getBarSpace().bar);break}}},this._container=t,this._chart=e,this._event=new UD(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return r.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},r.prototype.pinchEvent=function(t,e){var n=this._findWidgetByEvent(t),a=n.pane,l=n.widget;if(a?.getId()!==Vt.X_AXIS&&l?.getName()===Ut.MAIN){var u=this._makeWidgetEvent(t,l),c=(e-this._pinchScale)*5;return this._pinchScale=e,this._chart.getChartStore().zoom(c,{x:u.x,y:u.y},"main"),!0}return!1},r.prototype.mouseWheelHortEvent=function(t,e){var n=this._chart.getChartStore();return n.startScroll(),n.scroll(e),!0},r.prototype.mouseWheelVertEvent=function(t,e){var n=this._findWidgetByEvent(t).widget,a=this._makeWidgetEvent(t,n),l=n?.getName();return l===Ut.MAIN?(this._chart.getChartStore().zoom(e,{x:a.x,y:a.y},"main"),!0):!1},r.prototype.mouseDownEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget;if(this._mouseDownWidget=a,a!==null){var l=this._makeWidgetEvent(t,a),u=a.getName();switch(u){case Ut.SEPARATOR:return a.dispatchEvent("mouseDownEvent",l);case Ut.MAIN:{var c=n.getAxisComponent();if(!c.getAutoCalcTickFlag()){var f=c.getRange();this._prevYAxisRange=bt({},f)}return this._startScrollCoordinate={x:l.x,y:l.y},this._chart.getChartStore().startScroll(),a.dispatchEvent("mouseDownEvent",l)}case Ut.X_AXIS:return this._processXAxisScrollStartEvent(a,l);case Ut.Y_AXIS:return this._processYAxisScaleStartEvent(a,l)}}return!1},r.prototype.mouseMoveEvent=function(t){var e,n,a,l=this._findWidgetByEvent(t),u=l.pane,c=l.widget,f=this._makeWidgetEvent(t,c);if((((e=this._mouseMoveTriggerWidgetInfo.pane)===null||e===void 0?void 0:e.getId())!==u?.getId()||((n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0?void 0:n.getName())!==c?.getName())&&(c?.dispatchEvent("mouseEnterEvent",f),(a=this._mouseMoveTriggerWidgetInfo.widget)===null||a===void 0||a.dispatchEvent("mouseLeaveEvent",f),this._mouseMoveTriggerWidgetInfo={pane:u,widget:c}),c!==null){var d=c.getName();switch(d){case Ut.MAIN:{var v=c.dispatchEvent("mouseMoveEvent",f),m={x:f.x,y:f.y,paneId:u?.getId()};return v?(c.getForceCursor()!=="pointer"&&(m=void 0),c.setCursor("pointer")):c.setCursor("crosshair"),this._chart.getChartStore().setCrosshair(m),v}case Ut.SEPARATOR:case Ut.X_AXIS:case Ut.Y_AXIS:{var v=c.dispatchEvent("mouseMoveEvent",f);return this._chart.getChartStore().setCrosshair(),v}}}return!1},r.prototype.pressedMouseMoveEvent=function(t){var e,n;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===Ut.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var a=this._findWidgetByEvent(t),l=a.pane,u=a.widget;if(u!==null&&((e=this._mouseDownWidget)===null||e===void 0?void 0:e.getPane().getId())===l?.getId()&&((n=this._mouseDownWidget)===null||n===void 0?void 0:n.getName())===u.getName()){var c=this._makeWidgetEvent(t,u),f=u.getName();switch(f){case Ut.MAIN:{var d=void 0,v=u.dispatchEvent("pressedMouseMoveEvent",c);return v||this._processMainScrollingEvent(u,c),(!v||u.getForceCursor()==="pointer")&&(d={x:c.x,y:c.y,paneId:l?.getId()}),this._chart.getChartStore().setCrosshair(d,{forceInvalidate:!0}),v}case Ut.X_AXIS:return this._processXAxisScrollingEvent(u,c);case Ut.Y_AXIS:return this._processYAxisScalingEvent(u,c)}}return!1},r.prototype.mouseUpEvent=function(t){var e=this._findWidgetByEvent(t).widget,n=!1;if(e!==null){var a=this._makeWidgetEvent(t,e),l=e.getName();switch(l){case Ut.MAIN:case Ut.SEPARATOR:case Ut.X_AXIS:case Ut.Y_AXIS:{n=e.dispatchEvent("mouseUpEvent",a);break}}n&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,n},r.prototype.mouseClickEvent=function(t){var e=this._findWidgetByEvent(t).widget;if(e!==null){var n=this._makeWidgetEvent(t,e);return e.dispatchEvent("mouseClickEvent",n)}return!1},r.prototype.mouseRightClickEvent=function(t){var e=this._findWidgetByEvent(t).widget,n=!1;if(e!==null){var a=this._makeWidgetEvent(t,e),l=e.getName();switch(l){case Ut.MAIN:case Ut.X_AXIS:case Ut.Y_AXIS:{n=e.dispatchEvent("mouseRightClickEvent",a);break}}n&&this._chart.updatePane(1)}return!1},r.prototype.mouseDoubleClickEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget;if(a!==null){var l=a.getName();switch(l){case Ut.MAIN:{var u=this._makeWidgetEvent(t,a);return a.dispatchEvent("mouseDoubleClickEvent",u)}case Ut.Y_AXIS:{var c=n.getAxisComponent();if(!c.getAutoCalcTickFlag())return c.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0;break}}}return!1},r.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},r.prototype.touchStartEvent=function(t){var e,n=this._findWidgetByEvent(t),a=n.pane,l=n.widget;if(l!==null){var u=this._makeWidgetEvent(t,l);(e=u.preventDefault)===null||e===void 0||e.call(u);var c=l.getName();switch(c){case Ut.MAIN:{var f=this._chart.getChartStore();if(l.dispatchEvent("mouseDownEvent",u))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,f.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(Oy(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var d=a.getAxisComponent();if(!d.getAutoCalcTickFlag()){var v=d.getRange();this._prevYAxisRange=bt({},v)}if(this._startScrollCoordinate={x:u.x,y:u.y},f.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var m=u.x-this._touchCoordinate.x,y=u.y-this._touchCoordinate.y,x=Math.sqrt(m*m+y*y);x<VD?(this._touchCoordinate={x:u.x,y:u.y},f.setCrosshair({x:u.x,y:u.y,paneId:a?.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,f.setCrosshair())}return!0}case Ut.X_AXIS:return this._processXAxisScrollStartEvent(l,u);case Ut.Y_AXIS:return this._processYAxisScaleStartEvent(l,u)}}return!1},r.prototype.touchMoveEvent=function(t){var e,n,a,l=this._findWidgetByEvent(t),u=l.pane,c=l.widget;if(c!==null){var f=this._makeWidgetEvent(t,c),d=c.getName(),v=this._chart.getChartStore();switch(d){case Ut.MAIN:return c.dispatchEvent("pressedMouseMoveEvent",f)?((e=f.preventDefault)===null||e===void 0||e.call(f),v.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?((n=f.preventDefault)===null||n===void 0||n.call(f),v.setCrosshair({x:f.x,y:f.y,paneId:u?.getId()})):this._processMainScrollingEvent(c,f),!0);case Ut.X_AXIS:return(a=f.preventDefault)===null||a===void 0||a.call(f),this._processXAxisScrollingEvent(c,f);case Ut.Y_AXIS:return this._processYAxisScalingEvent(c,f)}}return!1},r.prototype.touchEndEvent=function(t){var e=this,n=this._findWidgetByEvent(t).widget;if(n!==null){var a=this._makeWidgetEvent(t,n),l=n.getName();switch(l){case Ut.MAIN:{if(n.dispatchEvent("mouseUpEvent",a),this._startScrollCoordinate!==null){var u=new Date().getTime()-this._flingStartTime,c=a.x-this._startScrollCoordinate.x,f=c/(u>0?u:1)*20;if(u<200&&Math.abs(f)>0){var d=this._chart.getChartStore(),v=function(){e._flingScrollRequestId=xu(function(){d.startScroll(),d.scroll(f),f=f*(1-.025),Math.abs(f)<1?e._flingScrollRequestId!==null&&(Oy(e._flingScrollRequestId),e._flingScrollRequestId=null):v()})};v()}}return!0}case Ut.X_AXIS:case Ut.Y_AXIS:{var m=n.dispatchEvent("mouseUpEvent",a);m&&this._chart.updatePane(1)}}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},r.prototype.tapEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget,l=!1;if(a!==null){var u=this._makeWidgetEvent(t,a),c=a.dispatchEvent("mouseClickEvent",u);if(a.getName()===Ut.MAIN){var f=this._makeWidgetEvent(t,a),d=this._chart.getChartStore();c?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,d.setCrosshair(void 0,{notInvalidate:!0}),l=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:f.x,y:f.y},d.setCrosshair({x:f.x,y:f.y,paneId:n?.getId()},{notInvalidate:!0}),l=!0),this._touchCancelCrosshair=!1)}(l||c)&&this._chart.updatePane(1)}return l},r.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},r.prototype.longTapEvent=function(t){var e=this._findWidgetByEvent(t),n=e.pane,a=e.widget;if(a!==null&&a.getName()===Ut.MAIN){var l=this._makeWidgetEvent(t,a);return this._touchCoordinate={x:l.x,y:l.y},this._chart.getChartStore().setCrosshair({x:l.x,y:l.y,paneId:n?.getId()}),!0}return!1},r.prototype._processMainScrollingEvent=function(t,e){var n;if(this._startScrollCoordinate!==null){var a=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&!a.getAutoCalcTickFlag()&&a.scrollZoomEnabled){(n=e.preventDefault)===null||n===void 0||n.call(e);var l=this._prevYAxisRange,u=l.from,c=l.to,f=l.range,d=0;a.reverse?d=this._startScrollCoordinate.y-e.y:d=e.y-this._startScrollCoordinate.y;var v=t.getBounding(),m=d/v.height,y=f*m,x=u+y,b=c+y,w=a.valueToRealValue(x,{range:this._prevYAxisRange}),S=a.valueToRealValue(b,{range:this._prevYAxisRange}),M=a.realValueToDisplayValue(w,{range:this._prevYAxisRange}),N=a.realValueToDisplayValue(S,{range:this._prevYAxisRange});a.setRange({from:x,to:b,range:b-x,realFrom:w,realTo:S,realRange:S-w,displayFrom:M,displayTo:N,displayRange:N-M})}var T=e.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(T)}},r.prototype._processXAxisScrollStartEvent=function(t,e){var n=t.dispatchEvent("mouseDownEvent",e);return n&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:e.x,y:e.y},this._xAxisStartScaleDistance=e.pageX,n},r.prototype._processXAxisScrollingEvent=function(t,e){var n=t.dispatchEvent("pressedMouseMoveEvent",e);if(n)this._chart.updatePane(1);else{var a=t.getPane().getAxisComponent();if(a.scrollZoomEnabled&&this._xAxisStartScaleDistance!==0){var l=this._xAxisStartScaleDistance/e.pageX;if(Number.isFinite(l)){var u=(l-this._xAxisScale)*10;this._xAxisScale=l,this._chart.getChartStore().zoom(u,this._xAxisStartScaleCoordinate,"xAxis")}}}return n},r.prototype._processYAxisScaleStartEvent=function(t,e){var n=t.dispatchEvent("mouseDownEvent",e);n&&this._chart.updatePane(1);var a=t.getPane().getAxisComponent().getRange();return this._prevYAxisRange=bt({},a),this._yAxisStartScaleDistance=e.pageY,n},r.prototype._processYAxisScalingEvent=function(t,e){var n,a=t.dispatchEvent("pressedMouseMoveEvent",e);if(a)this._chart.updatePane(1);else{var l=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&l.scrollZoomEnabled&&this._yAxisStartScaleDistance!==0){(n=e.preventDefault)===null||n===void 0||n.call(e);var u=this._prevYAxisRange,c=u.from,f=u.to,d=u.range,v=e.pageY/this._yAxisStartScaleDistance,m=d*v,y=(m-d)/2,x=c-y,b=f+y,w=l.valueToRealValue(x,{range:this._prevYAxisRange}),S=l.valueToRealValue(b,{range:this._prevYAxisRange}),M=l.realValueToDisplayValue(w,{range:this._prevYAxisRange}),N=l.realValueToDisplayValue(S,{range:this._prevYAxisRange});l.setRange({from:x,to:b,range:m,realFrom:w,realTo:S,realRange:S-w,displayFrom:M,displayTo:N,displayRange:N-M}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return a},r.prototype._findWidgetByEvent=function(t){var e,n,a,l,u=t.x,c=t.y,f=this._chart.getSeparatorPanes(),d=this._chart.getStyles().separator.size;try{for(var v=Vi(f),m=v.next();!m.done;m=v.next()){var y=m.value,x=y[1],b=x.getBounding(),w=b.top-Math.round((ol-d)/2);if(u>=b.left&&u<=b.left+b.width&&c>=w&&c<=w+ol)return{pane:x,widget:x.getWidget()}}}catch(V){e={error:V}}finally{try{m&&!m.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}var S=this._chart.getDrawPanes(),M=null;try{for(var N=Vi(S),T=N.next();!T.done;T=N.next()){var R=T.value,b=R.getBounding();if(u>=b.left&&u<=b.left+b.width&&c>=b.top&&c<=b.top+b.height){M=R;break}}}catch(V){a={error:V}}finally{try{T&&!T.done&&(l=N.return)&&l.call(N)}finally{if(a)throw a.error}}var C=null;if(M!==null){if(!at(C)){var z=M.getMainWidget(),D=z.getBounding();u>=D.left&&u<=D.left+D.width&&c>=D.top&&c<=D.top+D.height&&(C=z)}if(!at(C)){var I=M.getYAxisWidget();if(I!==null){var B=I.getBounding();u>=B.left&&u<=B.left+B.width&&c>=B.top&&c<=B.top+B.height&&(C=I)}}}return{pane:M,widget:C}},r.prototype._makeWidgetEvent=function(t,e){var n,a,l,u=(n=e?.getBounding())!==null&&n!==void 0?n:null;return bt(bt({},t),{x:t.x-((a=u?.left)!==null&&a!==void 0?a:0),y:t.y-((l=u?.top)!==null&&l!==void 0?l:0)})},r.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},r})(),cS=(function(){function r(t,e){this._chartBounding=bu(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._cacheYAxisWidth={left:0,right:0},this._initContainer(t),this._chartEvent=new HD(this._chartContainer,this),this._chartStore=new PR(this,e),this._initPanes(e),this._layout()}return r.prototype._initContainer=function(t){this._container=t,this._chartContainer=An("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer),this._cacheChartBounding()},r.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},r.prototype._initPanes=function(t){var e=this,n,a=(n=t?.layout)!==null&&n!==void 0?n:[{type:"candle"}],l=function(c){var f,d;if(!at(e._candlePane)){var v=(f=c.options)!==null&&f!==void 0?f:{};Re(v,{id:Vt.CANDLE}),e._candlePane=e._createPane(RD,Vt.CANDLE,v);var m=(d=c.content)!==null&&d!==void 0?d:[];m.forEach(function(y){e.createIndicator(y,!0,v)})}},u=function(c){if(!at(e._xAxisPane)){var f=e._createPane(BD,Vt.X_AXIS,c??{});e._xAxisPane=f}};a.forEach(function(c){var f,d,v;switch(c.type){case"candle":{l(c);break}case"indicator":{var m=(f=c.content)!==null&&f!==void 0?f:[];if(m.length>0){var y=(v=(d=c.options)===null||d===void 0?void 0:d.id)!==null&&v!==void 0?v:null;at(y)&&(y=su(Vt.INDICATOR));var x=bt(bt({},c.options),{id:y});m.forEach(function(b){e.createIndicator(b,!0,x)})}break}case"xAxis":{u(c.options);break}}}),l({}),u({order:Number.MAX_SAFE_INTEGER})},r.prototype._createPane=function(t,e,n){var a=new t(this,e,n??{});return this._drawPanes.push(a),a},r.prototype._recalculatePaneHeight=function(t,e,n){if(n===0)return!1;var a=this._drawPanes.filter(function(m){var y=m.getId();return m.getOptions().state==="normal"&&y!==t.getId()&&y!==Vt.X_AXIS}),l=a.length;if(l===0)return!1;if(t.getId()!==Vt.CANDLE&&at(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var u=this._candlePane.getBounding().height;if(u>0){var c=this._candlePane.getOptions().minHeight,f=u+n;f<c&&(f=c,e-=u+n-f),this._candlePane.setBounding({height:f})}}else{var d=n,v=Math.floor(n/l);a.forEach(function(m,y){var x=m.getBounding().height,b=0;y===l-1?b=x+d:b=x+v,b<m.getOptions().minHeight&&(b=m.getOptions().minHeight),m.setBounding({height:b}),d-=b-x}),Math.abs(d)>0&&(e-=d)}return t.setBounding({height:e}),!0},r.prototype.getDrawPaneById=function(t){if(t===Vt.CANDLE)return this._candlePane;if(t===Vt.X_AXIS)return this._xAxisPane;var e=this._drawPanes.find(function(n){return n.getId()===t});return e??null},r.prototype.getContainer=function(){return this._container},r.prototype.getChartStore=function(){return this._chartStore},r.prototype.getXAxisPane=function(){return this._xAxisPane},r.prototype.getDrawPanes=function(){return this._drawPanes},r.prototype.getSeparatorPanes=function(){return this._separatorPanes},r.prototype.layout=function(t){var e=this,n,a,l,u,c,f,d;(n=t.sort)!==null&&n!==void 0&&n&&(this._layoutOptions.sort=t.sort),(a=t.measureHeight)!==null&&a!==void 0&&a&&(this._layoutOptions.measureHeight=t.measureHeight),(l=t.measureWidth)!==null&&l!==void 0&&l&&(this._layoutOptions.measureWidth=t.measureWidth),(u=t.update)!==null&&u!==void 0&&u&&(this._layoutOptions.update=t.update),(c=t.buildYAxisTick)!==null&&c!==void 0&&c&&(this._layoutOptions.buildYAxisTick=t.buildYAxisTick),(f=t.cacheYAxisWidth)!==null&&f!==void 0&&f&&(this._layoutOptions.cacheYAxisWidth=t.cacheYAxisWidth),(d=t.buildYAxisTick)!==null&&d!==void 0&&d&&(this._layoutOptions.forceBuildYAxisTick=t.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(v){e._layout(),e._layoutPending=!1}).catch(function(v){}))},r.prototype._layout=function(){var t=this,e=this._layoutOptions,n=e.sort,a=e.measureHeight,l=e.measureWidth,u=e.update,c=e.buildYAxisTick,f=e.cacheYAxisWidth,d=e.forceBuildYAxisTick;if(n){for(;at(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(j,U){return j.getOptions().order-U.getOptions().order});var v=null;this._drawPanes.forEach(function(j){if(j.getId()!==Vt.X_AXIS){if(at(v)){var U=new ID(t,"",v,j);t._chartContainer.appendChild(U.getContainer()),t._separatorPanes.set(j,U)}v=j}t._chartContainer.appendChild(j.getContainer())})}if(a){var m=this._chartBounding.height,y=this.getStyles().separator.size,x=this._xAxisPane.getAxisComponent().getAutoSize(),b=m-x;b<0&&(b=0),this._drawPanes.forEach(function(j){var U=j.getId();if(at(t._separatorPanes.get(j))&&(b-=y),U!==Vt.X_AXIS&&U!==Vt.CANDLE&&j.getVisible()){var st=j.getBounding().height;st>b?(st=b,b=0):b-=st,j.setBounding({height:st})}}),this._candlePane.setBounding({height:Math.max(b,0)}),this._xAxisPane.setBounding({height:x});var w=0;this._drawPanes.forEach(function(j){var U=t._separatorPanes.get(j);at(U)&&(U.setBounding({height:y,top:w}),w+=y),j.setBounding({top:w}),w+=j.getBounding().height})}var S=l;if((c||d)&&this._drawPanes.forEach(function(j){var U=j.getAxisComponent().buildTicks(d);S||(S=U)}),S){var M=this._chartBounding.width,N=this.getStyles(),T=0,R=!0,C=0,z=!0;this._drawPanes.forEach(function(j){if(j.getId()!==Vt.X_AXIS){var U=j.getAxisComponent(),st=U.inside,ft=U.getAutoSize();U.position==="left"?(T=Math.max(T,ft),st&&(R=!1)):(C=Math.max(C,ft),st&&(z=!1))}}),f&&(T=Math.max(this._cacheYAxisWidth.left,T),C=Math.max(this._cacheYAxisWidth.right,C)),this._cacheYAxisWidth.left=T,this._cacheYAxisWidth.right=C;var D=M,I=0,B=0;R&&(D-=T,I=T),z&&(D-=C,B=C),this._chartStore.setTotalBarSpace(D);var V={width:M},W={width:D,left:I,right:B},Z={width:T},it={width:C},X=N.separator.fill,ot={};X?ot=V:ot=W,this._drawPanes.forEach(function(j){var U;(U=t._separatorPanes.get(j))===null||U===void 0||U.setBounding(ot),j.setBounding(V,W,Z,it)})}u&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1}},r.prototype.updatePane=function(t,e){var n=this;if(at(e)){var a=this.getDrawPaneById(e);a?.update(t)}else this._drawPanes.forEach(function(l){var u;l.update(t),(u=n._separatorPanes.get(l))===null||u===void 0||u.update(t)})},r.prototype.getDom=function(t,e){var n,a;if(at(t)){var l=this.getDrawPaneById(t);if(at(l)){var u=e??"root";switch(u){case"root":return l.getContainer();case"main":return l.getMainWidget().getContainer();case"yAxis":return(a=(n=l.getYAxisWidget())===null||n===void 0?void 0:n.getContainer())!==null&&a!==void 0?a:null}}}else return this._chartContainer;return null},r.prototype.getSize=function(t,e){var n,a;if(at(t)){var l=this.getDrawPaneById(t);if(at(l)){var u=e??"root";switch(u){case"root":return l.getBounding();case"main":return l.getMainWidget().getBounding();case"yAxis":return(a=(n=l.getYAxisWidget())===null||n===void 0?void 0:n.getBounding())!==null&&a!==void 0?a:null}}}else return this._chartBounding;return null},r.prototype._resetYAxisAutoCalcTickFlag=function(){this._drawPanes.forEach(function(t){t.getAxisComponent().setAutoCalcTickFlag(!0)})},r.prototype.setSymbol=function(t){t!==this.getSymbol()&&(this._resetYAxisAutoCalcTickFlag(),this._chartStore.setSymbol(t))},r.prototype.getSymbol=function(){return this._chartStore.getSymbol()},r.prototype.setPeriod=function(t){t!==this.getPeriod()&&(this._resetYAxisAutoCalcTickFlag(),this._chartStore.setPeriod(t))},r.prototype.getPeriod=function(){return this._chartStore.getPeriod()},r.prototype.setStyles=function(t){var e=this;this._setOptions(function(){e._chartStore.setStyles(t)})},r.prototype.getStyles=function(){return this._chartStore.getStyles()},r.prototype.setFormatter=function(t){var e=this;this._setOptions(function(){e._chartStore.setFormatter(t)})},r.prototype.getFormatter=function(){return this._chartStore.getFormatter()},r.prototype.setLocale=function(t){var e=this;this._setOptions(function(){e._chartStore.setLocale(t)})},r.prototype.getLocale=function(){return this._chartStore.getLocale()},r.prototype.setTimezone=function(t){var e=this;this._setOptions(function(){e._chartStore.setTimezone(t)})},r.prototype.getTimezone=function(){return this._chartStore.getTimezone()},r.prototype.setThousandsSeparator=function(t){var e=this;this._setOptions(function(){e._chartStore.setThousandsSeparator(t)})},r.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},r.prototype.setDecimalFold=function(t){var e=this;this._setOptions(function(){e._chartStore.setDecimalFold(t)})},r.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},r.prototype._setOptions=function(t){t(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.setOffsetRightDistance=function(t){this._chartStore.setOffsetRightDistance(t,!0)},r.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},r.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.setMaxOffsetLeftDistance(t)},r.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.setMaxOffsetRightDistance(t)},r.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(t))},r.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(t))},r.prototype.setBarSpace=function(t){this._chartStore.setBarSpace(t)},r.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},r.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},r.prototype.resetData=function(){this._chartStore.resetData()},r.prototype.getDataList=function(){return this._chartStore.getDataList()},r.prototype.setDataLoader=function(t){this._resetYAxisAutoCalcTickFlag(),this._chartStore.setDataLoader(t)},r.prototype.createIndicator=function(t,e,n){var a,l=Kt(t)?{name:t}:t;if(Ix(l.name)===null)return null;var u=n??{};Kt(u.id)||(u.id=su(Vt.INDICATOR)),Kt(l.id)||(l.id=su(l.name));var c=this._chartStore.addIndicator(l,u.id,e??!1);if(c){var f=!1;return at(this.getDrawPaneById(u.id))||(this._createPane(uS,u.id,u),(a=u.height)!==null&&a!==void 0||(u.height=Wx),f=!0),this.setPaneOptions(u),this.layout({sort:f,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),l.id}return null},r.prototype.overrideIndicator=function(t){return this._chartStore.overrideIndicator(t)},r.prototype.getIndicators=function(t){return this._chartStore.getIndicatorsByFilter(t??{})},r.prototype.removeIndicator=function(t){var e=this,n=this._chartStore.removeIndicator(t??{});if(n){var a=!1,l=[];this._drawPanes.forEach(function(u){var c=u.getId();c!==Vt.CANDLE&&c!==Vt.X_AXIS&&l.push(c)}),l.forEach(function(u){if(!e._chartStore.hasIndicators(u)){var c=e._drawPanes.findIndex(function(d){return d.getId()===u}),f=e._drawPanes[c];at(f)&&(a=!0,e._recalculatePaneHeight(f,0,f.getBounding().height),e._drawPanes.splice(c,1),f.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:a,measureHeight:a,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return n},r.prototype.createOverlay=function(t){var e=this,n=[],a=[],l=function(c){!at(c.paneId)||e.getDrawPaneById(c.paneId)===null?(c.paneId=Vt.CANDLE,a.push(!1)):a.push(!0),n.push(c)};Kt(t)?l({name:t}):Cn(t)?t.forEach(function(c){var f=null;Kt(c)?f={name:c}:f=c,l(f)}):l(t);var u=this._chartStore.addOverlays(n,a);return Cn(t)?u:u[0]},r.prototype.getOverlays=function(t){return this._chartStore.getOverlaysByFilter(t??{})},r.prototype.overrideOverlay=function(t){return this._chartStore.overrideOverlay(t)},r.prototype.removeOverlay=function(t){return this._chartStore.removeOverlay(t??{})},r.prototype.setPaneOptions=function(t){var e,n,a=this,l,u=!1,c=!1,f=at(t.id),d=function(w){var S=w.getId();if(f&&t.id===S||!f){if(S!==Vt.X_AXIS){if(Dt(t.height)&&t.height>0){var M=Math.max((l=t.minHeight)!==null&&l!==void 0?l:w.getOptions().minHeight,0),N=Math.max(M,t.height);c=!0,u=!0,w.setOriginalBounding({height:N}),v._recalculatePaneHeight(w,N,-N)}if(at(t.state)&&w.getOptions().state!==t.state){u=!0,c=!0;var T=t.state;switch(T){case"maximize":{var R=v._drawPanes.find(function(B){var V=B.getId();return B.getOptions().state==="maximize"&&V!==Vt.X_AXIS});if(!at(R)){w.getOptions().state==="normal"&&w.setOriginalBounding({height:w.getBounding().height}),w.setOptions({state:T});var C=v._chartBounding.height;w.setBounding({height:C-v._xAxisPane.getBounding().height}),v._drawPanes.forEach(function(B){var V;B.getId()!==Vt.X_AXIS&&B.getId()!==S&&(B.setBounding({height:B.getOriginalBounding().height}),B.setVisible(!1),(V=a._separatorPanes.get(B))===null||V===void 0||V.setVisible(!1))})}break}case"minimize":{var N=w.getBounding().height,z=w.getOptions().state,D=N-au;z==="maximize"&&(D=w.getOriginalBounding().height-au),v._recalculatePaneHeight(w,au,D)&&(z==="normal"&&w.setOriginalBounding({height:N}),w.setOptions({state:T})),v._drawPanes.forEach(function(V){var W;V.getId()!==Vt.X_AXIS&&(V.setVisible(!0),(W=a._separatorPanes.get(V))===null||W===void 0||W.setVisible(!0))});break}default:{var N=w.getOriginalBounding().height;v._recalculatePaneHeight(w,N,w.getBounding().height-N)&&w.setOptions({state:T}),v._drawPanes.forEach(function(V){var W;V.getId()!==Vt.X_AXIS&&(V.setVisible(!0),(W=a._separatorPanes.get(V))===null||W===void 0||W.setVisible(!0))});break}}}}at(t.axis)&&(c=!0);var I=bt({},t);if(delete I.state,w.setOptions(I),S===t.id)return"break"}},v=this;try{for(var m=Vi(this._drawPanes),y=m.next();!y.done;y=m.next()){var x=y.value,b=d(x);if(b==="break")break}}catch(w){e={error:w}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(e)throw e.error}}c&&this.layout({measureHeight:u,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.getPaneOptions=function(t){var e;if(at(t)){var n=this.getDrawPaneById(t);return(e=n?.getOptions())!==null&&e!==void 0?e:null}return this._drawPanes.map(function(a){return a.getOptions()})},r.prototype.setZoomEnabled=function(t){this._chartStore.setZoomEnabled(t)},r.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},r.prototype.setZoomAnchor=function(t){this._chartStore.setZoomAnchor(t)},r.prototype.getZoomAnchor=function(){return this._chartStore.getZoomAnchor()},r.prototype.setScrollEnabled=function(t){this._chartStore.setScrollEnabled(t)},r.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},r.prototype.scrollByDistance=function(t,e){var n=this,a=Dt(e)&&e>0?e:0;if(this._chartStore.startScroll(),a>0){var l=new ad({duration:a});l.doFrame(function(u){var c=t*(u/a);n._chartStore.scroll(c)}),l.start()}else this._chartStore.scroll(t)},r.prototype.scrollToRealTime=function(t){var e=this._chartStore.getBarSpace().bar,n=this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/e,a=n*e;this.scrollByDistance(a,t)},r.prototype.scrollToDataIndex=function(t,e){var n=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*this._chartStore.getBarSpace().bar;this.scrollByDistance(n,e)},r.prototype.scrollToTimestamp=function(t,e){var n=ld(this.getDataList(),"timestamp",t);this.scrollToDataIndex(n,e)},r.prototype.zoomAtCoordinate=function(t,e,n){var a=this,l=Dt(n)&&n>0?n:0,u=this._chartStore.getBarSpace().bar,c=u*t,f=c-u;if(l>0){var d=0,v=new ad({duration:l});v.doFrame(function(m){var y=f*(m/l),x=(y-d)/a._chartStore.getBarSpace().bar*od;a._chartStore.zoom(x,e??null,"main"),d=y}),v.start()}else this._chartStore.zoom(f/u*od,e??null,"main")},r.prototype.zoomAtDataIndex=function(t,e,n){var a=this._chartStore.dataIndexToCoordinate(e);this.zoomAtCoordinate(t,{x:a,y:0},n)},r.prototype.zoomAtTimestamp=function(t,e,n){var a=ld(this.getDataList(),"timestamp",e);this.zoomAtDataIndex(t,a,n)},r.prototype.convertToPixel=function(t,e){var n=this,a,l=e??{},u=l.paneId,c=u===void 0?Vt.CANDLE:u,f=l.absolute,d=f===void 0?!1:f,v=[];if(c!==Vt.X_AXIS){var m=this.getDrawPaneById(c);if(m!==null){var y=m.getBounding(),x=[].concat(t),b=this._xAxisPane.getAxisComponent(),w=m.getAxisComponent();v=x.map(function(S){var M={},N=S.dataIndex;if(Dt(S.timestamp)&&(N=n._chartStore.timestampToDataIndex(S.timestamp)),Dt(N)&&(M.x=b.convertToPixel(N)),Dt(S.value)){var T=w.convertToPixel(S.value);M.y=d?y.top+T:T}return M})}}return Cn(t)?v:(a=v[0])!==null&&a!==void 0?a:{}},r.prototype.convertFromPixel=function(t,e){var n=this,a,l=e??{},u=l.paneId,c=u===void 0?Vt.CANDLE:u,f=l.absolute,d=f===void 0?!1:f,v=[];if(c!==Vt.X_AXIS){var m=this.getDrawPaneById(c);if(m!==null){var y=m.getBounding(),x=[].concat(t),b=this._xAxisPane.getAxisComponent(),w=m.getAxisComponent();v=x.map(function(S){var M,N={};if(Dt(S.x)){var T=b.convertFromPixel(S.x);N.dataIndex=T,N.timestamp=(M=n._chartStore.dataIndexToTimestamp(T))!==null&&M!==void 0?M:void 0}if(Dt(S.y)){var R=d?S.y-y.top:S.y;N.value=w.convertFromPixel(R)}return N})}}return Cn(t)?v:(a=v[0])!==null&&a!==void 0?a:{}},r.prototype.executeAction=function(t,e){var n;if(t==="onCrosshairChange"){var a=bt({},e);(n=a.paneId)!==null&&n!==void 0||(a.paneId=Vt.CANDLE),this._chartStore.setCrosshair(a,{notExecuteAction:!0})}},r.prototype.subscribeAction=function(t,e){this._chartStore.subscribeAction(t,e)},r.prototype.unsubscribeAction=function(t,e){this._chartStore.unsubscribeAction(t,e)},r.prototype.getConvertPictureUrl=function(t,e,n){var a=this,l=this._chartBounding,u=l.width,c=l.height,f=An("canvas",{width:"".concat(u,"px"),height:"".concat(c,"px"),boxSizing:"border-box"}),d=f.getContext("2d"),v=lr(f);f.width=u*v,f.height=c*v,d.scale(v,v),d.fillStyle=n??"#FFFFFF",d.fillRect(0,0,u,c);var m=t??!1;return this._drawPanes.forEach(function(y){var x=a._separatorPanes.get(y);if(at(x)){var b=x.getBounding();d.drawImage(x.getImage(m),b.left,b.top,b.width,b.height)}var w=y.getBounding();d.drawImage(y.getImage(m),0,w.top,u,w.height)}),f.toDataURL("image/".concat(e??"jpeg"))},r.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},r.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(t){t.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._chartStore.destroy(),this._container.removeChild(this._chartContainer)},r})(),_u=new Map,YD=1;function WD(r,t){var e=null;if(Kt(r)?e=document.getElementById(r):e=r,e===null)return null;var n=_u.get(e.id);if(at(n))return n;var a="k_line_chart_".concat(YD++);return n=new cS(e,t),n.id=a,e.setAttribute("k-line-chart-id",a),_u.set(a,n),n}function Xy(r){var t,e,n=null;if(r instanceof cS)n=r.id;else{var a=null;Kt(r)?a=document.getElementById(r):a=r,n=(t=a?.getAttribute("k-line-chart-id"))!==null&&t!==void 0?t:null}n!==null&&((e=_u.get(n))===null||e===void 0||e.destroy(),_u.delete(n))}function Gy({isFullscreen:r=!1}){const t=O.useRef(null),e=O.useRef(null),n=Wt(R=>R.symbol),a=Wt(R=>R.interval),l=Yr(),u=a==="time",c=O.useRef(n);c.current=n;const f=O.useRef(a);f.current=a;const d=O.useRef(null),v=O.useRef(null),m=O.useRef(!0),y=O.useRef(null),x=O.useRef(null),b=O.useRef(!0),w=O.useRef(!1),S=O.useRef(""),M=R=>({"1m":{span:1,type:"minute"},"5m":{span:5,type:"minute"},"15m":{span:15,type:"minute"},"30m":{span:30,type:"minute"},"1h":{span:1,type:"hour"},"4h":{span:4,type:"hour"},"1d":{span:1,type:"day"},time:{span:1,type:"minute"}})[R]||{span:1,type:"minute"},N=R=>[...R].reverse().map(D=>{const I=parseFloat(String(D[2])),B=parseFloat(String(D[3])),V=parseFloat(String(D[4])),W=parseFloat(String(D[5])),Z=parseFloat(String(D[6]));return{timestamp:D[0],open:I,high:B,low:V,close:W,volume:isNaN(Z)?0:Z}}).filter(D=>!isNaN(D.open)&&!isNaN(D.high)&&!isNaN(D.low)&&!isNaN(D.close)&&isFinite(D.open)&&isFinite(D.high)&&isFinite(D.low)&&isFinite(D.close)),T=O.useCallback(R=>{w.current||(w.current=!0,R.setDataLoader({getBars:async({type:C,timestamp:z,callback:D})=>{if(!e.current){D([],{backward:!1,forward:!1});return}const B=f.current,V=c.current,Z=B==="time"?"1m":B,it=V,X=`${C}-${z}`;if(y.current!==X)if(y.current=X,C==="forward"){if(!m.current){D([],{backward:!1,forward:!1}),y.current=null;return}const ot=z?z-1:void 0,j=`forward-${it}-${Z}-${ot}`;if(x.current===j){D([],{backward:!1,forward:!0}),y.current=null;return}x.current=j,y.current=null;try{const U=await xe.getKlines(it,Z,500,ot);if(!Array.isArray(U)||U.length===0){m.current=!1,D([],{backward:!1,forward:!1});return}const st=N(U),ft=ot?st.filter(rt=>rt.timestamp<=ot):st;if(ft.length===0){m.current=!1,D([],{backward:!1,forward:!1});return}D(ft,{backward:!1,forward:!0})}catch(U){console.error("[forward] :",U),D([],{backward:!1,forward:!1})}}else if(C==="init"){const ot=`${it}-${B}`;if(S.current===ot){y.current=null;return}S.current=ot,y.current=null;try{const j=await xe.getKlines(it,Z,500);if(j&&j.length>0){const U=N(j);U.length>0&&(v.current=U[0].timestamp),D(U,{backward:!1,forward:!0})}else D([],{backward:!1,forward:!1})}catch(j){console.error("[init] :",j),D([],{backward:!1,forward:!1})}}else C==="backward"&&D([],{backward:!1,forward:!1}),y.current=null},subscribeBar:({callback:C})=>{if(!e.current)return;const D=f.current,Z=`kline@${c.current},${D==="time"?"1m":D}`;se.connect().then(()=>{d.current=se.subscribe(Z,(it,X)=>{const ot=X,j=parseFloat(ot.o),U=parseFloat(ot.h),st=parseFloat(ot.l),ft=parseFloat(ot.c),rt=parseFloat(ot.v);if(isNaN(j)||!isFinite(j)||isNaN(U)||!isFinite(U)||isNaN(st)||!isFinite(st)||isNaN(ft)||!isFinite(ft)){console.warn("[WS] K:",ot);return}const k={timestamp:ot.ot,open:j,high:U,low:st,close:ft,volume:isNaN(rt)||!isFinite(rt)?0:rt};C(k)})})},unsubscribeBar:()=>{d.current&&(d.current(),d.current=null)}}))},[]);return O.useEffect(()=>{if(!t.current)return;e.current&&(d.current&&(d.current(),d.current=null),Xy(t.current),e.current=null),t.current.innerHTML="";const R=WD(t.current,{locale:"zh-CN",styles:{grid:{horizontal:{color:"#393939"},vertical:{color:"#393939"}},candle:{type:u?"area":"candle_solid",bar:{upColor:"#0ECB81",downColor:"#F6465D",upBorderColor:"#0ECB81",downBorderColor:"#F6465D",upWickColor:"#0ECB81",downWickColor:"#F6465D"},area:{lineSize:1,lineColor:"#2196F3",smooth:!0,value:"close",backgroundColor:[{offset:0,color:"rgba(33, 150, 243, 0.3)"},{offset:1,color:"rgba(33, 150, 243, 0.01)"}],point:{show:!0,color:"#2196F3",radius:4,rippleColor:"rgba(33, 150, 243, 0.3)",rippleRadius:8,animation:!0,animationDuration:1e3}}},xAxis:{axisLine:{show:!1}},yAxis:{axisLine:{show:!1}},separator:{size:1,color:"#2b3139",fill:!0,activeBackgroundColor:"rgba(43, 49, 57, 0.6)"}}});if(R){e.current=R,R.setOffsetRightDistance(50),R.setLeftMinVisibleBarCount(2),R.createIndicator("VOL",!1),R.createIndicator("MA",!1,{id:"candle_pane"});const C={ticker:n,pricePrecision:2,volumePrecision:4};R.setSymbol(C),R.setPeriod(M(a)),T(R),setTimeout(()=>{e.current&&e.current.resize()},100)}return()=>{d.current&&(d.current(),d.current=null),t.current&&Xy(t.current),e.current=null,w.current=!1,b.current=!0,y.current=null,x.current=null,v.current=null,m.current=!0,S.current=""}},[n,a]),O.useEffect(()=>{!e.current||!t.current||setTimeout(()=>{e.current&&(e.current.resize(),e.current.scrollToRealTime())},100)},[r]),_.jsx("div",{className:"flex flex-col h-full bg-[#181a20]",children:_.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[_.jsx("div",{ref:t,className:"absolute inset-0"}),_.jsx("img",{src:"/watermark.svg",alt:"",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 opacity-50 pointer-events-none select-none",style:{width:l?150:300,height:"auto"}})]})})}const Ky=[{label:"",value:"time",shortLabel:""},{label:"1",value:"1m",shortLabel:"1m"},{label:"5",value:"5m",shortLabel:"5m"},{label:"15",value:"15m",shortLabel:"15m"},{label:"30",value:"30m",shortLabel:"30m"},{label:"1",value:"1h",shortLabel:"1h"},{label:"4",value:"4h",shortLabel:"4h"},{label:"1",value:"1d",shortLabel:"1d"}];function Qy(){const[r,t]=O.useState("klinecharts"),[e,n]=O.useState(!1),[a,l]=O.useState(0),u=Wt(y=>y.interval),c=Wt(y=>y.setInterval),f=Wt(y=>y.symbol),d=Ab(),v=Yr(),m=O.useRef(e);return O.useEffect(()=>{m.current&&!e&&l(y=>y+1),m.current=e},[e]),_.jsxs(_.Fragment,{children:[e&&_.jsxs("div",{className:"fixed inset-0 z-50 bg-[#1e1e1e] flex flex-col",children:[_.jsx("div",{className:"px-4 py-3.5 border-b border-[#2d2d2d] bg-[#1a1a1a] flex-shrink-0",children:_.jsxs("div",{className:"flex flex-col gap-2.5",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-gray-200 font-bold text-base",children:f}),_.jsx("span",{className:"text-gray-500 text-xs px-1.5 py-0.5 bg-[#2d2d2d] rounded",children:""})]}),d&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex items-end gap-3",children:[_.jsx("span",{className:`text-3xl font-bold leading-none ${parseFloat(d.priceChange24h)>=0?"text-green-500":"text-red-500"}`,children:parseFloat(d.lastPrice).toFixed(2)}),_.jsxs("div",{className:"flex items-baseline gap-2.5 pb-0.5",children:[_.jsxs("span",{className:`text-base font-medium ${parseFloat(d.priceChange24h)>=0?"text-green-500":"text-red-500"}`,children:[parseFloat(d.priceChange24h)>=0?"+":"",parseFloat(d.priceChange24h).toFixed(2)]}),_.jsxs("span",{className:`text-base font-medium ${parseFloat(d.priceChange24h)>=0?"text-green-500":"text-red-500"}`,children:[parseFloat(d.priceChange24h)>=0?"+":"",parseFloat(d.priceChangePercent).toFixed(2),"%"]})]})]}),_.jsxs("div",{className:"grid grid-cols-4 gap-3 pt-1",children:[_.jsxs("div",{children:[_.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),_.jsx("div",{className:"text-gray-100 text-sm font-medium",children:parseFloat(d.high24h).toFixed(2)})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),_.jsx("div",{className:"text-gray-100 text-sm font-medium",children:parseFloat(d.low24h).toFixed(2)})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),_.jsx("div",{className:"text-gray-100 text-sm font-medium",children:rl(parseFloat(d.volume24h))})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"24h"}),_.jsx("div",{className:"text-gray-100 text-sm font-medium",children:rl(parseFloat(d.quoteVolume24h))})]})]})]})]})}),_.jsxs("div",{className:"flex items-center justify-between px-2 py-1 border-b border-[#2d2d2d] bg-[#1a1a1a] flex-shrink-0",children:[_.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[_.jsx("span",{className:"text-gray-400 text-xs flex-shrink-0",children:":"}),_.jsx("div",{className:"flex gap-0.5 overflow-x-auto scrollbar-hide flex-1 min-w-0",children:Ky.map(y=>_.jsx("button",{onClick:()=>c(y.value),className:`px-1.5 py-0.5 text-xs rounded transition-colors flex-shrink-0 ${u===y.value?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:v?y.shortLabel:y.label},y.value))})]}),_.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-1",children:[_.jsx("button",{onClick:()=>t("lightweight"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Light"}),_.jsx("button",{onClick:()=>t("lightweight-panes"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight-panes"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Panes"}),_.jsx("button",{onClick:()=>t("klinecharts"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="klinecharts"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:""}),_.jsx("button",{onClick:()=>n(!1),className:"px-1.5 py-0.5 text-xs rounded transition-colors text-gray-400 hover:text-white",children:_.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})})})]})]}),_.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="lightweight"&&_.jsx(Ry,{isFullscreen:!0}),r==="lightweight-panes"&&_.jsx(Dy,{isFullscreen:!0}),r==="klinecharts"&&_.jsx(Gy,{isFullscreen:!0})]})]}),_.jsxs("div",{className:"h-full flex flex-col bg-[#1e1e1e]",style:{display:e?"none":"flex"},children:[_.jsxs("div",{className:"flex items-center justify-between px-2 py-1 border-b border-[#2d2d2d] bg-[#1a1a1a] gap-1",children:[_.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[_.jsx("span",{className:"text-gray-400 text-xs flex-shrink-0",children:":"}),_.jsx("div",{className:"flex gap-0.5 overflow-x-auto scrollbar-hide flex-1 min-w-0",children:Ky.map(y=>_.jsx("button",{onClick:()=>c(y.value),className:`px-1.5 py-0.5 text-xs rounded transition-colors flex-shrink-0 ${u===y.value?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:v?y.shortLabel:y.label},y.value))})]}),_.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[_.jsx("button",{onClick:()=>t("lightweight"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Light"}),_.jsx("button",{onClick:()=>t("lightweight-panes"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="lightweight-panes"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:"Panes"}),_.jsx("button",{onClick:()=>t("klinecharts"),className:`px-1.5 py-0.5 text-xs rounded transition-colors ${r==="klinecharts"?"bg-blue-600 text-white":"bg-[#2d2d2d] text-gray-400 hover:bg-[#3d3d3d]"}`,children:""}),v&&_.jsx("button",{onClick:()=>n(!0),className:"px-1.5 py-0.5 text-xs rounded transition-colors text-gray-400 hover:text-white",title:"",children:_.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})]}),_.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="lightweight"&&_.jsx(Ry,{},a),r==="lightweight-panes"&&_.jsx(Dy,{},a),r==="klinecharts"&&_.jsx(Gy,{},a)]})]})]})}function hS({isOpen:r,order:t,onClose:e}){const[n,a]=O.useState([]),[l,u]=O.useState(!1),[c,f]=O.useState(null),d=O.useCallback(async()=>{if(t){u(!0),f(null);try{const x=await xe.getOrderTrades(t.id);a(x)}catch(x){console.error("Failed to load order trades:",x),f(""),a([])}finally{u(!1)}}},[t]);O.useEffect(()=>{r&&t&&d()},[r,t,d]),O.useEffect(()=>{const x=b=>{b.key==="Escape"&&e()};return r&&(window.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",x),document.body.style.overflow=""}},[r,e]);const v=x=>x===1||x==="buy"?"":x===2||x==="sell"?"":"-",m=x=>x===1||x==="buy"?"var(--color-green)":x===2||x==="sell"?"var(--color-red)":"var(--color-text-primary)",y=x=>x?"Maker":"Taker";return!r||!t?null:Ru.createPortal(_.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onClick:e,children:[_.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),_.jsxs("div",{className:"relative bg-[#1e2329] rounded-xl shadow-2xl mx-4 animate-modal-in",style:{width:"700px",maxWidth:"95vw",maxHeight:"80vh"},onClick:x=>x.stopPropagation(),children:[_.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#2b3139]",children:[_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("h3",{className:"text-lg font-semibold text-white",children:""}),_.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--color-text-secondary)]",children:[_.jsx("span",{children:t.symbol}),_.jsx("span",{style:{color:m(t.side)},children:v(t.side)}),_.jsxs("span",{children:["ID: ",t.id]})]})]}),_.jsx("button",{onClick:e,className:"text-[#848e9c] hover:text-white transition-colors text-xl leading-none w-8 h-8 flex items-center justify-center rounded hover:bg-[#2b3139]",children:""})]}),_.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(80vh - 80px)"},children:l?_.jsx("div",{className:"flex items-center justify-center py-12",children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",className:"animate-spin",children:_.jsx("path",{d:"M21 12a9 9 0 11-6.219-8.56"})}),_.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:"..."})]})}):c?_.jsx("div",{className:"flex items-center justify-center py-12",children:_.jsxs("div",{className:"flex flex-col items-center gap-3 text-[var(--color-red)]",children:[_.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.5",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("path",{d:"M12 8v4m0 4h.01"})]}),_.jsx("span",{className:"text-sm",children:c})]})}):n.length===0?_.jsx("div",{className:"flex items-center justify-center py-12",children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[_.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),_.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"})]}),_.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})}):_.jsxs("div",{className:"min-w-0",children:[_.jsxs("div",{className:"flex items-center px-6 py-3 text-xs text-[var(--color-text-secondary)] border-b border-[#2b3139] bg-[#1e2329] sticky top-0",children:[_.jsx("span",{className:"flex-[0_0_100px]",children:""}),_.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_90px] text-right",children:""}),_.jsx("span",{className:"flex-[1_1_100px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_60px] text-center",children:""})]}),n.map(x=>_.jsxs("div",{className:"flex items-center px-6 py-2.5 text-xs hover:bg-[var(--color-bg-tertiary)] transition-colors border-b border-[#2b3139]/50",children:[_.jsx("span",{className:"flex-[0_0_100px] text-[var(--color-text-secondary)] font-mono",children:new Date(x.time).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),_.jsx("span",{className:"flex-[0_0_80px] text-right font-mono",children:parseFloat(x.price).toFixed(2)}),_.jsx("span",{className:"flex-[0_0_80px] text-right font-mono",children:parseFloat(x.qty).toFixed(4)}),_.jsx("span",{className:"flex-[0_0_90px] text-right font-mono text-[#f0b90b]",children:parseFloat(x.quoteQty).toFixed(4)}),_.jsxs("span",{className:"flex-[1_1_100px] text-right font-mono text-[var(--color-text-secondary)]",children:[parseFloat(x.fee).toFixed(6)," ",x.feeAsset]}),_.jsx("span",{className:"flex-[0_0_60px] text-center text-[var(--color-text-secondary)]",children:y(x.isMaker)})]},x.id)),_.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-[#161a1e] border-t border-[#2b3139]",children:[_.jsxs("div",{className:"flex items-center gap-6 text-xs",children:[_.jsxs("span",{className:"text-[var(--color-text-secondary)]",children:[" ",_.jsx("span",{className:"text-white",children:n.length})," "]}),_.jsxs("span",{className:"text-[var(--color-text-secondary)]",children:[": ",_.jsx("span",{className:"text-white font-mono",children:n.reduce((x,b)=>x+parseFloat(b.qty),0).toFixed(4)})]}),_.jsxs("span",{className:"text-[var(--color-text-secondary)]",children:[": ",_.jsx("span",{className:"text-[#f0b90b] font-mono",children:n.reduce((x,b)=>x+parseFloat(b.quoteQty),0).toFixed(4)})]})]}),_.jsxs("div",{className:"text-xs text-[var(--color-text-secondary)]",children:[": ",_.jsx("span",{className:"text-white font-mono",children:n.reduce((x,b)=>x+parseFloat(b.fee),0).toFixed(6)}),n[0]?.feeAsset&&` ${n[0].feeAsset}`]})]})]})})]})]}),document.body)}function qD(){const r=Wt(S=>S.openOrders),t=Wt(S=>S.isLoggedIn),e=Wt(S=>S.fetchOpenOrders),[n,a]=O.useState(null),[l,u]=O.useState(null),[c,f]=O.useState(null);O.useEffect(()=>{t&&e()},[t,e]);const d=(S,M)=>{S.stopPropagation(),!n&&u(M)},v=S=>{f(S)},m=O.useCallback(async()=>{if(!l)return;const S=l;u(null),a(S);try{await xe.cancelOrder(S),Ws.success("")}catch(M){const N=M;Ws.error(": "+(N.response?.data?.message||""))}finally{a(null)}},[l]),y=S=>{switch(S){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}},x=S=>{switch(S){case 1:return"var(--color-text-secondary)";case 2:return"#f0b90b";case 3:return"var(--color-green)";case 4:return"var(--color-text-secondary)";default:return"var(--color-text-secondary)"}},b=S=>S===1||S==="buy"?"":S===2||S==="sell"?"":"-",w=S=>S===1||S==="buy"?"var(--color-green)":S===2||S==="sell"?"var(--color-red)":"var(--color-text-primary)";return t?_.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[_.jsx("div",{className:"flex-1 overflow-auto min-h-0",children:_.jsxs("div",{style:{minWidth:"800px"},children:[_.jsxs("div",{className:"flex items-center px-4 py-2 text-xs text-[var(--color-text-secondary)] border-b border-[var(--color-border)] flex-shrink-0",children:[_.jsx("span",{className:"flex-[0_0_85px]",children:""}),_.jsx("span",{className:"flex-[1_1_100px] min-w-0",children:""}),_.jsx("span",{className:"flex-[0_0_50px]",children:""}),_.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_80px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_70px] text-right",children:""}),_.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right pr-4",children:""}),_.jsx("span",{className:"flex-[0_0_60px] pl-4",children:""}),_.jsx("span",{className:"flex-[0_0_60px] text-center",children:""})]}),_.jsx("div",{className:"min-h-[300px]",children:r.length===0?_.jsx("div",{className:"flex items-center justify-center h-full",style:{minHeight:"300px"},children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("path",{d:"M12 6v6l4 2"})]}),_.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})}):r.map(S=>{const M=parseFloat(S.filledQty),N=parseFloat(S.filledQuote),T=M>0?(N/M).toFixed(2):"-";return _.jsxs("div",{onClick:()=>v(S),className:"flex items-center px-4 py-2 text-xs hover:bg-[var(--color-bg-tertiary)] transition-colors cursor-pointer",children:[_.jsx("span",{className:"flex-[0_0_85px] text-[var(--color-text-secondary)] font-mono truncate",children:new Date(S.createdAt).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}),_.jsx("span",{className:"flex-[1_1_100px] min-w-0 truncate",children:S.symbol}),_.jsx("span",{className:"flex-[0_0_50px] truncate",style:{color:w(S.side)},children:b(S.side)}),_.jsx("span",{className:"flex-[0_0_80px] text-right font-mono truncate",children:parseFloat(S.price)>0?parseFloat(S.price).toFixed(2):""}),_.jsx("span",{className:"flex-[0_0_80px] text-right font-mono truncate",children:parseFloat(S.qty).toFixed(4)}),_.jsx("span",{className:"flex-[0_0_80px] text-right font-mono text-[#f0b90b] truncate",children:parseFloat(S.filledQty).toFixed(4)}),_.jsx("span",{className:"flex-[0_0_70px] text-right font-mono truncate",children:T}),_.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right font-mono text-[var(--color-text-secondary)] truncate pr-4",children:S.totalFee?`${parseFloat(S.totalFee).toFixed(6)} ${S.feeAsset||""}`:"-"}),_.jsx("span",{className:"flex-[0_0_60px] truncate pl-4",style:{color:x(S.status)},children:y(S.status)}),_.jsx("span",{className:"flex-[0_0_60px] text-center",children:_.jsx("button",{onClick:R=>d(R,S.id),disabled:n===S.id,className:"px-2 py-1 text-xs text-[var(--color-red)] hover:bg-[var(--color-red)] hover:bg-opacity-10 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n===S.id?"":""})})]},S.id)})})]})}),_.jsx(sx,{isOpen:!!l,title:"",message:"",confirmText:"",cancelText:"",type:"danger",onConfirm:m,onCancel:()=>u(null)}),_.jsx(hS,{isOpen:!!c,order:c,onClose:()=>f(null)})]}):_.jsx("div",{className:"flex flex-col h-full",style:{minHeight:"300px"},children:_.jsx("div",{className:"flex items-center justify-center flex-1",children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[_.jsx("path",{d:"M9 11l3 3L22 4"}),_.jsx("path",{d:"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"})]}),_.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})})})}function XD(){const[r,t]=O.useState([]),[e,n]=O.useState(!1),[a,l]=O.useState(1),[u,c]=O.useState(0),[f,d]=O.useState(null),v=Wt(C=>C.symbol),m=Wt(C=>C.isLoggedIn),y=20,x=C=>{d(C)},b=O.useCallback(async(C=1)=>{if(m){n(!0);try{const{orders:z,total:D}=await xe.getOrders({symbol:v,page:C,pageSize:y});t(z),c(D),l(C)}catch(z){console.error("Failed to load order history:",z)}finally{n(!1)}}},[v,m]);O.useEffect(()=>{b(1)},[b]);const w=C=>{switch(C){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}},S=C=>{switch(C){case 1:return"var(--color-text-secondary)";case 2:return"#f0b90b";case 3:return"var(--color-green)";case 4:return"var(--color-text-secondary)";default:return"var(--color-text-secondary)"}},M=C=>C===1||C==="buy"?"":C===2||C==="sell"?"":"-",N=C=>C===1||C==="buy"?"var(--color-green)":C===2||C==="sell"?"var(--color-red)":"var(--color-text-primary)",T=C=>C===1||C==="limit"?"":C===2||C==="market"?"":"-",R=Math.ceil(u/y);return m?_.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[_.jsx("div",{className:"flex-1 overflow-auto min-h-0",children:_.jsxs("div",{style:{minWidth:"800px"},children:[_.jsxs("div",{className:"flex items-center px-4 py-2 text-xs text-[var(--color-text-secondary)] border-b border-[var(--color-border)] flex-shrink-0",children:[_.jsx("span",{className:"flex-[0_0_100px]",children:""}),_.jsx("span",{className:"flex-[1_1_90px] min-w-0",children:""}),_.jsx("span",{className:"flex-[0_0_50px]",children:""}),_.jsx("span",{className:"flex-[0_0_50px]",children:""}),_.jsx("span",{className:"flex-[0_0_75px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_75px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_75px] text-right",children:""}),_.jsx("span",{className:"flex-[0_0_70px] text-right",children:""}),_.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right pr-4",children:""}),_.jsx("span",{className:"flex-[0_0_60px] pl-4",children:""})]}),_.jsx("div",{className:"min-h-[300px]",children:e?_.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"300px"},children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",className:"animate-spin",children:_.jsx("path",{d:"M21 12a9 9 0 11-6.219-8.56"})}),_.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:"..."})]})}):r.length===0?_.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"300px"},children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[_.jsx("path",{d:"M3 3h18v18H3z"}),_.jsx("path",{d:"M9 9l6 6M15 9l-6 6"})]}),_.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})}):r.map(C=>{const z=parseFloat(C.filledQty),D=parseFloat(C.filledQuote),I=z>0?(D/z).toFixed(2):"-";return _.jsxs("div",{onClick:()=>x(C),className:"flex items-center px-4 py-2 text-xs hover:bg-[var(--color-bg-tertiary)] transition-colors cursor-pointer",children:[_.jsx("span",{className:"flex-[0_0_100px] text-[var(--color-text-secondary)] font-mono truncate",children:new Date(C.createdAt).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),_.jsx("span",{className:"flex-[1_1_90px] min-w-0 truncate",children:C.symbol}),_.jsx("span",{className:"flex-[0_0_50px] text-[var(--color-text-secondary)] truncate",children:T(C.type)}),_.jsx("span",{className:"flex-[0_0_50px] truncate",style:{color:N(C.side)},children:M(C.side)}),_.jsx("span",{className:"flex-[0_0_75px] text-right font-mono truncate",children:parseFloat(C.price)>0?parseFloat(C.price).toFixed(2):""}),_.jsx("span",{className:"flex-[0_0_75px] text-right font-mono truncate",children:parseFloat(C.qty).toFixed(4)}),_.jsx("span",{className:"flex-[0_0_75px] text-right font-mono text-[#f0b90b] truncate",children:parseFloat(C.filledQty).toFixed(4)}),_.jsx("span",{className:"flex-[0_0_70px] text-right font-mono truncate",children:I}),_.jsx("span",{className:"flex-[1_1_120px] min-w-0 text-right font-mono text-[var(--color-text-secondary)] truncate pr-4",children:C.totalFee?`${parseFloat(C.totalFee).toFixed(6)} ${C.feeAsset||""}`:"-"}),_.jsx("span",{className:"flex-[0_0_60px] truncate pl-4",style:{color:S(C.status)},children:w(C.status)})]},C.id)})})]})}),R>1&&_.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-[var(--color-border)] text-xs",children:[_.jsxs("span",{className:"text-[var(--color-text-secondary)]",children:[" ",u,"  ",a,"/",R," "]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:()=>b(a-1),disabled:a<=1,className:"px-3 py-1 rounded bg-[var(--color-bg-tertiary)] text-[var(--color-text-primary)] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[var(--color-bg-quaternary)] transition-colors",children:""}),_.jsx("button",{onClick:()=>b(a+1),disabled:a>=R,className:"px-3 py-1 rounded bg-[var(--color-bg-tertiary)] text-[var(--color-text-primary)] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[var(--color-bg-quaternary)] transition-colors",children:""})]})]}),_.jsx(hS,{isOpen:!!f,order:f,onClose:()=>d(null)})]}):_.jsx("div",{className:"flex flex-col h-full",style:{minHeight:"300px"},children:_.jsx("div",{className:"flex items-center justify-center flex-1",children:_.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3",children:[_.jsx("path",{d:"M9 11l3 3L22 4"}),_.jsx("path",{d:"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"})]}),_.jsx("span",{className:"text-sm text-[var(--color-text-secondary)]",children:""})]})})})}function $y(){const[r,t]=O.useState("trades");return _.jsxs("div",{className:"flex flex-col h-full bg-[var(--color-bg-secondary)]",children:[_.jsxs("div",{className:"flex items-center border-b border-[var(--color-border)] flex-shrink-0",children:[_.jsx("button",{onClick:()=>t("trades"),className:`px-4 py-2 text-sm transition-colors ${r==="trades"?"text-[var(--color-text-primary)] border-b-2 border-[#f0b90b]":"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]"}`,children:""}),_.jsx("button",{onClick:()=>t("current"),className:`px-4 py-2 text-sm transition-colors ${r==="current"?"text-[var(--color-text-primary)] border-b-2 border-[#f0b90b]":"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]"}`,children:""}),_.jsx("button",{onClick:()=>t("history"),className:`px-4 py-2 text-sm transition-colors ${r==="history"?"text-[var(--color-text-primary)] border-b-2 border-[#f0b90b]":"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]"}`,children:""})]}),_.jsxs("div",{className:"flex-1 min-h-0 overflow-auto",children:[r==="trades"&&_.jsx(jM,{}),r==="current"&&_.jsx(qD,{}),r==="history"&&_.jsx(XD,{})]})]})}const tl=window.location.protocol,Qa=window.location.hostname,GD=tl==="https:"?"wss:":"ws:",Zy=[{key:"ORDER_SERVICE",label:"",placeholder:`${tl}//${Qa}:9002`,testPath:"/api/v1/orders"},{key:"DEPTH_SERVICE",label:"",placeholder:`${tl}//${Qa}:9003`,testPath:"/api/depth"},{key:"MARKET_SERVICE",label:"",placeholder:`${tl}//${Qa}:9005`,testPath:"/api/v1/ticker"},{key:"KLINE_SERVICE",label:"K",placeholder:`${tl}//${Qa}:9006`,testPath:"/api/v1/klines"},{key:"WS_SERVICE",label:"WebSocket ",placeholder:`${GD}//${Qa}:9004/ws`,testPath:"",isWs:!0}];function Jy({isOpen:r,onClose:t,onSave:e,isFirstTime:n=!1}){const a=uu(T=>T.config),[l,u]=O.useState(a||dd),[c,f]=O.useState({ORDER_SERVICE:"idle",DEPTH_SERVICE:"idle",WS_SERVICE:"idle",MARKET_SERVICE:"idle",KLINE_SERVICE:"idle"}),[d,v]=O.useState(!1),[m,y]=O.useState(!1),x=(T,R)=>{u(C=>({...C,[T]:R})),f(C=>({...C,[T]:"idle"})),y(!1)},b=async(T,R)=>{try{const C=new AbortController,z=setTimeout(()=>C.abort(),5e3);return await fetch(`${T}${R}`,{method:"GET",signal:C.signal,mode:"no-cors"}),clearTimeout(z),!0}catch{return!1}},w=T=>new Promise(R=>{try{const C=new WebSocket(T),z=setTimeout(()=>{C.close(),R(!1)},5e3);C.onopen=()=>{clearTimeout(z),C.close(),R(!0)},C.onerror=()=>{clearTimeout(z),R(!1)}}catch{R(!1)}}),S=O.useCallback(async()=>{v(!0),y(!1),f({ORDER_SERVICE:"testing",DEPTH_SERVICE:"testing",WS_SERVICE:"testing",MARKET_SERVICE:"testing",KLINE_SERVICE:"testing"});const R={};await Promise.all(Zy.map(async z=>{const D=l[z.key];let I;z.isWs?I=await w(D):I=await b(D,z.testPath),R[z.key]=I,f(B=>({...B,[z.key]:I?"success":"error"}))}));const C=Object.values(R).every(z=>z);y(C),v(!1)},[l]),M=()=>{m&&e(l)},N=T=>{switch(T){case"testing":return _.jsx("span",{className:"text-yellow-500 animate-pulse",children:""});case"success":return _.jsx("span",{className:"text-green-500",children:""});case"error":return _.jsx("span",{className:"text-red-500",children:""});default:return _.jsx("span",{className:"text-gray-500",children:""})}};return _.jsx(bd,{appear:!0,show:r,as:O.Fragment,children:_.jsxs(rx,{as:"div",className:"relative z-[9999]",onClose:n?()=>{}:t,children:[_.jsx(Fr,{as:O.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:_.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),_.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:_.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:_.jsx(Fr,{as:O.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:_.jsxs(Sd,{className:"w-full max-w-lg transform overflow-hidden rounded-lg bg-[#1e2329] shadow-2xl transition-all",children:[_.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#2b3139]",children:[_.jsx(_d,{className:"text-lg font-medium text-white",children:""}),!n&&_.jsx("button",{onClick:t,className:"text-[#848e9c] hover:text-white transition-colors text-xl",children:""})]}),_.jsxs("div",{className:"px-6 py-5 space-y-4",children:[n&&_.jsx("p",{className:"text-sm text-[#848e9c] mb-4",children:""}),Zy.map(T=>_.jsxs("div",{children:[_.jsxs("label",{className:"flex items-center justify-between text-sm text-[#b7bdc6] mb-2",children:[_.jsx("span",{children:T.label}),N(c[T.key])]}),_.jsx("input",{type:"text",value:l[T.key],onChange:R=>x(T.key,R.target.value),placeholder:T.placeholder,className:"w-full px-3 py-2.5 bg-[#2b3139] border border-[#3a4049] rounded text-sm text-white placeholder-[#5e6673] focus:outline-none focus:border-[#fcd535] transition-colors"})]},T.key))]}),_.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-[#2b3139]",children:[!n&&_.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-[#848e9c] hover:text-white transition-colors",children:""}),_.jsx("button",{onClick:S,disabled:d,className:"px-5 py-2 rounded text-sm font-medium bg-[#2b3139] text-white hover:bg-[#3a4049] border border-[#3a4049] transition-colors disabled:opacity-50",children:d?"...":""}),_.jsx("button",{onClick:M,disabled:!m,className:"px-5 py-2 rounded text-sm font-medium bg-[#fcd535] text-[#0c0e12] hover:bg-[#f0b90b] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})})})})]})})}function KD(){const r=vd();return r==="connected"?null:_.jsx("div",{className:"w-full px-4 py-2.5 text-center text-sm transition-all border-b",style:{backgroundColor:"#fffbe6",borderColor:"#ffe58f",color:"rgba(0, 0, 0, 0.88)"},children:r==="connecting"?_.jsxs("div",{className:"flex items-center justify-center gap-2",children:[_.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",style:{color:"#faad14"},children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_.jsx("span",{style:{color:"#faad14"},children:""}),_.jsx("span",{children:"..."})]}):_.jsxs("span",{children:[_.jsx("span",{style:{color:"#faad14"},children:""})," ..."]})})}function QD(){const r=Wt(m=>m.isLoggedIn),t=Wt(m=>m.updateOrder),e=Wt(m=>m.updateOpenOrders),n=Wt(m=>m.fetchAssets),a=O.useRef(!1),l=O.useRef(null),u=O.useRef(t),c=O.useRef(e),f=O.useRef(n);O.useEffect(()=>{u.current=t,c.current=e,f.current=n});const d=O.useCallback((m,y)=>{const x=y;console.log("[WS] Order update:",x);const b={id:x.i,clientOrderId:x.c,symbol:x.s,side:x.S,type:x.T,price:x.p,qty:x.q,quoteQty:x.Q||"0",filledQty:x.z,filledQuote:x.Z,status:x.o,totalFee:x.f,feeAsset:x.F,createdAt:x.C,updatedAt:x.u};u.current(b),c.current(b)},[]),v=O.useCallback((m,y)=>{console.log("[WS] Balance update:",y),a.current=!0},[]);O.useEffect(()=>{if(!r)return;console.log("[PrivateChannels] Subscribing to private channels...");const m=se.subscribe("order",d),y=se.subscribe("balance",v);return l.current=setInterval(()=>{a.current&&(console.log("[PrivateChannels] Balance changed, fetching assets..."),f.current(),a.current=!1)},1e3),()=>{console.log("[PrivateChannels] Unsubscribing from private channels..."),m(),y(),l.current&&(clearInterval(l.current),l.current=null)}},[r,d,v])}function $D(){const r=Wt(y=>y.fetchAssets),t=Wt(y=>y.isLoggedIn),e=Wt(y=>y.token),n=uu(y=>y.isConfigured),a=uu(y=>y.setConfig),[l,u]=O.useState(!1),[c,f]=O.useState(!1),d=Yr();O.useEffect(()=>{n?f(!0):u(!0)},[n]);const v=O.useCallback(y=>{a(y),xe.init(),se.reinit(),u(!1),f(!0),window.location.reload()},[a]),m=O.useCallback(()=>{u(!0)},[]);return QD(),O.useEffect(()=>{c&&e&&(console.log("[App] Restoring token to api and ws"),xe.setToken(e),se.setToken(e))},[c]),O.useEffect(()=>{c&&se.connect().catch(()=>{})},[c]),O.useEffect(()=>{c&&t&&r()},[c,t,r]),O.useEffect(()=>{if(!c)return;const y=()=>{document.visibilityState==="visible"&&(console.log("[App] Page became visible, checking WebSocket connection"),se.connect().catch(()=>{}))};return document.addEventListener("visibilitychange",y),()=>{document.removeEventListener("visibilitychange",y)}},[c]),c?_.jsx("div",{className:"h-screen w-screen flex justify-center bg-[var(--color-bg-primary)]",children:_.jsxs("div",{className:"h-screen w-full max-w-[1920px] flex flex-col overflow-hidden",children:[_.jsx(KD,{}),_.jsx(OM,{}),_.jsx(Jy,{isOpen:l,onClose:()=>u(!1),onSave:v,isFirstTime:!1}),_.jsx(kM,{onOpenConfig:m}),_.jsx("div",{className:`flex-1 flex overflow-hidden ${d?"":"gap-2 p-2"}`,style:{height:d?"calc(100vh - 48px)":"calc(100vh - 64px)"},children:d?_.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[_.jsx("div",{className:"h-[220px] flex-shrink-0 border-b border-[var(--color-border)]",children:_.jsx(Qy,{})}),_.jsxs("div",{className:"h-[500px] flex-shrink-0 flex border-b border-[var(--color-border)]",children:[_.jsx("div",{className:"flex-1 min-w-0 overflow-auto",children:_.jsx(C0,{})}),_.jsx("div",{className:"w-[45%] flex-shrink-0 border-l border-[var(--color-border)] overflow-hidden",children:_.jsx(E0,{})})]}),_.jsx("div",{className:"flex-shrink-0",children:_.jsx($y,{})})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"w-[280px] flex-shrink-0 overflow-hidden",children:_.jsx(E0,{})}),_.jsxs("div",{className:"flex-1 flex flex-col min-w-0 gap-2",children:[_.jsx("div",{className:"flex-[2] min-h-0 max-h-[600px]",children:_.jsx(Qy,{})}),_.jsx("div",{className:"flex-[1] min-h-0",children:_.jsx($y,{})})]}),_.jsx("div",{className:"w-[300px] flex-shrink-0 overflow-hidden",children:_.jsx(C0,{})})]})})]})}):_.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-[var(--color-bg-primary)]",children:_.jsx(Jy,{isOpen:l,onClose:()=>{},onSave:v,isFirstTime:!0})})}z1.createRoot(document.getElementById("root")).render(_.jsx(O.StrictMode,{children:_.jsx($D,{})}));
